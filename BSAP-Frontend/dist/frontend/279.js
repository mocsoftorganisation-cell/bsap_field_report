"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[279],{1155:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>PerformanceComponent});var _angular_forms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4341),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2200),_angular_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8132),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2615),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3664),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9464),_services_performance_statistic_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6319);function PerformanceComponent_div_0_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(2,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(3,"Loading performance data..."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()())}function PerformanceComponent_div_1_div_10_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",15)(1,"span",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2,"Module-Topic"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"span",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"span",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(6,"-"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(7,"span",18),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentModule.moduleName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicName)}}function PerformanceComponent_div_1_div_11_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"i",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.clearMessages())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.errorMessage," ")}}function PerformanceComponent_div_1_div_12_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.clearMessages())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.successMessage," ")}}function PerformanceComponent_div_1_div_13_div_2_tr_18_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"tr",51)(1,"td",52),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"td",53),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(4,"span",54),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"td",55),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(6,"input",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(7,"td",57),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(8,"input",58),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(9,"td",59),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(10,"input",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()),2&_){const u=g.$implicit,h=g.index,m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(h+1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("innerHTML",m.formatQuestionText(u),_angular_core__WEBPACK_IMPORTED_MODULE_4__.npT),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("value",u.previousCount||"0"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formControlName","question_"+u.id)("placeholder",u.defaultVal)("readonly",u.isDisabled),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("value",m.getCumulativeValue(u))}}function PerformanceComponent_div_1_div_13_div_2_div_19_div_1_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().index;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" Question ",u+1,": This field is required ")}}function PerformanceComponent_div_1_div_13_div_2_div_19_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(1,PerformanceComponent_div_1_div_13_div_2_div_19_div_1_Template,2,1,"div",60),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){let u;const h=g.$implicit,m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",(null==(u=m.performanceForm.get("question_"+h.id))?null:u.invalid)&&(null==(u=m.performanceForm.get("question_"+h.id))?null:u.touched))}}function PerformanceComponent_div_1_div_13_div_2_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",40)(1,"h3",41),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"div",42)(4,"table",43)(5,"thead")(6,"tr")(7,"th",44),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8,"Sr No"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(9,"th",45),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(10,"Questions"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(11,"th",46),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(12,"Previous Month"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(13,"th",47),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(14),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(15,"th",48),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(16,"Cumulative Total"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(17,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(18,PerformanceComponent_div_1_div_13_div_2_tr_18_Template,11,7,"tr",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(19,PerformanceComponent_div_1_div_13_div_2_div_19_Template,2,1,"div",50),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicSubName||u.currentTopic.topicName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(12),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI("Current Month (",u.monthYear,")"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.questionDTOs),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.questionDTOs)}}function PerformanceComponent_div_1_div_13_div_3_th_9_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",68),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.subTopicName," ")}}function PerformanceComponent_div_1_div_13_div_3_tr_11_td_5_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",72),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"input",73),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AVh("calculated-field",m.isCalculatedField(h.id,u.id)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formControlName","matrix_"+h.id+"_"+u.id)}}function PerformanceComponent_div_1_div_13_div_3_tr_11_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"tr",69)(1,"td",53)(2,"span",70),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(4,"span",54),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(5,PerformanceComponent_div_1_div_13_div_3_tr_11_td_5_Template,2,3,"td",71),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,h=g.index,m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI("",h+1,"."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("innerHTML",m.formatQuestionText(u),_angular_core__WEBPACK_IMPORTED_MODULE_4__.npT),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",m.currentTopic.subTopics)}}function PerformanceComponent_div_1_div_13_div_3_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",62)(1,"h3",41),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"div",63)(4,"table",64)(5,"thead")(6,"tr")(7,"th",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8,"Questions"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(9,PerformanceComponent_div_1_div_13_div_3_th_9_Template,2,1,"th",66),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(11,PerformanceComponent_div_1_div_13_div_3_tr_11_Template,6,3,"tr",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicSubName||u.currentTopic.topicName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.subTopics),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.questions||u.currentTopic.questionDTOs)}}function PerformanceComponent_div_1_div_13_div_4_th_9_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.question," ")}}function PerformanceComponent_div_1_div_13_div_4_tr_11_td_3_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",72),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"input",73),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AVh("calculated-field",m.isCalculatedField(u.id,h.id)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formControlName","matrix_"+u.id+"_"+h.id)}}function PerformanceComponent_div_1_div_13_div_4_tr_11_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"tr",69)(1,"td",75),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(3,PerformanceComponent_div_1_div_13_div_4_tr_11_td_3_Template,2,3,"td",71),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.subTopicName," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",h.currentTopic.questions||h.currentTopic.questionDTOs)}}function PerformanceComponent_div_1_div_13_div_4_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",62)(1,"h3",41),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"div",63)(4,"table",64)(5,"thead")(6,"tr")(7,"th",68),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8,"SUB TOPICS"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(9,PerformanceComponent_div_1_div_13_div_4_th_9_Template,2,1,"th",74),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(11,PerformanceComponent_div_1_div_13_div_4_tr_11_Template,4,2,"tr",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicSubName||u.currentTopic.topicName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.questions||u.currentTopic.questionDTOs),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.subTopics)}}function PerformanceComponent_div_1_div_13_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",24)(1,"form",25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(2,PerformanceComponent_div_1_div_13_div_2_Template,20,4,"div",26)(3,PerformanceComponent_div_1_div_13_div_3_Template,12,3,"div",27)(4,PerformanceComponent_div_1_div_13_div_4_Template,12,3,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"div",28)(6,"div",29)(7,"button",30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.navigatePrevious())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(8,"i",31),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(9," Previous "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"button",30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.navigateNext())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(11," Next "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(12,"i",32),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(13,"button",33),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.goToPreviousModule())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(14," Previous Module "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(15,"i",34),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(16,"button",33),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.goToNextModule())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(17," Next Module "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(18,"i",35),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(19,"div",36)(20,"button",37),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.saveForm())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(21,"i",38),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(23,"button",33),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.submitForm())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(24,"i",39),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formGroup",u.performanceForm),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf","NORMAL"===u.currentTopic.formType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf","Q/ST"===u.currentTopic.formType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf","ST/Q"===u.currentTopic.formType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.prevModule&&!u.prevTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.nextModule&&!u.nextTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.prevModule),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.nextModule),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",u.saving),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.saving?"Saving...":"Save Draft"," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",u.saving||!u.performanceForm.valid),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.saving?"Submitting...":"Submit"," ")}}function PerformanceComponent_div_1_div_14_button_8_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"button",81),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.navigateNext())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1," Continue to Next "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()}}function PerformanceComponent_div_1_div_14_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",76)(1,"div",77),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(2,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"Form Submitted Successfully!"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(6,"Your performance statistics have been recorded."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(7,"div",78),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(8,PerformanceComponent_div_1_div_14_button_8_Template,2,0,"button",79),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(9,"button",80),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(10," Back to Dashboard "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.nextModule||u.nextTopic)}}function PerformanceComponent_div_1_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"p",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"BSAP-field Report"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"span")(6,"label"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(7,"(Monyh/Year -"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(8,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(10,PerformanceComponent_div_1_div_10_Template,9,2,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(11,PerformanceComponent_div_1_div_11_Template,5,1,"div",11)(12,PerformanceComponent_div_1_div_12_Template,5,1,"div",12)(13,PerformanceComponent_div_1_div_13_Template,26,12,"div",13)(14,PerformanceComponent_div_1_div_14_Template,11,1,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI("",u.monthYear,")"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.currentModule&&u.currentTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.errorMessage),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.successMessage),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.currentModule&&u.currentTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.isSuccess)}}function PerformanceComponent_div_2_div_12_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.errorMessage," ")}}function PerformanceComponent_div_2_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",82),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.closeOTPModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(1,"div",83),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(m){return _angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.stopPropagation())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(2,"div",84)(3,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"OTP Verification"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.closeOTPModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(7,"div",85)(8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(9,"Please enter the 6-digit OTP sent to your registered mobile number:"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"div",86)(11,"input",87),_angular_core__WEBPACK_IMPORTED_MODULE_4__.mxI("ngModelChange",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.DH7(d.otpValue,m)||(d.otpValue=m),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m)}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(12,PerformanceComponent_div_2_div_12_Template,2,1,"div",60),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(13,"div",88)(14,"button",89),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.closeOTPModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(15,"Cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(16,"button",90),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(m.verifyOTP())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R50("ngModel",u.otpValue),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.errorMessage),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.otpValue||6!==u.otpValue.length||u.saving),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.saving?"Verifying...":"Verify OTP"," ")}}function PerformanceComponent_div_3_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",91),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"i",92),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2," Auto-saving...\n"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s())}let PerformanceComponent=(()=>{var _staticBlock;class PerformanceComponent{constructor(_,g,u,h){this.route=_,this.router=g,this.formBuilder=u,this.performanceService=h,this.modules=[],this.currentModule=null,this.currentTopic=null,this.userDistrict="",this.monthYear="",this.moduleId=0,this.topicId=1,this.nextModule=!1,this.prevModule=!1,this.nextTopic=!1,this.prevTopic=!1,this.loading=!1,this.saving=!1,this.showOTPModal=!1,this.isSuccess=!1,this.errorMessage="",this.successMessage="",this.formData={},this.otpValue="",this.initializeForm()}ngOnInit(){this.route.queryParams.subscribe(_=>{this.clearComponentData(),this.moduleId=_.module?parseInt(_.module):0,this.topicId=_.topic?parseInt(_.topic):1,this.loadPerformanceData()})}ngOnDestroy(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval)}initializeForm(){this.performanceForm=this.formBuilder.group({})}clearComponentData(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null),this.performanceForm=this.formBuilder.group({}),this.formData={},this.modules=[],this.currentModule=null,this.currentTopic=null,this.userDistrict="",this.monthYear="",this.nextModule=!1,this.prevModule=!1,this.nextTopic=!1,this.prevTopic=!1,this.loading=!1,this.saving=!1,this.showOTPModal=!1,this.isSuccess=!1,this.errorMessage="",this.successMessage="",this.otpValue=""}loadPerformanceData(){this.loading=!0,this.errorMessage="",this.performanceService.getPerformanceForm(this.moduleId,this.topicId).subscribe({next:_=>{"SUCCESS"===_.status&&_.data?this.processFormData(_.data):this.errorMessage=_.message||"Failed to load performance data",this.loading=!1},error:_=>{this.errorMessage="Error loading performance data: "+_.message,this.loading=!1}})}processFormData(_){this.modules=_.modules||[],this.userDistrict=_.userDistrict||"",this.monthYear=_.monthYear||"",this.isSuccess=_.isSuccess||!1,this.nextModule=_.nextModule||!1,this.prevModule=_.prevModule||!1,this.nextTopic=_.nextTopic||!1,this.prevTopic=_.prevTopic||!1,this.modules.length>0?(this.currentModule=this.modules[0],this.currentModule.topicDTOs&&this.currentModule.topicDTOs.length>0?(this.currentTopic=this.currentModule.topicDTOs[0],this.buildFormControls(),this.setupAutoSave()):this.errorMessage="No topics available for this module"):this.errorMessage="No modules found in response"}buildFormControls(){if(!this.currentTopic)return void console.log("No current topic found");const _={};if("NORMAL"===this.currentTopic.formType&&this.currentTopic.questionDTOs&&this.currentTopic.questionDTOs.forEach((g,u)=>{const h=`question_${g.id}`;if(g.formula&&""!==g.formula.trim()){const d=this.calculateInitialFormulaValue(g);console.log(`Setting up calculated field ${g.id} with initial value: ${d}`),_[h]=[{value:d,disabled:!0},"REQUIRED"===g.type?[_angular_forms__WEBPACK_IMPORTED_MODULE_0__.k0.required]:[]]}else _[h]=[g.currentCount||g.defaultVal||"","REQUIRED"===g.type?[_angular_forms__WEBPACK_IMPORTED_MODULE_0__.k0.required]:[]]}),"Q/ST"===this.currentTopic.formType||"ST/Q"===this.currentTopic.formType){const g=this.currentTopic.questions||this.currentTopic.questionDTOs||[],u=this.currentTopic.subTopics||[];g.length>0&&u.length>0&&g.forEach((h,m)=>{console.log(`Processing question ${m+1}:`,h.question),u.forEach((d,P)=>{console.log(`  - Creating control for subTopic ${P+1}:`,d.subTopicName);const t=`matrix_${h.id}_${d.id}`;let s="0";const E=h;E.currentCountList&&console.log("  - currentCountList:",E.currentCountList),E.valueList&&console.log("  - valueList:",E.valueList),E.currentCountList&&E.currentCountList.length>P?(s=E.currentCountList[P]||"0",console.log(`  - Using currentCountList[${P}]: ${s}`)):E.valueList&&E.valueList.length>P?(s=E.valueList[P]||"0",console.log(`  - Using valueList[${P}]: ${s}`)):h.currentCount&&"NONE"!==h.currentCount?(s=h.currentCount,console.log(`  - Using currentCount: ${s}`)):console.log(`  - Using default: ${s}`),_[t]=[s,h.isDisabled?[]:[_angular_forms__WEBPACK_IMPORTED_MODULE_0__.k0.required]],console.log(`\u2713 Created matrix control: ${t} = "${s}"`)})})}this.performanceForm=this.formBuilder.group(_),this.setupFormulaCalculations()}setupFormulaCalculations(){!this.currentTopic||!this.performanceForm||(this.performanceForm.valueChanges.subscribe(_=>{this.updateCalculatedFields()}),this.updateCalculatedFields())}updateCalculatedFields(){if(!this.currentTopic)return;const _=this.currentTopic.questionDTOs||this.currentTopic.questions||[];_.filter(u=>u.formula).forEach(u=>{}),_.forEach(u=>{if(u.formula){const h=this.calculateFormulaValue(u);if(this.currentTopic&&"NORMAL"===this.currentTopic.formType){const m=u.formula.split("=");if(2===m.length){const P=`question_${m[1].trim()}`,t=this.performanceForm.get(P);t?(console.log(`NORMAL form - Setting calculated value "${h}" to control "${P}"`),t.setValue(h,{emitEvent:!1})):console.warn(`NORMAL form - Target control "${P}" not found`)}}else if(this.currentTopic&&("Q/ST"===this.currentTopic.formType||"ST/Q"===this.currentTopic.formType)){const m=u.formula.split("=");if(2===m.length){const d=m[1].trim(),P=d.split("_");if(2===P.length){const f=this.performanceForm.get(`matrix_${P[0]}_${P[1]}`);f&&f.setValue(h,{emitEvent:!1})}else if(1===P.length&&/^\d+$/.test(d)){const t=d;this.currentTopic?.subTopics&&this.currentTopic.subTopics.forEach(s=>{const E=this.calculateFormulaValueForColumn(u,s.id),b=this.performanceForm.get(`matrix_${t}_${s.id}`);b&&b.setValue(E,{emitEvent:!1})})}}}}})}isCalculatedFieldNormal(_){if(!this.currentTopic||"NORMAL"!==this.currentTopic.formType)return!1;const u=(this.currentTopic.questionDTOs||this.currentTopic.questions||[]).find(h=>h.id===_);return!(!u||!u.formula||""===u.formula.trim())}isCalculatedField(_,g){if(!this.currentTopic)return!1;const h=`${_}_${g}`;return(this.currentTopic.questionDTOs||this.currentTopic.questions||[]).some(d=>{if(!d.formula)return!1;const P=d.formula.split("=");return 2===P.length&&P[1].trim()===h})}debugFormulas(){this.currentTopic&&(this.currentTopic.questionDTOs||this.currentTopic.questions||[]).filter(u=>u.formula).forEach(u=>{this.calculateFormulaValue(u)}),this.performanceForm&&Object.keys(this.performanceForm.controls).forEach(_=>{this.performanceForm.get(_)})}setupAutoSave(){this.autoSaveInterval=setInterval(()=>{this.performanceForm.dirty&&!this.saving&&this.autoSave()},3e4)}autoSave(){if(!this.performanceForm.valid)return;const _=this.prepareStatisticsData("DRAFT");_.length>0&&this.performanceService.saveStatistics({performanceStatistics:_}).subscribe({next:g=>{},error:g=>console.error("Auto-save failed:",g)})}saveForm(){if(!this.performanceForm.valid)return void this.markFormGroupTouched();this.saving=!0;const _=this.prepareStatisticsData("SAVED");this.performanceService.saveStatistics({performanceStatistics:_}).subscribe({next:g=>{"SUCCESS"===g.status?(this.successMessage="Form saved successfully",this.performanceForm.markAsPristine()):this.errorMessage=g.message||"Failed to save form",this.saving=!1},error:g=>{this.errorMessage="Error saving form: "+g.message,this.saving=!1}})}submitForm(){if(!this.performanceForm.valid)return void this.markFormGroupTouched();this.saving=!0;const _=this.prepareStatisticsData("SUBMITTED");this.performanceService.saveStatistics({performanceStatistics:_}).subscribe({next:g=>{"SUCCESS"===g.status?this.sendOTP():(this.errorMessage=g.message||"Failed to submit form",this.saving=!1)},error:g=>{this.errorMessage="Error submitting form: "+g.message,this.saving=!1}})}sendOTP(){this.performanceService.sendOTP().subscribe({next:_=>{"SUCCESS"===_.status?(this.showOTPModal=!0,this.successMessage="OTP sent successfully to your registered mobile number"):this.errorMessage=_.message||"Failed to send OTP",this.saving=!1},error:_=>{this.errorMessage="Error sending OTP: "+_.message,this.saving=!1}})}verifyOTP(){this.otpValue&&6===this.otpValue.length?(this.saving=!0,this.performanceService.verifyOTP(this.otpValue).subscribe({next:_=>{"SUCCESS"===_.status?(this.showOTPModal=!1,this.successMessage="Form submitted successfully!",this.isSuccess=!0,setTimeout(()=>this.navigateNext(),2e3)):this.errorMessage=_.message||"OTP verification failed",this.saving=!1},error:_=>{this.errorMessage="Error verifying OTP: "+_.message,this.saving=!1}})):this.errorMessage="Please enter a valid 6-digit OTP"}prepareStatisticsData(_){const g=[],u=this.performanceForm.value;console.log("Preparing statistics data with status:",_),console.log("Form values:",u),console.log("Current topic form type:",this.currentTopic?.formType);const h=this.currentTopic?.questions||this.currentTopic?.questionDTOs||[];return console.log("Questions for data preparation:",h.length),"NORMAL"===this.currentTopic?.formType&&h.forEach(m=>{const P=u[`question_${m.id}`];void 0!==P&&""!==P&&g.push({questionId:m.id,value:P.toString(),topicId:this.currentTopic.id,moduleId:this.currentModule.id,status:_})}),("Q/ST"===this.currentTopic?.formType||"ST/Q"===this.currentTopic?.formType)&&h.forEach(m=>{this.currentTopic?.subTopics?.forEach(d=>{const P=`matrix_${m.id}_${d.id}`,t=u[P];if(console.log(`Checking control: ${P} = ${t}`),void 0!==t&&""!==t&&null!==t){const s={questionId:m.id,value:t.toString(),topicId:this.currentTopic.id,subTopicId:d.id,moduleId:this.currentModule.id,status:_};console.log("Adding statistic:",s),g.push(s)}else console.log(`Skipping control ${P}: value is empty/undefined`)})}),console.log("Final prepared statistics:",g),console.log("Total statistics count:",g.length),g}markFormGroupTouched(){Object.keys(this.performanceForm.controls).forEach(_=>{this.performanceForm.get(_)?.markAsTouched()})}navigateNext(){console.log("Navigate Next - Current:",this.moduleId,this.topicId,"Next Topic:",this.nextTopic,"Next Module:",this.nextModule),this.nextTopic?this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId,topic:this.topicId+1}}):this.nextModule&&this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId+1,topic:1}})}navigatePrevious(){console.log("Navigate Previous - Current:",this.moduleId,this.topicId,"Prev Topic:",this.prevTopic,"Prev Module:",this.prevModule),this.prevTopic?this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId,topic:this.topicId-1}}):this.prevModule&&this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId-1,topic:this.modules[this.moduleId-1]?.topicDTOs?.length||1}})}goToNextModule(){this.nextModule&&this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId+1,topic:1}})}goToPreviousModule(){if(this.prevModule){const _=Number(this.moduleId);this.router.navigate(["dashboard/performance"],{queryParams:{module:_-1}})}}getFormValue(_){return this.performanceForm.get(_)?.value||""}getMatrixValue(_,g){const u=`matrix_${_}_${g}`;return this.performanceForm.get(u)?.value||""}shouldShowSubtopicHeader(_,g){return 0===_||this.currentTopic?.questions?.[_-1]?.subTopicId!==g}formatQuestionText(_){let g=_.question||"";return g=g.replace(/\{userDistrict\}/g,this.userDistrict),g=g.replace(/\{monthYear\}/g,this.monthYear),g}calculateInitialFormulaValue(question){if(!question.formula)return question.currentCount||question.defaultVal||"";try{const formulaParts=question.formula.split("=");if(2!==formulaParts.length)return question.currentCount||question.defaultVal||"";let calculationExpression=formulaParts[0].trim();if(this.currentTopic?.questionDTOs&&this.currentTopic.questionDTOs.forEach(_=>{const g=new RegExp(`\\b${_.id}\\b`,"g");if(g.test(calculationExpression)){const u=parseFloat(_.currentCount||"0")||0;console.log(`Initial calculation - Replacing ${_.id} with currentCount: ${u}`),calculationExpression=calculationExpression.replace(g,u.toString())}}),!/^[\d\s+\-*/().]+$/.test(calculationExpression))return question.currentCount||question.defaultVal||"";const result=eval(calculationExpression),resultString=result.toString();return console.log(`Initial formula calculation for question ${question.id}: ${question.formula} = ${resultString}`),resultString}catch(_){return console.error("Initial formula calculation error:",_),question.currentCount||question.defaultVal||""}}calculateFormulaValueForColumn(question,subTopicId){if(!question.formula)return question.defaultVal||"";try{const formulaParts=question.formula.split("=");if(2!==formulaParts.length)return question.defaultVal||"";let calculationExpression=formulaParts[0].trim();if((this.currentTopic?.questions||this.currentTopic?.questionDTOs)&&(this.currentTopic.questions||this.currentTopic.questionDTOs||[]).forEach(g=>{if(new RegExp(`\\b${g.id}\\b`,"g").test(calculationExpression)){const h=this.getMatrixValue(g.id,subTopicId),m=parseFloat(h)||0;calculationExpression=calculationExpression.replace(new RegExp(`\\b${g.id}\\b`,"g"),m.toString())}}),!/^[\d\s+\-*/().]+$/.test(calculationExpression))return question.defaultVal||"";const result=eval(calculationExpression);return result.toString()}catch(_){return question.defaultVal||""}}calculateFormulaValue(question){if(!question.formula)return question.defaultVal||"";try{const formulaParts=question.formula.split("=");if(2!==formulaParts.length)return question.defaultVal||"";let calculationExpression=formulaParts[0].trim();const targetRef=formulaParts[1].trim(),formValues=this.performanceForm.value;if(Object.keys(formValues).forEach(_=>{if(_.startsWith("matrix_")){const g=_.replace("matrix_","").split("_");if(2===g.length){const d=formValues[_]||"0";calculationExpression=calculationExpression.replace(new RegExp(`\\b${g[0]}_${g[1]}\\b`,"g"),d)}}}),this.currentTopic?.questionDTOs&&this.currentTopic.questionDTOs.forEach(_=>{if(new RegExp(`\\b${_.id}\\b`,"g").test(calculationExpression)){let u=0;if("NORMAL"===this.currentTopic?.formType){const m=formValues[`question_${_.id}`];u=void 0!==m&&""!==m?parseFloat(m)||0:parseFloat(_.currentCount||"0")||0,console.log(`NORMAL form - Replacing question ID ${_.id} with value: ${u} (control: ${m}, currentCount: ${_.currentCount})`)}else u=this.calculateRowTotal(_.id),console.log(`Matrix form - Replacing question ID ${_.id} with row total: ${u}`);calculationExpression=calculationExpression.replace(new RegExp(`\\b${_.id}\\b`,"g"),u.toString())}}),!/^[\d\s+\-*/().]+$/.test(calculationExpression))return question.defaultVal||"";const result=eval(calculationExpression),resultString=result.toString();return resultString}catch(_){return question.defaultVal||""}}calculateRowTotal(_){if(!this.currentTopic?.subTopics)return 0;let g=0;return this.currentTopic.subTopics.forEach(u=>{const h=this.getMatrixValue(_,u.id);g+=parseFloat(h)||0}),g}calculateColumnTotal(_){if(!this.currentTopic?.questionDTOs)return 0;let g=0;return this.currentTopic.questionDTOs.forEach(u=>{const h=this.getMatrixValue(u.id,_);g+=parseFloat(h)||0}),g}calculateSubTopicTotal(_){if(!this.currentTopic?.questionDTOs)return 0;let g=0;return this.currentTopic.questionDTOs.forEach(u=>{const h=this.getMatrixValue(u.id,_);g+=parseFloat(h)||0}),g}calculateQuestionTotal(_){if(!this.currentTopic?.subTopics)return 0;let g=0;return this.currentTopic.subTopics.forEach(u=>{const h=this.getMatrixValue(_,u.id);g+=parseFloat(h)||0}),g}calculateGrandTotal(){if(!this.currentTopic?.questionDTOs||!this.currentTopic?.subTopics)return 0;let _=0;return this.currentTopic.questionDTOs.forEach(g=>{this.currentTopic?.subTopics?.forEach(u=>{const h=this.getMatrixValue(g.id,u.id);_+=parseFloat(h)||0})}),_}closeOTPModal(){this.showOTPModal=!1,this.otpValue=""}getCumulativeValue(_){if(_.formula&&""!==_.formula.trim()){const m=this.performanceForm.get(`question_${_.id}`);if(m){const d=m.value;return void 0!==d&&""!==d?d:"0"}}const u=this.performanceForm.get(`question_${_.id}`);if(u){const h=u.value;if(void 0!==h&&""!==h)return h}return _.finYearCount||_.currentCount||"0"}clearMessages(){this.errorMessage="",this.successMessage=""}static#_=_staticBlock=()=>(this.\u0275fac=function(g){return new(g||PerformanceComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_5__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_5__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_angular_forms__WEBPACK_IMPORTED_MODULE_0__.ok),_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_services_performance_statistic_service__WEBPACK_IMPORTED_MODULE_6__.a))},this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.VBU({type:PerformanceComponent,selectors:[["app-performance"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","performance-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","auto-save-indicator",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"performance-container"],[1,"header-section"],[1,"page-title1"],[1,"page-title"],["class","breadcrumb",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","form-container",4,"ngIf"],["class","success-container",4,"ngIf"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"breadcrumb-separator"],[1,"breadcrumb-item","active"],[1,"alert","alert-error"],[1,"fas","fa-exclamation-triangle"],[1,"close-btn",3,"click"],[1,"alert","alert-success"],[1,"fas","fa-check-circle"],[1,"form-container"],[1,"performance-form",3,"formGroup"],["class","normal-form",4,"ngIf"],["class","matrix-form",4,"ngIf"],[1,"action-buttons"],[1,"navigation-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-backward"],[1,"fas","fa-forward"],[1,"form-buttons"],["type","button",1,"btn","btn-outline",3,"click","disabled"],[1,"fas","fa-save"],[1,"fas","fa-paper-plane"],[1,"normal-form"],[1,"section-title"],[1,"normal-table-container"],[1,"normal-table"],[1,"sr-no-header"],[1,"questions-header"],[1,"previous-header"],[1,"current-header"],[1,"cumulative-header"],["class","normal-row",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"normal-row"],[1,"sr-no-cell"],[1,"question-cell"],[1,"question-text",3,"innerHTML"],[1,"previous-cell"],["type","text","readonly","",1,"normal-input","readonly",3,"value"],[1,"current-cell"],["type","number",1,"normal-input",3,"formControlName","placeholder","readonly"],[1,"cumulative-cell"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"matrix-form"],[1,"matrix-container"],[1,"matrix-table"],[1,"question-header"],["class","subtopic-header",4,"ngFor","ngForOf"],["class","matrix-row",4,"ngFor","ngForOf"],[1,"subtopic-header"],[1,"matrix-row"],[1,"question-number"],["class","input-cell",4,"ngFor","ngForOf"],[1,"input-cell"],["type","number","placeholder","0",1,"matrix-input",3,"formControlName"],["class","question-header",4,"ngFor","ngForOf"],[1,"subtopic-cell"],[1,"success-container"],[1,"success-icon"],[1,"success-actions"],["class","btn btn-primary",3,"click",4,"ngIf"],["routerLink","/dashboard/homePage",1,"btn","btn-outline"],[1,"btn","btn-primary",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"otp-input-container"],["type","text","placeholder","Enter OTP","maxlength","6","pattern","[0-9]{6}",1,"otp-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-outline",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"auto-save-indicator"],[1,"fas","fa-clock"]],template:function(g,u){1&g&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(0,PerformanceComponent_div_0_Template,4,0,"div",0)(1,PerformanceComponent_div_1_Template,15,6,"div",1)(2,PerformanceComponent_div_2_Template,18,4,"div",2)(3,PerformanceComponent_div_3_Template,3,0,"div",3),2&g&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.loading),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",!u.loading),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.showOTPModal),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",null==u.performanceForm?null:u.performanceForm.dirty))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.MD,_angular_common__WEBPACK_IMPORTED_MODULE_1__.Sq,_angular_common__WEBPACK_IMPORTED_MODULE_1__.bT,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.X1,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.qT,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.Q0,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.cb,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.tU,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.R_,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.j4,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.JD,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.vS,_angular_router__WEBPACK_IMPORTED_MODULE_2__.iI,_angular_router__WEBPACK_IMPORTED_MODULE_2__.Wk],styles:['.performance-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a}.calculated-field[_ngcontent-%COMP%]{background-color:#f8f9fa!important;color:#6c757d!important;border:1px solid #dee2e6!important;cursor:not-allowed}.calculated-field[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 .2rem #007bff40}.debug-btn[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px}.debug-btn[_ngcontent-%COMP%]:hover{background-color:#138496}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.header-section[_ngcontent-%COMP%]{border-bottom:2px solid #e9ecef}.page-title[_ngcontent-%COMP%]{color:#2c3e50;font-size:28px;font-weight:600;margin:0 0 10px}.page-title1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#007bff}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:14px;color:#6c757d}.breadcrumb-item[_ngcontent-%COMP%]{color:#000;font-size:22px}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#007bff;font-weight:500;font-size:20px}.breadcrumb-separator[_ngcontent-%COMP%]{margin:0 8px;color:#000}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:20px;position:relative;display:flex;align-items:center;gap:10px}.alert-error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer;color:inherit}.form-container[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;margin-bottom:20px}.form-header[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px;margin-bottom:20px;border-left:4px solid #007bff}.form-info[_ngcontent-%COMP%]{display:flex;gap:30px;flex-wrap:wrap}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#495057}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}.form-type-badge[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.section-title[_ngcontent-%COMP%]{color:#2c3e50;font-size:22px;font-weight:600;margin-bottom:10px}.section-subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;margin-bottom:20px;font-style:italic}.questions-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.question-row[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:6px;padding:15px;background:#fff}.question-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;margin-bottom:15px}.question-number[_ngcontent-%COMP%]{color:#007bff;font-weight:600;min-width:20px}.question-text[_ngcontent-%COMP%]{flex:1;color:#495057;font-weight:500}.input-columns[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.input-group[_ngcontent-%COMP%]{flex:1;min-width:150px}.input-label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#6c757d;margin-bottom:5px;text-transform:uppercase}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.form-input.readonly[_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.form-input[_ngcontent-%COMP%]:invalid{border-color:#dc3545}.normal-form[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:6px}.normal-table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px}.normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border:1px solid #dee2e6;background:#fff}.normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;text-align:left;border:1px solid #dee2e6;vertical-align:middle}.normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#87ceeb!important;color:#fff!important;font-weight:600;text-align:center;font-size:14px}.sr-no-header[_ngcontent-%COMP%], .sr-no-cell[_ngcontent-%COMP%]{width:80px;text-align:center}.questions-header[_ngcontent-%COMP%], .question-cell[_ngcontent-%COMP%]{width:50%;text-align:left}.previous-header[_ngcontent-%COMP%], .current-header[_ngcontent-%COMP%], .cumulative-header[_ngcontent-%COMP%], .previous-cell[_ngcontent-%COMP%], .current-cell[_ngcontent-%COMP%], .cumulative-cell[_ngcontent-%COMP%]{width:120px;text-align:center}.normal-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ced4da;border-radius:4px;font-size:14px;text-align:center;box-sizing:border-box}.normal-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.normal-input.readonly[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#6c757d;cursor:not-allowed}.question-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}.normal-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.normal-row[_ngcontent-%COMP%]:hover{background-color:#e8f4fd}.matrix-form[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:6px}.matrix-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px}.matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border:1px solid #dee2e6;background:#fff}.matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;border:1px solid #dee2e6;vertical-align:middle}.matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#007bff!important;color:#fff!important;font-weight:600;font-size:12px;text-transform:uppercase}.question-header[_ngcontent-%COMP%], .subtopic-header[_ngcontent-%COMP%]{min-width:100px;max-width:150px;word-wrap:break-word}.matrix-form[_ngcontent-%COMP%]   .question-cell[_ngcontent-%COMP%], .matrix-form[_ngcontent-%COMP%]   .subtopic-cell[_ngcontent-%COMP%]{text-align:left;padding:12px;font-weight:500;background-color:#f8f9fa;min-width:200px}.matrix-form[_ngcontent-%COMP%]   .input-cell[_ngcontent-%COMP%]{padding:8px}.matrix-form[_ngcontent-%COMP%]   .matrix-input[_ngcontent-%COMP%]{width:80px;padding:6px 8px;border:1px solid #ced4da;border-radius:4px;text-align:center;font-size:14px}.matrix-form[_ngcontent-%COMP%]   .matrix-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.total-cell[_ngcontent-%COMP%]{background-color:#e9ecef;font-weight:600;color:#495057}.totals-row[_ngcontent-%COMP%]{background-color:#f8f9fa}.totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;color:#495057}.grand-total[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700}.total-value[_ngcontent-%COMP%]{color:#007bff;font-weight:600}.questions-details[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#f8f9fa;border-radius:6px}.questions-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px;font-size:16px;font-weight:600}.question-detail[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px;padding:8px;background:#fff;border-radius:4px}.question-label[_ngcontent-%COMP%]{font-weight:600;color:#007bff;min-width:40px}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:30px;padding-top:20px;border-top:1px solid #e9ecef;flex-wrap:wrap;gap:20px}.navigation-buttons[_ngcontent-%COMP%], .form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .15s ease-in-out;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#545b62}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;color:#007bff;border:1px solid #007bff}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#007bff;color:#fff}.success-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.success-icon[_ngcontent-%COMP%]{font-size:64px;color:#28a745;margin-bottom:20px}.success-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:24px;margin-bottom:10px}.success-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin-bottom:30px}.success-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-width:400px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 0;border-bottom:1px solid #e9ecef}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:18px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:#495057;line-height:1.5}.otp-input-container[_ngcontent-%COMP%]{margin-bottom:20px}.otp-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #ced4da;border-radius:6px;font-size:16px;text-align:center;letter-spacing:2px;font-weight:600}.otp-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:0 20px 20px;border-top:1px solid #e9ecef}.auto-save-indicator[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#28a745;color:#fff;padding:8px 12px;border-radius:20px;font-size:12px;display:flex;align-items:center;gap:6px;z-index:100;box-shadow:0 2px 10px #0003}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px;display:flex;align-items:center;gap:4px}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0"}@media (max-width: 768px){.performance-container[_ngcontent-%COMP%]{padding:15px;margin:10px}.form-info[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.input-columns[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.navigation-buttons[_ngcontent-%COMP%], .form-buttons[_ngcontent-%COMP%]{width:100%;justify-content:center}.matrix-container[_ngcontent-%COMP%]{font-size:12px}.matrix-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .matrix-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.matrix-form[_ngcontent-%COMP%]   .question-cell[_ngcontent-%COMP%], .matrix-form[_ngcontent-%COMP%]   .subtopic-cell[_ngcontent-%COMP%]{min-width:150px;font-size:12px}.matrix-form[_ngcontent-%COMP%]   .matrix-input[_ngcontent-%COMP%]{width:60px;padding:4px 6px}}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:22px}.section-title[_ngcontent-%COMP%]{font-size:18px}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}.modal-container[_ngcontent-%COMP%]{width:95%}}@media print{.action-buttons[_ngcontent-%COMP%], .auto-save-indicator[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]{display:none!important}.performance-container[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}.matrix-table[_ngcontent-%COMP%], .question-row[_ngcontent-%COMP%]{page-break-inside:avoid}}']}))}return _staticBlock(),PerformanceComponent})()},2279:(_,g,u)=>{u.r(g),u.d(g,{DashboardModule:()=>ma});var h={};u.r(h),u.d(h,{Decoder:()=>ut,Encoder:()=>xr,PacketType:()=>M,protocol:()=>vr});var m=u(2200),d=u(4341),P=u(8132),t=u(3664),s=u(2615),E=u(2020),f=u(9464),b=u(5070);function O(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",21)(1,"div",22)(2,"div",23),t.nrm(3,"img",24),t.k0s(),t.j41(4,"div",25)(5,"div",26),t.EFF(6),t.k0s(),t.j41(7,"div",27),t.EFF(8),t.k0s()()(),t.nrm(9,"div",28),t.j41(10,"div",29)(11,"div",30),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.editProfile())}),t.nrm(12,"i",31),t.j41(13,"span"),t.EFF(14,"User profile"),t.k0s(),t.j41(15,"span",32),t.EFF(16,"\u2318E"),t.k0s()()(),t.nrm(17,"div",28),t.j41(18,"div",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.logout())}),t.nrm(19,"i",34),t.j41(20,"span"),t.EFF(21,"Log out"),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(3),t.Y8G("src",o.getUserAvatar(),t.B4B)("alt",o.getUserDisplayName()),t.R7$(3),t.JRh(o.getUserDisplayName()),t.R7$(2),t.JRh(o.getUserEmail())}}function Lt(r,a){1&r&&(t.j41(0,"div",35)(1,"p"),t.EFF(2,"Loading menu..."),t.k0s()())}function Gt(r,a){if(1&r&&(t.j41(0,"span",44),t.EFF(1,"\u25bc"),t.k0s()),2&r){const o=t.XpG().$implicit,e=t.XpG(2);t.AVh("expanded",e.expandedMenus[o.id])}}function Vt(r,a){if(1&r&&(t.j41(0,"span",44),t.EFF(1,"\u25b6"),t.k0s()),2&r){const o=t.XpG().$implicit,e=t.XpG(4);t.AVh("expanded",e.expandedSubmenus[o.id])}}function qt(r,a){if(1&r){const o=t.RV6();t.qex(0),t.j41(1,"li",46)(2,"div",47),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(6);return s.Njj(n.url&&"#"!==n.url?i.navigate(n.url):null)}),t.EFF(3),t.k0s()(),t.bVm()}if(2&r){const o=a.$implicit;t.R7$(3),t.SpI(" ",o.name," ")}}function Yt(r,a){if(1&r&&(t.j41(0,"ul",45),t.DNE(1,qt,4,1,"ng-container",37),t.k0s()),2&r){const o=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",o.children)}}function Wt(r,a){if(1&r){const o=t.RV6();t.qex(0),t.j41(1,"li",46)(2,"div",39),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(4);return s.Njj(n.children&&n.children.length?i.toggleSubmenu(n.id):n.url&&"#"!==n.url?i.navigate(n.url):null)}),t.j41(3,"span",40),t.EFF(4),t.k0s(),t.j41(5,"span",41),t.DNE(6,Vt,2,2,"span",42),t.k0s()(),t.DNE(7,Yt,2,1,"ul",43),t.k0s(),t.bVm()}if(2&r){const o=a.$implicit,e=t.XpG(4);t.R7$(2),t.AVh("expanded",e.expandedSubmenus[o.id])("has-children",o.children&&o.children.length),t.R7$(2),t.JRh(o.name),t.R7$(2),t.Y8G("ngIf",o.children&&o.children.length),t.R7$(),t.Y8G("ngIf",o.children&&o.children.length&&e.expandedSubmenus[o.id])}}function zt(r,a){if(1&r&&(t.j41(0,"ul",45),t.DNE(1,Wt,8,7,"ng-container",37),t.k0s()),2&r){const o=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",o.children)}}function Kt(r,a){if(1&r){const o=t.RV6();t.qex(0),t.j41(1,"li",38)(2,"div",39),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(n.children&&n.children.length?i.toggleMenu(n.id):n.url&&"#"!==n.url?i.navigate(n.url):null)}),t.j41(3,"span",40),t.EFF(4),t.k0s(),t.j41(5,"span",41),t.DNE(6,Gt,2,2,"span",42),t.k0s()(),t.DNE(7,zt,2,1,"ul",43),t.k0s(),t.bVm()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.R7$(2),t.AVh("expanded",e.expandedMenus[o.id])("has-children",o.children&&o.children.length),t.R7$(2),t.JRh(o.name),t.R7$(2),t.Y8G("ngIf",o.children&&o.children.length),t.R7$(),t.Y8G("ngIf",o.children&&o.children.length&&e.expandedMenus[o.id])}}function Xt(r,a){if(1&r&&(t.j41(0,"ul",36),t.DNE(1,Kt,8,7,"ng-container",37),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.menuData)}}let pt=(()=>{var r;class a{ngOnInit(){this.loadUserMenu(),this.loadUserData(),document.addEventListener("click",this.handleOutsideClick)}ngOnDestroy(){document.removeEventListener("click",this.handleOutsideClick),this.subscriptions.forEach(e=>e.unsubscribe())}toggleUserDropdown(){this.userDropdownOpen=!this.userDropdownOpen}logout(){this.router.navigate(["/login"])}toggleMenu(e){const n=!!this.expandedMenus[e];Object.keys(this.expandedMenus).forEach(i=>{this.expandedMenus[+i]=!1}),this.expandedMenus[e]=!n}toggleSubmenu(e){const n=!!this.expandedSubmenus[e];Object.keys(this.expandedSubmenus).forEach(i=>{this.expandedSubmenus[+i]=!1}),this.expandedSubmenus[e]=!n}toggleSubchild(e){this.expandedSubchildren[e]=!this.expandedSubchildren[e]}constructor(e,n,i,c){this.authService=e,this.router=n,this.route=i,this.apiService=c,this.handleOutsideClick=l=>{const p=document.querySelector(".user-profile-container");p&&!p.contains(l.target)&&(this.userDropdownOpen=!1)},this.userDropdownOpen=!1,this.isSidenavCollapsed=!1,this.user=null,this.isLoadingMenu=!0,this.menuData=[],this.expandedMenus={},this.expandedSubmenus={},this.expandedSubchildren={},this.subscriptions=[]}loadUserData(){const e=this.authService.user$.subscribe(n=>{this.user=n});if(this.subscriptions.push(e),!this.user){const n=localStorage.getItem("email")||localStorage.getItem("userEmail"),i=localStorage.getItem("firstName"),c=localStorage.getItem("lastName"),l=localStorage.getItem("roleName");n&&i&&l&&(this.user={id:0,firstName:i,lastName:c||"",email:n,role:{id:0,roleName:l},permissions:[]});const p=this.authService.loadUserProfile().subscribe({next:C=>{this.user=C},error:C=>{console.error("Failed to load user profile:",C)}});this.subscriptions.push(p)}}loadUserMenu(){this.isLoadingMenu=!0;const e=this.apiService.get_user_menu().subscribe({next:n=>{this.menuData="SUCCESS"===n.status&&Array.isArray(n.data)?n.data:[],console.log("User menu loaded:",n),this.isLoadingMenu=!1},error:n=>{console.error("Failed to load user menu:",n),this.isLoadingMenu=!1,this.menuData=[]}});this.subscriptions.push(e)}toggleSidenav(){this.isSidenavCollapsed=!this.isSidenavCollapsed}navigate(e){if(e.includes("?")){const[n,i]=e.split("?"),c={};i&&i.split("&").forEach(p=>{const[C,v]=p.split("=");C&&v&&(c[C]=decodeURIComponent(v))});const l=n.startsWith("/")?n.substring(1):n;this.router.navigate([l],{relativeTo:this.route,queryParams:c})}else{const n=e.startsWith("/")?e.substring(1):e;this.router.navigate([n],{relativeTo:this.route})}}getUserDisplayName(){if(this.user?.firstName)return this.user.firstName;const e=localStorage.getItem("firstName");if(e)return e;const n=this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail");return n?n.split("@")[0]:"User"}getUserEmail(){return this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail")||""}getUserRole(){return this.user?.role?.roleName||localStorage.getItem("roleName")||""}getUserAvatar(){return"https://ui-avatars.com/api/?name="+encodeURIComponent(this.getUserDisplayName())+"&background=6366f1&color=fff&size=40"}editProfile(){event?.stopPropagation(),this.userDropdownOpen=!1,console.log("Edit profile clicked"),this.router.navigate(["/dashboard/profile"])}widgetSettings(){event?.stopPropagation(),this.userDropdownOpen=!1,console.log("Widget settings clicked")}upgradeToPro(){event?.stopPropagation(),this.userDropdownOpen=!1,console.log("Upgrade to professional clicked")}hasRole(e){return this.authService.hasRole(e)}hasPermission(e){return this.authService.hasPermission(e)}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(E.u),t.rXU(f.Ix),t.rXU(f.nX),t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-dashboard"]],decls:27,vars:19,consts:[[1,"dashboard-layout"],[1,"header"],[1,"header-left"],[1,"menu-toggle",3,"click"],[1,"hamburger-line"],[1,"app-title"],[1,"header-right"],[1,"user-profile-container",3,"click"],[1,"user-avatar"],[1,"avatar-img",3,"src","alt"],[1,"user-details"],[1,"user-name"],[1,"user-role"],[1,"dropdown-arrow"],[1,"fa","fa-chevron-down"],["class","profile-dropdown",4,"ngIf"],[1,"sidenav"],[1,"nav-content"],["class","menu-loading",4,"ngIf"],["class","nav-menu",4,"ngIf"],[1,"main-content"],[1,"profile-dropdown"],[1,"dropdown-header"],[1,"dropdown-avatar"],[3,"src","alt"],[1,"dropdown-user-info"],[1,"dropdown-name"],[1,"dropdown-email"],[1,"dropdown-divider"],[1,"dropdown-menu-items"],[1,"dropdown-menu-item",3,"click"],[1,"fa","fa-user"],[1,"shortcut"],[1,"dropdown-menu-item","logout-item",3,"click"],[1,"fa","fa-sign-out"],[1,"menu-loading"],[1,"nav-menu"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","collapsible-menu",2,"text-align","left","cursor","pointer","display","flex","justify-content","space-between","align-items","center",3,"click"],[1,"nav-label"],[1,"nav-icon"],["class","expand-icon",3,"expanded",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"expand-icon"],[1,"sub-menu"],[1,"sub-item"],[1,"sub-link",2,"text-align","left","cursor","pointer",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return i.toggleSidenav()}),t.nrm(4,"span",4)(5,"span",4)(6,"span",4),t.k0s(),t.j41(7,"h1",5),t.EFF(8,"Dashboard"),t.k0s()(),t.j41(9,"div",6)(10,"div",7),t.bIt("click",function(){return i.toggleUserDropdown()}),t.j41(11,"div",8),t.nrm(12,"img",9),t.k0s(),t.j41(13,"div",10)(14,"span",11),t.EFF(15),t.k0s(),t.j41(16,"span",12),t.EFF(17),t.k0s()(),t.j41(18,"div",13),t.nrm(19,"i",14),t.k0s(),t.DNE(20,O,22,4,"div",15),t.k0s()()(),t.j41(21,"nav",16)(22,"div",17),t.DNE(23,Lt,3,0,"div",18)(24,Xt,2,1,"ul",19),t.k0s()(),t.j41(25,"main",20),t.nrm(26,"router-outlet"),t.k0s()()),2&n&&(t.R7$(4),t.AVh("collapsed",i.isSidenavCollapsed),t.R7$(),t.AVh("collapsed",i.isSidenavCollapsed),t.R7$(),t.AVh("collapsed",i.isSidenavCollapsed),t.R7$(6),t.Y8G("src",i.getUserAvatar(),t.B4B)("alt",i.getUserDisplayName()),t.R7$(3),t.JRh(i.getUserDisplayName()),t.R7$(2),t.JRh(i.getUserRole()),t.R7$(2),t.AVh("rotated",i.userDropdownOpen),t.R7$(),t.Y8G("ngIf",i.userDropdownOpen),t.R7$(),t.AVh("collapsed",i.isSidenavCollapsed),t.R7$(2),t.Y8G("ngIf",i.isLoadingMenu),t.R7$(),t.Y8G("ngIf",!i.isLoadingMenu),t.R7$(),t.AVh("expanded",i.isSidenavCollapsed))},dependencies:[m.MD,m.Sq,m.bT,P.iI,f.n3],styles:['.dashboard-layout[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header header" "sidenav main";grid-template-rows:60px 1fr;grid-template-columns:300px 1fr;height:100vh;transition:grid-template-columns .3s ease}.dashboard-layout[_ngcontent-%COMP%]:has(.sidenav.collapsed){grid-template-columns:60px 1fr}.header[_ngcontent-%COMP%]{grid-area:header;background:linear-gradient(90deg,#0f172a,#1e293b,#64748b);color:#f8fafc;display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;box-shadow:0 2px 6px #0009;z-index:10;margin-bottom:0;border-radius:0}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.menu-toggle[_ngcontent-%COMP%]{background:#ffffff26;border:none;cursor:pointer;padding:.6rem;border-radius:8px;display:flex;flex-direction:column;gap:4px;width:28px;height:22px;transition:background-color .2s ease,transform .2s ease}.menu-toggle[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:scale(1.05)}.hamburger-line[_ngcontent-%COMP%]{width:100%;height:2px;background:#fff;box-shadow:0 0 4px #0000004d;transition:all .3s ease;transform-origin:center}.hamburger-line.collapsed[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(4px,5px)}.hamburger-line.collapsed[_ngcontent-%COMP%]:nth-child(2){opacity:0}.hamburger-line.collapsed[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(4px,-5px)}.app-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0;color:#fff}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.user-profile-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;cursor:pointer;padding:.5rem;border-radius:8px;transition:background-color .2s ease;gap:.75rem}.user-profile-container[_ngcontent-%COMP%]:hover{background:#ffffff1a}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,.2)}.user-avatar[_ngcontent-%COMP%]   .avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff;line-height:1.2}.user-role[_ngcontent-%COMP%]{font-size:.875rem;color:#cbd5e1;line-height:1.2}.dropdown-arrow[_ngcontent-%COMP%]{margin-left:.5rem;color:#cbd5e1;transition:transform .2s ease}.dropdown-arrow[_ngcontent-%COMP%]   .fa-chevron-down.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.profile-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);right:0;background:#fff;border-radius:12px;box-shadow:0 10px 25px #00000026;min-width:280px;z-index:1000;overflow:hidden;border:1px solid #e5e7eb}.dropdown-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;background:#f8fafc;gap:.75rem}.dropdown-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;overflow:hidden}.dropdown-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.dropdown-user-info[_ngcontent-%COMP%]{flex:1}.dropdown-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1f2937;margin-bottom:.25rem}.dropdown-email[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e5e7eb}.dropdown-menu-items[_ngcontent-%COMP%]{padding:.5rem 0}.dropdown-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1rem;cursor:pointer;transition:background-color .2s ease;gap:.75rem;color:#374151}.dropdown-menu-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.dropdown-menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;font-size:1rem;color:#6b7280}.dropdown-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:.875rem}.shortcut[_ngcontent-%COMP%]{font-size:.75rem!important;color:#9ca3af!important;font-weight:500;flex:none!important}.logout-item[_ngcontent-%COMP%], .logout-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444!important}.logout-item[_ngcontent-%COMP%]:hover{background:#fef2f2}.sidenav[_ngcontent-%COMP%]{grid-area:sidenav;background:linear-gradient(to bottom,#111827,#1f2937,#6b7280);color:#f1f5f9;transition:all .3s ease;overflow:hidden;box-shadow:2px 0 6px #0009}.sidenav.collapsed[_ngcontent-%COMP%]{width:60px}.nav-content[_ngcontent-%COMP%]{padding:1rem 0;height:100%;overflow-y:auto}.nav-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.nav-item[_ngcontent-%COMP%]{margin-bottom:.25rem}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem .5rem;color:#e0e7ff;text-decoration:none;cursor:pointer;transition:all .3s ease;border-radius:8px;margin:.25rem .5rem}.nav-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6366f1,#3b82f6);color:#fff;transform:translate(4px);box-shadow:0 2px 8px #3b82f666}.nav-link.has-children[_ngcontent-%COMP%]{justify-content:space-between}.nav-link.collapsible-menu[_ngcontent-%COMP%]{background:#ffffff0d;border-left:3px solid #f59e0b;justify-content:space-between}.nav-link.collapsible-menu[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#f59e0b,#f97316);color:#fff;transform:translate(4px);box-shadow:0 2px 8px #f59e0b66}.nav-link.collapsible-menu.expanded[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#f97316);color:#fff;border-left:3px solid #f59e0b}.nav-link.router-link[_ngcontent-%COMP%]{border-left:3px solid transparent}.nav-link.router-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6366f1,#3b82f6);color:#fff;transform:translate(4px);box-shadow:0 2px 8px #3b82f666;border-left:3px solid #3b82f6}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#22c55e,#16a34a);color:#fff;border-left:3px solid #22c55e;box-shadow:0 2px 8px #22c55e66}.nav-icon[_ngcontent-%COMP%]{font-size:1.25rem;min-width:28px;display:flex;justify-content:center}.nav-label[_ngcontent-%COMP%]{margin-left:.75rem;font-weight:500;white-space:nowrap;transition:opacity .3s ease;width:100%;text-align:left}.nav-label.hidden[_ngcontent-%COMP%]{opacity:0}.expand-icon[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .2s ease}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.sub-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;background:#00000040;border-left:3px solid #60a5fa;border-radius:0 0 8px 8px;margin:.25rem .5rem;animation:_ngcontent-%COMP%_slideDown .2s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{max-height:0;opacity:0}to{max-height:200px;opacity:1}}.sub-item[_ngcontent-%COMP%]{border-left:2px solid transparent}.sub-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem .5rem 1.75rem;color:#c7d2fe;text-decoration:none;font-size:.875rem;border-radius:6px;transition:all .3s ease;text-align:left}.sub-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#3b82f6,#2563eb);color:#fff;border-left-color:#2563eb}.main-content[_ngcontent-%COMP%]{grid-area:main;background:#f8fafc;overflow-y:auto;transition:all .3s ease}.main-content.expanded[_ngcontent-%COMP%]{grid-column:2 / -1}@media (max-width: 768px){.dashboard-layout[_ngcontent-%COMP%]{grid-template-areas:"header" "main";grid-template-columns:1fr;grid-template-rows:60px 1fr}.sidenav[_ngcontent-%COMP%]{position:fixed;left:0;top:60px;height:calc(100vh - 60px);width:250px;z-index:20;transform:translate(-100%)}.sidenav[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.main-content[_ngcontent-%COMP%]{grid-area:main;width:100%}.user-email[_ngcontent-%COMP%]{display:none}}']}))}return r(),a})();const Qt=r=>({"background-image":r});function Ht(r,a){if(1&r&&(t.j41(0,"div",14)(1,"div",15),t.EFF(2),t.k0s(),t.j41(3,"div",16),t.EFF(4),t.k0s()()),2&r){const o=a.$implicit;t.Y8G("ngStyle",t.eq3(3,Qt,o.gradient)),t.R7$(2),t.JRh(o.title),t.R7$(2),t.JRh(o.count)}}function Jt(r,a){if(1&r&&(t.j41(0,"div",12),t.DNE(1,Ht,5,5,"div",13),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.cards)}}function Zt(r,a){if(1&r&&(t.j41(0,"div",21)(1,"div",22),t.EFF(2),t.k0s(),t.j41(3,"div",23),t.EFF(4),t.k0s()()),2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.name),t.R7$(2),t.SpI("(",o.progress,")")}}function te(r,a){if(1&r&&(t.j41(0,"aside",17)(1,"div",18)(2,"h3"),t.EFF(3,"Battalion"),t.k0s()(),t.j41(4,"div",19),t.DNE(5,Zt,5,2,"div",20),t.k0s()()),2&r){const o=t.XpG();t.R7$(5),t.Y8G("ngForOf",o.dataStatus)}}let gt=(()=>{var r;class a{constructor(e){this.api=e,this.user={name:"",email:"",contact:"",mobile:"",joiningDate:""},this.cards=[{title:"Roles",count:0,gradient:"linear-gradient(90deg,#2dd4bf,#16a34a)"},{title:"Permission",count:0,gradient:"linear-gradient(90deg,#fb7185,#f97316)"},{title:"Menus",count:0,gradient:"linear-gradient(90deg,#6366f1,#06b6d4)"},{title:"SubMenus",count:0,gradient:"linear-gradient(90deg,#f59e0b,#f97316)"},{title:"State",count:0,gradient:"linear-gradient(90deg,#a78bfa,#c084fc)"},{title:"Modules",count:0,gradient:"linear-gradient(90deg,#06b6d4,#60a5fa)"},{title:"Zone",count:0,gradient:"linear-gradient(90deg,#fb7185,#ef4444)"},{title:"Battalions",count:0,gradient:"linear-gradient(90deg,#fda4af,#fecaca)"},{title:"Topic",count:0,gradient:"linear-gradient(90deg,#60a5fa,#93c5fd)"},{title:"SubTopic",count:0,gradient:"linear-gradient(90deg,#0ea5a4,#075985)"},{title:"Questions",count:0,gradient:"linear-gradient(90deg,#c084fc,#bfdbfe)"}],this.isLoading=!1,this.dataStatus=[]}ngOnInit(){this.loadUserProfile(),this.loadTopicsAndSubtopics()}loadTopicsAndSubtopics(){this.api.getActiveTopics().subscribe({next:e=>{if(e&&"SUCCESS"===e.status&&e.data){const n=["Reserve Office","Strength & Vacancy","TradesMen, Ministrial, Supporting Staff"];this.dataStatus=e.data.filter(i=>n.includes(i.topicName)).map(i=>({name:i.topicName,progress:i.subName||"No subnames"}))}},error:e=>{console.error("Failed to load topics",e)}})}loadOverview(){this.isLoading=!0,this.api.getDashboardOverview().subscribe({next:e=>{if(this.isLoading=!1,e&&"SUCCESS"===e.status&&e.data){const n=e.data;if(this.cards=this.cards.map(i=>{switch(i.title){case"Roles":return{...i,count:void 0!==n.roles?n.roles:i.count};case"Permission":return{...i,count:void 0!==n.permissions?n.permissions:i.count};case"Menus":return{...i,count:void 0!==n.menus?n.menus:i.count};case"SubMenus":return{...i,count:void 0!==n.subMenus?n.subMenus:i.count};case"State":return{...i,count:void 0!==n.states?n.states:i.count};case"Modules":return{...i,count:void 0!==n.modules?n.modules:i.count};case"Zone":return{...i,count:void 0!==n.ranges?n.ranges:i.count};case"Battalions":return{...i,count:void 0!==n.battalions?n.battalions:i.count};case"Topic":return{...i,count:void 0!==n.topics?n.topics:i.count};case"SubTopic":return{...i,count:void 0!==n.subTopics?n.subTopics:i.count};case"Questions":return{...i,count:void 0!==n.questions?n.questions:i.count};default:return i}}),void 0!==n.recentPerformanceCount){const i=Math.max(0,Number(n.recentPerformanceCount));this.dataStatus=Array.from({length:i}).map((c,l)=>({name:`Recent Perf ${l+1}`,progress:"0 out of 9"}))}}},error:e=>{this.isLoading=!1,console.error("Failed to load dashboard overview",e)}})}loadUserProfile(){this.api.getUserSelf().subscribe({next:e=>{if(e&&"SUCCESS"===e.status&&e.data){this.users=e.data;const n=e.data;this.user.name=`${n.firstName||""}${n.lastName?" "+n.lastName:""}`.trim(),this.user.email=n.email||"",this.user.mobile=n.mobileNo||n.mobile||"",this.user.contact=n.contactNo||"",this.roleId=n.roleId||"",this.user.joiningDate=n.joiningDate?new Date(n.joiningDate).toLocaleDateString():""}1==this.roleId&&(this.loadOverview(),this.loadPerformanceStatus())},error:e=>{console.error("Failed to load user profile",e)}})}loadPerformanceStatus(){this.api.getPerformanceOverview().subscribe({next:e=>{if(e&&"SUCCESS"===e.status&&e.data){const n=e.data;if(Array.isArray(n.battalionStats)&&n.battalionStats.length>0)return void(this.dataStatus=n.battalionStats.map(i=>({name:i.battalionName||`Battalion ${i.battalionId}`,progress:`${i.modulesWithData} of ${i.totalActiveModules}`})));if(void 0!==n.recentPerformanceCount){const i=Math.max(0,Number(n.recentPerformanceCount));this.dataStatus=Array.from({length:i}).map((c,l)=>({name:`Recent Perf ${l+1}`,progress:"0 out of 9"}))}}},error:e=>{console.error("Failed to load performance overview",e)}})}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-home"]],decls:33,vars:7,consts:[[1,"home-wrap"],[1,"main-area"],[1,"profile-row"],[1,"welcome"],[1,"user-meta"],[1,"meta-left"],[1,"meta-right"],[1,"avatar"],["src","/assets/images/bihar-police-logo.svg","alt","avatar"],[1,"username"],["class","cards-grid",4,"ngIf"],["class","side-area",4,"ngIf"],[1,"cards-grid"],["class","info-card",3,"ngStyle",4,"ngFor","ngForOf"],[1,"info-card",3,"ngStyle"],[1,"card-title"],[1,"card-count"],[1,"side-area"],[1,"side-header",2,"position","sticky","top","0","background","transparent","padding-bottom","8px"],[1,"status-list"],["class","status-item",4,"ngFor","ngForOf"],[1,"status-item"],[1,"loc"],[1,"progress"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t.EFF(5,"Dashboard"),t.k0s(),t.j41(6,"h2"),t.EFF(7,"Welcome To Bihar Special Armed Police Field Report"),t.k0s(),t.j41(8,"div",4)(9,"div",5)(10,"div")(11,"strong"),t.EFF(12,"User Id :"),t.k0s(),t.EFF(13),t.k0s(),t.j41(14,"div")(15,"strong"),t.EFF(16,"Contact No :"),t.k0s(),t.EFF(17),t.k0s()(),t.j41(18,"div",6)(19,"div")(20,"strong"),t.EFF(21,"Mobile No :"),t.k0s(),t.EFF(22),t.k0s(),t.j41(23,"div")(24,"strong"),t.EFF(25,"Joining Date :"),t.k0s(),t.EFF(26),t.k0s()()()(),t.j41(27,"div",7),t.nrm(28,"img",8),t.j41(29,"div",9),t.EFF(30),t.k0s()()(),t.DNE(31,Jt,2,1,"div",10),t.k0s(),t.DNE(32,te,6,1,"aside",11),t.k0s()),2&n&&(t.R7$(13),t.SpI(" ",i.user.email),t.R7$(4),t.SpI(" ",i.user.contact),t.R7$(5),t.SpI(" ",i.user.mobile),t.R7$(4),t.SpI(" ",i.user.joiningDate),t.R7$(4),t.JRh(i.user.name),t.R7$(),t.Y8G("ngIf",1==i.roleId),t.R7$(),t.Y8G("ngIf",1==i.roleId))},dependencies:[m.MD,m.Sq,m.bT,m.B3],styles:['.home-wrap[_ngcontent-%COMP%]{display:flex;gap:24px;padding:18px 28px}.main-area[_ngcontent-%COMP%]{flex:1 1 auto;background:transparent}.profile-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;margin-bottom:18px;border-bottom:3px solid rgba(0,0,0,.12)}.welcome[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;text-align:center}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:6px 0;line-height:1.08;font-weight:700;font-family:Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(1){color:#0b5ed7;font-size:22px}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(2){color:#16a34a;font-size:18px;font-weight:600}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(3){color:#ef4444;font-size:20px;font-weight:700}.user-meta[_ngcontent-%COMP%]{color:#475569;font-size:13px;margin-top:6px;display:flex;gap:36px;justify-content:center}.user-meta[_ngcontent-%COMP%]   .meta-left[_ngcontent-%COMP%], .user-meta[_ngcontent-%COMP%]   .meta-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start}.avatar[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;align-items:center;justify-content:center}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;background:#fff;padding:8px;border:4px solid rgba(2,6,23,.03)}.username[_ngcontent-%COMP%]{margin-top:6px;font-weight:600;color:#0f172a}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:20px}.info-card[_ngcontent-%COMP%]{min-height:72px;border-radius:12px;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:18px 20px;box-shadow:0 12px 28px #0206170f;text-align:left;transition:transform .18s ease,box-shadow .18s ease;overflow:hidden}.card-title[_ngcontent-%COMP%]{font-weight:600;text-transform:none;text-align:left}.card-count[_ngcontent-%COMP%]{background:#0000002e;color:#fff;padding:10px 14px;border-radius:10px;font-weight:800;margin-left:12px;min-width:48px;text-align:center}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 20px 40px #0206171f}.info-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,#0000000a,#00000014);opacity:1;pointer-events:none}.cards-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}.quote[_ngcontent-%COMP%]{margin-top:18px;color:#60a5fa;font-style:italic;text-align:center}.side-area[_ngcontent-%COMP%]{width:300px;background:#fff;border-radius:8px;padding:12px;box-shadow:0 8px 20px #0206170f;height:620px;display:flex;flex-direction:column}.side-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#0f172a}.side-sub[_ngcontent-%COMP%]{color:#94a3b8;margin:6px 0 12px}.status-list[_ngcontent-%COMP%]{margin-top:8px;flex:1 1 auto;overflow-y:auto;padding-right:6px;text-align:left}.status-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#ef4444;font-size:13px;padding:8px 6px;align-items:center}.status-item[_ngcontent-%COMP%]   .loc[_ngcontent-%COMP%]{flex:1 1 auto}.status-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-left:8px;color:#ef4444}@media (max-width: 960px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.side-area[_ngcontent-%COMP%]{display:none}}@media (max-width: 520px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}))}return r(),a})();var U=u(1413),mt=u(8359);class ee extends mt.yU{constructor(a,o){super()}schedule(a,o=0){return this}}const A={setInterval(r,a,...o){const{delegate:e}=A;return e?.setInterval?e.setInterval(r,a,...o):setInterval(r,a,...o)},clearInterval(r){const{delegate:a}=A;return(a?.clearInterval||clearInterval)(r)},delegate:void 0};var ne=u(7908);const ht={now:()=>(ht.delegate||Date).now(),delegate:void 0};class j{constructor(a,o=j.now){this.schedulerActionCtor=a,this.now=o}schedule(a,o=0,e){return new this.schedulerActionCtor(this,a).schedule(e,o)}}j.now=ht.now;const re=new class ie extends j{constructor(a,o=j.now){super(a,o),this.actions=[],this._active=!1}flush(a){const{actions:o}=this;if(this._active)return void o.push(a);let e;this._active=!0;do{if(e=a.execute(a.state,a.delay))break}while(a=o.shift());if(this._active=!1,e){for(;a=o.shift();)a.unsubscribe();throw e}}}(class oe extends ee{constructor(a,o){super(a,o),this.scheduler=a,this.work=o,this.pending=!1}schedule(a,o=0){var e;if(this.closed)return this;this.state=a;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,o)),this.pending=!0,this.delay=o,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(i,this.id,o),this}requestAsyncId(a,o,e=0){return A.setInterval(a.flush.bind(a,this),e)}recycleAsyncId(a,o,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return o;null!=o&&A.clearInterval(o)}execute(a,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(a,o);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,o){let n,e=!1;try{this.work(a)}catch(i){e=!0,n=i||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){const{id:a,scheduler:o}=this,{actions:e}=o;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.o)(e,this),null!=a&&(this.id=this.recycleAsyncId(o,a,null)),this.delay=null,super.unsubscribe()}}});var ft=u(9974),bt=u(4360);function X(r,a=re){return(0,ft.N)((o,e)=>{let n=null,i=null,c=null;const l=()=>{if(n){n.unsubscribe(),n=null;const C=i;i=null,e.next(C)}};function p(){const C=c+r,v=a.now();if(v<C)return n=this.schedule(void 0,C-v),void e.add(n);l()}o.subscribe((0,bt._)(e,C=>{i=C,c=a.now(),n||(n=a.schedule(p,r),e.add(n))},()=>{l(),e.complete()},void 0,()=>{i=n=null}))})}var ae=u(3669);function Q(r,a=ae.D){return r=r??se,(0,ft.N)((o,e)=>{let n,i=!0;o.subscribe((0,bt._)(e,c=>{const l=a(c);(i||!r(n,l))&&(i=!1,n=l,e.next(c))}))})}function se(r,a){return r===a}function ce(r,a){1&r&&(t.j41(0,"div",29),t.nrm(1,"div",30),t.j41(2,"p"),t.EFF(3,"Loading users..."),t.k0s()())}function le(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",37),t.EFF(9),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.k0s(),t.j41(16,"td"),t.EFF(17),t.k0s(),t.j41(18,"td")(19,"span",38),t.EFF(20),t.k0s()(),t.j41(21,"td")(22,"div",39)(23,"button",40),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.editUser(n))}),t.EFF(24,"Edit"),t.k0s(),t.j41(25,"button",41),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.toggleUserStatus(n))}),t.EFF(26),t.k0s()()()()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(e.getFullName(o)),t.R7$(2),t.JRh(o.email),t.R7$(3),t.JRh(e.getRoleName(o.roleId)),t.R7$(2),t.JRh(o.mobileNo),t.R7$(2),t.JRh(e.getStateName(o.stateId)),t.R7$(2),t.JRh(e.getRangeName(o.rangeId)),t.R7$(2),t.JRh((null==o.battalion?null:o.battalion.battalionName)||e.getBattalionName(o.battalionId)),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function de(r,a){1&r&&(t.j41(0,"tr")(1,"td",42),t.EFF(2,"No users found"),t.k0s()())}function ue(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",31)(1,"table",32)(2,"thead")(3,"tr")(4,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("id"))}),t.EFF(5," Id "),t.j41(6,"span",34),t.EFF(7),t.k0s()(),t.j41(8,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("name"))}),t.EFF(9," Name "),t.j41(10,"span",34),t.EFF(11),t.k0s()(),t.j41(12,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("email"))}),t.EFF(13," Email "),t.j41(14,"span",34),t.EFF(15),t.k0s()(),t.j41(16,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("role"))}),t.EFF(17," Role "),t.j41(18,"span",34),t.EFF(19),t.k0s()(),t.j41(20,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("phone"))}),t.EFF(21," Phone "),t.j41(22,"span",34),t.EFF(23),t.k0s()(),t.j41(24,"th"),t.EFF(25,"State"),t.k0s(),t.j41(26,"th"),t.EFF(27,"Zone"),t.k0s(),t.j41(28,"th"),t.EFF(29,"Battalion"),t.k0s(),t.j41(30,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("active"))}),t.EFF(31," Active "),t.j41(32,"span",34),t.EFF(33),t.k0s()(),t.j41(34,"th"),t.EFF(35,"Actions"),t.k0s()()(),t.j41(36,"tbody"),t.DNE(37,le,27,16,"tr",35)(38,de,3,0,"tr",36),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(6),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","name"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","email"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","role"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","phone"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(9),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedUsers)("ngForTrackBy",o.trackByUserId),t.R7$(),t.Y8G("ngIf",0===o.paginatedUsers.length)}}function _e(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.AVh("active",o===e.currentPage)("ellipsis",-1===o),t.R7$(),t.SpI(" ",-1===o?"...":o," ")}}function pe(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",43)(1,"div",44),t.EFF(2),t.k0s(),t.j41(3,"div",45)(4,"button",46),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.previousPage())}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,_e,2,5,"button",47),t.j41(7,"button",46),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.nextPage())}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(2),t.E5c(" Showing ",o.showingStart," to ",o.showingEnd," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages)}}function ge(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," First name is required "),t.k0s())}function me(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," First name must contain only letters and spaces "),t.k0s())}function he(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Last name is required "),t.k0s())}function fe(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Last name must contain only letters and spaces "),t.k0s())}function be(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Email is required "),t.k0s())}function Ce(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Please enter a valid email address "),t.k0s())}function Me(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Mobile number is required "),t.k0s())}function Pe(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Mobile number must be 10 digits "),t.k0s())}function ve(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Contact number must be 7 to 13 digits "),t.k0s())}function xe(r,a){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.roleName)}}function Ee(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Role is required "),t.k0s())}function Oe(r,a){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.stateName)}}function ke(r,a){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.rangeName)}}function Fe(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Password is required "),t.k0s())}function Re(r,a){1&r&&(t.j41(0,"div",96),t.EFF(1," Password must be min 8 chars, include uppercase, lowercase and a digit "),t.k0s())}function Te(r,a){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.battalionName)}}function De(r,a){1&r&&t.nrm(0,"span",30)}function Se(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",49),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",50),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",51)(3,"div",52)(4,"h4",53),t.EFF(5),t.k0s(),t.j41(6,"button",54),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",55)(10,"form",56,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateUser():n.addUser())}),t.j41(12,"div",57)(13,"div",58)(14,"label",59),t.EFF(15,"First Name"),t.k0s(),t.j41(16,"input",60,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.firstName,n)||(i.currentUser.firstName=n),s.Njj(n)}),t.k0s(),t.DNE(18,ge,2,0,"div",61)(19,me,2,0,"div",61),t.k0s(),t.j41(20,"div",58)(21,"label",62),t.EFF(22,"Last Name"),t.k0s(),t.j41(23,"input",63,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.lastName,n)||(i.currentUser.lastName=n),s.Njj(n)}),t.k0s(),t.DNE(25,he,2,0,"div",61)(26,fe,2,0,"div",61),t.k0s()(),t.j41(27,"div",58)(28,"label",64),t.EFF(29,"Email"),t.k0s(),t.j41(30,"input",65,3),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.email,n)||(i.currentUser.email=n),s.Njj(n)}),t.k0s(),t.DNE(32,be,2,0,"div",61)(33,Ce,2,0,"div",61),t.k0s(),t.j41(34,"div",58)(35,"label",66),t.EFF(36,"Mobile Number"),t.k0s(),t.j41(37,"input",67,4),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.mobileNo,n)||(i.currentUser.mobileNo=n),s.Njj(n)}),t.k0s(),t.DNE(39,Me,2,0,"div",61)(40,Pe,2,0,"div",61),t.k0s(),t.j41(41,"div",58)(42,"label",68),t.EFF(43,"Contact Number"),t.k0s(),t.j41(44,"input",69),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.contactNo,n)||(i.currentUser.contactNo=n),s.Njj(n)}),t.k0s(),t.DNE(45,ve,2,0,"div",61),t.k0s(),t.j41(46,"div",58)(47,"label",70),t.EFF(48,"Role"),t.k0s(),t.j41(49,"select",71,5),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.roleId,n)||(i.currentUser.roleId=n),s.Njj(n)}),t.j41(51,"option",72),t.EFF(52,"Select Role"),t.k0s(),t.DNE(53,xe,2,2,"option",73),t.k0s(),t.DNE(54,Ee,2,0,"div",61),t.k0s(),t.j41(55,"div",57)(56,"div",58)(57,"label",74),t.EFF(58,"State"),t.k0s(),t.j41(59,"select",75),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.stateId,n)||(i.currentUser.stateId=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.onStateChange(n.currentUser.stateId))}),t.j41(60,"option",72),t.EFF(61,"Select State"),t.k0s(),t.DNE(62,Oe,2,2,"option",73),t.k0s()(),t.j41(63,"div",58)(64,"label",76),t.EFF(65,"Range"),t.k0s(),t.j41(66,"select",77),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.rangeId,n)||(i.currentUser.rangeId=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.onRangeChange(n.currentUser.rangeId??0))}),t.j41(67,"option",72),t.EFF(68,"Select Range"),t.k0s(),t.DNE(69,ke,2,2,"option",73),t.k0s()()(),t.j41(70,"div",58)(71,"label",78),t.EFF(72,"Password"),t.k0s(),t.j41(73,"input",79,6),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.password,n)||(i.currentUser.password=n),s.Njj(n)}),t.k0s(),t.DNE(75,Fe,2,0,"div",61)(76,Re,2,0,"div",61),t.k0s(),t.j41(77,"div",58)(78,"label",80),t.EFF(79,"Joining Date"),t.k0s(),t.j41(80,"input",81),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.joiningDate,n)||(i.currentUser.joiningDate=n),s.Njj(n)}),t.k0s()(),t.j41(81,"div",58)(82,"label",82),t.EFF(83,"End Date"),t.k0s(),t.j41(84,"input",83),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.endDate,n)||(i.currentUser.endDate=n),s.Njj(n)}),t.k0s()(),t.j41(85,"div",58)(86,"label",84),t.EFF(87,"User Image"),t.k0s(),t.j41(88,"input",85),t.bIt("change",function(n){s.eBV(o);const i=t.XpG();return s.Njj(i.onUserImageSelected(n))}),t.k0s()(),t.j41(89,"div",58)(90,"label",86),t.EFF(91,"Battalion"),t.k0s(),t.j41(92,"select",87),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.battalionId,n)||(i.currentUser.battalionId=n),s.Njj(n)}),t.j41(93,"option",72),t.EFF(94,"Select Battalion"),t.k0s(),t.DNE(95,Te,2,2,"option",73),t.k0s()(),t.j41(96,"div",58)(97,"div",88)(98,"label",89)(99,"input",90),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentUser.active,n)||(i.currentUser.active=n),s.Njj(n)}),t.k0s(),t.j41(100,"span",91),t.EFF(101,"Active"),t.k0s()()()(),t.j41(102,"div",92)(103,"button",93),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(104," Close "),t.k0s(),t.j41(105,"button",94),t.DNE(106,De,1,0,"span",95),t.EFF(107),t.k0s()()()()()()()}if(2&r){const o=t.sdS(17),e=t.sdS(24),n=t.sdS(31),i=t.sdS(38),c=t.sdS(50),l=t.sdS(74),p=t.XpG();t.R7$(5),t.JRh(p.isEditMode?"Edit User":"Add User"),t.R7$(11),t.AVh("error",o.touched&&((null==o.errors?null:o.errors.required)||(null==o.errors?null:o.errors.pattern))),t.R50("ngModel",p.currentUser.firstName),t.R7$(2),t.Y8G("ngIf",o.touched&&(null==o.errors?null:o.errors.required)),t.R7$(),t.Y8G("ngIf",o.touched&&(null==o.errors?null:o.errors.pattern)),t.R7$(4),t.AVh("error",e.touched&&((null==e.errors?null:e.errors.required)||(null==e.errors?null:e.errors.pattern))),t.R50("ngModel",p.currentUser.lastName),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.pattern)),t.R7$(4),t.AVh("error",n.touched&&((null==n.errors?null:n.errors.required)||(null==n.errors?null:n.errors.email))),t.R50("ngModel",p.currentUser.email),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.email)),t.R7$(4),t.AVh("error",i.touched&&((null==i.errors?null:i.errors.required)||(null==i.errors?null:i.errors.pattern))),t.R50("ngModel",p.currentUser.mobileNo),t.R7$(2),t.Y8G("ngIf",i.touched&&(null==i.errors?null:i.errors.required)),t.R7$(),t.Y8G("ngIf",i.touched&&(null==i.errors?null:i.errors.pattern)),t.R7$(4),t.R50("ngModel",p.currentUser.contactNo),t.R7$(),t.Y8G("ngIf",p.currentUser.contactNo&&!p.currentUser.contactNo.match("^[0-9]{7,13}$")),t.R7$(4),t.AVh("error",c.touched&&(null==c.errors?null:c.errors.required)),t.R50("ngModel",p.currentUser.roleId),t.R7$(4),t.Y8G("ngForOf",p.roles),t.R7$(),t.Y8G("ngIf",c.touched&&(null==c.errors?null:c.errors.required)),t.R7$(5),t.R50("ngModel",p.currentUser.stateId),t.R7$(3),t.Y8G("ngForOf",p.states),t.R7$(4),t.R50("ngModel",p.currentUser.rangeId),t.R7$(3),t.Y8G("ngForOf",p.ranges),t.R7$(4),t.AVh("error",l.touched&&((null==l.errors?null:l.errors.required)||(null==l.errors?null:l.errors.pattern))),t.R50("ngModel",p.currentUser.password),t.Y8G("required",!p.isEditMode),t.R7$(2),t.Y8G("ngIf",l.touched&&(null==l.errors?null:l.errors.required)),t.R7$(),t.Y8G("ngIf",l.touched&&(null==l.errors?null:l.errors.pattern)),t.R7$(4),t.R50("ngModel",p.currentUser.joiningDate),t.R7$(4),t.R50("ngModel",p.currentUser.endDate),t.R7$(8),t.R50("ngModel",p.currentUser.battalionId),t.R7$(3),t.Y8G("ngForOf",p.battalions),t.R7$(4),t.R50("ngModel",p.currentUser.active),t.R7$(7),t.Y8G("ngIf",p.isLoading),t.R7$(),t.SpI(" ",p.isEditMode?"Update":"Save"," ")}}let Ie=(()=>{var r;class a{constructor(e){this.apiService=e,this.users=[],this.filteredUsers=[],this.paginatedUsers=[],this.showModal=!1,this.currentUser=this.createEmptyUser(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.roles=[],this.states=[],this.districts=[],this.ranges=[],this.battalions=[],this.searchSubject=new U.B,this.Math=Math}ngOnInit(){this.setupSearchDebouncing(),this.loadUsers(),this.loadDropdownData()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearchDebouncing(){this.searchSubscription=this.searchSubject.pipe(X(500),Q()).subscribe(e=>{this.performSearch(e)})}onSearchInput(){this.searchSubject.next(this.searchTerm)}performSearch(e){this.currentPage=1,this.loadUsers()}onSearch(){this.searchSubject.next(this.searchTerm)}clearSearch(){this.searchTerm="",this.currentPage=1,this.loadUsers()}loadUsers(){this.isLoading=!0,this.apiService.getUsers(this.currentPage,this.itemsPerPage,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.users=e.data||[],this.totalItems=e.pagination?.total||0,this.totalPages=e.pagination?.totalPages||0,this.updateFilteredData())},error:e=>{this.isLoading=!1,console.error("Error loading users:",e)}})}loadDropdownData(){this.apiService.getActiveRoles().subscribe({next:e=>{"SUCCESS"===e.status&&(this.roles=e.data||[])},error:e=>{console.error("Error loading roles:",e)}}),this.apiService.getActiveStates().subscribe({next:e=>{"SUCCESS"===e.status&&(this.states=e.data||[])},error:e=>{console.error("Error loading states:",e)}}),this.apiService.getRanges(1,100).subscribe({next:e=>{"SUCCESS"===e.status&&(this.ranges=e.data||[])},error:e=>{console.error("Error loading ranges:",e)}})}loadBattalions(e){this.apiService.getBattalionsByRange(e).subscribe({next:n=>{this.battalions=n.data||[]},error:n=>{console.error("Error loading battalions by range:",n),this.battalions=[]}})}createEmptyUser(){return{id:0,firstName:"",lastName:"",email:"",mobileNo:"",contactNo:"",userImage:"",stateId:void 0,rangeId:void 0,districtId:void 0,roleId:0,password:"",verified:!1,isFirst:!0,joiningDate:"",endDate:"",numberSubdivision:0,numberCircle:0,numberPs:0,numberOp:0,active:!0}}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadUsers()}updateFilteredData(){this.filteredUsers=[...this.users],this.updatePaginatedData()}updatePaginatedData(){this.paginatedUsers=[...this.users]}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadUsers())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadUsers())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadUsers())}getVisiblePages(){const e=[];if(this.totalPages<=5)for(let i=1;i<=this.totalPages;i++)e.push(i);else{const i=Math.floor(2.5);let c=Math.max(1,this.currentPage-i),l=Math.min(this.totalPages,this.currentPage+i);this.currentPage<=i?l=5:this.currentPage>this.totalPages-i&&(c=this.totalPages-5+1),c>1&&(e.push(1),c>2&&e.push(-1));for(let p=c;p<=l;p++)e.push(p);l<this.totalPages&&(l<this.totalPages-1&&e.push(-1),e.push(this.totalPages))}return e}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadUsers()}getSortByField(){return{id:"id",name:"firstName",email:"email",role:"roleId",phone:"mobileNo",department:"districtId",active:"active"}[this.sortColumn]||"firstName"}showAddUserModal(){this.isEditMode=!1,this.currentUser=this.createEmptyUser(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentUser=this.createEmptyUser(),this.isEditMode=!1,this.districts=[]}editUser(e){this.isEditMode=!0,this.currentUser={...e},this.showModal=!0}toggleUserStatus(e){this.apiService.toggleUserStatus(e.id,!e.active).subscribe({next:n=>{if("SUCCESS"===n.status){const i=this.users.findIndex(c=>c.id===e.id);-1!==i&&(this.users[i].active=!e.active),this.updateFilteredData()}},error:n=>{console.error("Error toggling user status:",n)}})}onRangeChange(e){this.currentUser.rangeId=e,this.loadBattalions(e)}onStateChange(e){e?this.apiService.getRanges(1,100,"","","",e).subscribe({next:n=>{this.ranges=n.data||[]},error:n=>{console.error("Error loading ranges for state:",n),this.ranges=[]}}):this.ranges=[]}onUserImageSelected(e){const n=e.target.files&&e.target.files[0];if(!n)return;if(!["image/jpeg","image/png","image/jpg"].includes(n.type))return void console.error("Invalid file type for user image");const c=new FileReader;c.onload=()=>{this.currentUser.userImage=c.result},c.readAsDataURL(n)}addUser(){this.isLoading||(this.isLoading=!0,this.apiService.createUser(this.currentUser).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadUsers())},error:e=>{this.isLoading=!1,console.error("Error creating user:",e)}}))}updateUser(){this.isLoading||(this.isLoading=!0,this.apiService.updateUser(this.currentUser.id,this.currentUser).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.currentUser.password&&""!==this.currentUser.password.trim()?this.changePassword(this.currentUser.id,this.currentUser.password):(this.closeModal(),this.loadUsers()))},error:e=>{this.isLoading=!1,console.error("Error updating user:",e)}}))}changePassword(e,n){!n||n.length<6?alert("Password must be at least 6 characters long"):(this.isLoading=!0,this.apiService.changeUserPassword(e,n).subscribe({next:i=>{this.isLoading=!1,"SUCCESS"===i.status?(alert("Password updated successfully"),this.closeModal(),this.loadUsers()):alert(i.message||"Password update failed")},error:i=>{this.isLoading=!1,console.error("Error changing password:",i),alert(i.error?.message||"Failed to change password")}}))}get showingStart(){return(this.currentPage-1)*this.itemsPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.totalItems)}getFullName(e){return`${e.firstName} ${e.lastName}`.trim()}getRoleName(e){const n=this.roles.find(i=>i.id===e);return n?n.roleName:"Unknown"}getStateName(e){if(!e)return"-";const n=this.states.find(i=>i.id===e);return n?n.stateName:"Unknown"}getDistrictName(e){if(!e)return"-";const n=this.districts.find(i=>i.id===e);return n?n.districtName:"Unknown"}getRangeName(e){if(!e)return"-";const n=this.ranges.find(i=>i.id===e);return n?n.rangeName:"Unknown"}getBattalionName(e){if(!e)return"-";const n=this.battalions.find(i=>i.id===e);return n?n.battalionName:"Unknown"}trackByUserId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-users"]],standalone:!1,decls:36,vars:6,consts:[["userForm","ngForm"],["firstName","ngModel"],["lastName","ngModel"],["userEmail","ngModel"],["mobileNo","ngModel"],["userRole","ngModel"],["password","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search users...",3,"ngModelChange","input","keyup.enter","ngModel"],[1,"clear-search-btn","p-1",3,"click"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"role-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","10",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","ellipsis","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","firstName",1,"required"],["type","text","id","firstName","name","firstName","required","","pattern","^[A-Za-z\\s]+$",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","lastName",1,"required"],["type","text","id","lastName","name","lastName","required","","pattern","^[A-Za-z\\s]+$",1,"form-control",3,"ngModelChange","ngModel"],["for","userEmail",1,"required"],["type","email","id","userEmail","name","userEmail","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["for","mobileNo",1,"required"],["type","tel","id","mobileNo","name","mobileNo","required","","pattern","[0-9]{10}","maxlength","10",1,"form-control",3,"ngModelChange","ngModel"],["for","contactNo"],["type","tel","id","contactNo","name","contactNo","pattern","[0-9]{7,13}",1,"form-control",3,"ngModelChange","ngModel"],["for","userRole",1,"required"],["id","userRole","name","userRole","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","state"],["id","state","name","state",1,"form-control",3,"ngModelChange","change","ngModel"],["for","range"],["id","range","name","range",1,"form-control",3,"ngModelChange","change","ngModel"],["for","password",1,"required"],["type","password","id","password","name","password","pattern","(?=.{8,})(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).*",1,"form-control",3,"ngModelChange","ngModel","required"],["for","joiningDate",1,"required"],["type","date","id","joiningDate","name","joiningDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate","name","endDate","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["for","userImage"],["type","file","id","userImage","name","userImage","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"change"],["for","battalion"],["id","battalion","name","battalion",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","userActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn"],["class","spinner",4,"ngIf"],[1,"error-message"],[3,"value"]],template:function(n,i){1&n&&(t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10),t.EFF(4,"\u{1f465}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Users"),t.k0s()(),t.j41(7,"button",11),t.bIt("click",function(){return i.showAddUserModal()}),t.EFF(8,"Add User"),t.k0s()(),t.j41(9,"div",12)(10,"div",13)(11,"label",14),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",15),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",16),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",17),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",18),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",19),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",20),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",21)(27,"label",22),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",23),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearchInput()})("keyup.enter",function(){return i.onSearch()}),t.k0s(),t.j41(30,"button",24),t.bIt("click",function(){return i.clearSearch()}),t.EFF(31,"Clear"),t.k0s()()(),t.DNE(32,ce,4,0,"div",25)(33,ue,39,21,"div",26)(34,pe,9,6,"div",27),t.k0s(),t.DNE(35,Se,108,45,"div",28)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(3),t.Y8G("ngIf",i.isLoading),t.R7$(),t.Y8G("ngIf",!i.isLoading),t.R7$(),t.Y8G("ngIf",!i.isLoading&&i.users.length>0),t.R7$(),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.tU,d.R_,d.Dg,d.vS,d.cV],styles:[".users-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b;font-size:1.75rem;font-weight:700;margin:0}.add-user-btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.add-user-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8}.users-table-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;color:#374151;font-weight:600;padding:1rem;text-align:left;border-bottom:1px solid #e5e7eb}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f5f9;color:#1e293b}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.inactive[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border:none;border-radius:4px;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .2s ease}.action-btn.edit[_ngcontent-%COMP%]{background:#fbbf24;color:#fff}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#f59e0b}.action-btn.delete[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#dc2626}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.users-table[_ngcontent-%COMP%]{min-width:800px}@media (max-width: 992px){.users-container[_ngcontent-%COMP%]{padding:1.5rem}.users-table[_ngcontent-%COMP%]{min-width:700px}}@media (max-width: 768px){.users-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.add-user-btn[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem}.users-table-card[_ngcontent-%COMP%]{overflow-x:auto;margin:0 -1rem;border-radius:0}.users-table[_ngcontent-%COMP%]{min-width:600px;font-size:14px}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.action-btn[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}.status-badge[_ngcontent-%COMP%]{font-size:.7rem;padding:.2rem .5rem}}@media (max-width: 576px){.users-container[_ngcontent-%COMP%]{padding:.5rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.users-table[_ngcontent-%COMP%]{min-width:500px;font-size:12px}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem}.users-table-card[_ngcontent-%COMP%]{margin:0 -.5rem}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;margin:0 auto}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}.close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:25px 30px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{max-width:100%}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}}"]}))}return r(),a})(),Ct=(()=>{var r;class a{constructor(){this.settings={notifications:!0,darkMode:!1,language:"en",autoSave:!0}}updateSetting(e,n){this.settings[e]=n}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275cmp=t.VBU({type:a,selectors:[["app-settings"]],decls:46,vars:4,consts:[["notificationsInput",""],["darkModeInput",""],["languageSelect",""],["autoSaveInput",""],[1,"settings-container"],[1,"page-header"],[1,"settings-grid"],[1,"settings-card"],[1,"setting-item"],[1,"setting-label"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"setting-select",3,"change","value"],["value","en"],["value","es"],["value","fr"]],template:function(n,i){if(1&n){const c=t.RV6();t.rj2(0,"div",4)(1,"div",5)(2,"h1"),t.EFF(3,"Settings"),t.eux(),t.rj2(4,"p"),t.EFF(5,"Manage your application preferences and configurations."),t.eux()(),t.rj2(6,"div",6)(7,"div",7)(8,"h3"),t.EFF(9,"Notifications"),t.eux(),t.rj2(10,"div",8)(11,"label",9)(12,"input",10,0),t.VwU("change",function(){s.eBV(c);const p=t.sdS(13);return s.Njj(i.updateSetting("notifications",p.checked))}),t.eux(),t.Hgh(14,"span",11),t.EFF(15," Enable push notifications "),t.eux()()(),t.rj2(16,"div",7)(17,"h3"),t.EFF(18,"Appearance"),t.eux(),t.rj2(19,"div",8)(20,"label",9)(21,"input",10,1),t.VwU("change",function(){s.eBV(c);const p=t.sdS(22);return s.Njj(i.updateSetting("darkMode",p.checked))}),t.eux(),t.Hgh(23,"span",11),t.EFF(24," Dark mode "),t.eux()()(),t.rj2(25,"div",7)(26,"h3"),t.EFF(27,"Language"),t.eux(),t.rj2(28,"div",8)(29,"select",12,2),t.VwU("change",function(){s.eBV(c);const p=t.sdS(30);return s.Njj(i.updateSetting("language",p.value))}),t.rj2(31,"option",13),t.EFF(32,"English"),t.eux(),t.rj2(33,"option",14),t.EFF(34,"Spanish"),t.eux(),t.rj2(35,"option",15),t.EFF(36,"French"),t.eux()()()(),t.rj2(37,"div",7)(38,"h3"),t.EFF(39,"Auto Save"),t.eux(),t.rj2(40,"div",8)(41,"label",9)(42,"input",10,3),t.VwU("change",function(){s.eBV(c);const p=t.sdS(43);return s.Njj(i.updateSetting("autoSave",p.checked))}),t.eux(),t.Hgh(44,"span",11),t.EFF(45," Automatically save changes "),t.eux()()()()()}2&n&&(t.R7$(12),t.Avn("checked",i.settings.notifications),t.R7$(9),t.Avn("checked",i.settings.darkMode),t.R7$(8),t.Avn("value",i.settings.language),t.R7$(13),t.Avn("checked",i.settings.autoSave))},dependencies:[m.MD],styles:['.settings-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b;font-size:1.75rem;font-weight:700;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem}.settings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.settings-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 1px 3px #0000001a}.settings-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;font-size:1.125rem;font-weight:600;margin-bottom:1rem}.setting-item[_ngcontent-%COMP%]{margin-bottom:1rem}.setting-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;color:#374151;font-weight:500}.setting-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.checkmark[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #d1d5db;border-radius:4px;margin-right:.75rem;position:relative;transition:all .2s ease}.setting-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.setting-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:700}.setting-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .3s ease}.setting-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:1rem}.settings-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}))}return r(),a})(),Mt=(()=>{var r;class a{constructor(e,n){this.authService=e,this.router=n,this.user=null}ngOnInit(){this.loadUserProfile()}loadUserProfile(){if(this.authService.user$.subscribe(e=>{this.user=e}),!this.user){const e=localStorage.getItem("email")||localStorage.getItem("userEmail"),n=localStorage.getItem("firstName"),i=localStorage.getItem("lastName"),c=localStorage.getItem("roleName");this.user={id:0,firstName:n||"",lastName:i||"",email:e||"",role:{id:0,roleName:c||""},permissions:[]}}}getUserDisplayName(){if(this.user?.firstName)return this.user.firstName;const e=localStorage.getItem("firstName");if(e)return e;const n=this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail");return n?n.split("@")[0]:"User"}getUserInitial(){const e=this.user?.firstName||localStorage.getItem("firstName");if(e)return e.substring(0,2).toUpperCase();const n=this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail");return n?n.substring(0,2).toUpperCase():"US"}getUserEmail(){return this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail")||""}getUserRole(){return this.user?.role?.roleName||localStorage.getItem("roleName")||""}getUserJoinDate(){if(this.user?.created_date)return new Date(this.user.created_date).toLocaleString();const e=localStorage.getItem("joinDate");return e?new Date(e).toLocaleString():"Date not Available"}getUserAvatar(){return"https://ui-avatars.com/api/?name="+encodeURIComponent(this.getUserDisplayName())+"&background=6366f1&color=fff&size=80"}onSave(){console.log("Profile updated:",this.user)}goback(){this.router.navigate(["/dashboard"])}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(E.u),t.rXU(f.Ix))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-profile"]],decls:31,vars:5,consts:[[1,"profile-container"],[1,"page-header"],[1,"profile-content"],[1,"profile-card"],[1,"profile-avatar"],[1,"avatar-placeholder"],[1,"profile-form"],[1,"form-row"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","Enter your full name",3,"value"],["for","email"],["type","email","id","email","name","email","placeholder","Enter your email",3,"value"],["for","role"],["type","text","id","role","readonly","",1,"readonly",3,"value"],["for","joinDate"],["type","text","id","joinDate","readonly","",1,"readonly",3,"value"],[1,"form-actions"],["type","button",1,"save-btn",3,"click"]],template:function(n,i){1&n&&(t.rj2(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Profile"),t.eux()(),t.rj2(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),t.EFF(8),t.eux()(),t.rj2(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),t.EFF(13,"Full Name"),t.eux(),t.Hgh(14,"input",10),t.eux(),t.rj2(15,"div",8)(16,"label",11),t.EFF(17,"Email Address"),t.eux(),t.Hgh(18,"input",12),t.eux()(),t.rj2(19,"div",7)(20,"div",8)(21,"label",13),t.EFF(22,"Role"),t.eux(),t.Hgh(23,"input",14),t.eux(),t.rj2(24,"div",8)(25,"label",15),t.EFF(26,"Member Since"),t.eux(),t.Hgh(27,"input",16),t.eux()(),t.rj2(28,"div",17)(29,"button",18),t.VwU("click",function(){return i.goback()}),t.EFF(30," Back to Dashboard "),t.eux()()()()()()),2&n&&(t.R7$(8),t.SpI(" ",i.getUserInitial()," "),t.R7$(6),t.Avn("value",i.getUserDisplayName()),t.R7$(4),t.Avn("value",i.getUserEmail()),t.R7$(5),t.Avn("value",i.getUserRole()),t.R7$(4),t.Avn("value",i.getUserJoinDate()))},dependencies:[m.MD,d.YN],styles:[".profile-container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b;font-size:1.75rem;font-weight:700;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 1px 3px #0000001a}.profile-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem}.avatar-placeholder[_ngcontent-%COMP%]{width:100px;height:100px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin-bottom:1rem}.change-avatar-btn[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:none;padding:.5rem 1rem;border-radius:6px;font-size:.875rem;cursor:pointer;transition:background-color .2s ease}.change-avatar-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.profile-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#374151;font-weight:500;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.save-btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.save-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8}.cancel-btn[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"]}))}return r(),a})();function je(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){s.eBV(o);const n=t.XpG().$implicit,i=t.XpG();return s.Njj(i.deactivateRole(n))}),t.EFF(1," Deactivate "),t.k0s()}if(2&r){const o=t.XpG().$implicit;t.AVh("activate",!o.active)}}function ye(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",37),t.bIt("click",function(){s.eBV(o);const n=t.XpG().$implicit,i=t.XpG();return s.Njj(i.activateRole(n))}),t.EFF(1," Activate "),t.k0s()}}function we(r,a){1&r&&(t.j41(0,"div",59),t.EFF(1,"Role name is required"),t.k0s())}function Ne(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",38),t.bIt("click",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.closeRoleModal())}),t.j41(1,"div",39),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",40)(3,"div",41)(4,"h4",42),t.EFF(5),t.k0s(),t.j41(6,"button",43),t.bIt("click",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.closeRoleModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",44)(10,"form",45,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.isRoleEditMode?n.updateRole():n.addRole())}),t.j41(12,"div",46)(13,"label",47),t.EFF(14,"Role Name "),t.j41(15,"span",48),t.EFF(16,"*"),t.k0s()(),t.j41(17,"input",49,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(2);return t.DH7(i.currentRole.roleName,n)||(i.currentRole.roleName=n),s.Njj(n)}),t.k0s(),t.DNE(19,we,2,0,"div",50),t.k0s(),t.j41(20,"div",46)(21,"label",51),t.EFF(22,"Description"),t.k0s(),t.j41(23,"input",52),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(2);return t.DH7(i.currentRole.description,n)||(i.currentRole.description=n),s.Njj(n)}),t.k0s()(),t.j41(24,"div",46)(25,"label",53)(26,"input",54),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(2);return t.DH7(i.currentRole.active,n)||(i.currentRole.active=n),s.Njj(n)}),t.k0s(),t.j41(27,"span",55),t.EFF(28,"Active"),t.k0s()()(),t.j41(29,"div",56)(30,"button",57),t.bIt("click",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.closeRoleModal())}),t.EFF(31,"Close"),t.k0s(),t.j41(32,"button",58),t.EFF(33),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(18),n=t.XpG(2);t.R7$(5),t.JRh(n.isRoleEditMode?"Edit Role":"Add Role"),t.R7$(12),t.R50("ngModel",n.currentRole.roleName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",n.currentRole.description),t.R7$(3),t.R50("ngModel",n.currentRole.active),t.R7$(6),t.Y8G("disabled",o.invalid),t.R7$(),t.JRh(n.isRoleEditMode?"Update":"Save")}}function Be(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",29),t.EFF(7),t.k0s()(),t.j41(8,"td")(9,"div",30)(10,"button",31),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.showEditRoleModal(n))}),t.EFF(11,"Edit"),t.k0s(),t.j41(12,"button",32),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.navigateToRolePermissions(n.id))}),t.EFF(13,"Permissions"),t.k0s(),t.DNE(14,je,2,2,"button",33)(15,ye,2,0,"button",34),t.k0s(),t.DNE(16,Ne,34,7,"div",35),t.k0s()()}if(2&r){const o=a.$implicit,e=t.XpG();t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.roleName),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(7),t.Y8G("ngIf",o.active),t.R7$(),t.Y8G("ngIf",!o.active),t.R7$(),t.Y8G("ngIf",e.showRoleModal)}}function Ue(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",60),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}let Ae=(()=>{var r;class a{constructor(e,n){this.apiService=e,this.router=n,this.roles=[],this.filteredRoles=[],this.paginatedRoles=[],this.currentRole=this.createEmptyRole(),this.showRoleModal=!1,this.isRoleEditMode=!1,this.searchTerm="",this.pageSize=10,this.currentPage=1,this.totalRoles=0,this.originalTotalRoles=0,this.sortColumn="",this.sortDirection="asc"}ngOnInit(){this.loadRoles()}loadRoles(){this.apiService.getRoles(1,100).subscribe({next:e=>{this.roles=e.data||[],this.filteredRoles=[...this.roles],this.totalRoles=this.filteredRoles.length,this.updatePaginatedRoles()},error:e=>{this.roles=[],this.filteredRoles=[],this.totalRoles=0,this.updatePaginatedRoles()}})}createEmptyRole(){return{id:0,roleName:"",description:"",active:!0}}showAddRoleModal(){this.isRoleEditMode=!1,this.currentRole=this.createEmptyRole(),this.showRoleModal=!0}showEditRoleModal(e){this.isRoleEditMode=!0,this.currentRole={...e},this.showRoleModal=!0}closeRoleModal(){this.showRoleModal=!1,this.currentRole=this.createEmptyRole(),this.isRoleEditMode=!1}addRole(){this.apiService.createRole(this.currentRole).subscribe({next:e=>{"SUCCESS"===e.status&&(this.closeRoleModal(),this.loadRoles())}})}updateRole(){this.apiService.updateRole(this.currentRole.id,this.currentRole).subscribe({next:e=>{"SUCCESS"===e.status&&(this.closeRoleModal(),this.loadRoles())}})}deleteRole(e){confirm("Are you sure you want to delete this role?")&&this.apiService.deleteRole(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadRoles()}})}activateRole(e){this.apiService.activateRole(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadRoles()}})}deactivateRole(e){this.apiService.deactivateRole(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadRoles()}})}onSearch(){if(this.searchTerm.trim()){const e=this.searchTerm.toLowerCase();this.filteredRoles=this.roles.filter(n=>n.id.toString().includes(e)||n.roleName.toLowerCase().includes(e)||(n.active?"yes":"no").includes(e))}else this.filteredRoles=[...this.roles];this.totalRoles=this.filteredRoles.length,this.currentPage=1,this.updatePaginatedRoles()}onPageSizeChange(){this.currentPage=1,this.updatePaginatedRoles()}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.filteredRoles.sort((n,i)=>{let c,l;switch(e){case"id":c=n.id,l=i.id;break;case"roleName":c=n.roleName.toLowerCase(),l=i.roleName.toLowerCase();break;case"active":c=n.active,l=i.active;break;default:return 0}return c<l?"asc"===this.sortDirection?-1:1:c>l?"asc"===this.sortDirection?1:-1:0}),this.updatePaginatedRoles()}updatePaginatedRoles(){const e=(this.currentPage-1)*this.pageSize;this.paginatedRoles=this.filteredRoles.slice(e,e+this.pageSize)}goToPage(e){e>=1&&e<=this.getTotalPages()&&(this.currentPage=e,this.updatePaginatedRoles())}getTotalPages(){return Math.ceil(this.totalRoles/this.pageSize)}getVisiblePages(){const e=this.getTotalPages(),n=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(e,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1));for(let p=c;p<=l;p++)n.push(p);return n}getStartRecord(){return 0===this.totalRoles?0:(this.currentPage-1)*this.pageSize+1}getEndRecord(){return Math.min(this.currentPage*this.pageSize,this.totalRoles)}navigateToRolePermissions(e){this.router.navigate(["/dashboard/role-permissions"],{queryParams:{roleId:e}})}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G),t.rXU(f.Ix))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-role"]],standalone:!1,decls:59,vars:18,consts:[["roleForm","ngForm"],["roleNameInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search roles...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"permissions-btn",3,"click"],["class","deactivate-btn",3,"activate","click",4,"ngIf"],["class","activate-btn",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"deactivate-btn",3,"click"],[1,"activate-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-2"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","roleName"],[1,"required"],["type","text","id","roleName","name","roleName","required","","placeholder","Enter role name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","description"],["type","text","id","description","name","description","placeholder","Enter description",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],[1,"error-message"],[1,"page-btn",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Roles"),t.k0s()(),t.j41(7,"button",6),t.bIt("click",function(){return i.showAddRoleModal()}),t.EFF(8,"Add Role"),t.k0s()(),t.j41(9,"div",7)(10,"div",8)(11,"label",9),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",10),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",11),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",12),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",13),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",14),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",15),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",16)(27,"label",17),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",18),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",22),t.EFF(37),t.k0s()(),t.j41(38,"th",21),t.bIt("click",function(){return i.sortTable("roleName")}),t.EFF(39," Role Name "),t.j41(40,"span",22),t.EFF(41),t.k0s()(),t.j41(42,"th",21),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(43," Active "),t.j41(44,"span",22),t.EFF(45),t.k0s()(),t.j41(46,"th"),t.EFF(47,"Edit"),t.k0s()()(),t.j41(48,"tbody"),t.DNE(49,Be,17,10,"tr",23),t.k0s()()(),t.j41(50,"div",24)(51,"div",25),t.EFF(52),t.k0s(),t.j41(53,"div",26)(54,"button",27),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(55," Previous "),t.k0s(),t.DNE(56,Ue,2,3,"button",28),t.j41(57,"button",27),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(58," Next "),t.k0s()()()()),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","roleName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedRoles),t.R7$(3),t.E5c(" Showing ",i.getStartRecord()," to ",i.getEndRecord()," of ",i.totalRoles," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.getTotalPages()))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:['.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;background:#1e1e1e26;backdrop-filter:blur(.5px);-webkit-backdrop-filter:blur(4px);z-index:2000;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-dialog[_ngcontent-%COMP%]{z-index:2100;position:relative;margin:0 auto;max-width:500px;width:100%;box-shadow:0 8px 32px #0000002e}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff3;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);z-index:1000}.modal-dialog[_ngcontent-%COMP%]{margin:100px auto;max-width:500px}.modal-content[_ngcontent-%COMP%]{background:#fff}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}.permissions-btn[_ngcontent-%COMP%]{position:relative;overflow:hidden}.permissions-btn[_ngcontent-%COMP%]:before{content:"\\1f510";margin-right:6px;font-size:10px}.permissions-btn[_ngcontent-%COMP%]:hover:before{animation:_ngcontent-%COMP%_bounce .6s}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-3px)}60%{transform:translateY(-2px)}}']}))}return r(),a})();function $e(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"span",32),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"div",33)(14,"button",34),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editPermission(n))}),t.EFF(15,"Edit"),t.k0s(),t.j41(16,"button",35),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.togglePermissionStatus(n))}),t.EFF(17),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.permissionName),t.R7$(2),t.JRh(o.permissionCode),t.R7$(2),t.JRh(o.permissionUrl),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Le(r,a){1&r&&(t.j41(0,"tr")(1,"td",36),t.EFF(2,"No permissions found"),t.k0s()())}function Ge(r,a){1&r&&(t.j41(0,"tr")(1,"td",36),t.EFF(2,"Loading permissions..."),t.k0s()())}function Ve(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",29),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.Y8G("disabled",-1===o||e.isLoading),t.R7$(),t.SpI(" ",-1===o?"...":o," ")}}function qe(r,a){1&r&&(t.j41(0,"div",62),t.EFF(1," Permission name is required "),t.k0s())}function Ye(r,a){1&r&&(t.j41(0,"div",62),t.EFF(1," Permission code is required "),t.k0s())}function We(r,a){1&r&&t.nrm(0,"span",63)}function ze(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updatePermission():n.addPermission())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"Name "),t.j41(15,"span",47),t.EFF(16,"*"),t.k0s()(),t.j41(17,"input",48,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentPermission.permissionName,n)||(i.currentPermission.permissionName=n),s.Njj(n)}),t.k0s(),t.DNE(19,qe,2,0,"div",49),t.k0s(),t.j41(20,"div",45)(21,"label",50),t.EFF(22,"Code "),t.j41(23,"span",47),t.EFF(24,"*"),t.k0s()(),t.j41(25,"input",51,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentPermission.permissionCode,n)||(i.currentPermission.permissionCode=n),s.Njj(n)}),t.k0s(),t.DNE(27,Ye,2,0,"div",49),t.k0s(),t.j41(28,"div",45)(29,"label",52),t.EFF(30,"URL"),t.k0s(),t.j41(31,"input",53),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentPermission.permissionUrl,n)||(i.currentPermission.permissionUrl=n),s.Njj(n)}),t.k0s()(),t.j41(32,"div",45)(33,"div",54)(34,"label",55)(35,"input",56),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentPermission.active,n)||(i.currentPermission.active=n),s.Njj(n)}),t.k0s(),t.j41(36,"span",57),t.EFF(37,"Active"),t.k0s()()()(),t.j41(38,"div",58)(39,"button",59),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(40," Close "),t.k0s(),t.j41(41,"button",60),t.DNE(42,We,1,0,"span",61),t.EFF(43),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(18),n=t.sdS(26),i=t.XpG();t.R7$(5),t.JRh(i.isEditMode?"Edit Permission":"Add Permission"),t.R7$(12),t.R50("ngModel",i.currentPermission.permissionName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(6),t.R50("ngModel",i.currentPermission.permissionCode),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",i.currentPermission.permissionUrl),t.R7$(4),t.R50("ngModel",i.currentPermission.active),t.R7$(6),t.Y8G("disabled",o.invalid||i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(),t.SpI(" ",i.isEditMode?"Update":"Save"," ")}}let Ke=(()=>{var r;class a{constructor(e){this.apiService=e,this.permissions=[],this.searchTerm="",this.currentPage=1,this.pageSize=10,this.totalPages=1,this.totalItems=0,this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentPermission={id:0,permissionName:"",permissionCode:"",permissionUrl:"",active:!0},this.sortColumn="",this.sortDirection="asc"}ngOnInit(){this.loadPermissions()}loadPermissions(){this.isLoading=!0,this.apiService.getPermissions(this.currentPage,this.pageSize,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.permissions=e.data||[],this.totalItems=e.pagination?.total||0,this.totalPages=e.pagination?.totalPages||0)},error:e=>{this.isLoading=!1,console.error("Error loading permissions:",e)}})}onSearch(){this.currentPage=1,this.loadPermissions()}onPageSizeChange(){this.currentPage=1,this.loadPermissions()}get paginatedPermissions(){return this.permissions}get showingStart(){return(this.currentPage-1)*this.pageSize+1}get showingEnd(){return Math.min(this.currentPage*this.pageSize,this.totalItems)}showAddPermissionModal(){this.currentPermission={id:0,permissionName:"",permissionCode:"",permissionUrl:"",active:!0},this.isEditMode=!1,this.showModal=!0}editPermission(e){this.currentPermission={...e},this.isEditMode=!0,this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.currentPermission={id:0,permissionName:"",permissionCode:"",permissionUrl:"",active:!0}}togglePermissionStatus(e){this.apiService.togglePermissionStatus(e.id,!e.active).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadPermissions()},error:n=>{console.error("Error toggling permission status:",n)}})}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadPermissions()}getSortByField(){return{id:"id",name:"permissionName",code:"permissionCode",url:"permissionUrl",active:"active"}[this.sortColumn]||"permissionName"}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadPermissions())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadPermissions())}goToPage(e){this.currentPage=e,this.loadPermissions()}getVisiblePages(){const e=this.totalPages,n=this.currentPage,c=[],l=[];for(let p=Math.max(2,n-2);p<=Math.min(e-1,n+2);p++)c.push(p);return n-2>2?l.push(1,-1):l.push(1),l.push(...c),n+2<e-1?l.push(-1,e):l.push(e),l.filter((p,C,v)=>v.indexOf(p)===C&&p>0)}addPermission(){this.isLoading||(this.isLoading=!0,this.apiService.createPermission(this.currentPermission).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadPermissions())},error:e=>{this.isLoading=!1,console.error("Error creating permission:",e)}}))}updatePermission(){this.isLoading||(this.isLoading=!0,this.apiService.updatePermission(this.currentPermission.id,this.currentPermission).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadPermissions())},error:e=>{this.isLoading=!1,console.error("Error updating permission:",e)}}))}trackByPermissionId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-permissions"]],standalone:!1,decls:70,vars:28,consts:[["permissionForm","ngForm"],["permissionNameInput","ngModel"],["permissionCodeInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search permissions...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","6",1,"no-data"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-3"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","permissionName"],[1,"required"],["type","text","id","permissionName","name","permissionName","required","","placeholder","Enter permission name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","permissionCode"],["type","text","id","permissionCode","name","permissionCode","required","","placeholder","Enter permission code",1,"form-control",3,"ngModelChange","ngModel"],["for","permissionUrl"],["type","text","id","permissionUrl","name","permissionUrl","placeholder","Enter permission URL",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","permissionActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(n,i){1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f510}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Permissions"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return i.showAddPermissionModal()}),t.EFF(8,"Add Permission"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",20)(31,"table",21)(32,"thead")(33,"tr")(34,"th",22),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",23),t.EFF(37),t.k0s()(),t.j41(38,"th",22),t.bIt("click",function(){return i.sortTable("name")}),t.EFF(39," Permission Name "),t.j41(40,"span",23),t.EFF(41),t.k0s()(),t.j41(42,"th",22),t.bIt("click",function(){return i.sortTable("code")}),t.EFF(43," Permission Code "),t.j41(44,"span",23),t.EFF(45),t.k0s()(),t.j41(46,"th",22),t.bIt("click",function(){return i.sortTable("url")}),t.EFF(47," Permission URL "),t.j41(48,"span",23),t.EFF(49),t.k0s()(),t.j41(50,"th",22),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(51," Active "),t.j41(52,"span",23),t.EFF(53),t.k0s()(),t.j41(54,"th"),t.EFF(55,"Edit"),t.k0s()()(),t.j41(56,"tbody"),t.DNE(57,$e,18,12,"tr",24)(58,Le,3,0,"tr",25)(59,Ge,3,0,"tr",25),t.k0s()()(),t.j41(60,"div",26)(61,"div",27),t.EFF(62),t.k0s(),t.j41(63,"div",28)(64,"button",29),t.bIt("click",function(){return i.previousPage()}),t.EFF(65," Previous "),t.k0s(),t.DNE(66,Ve,2,4,"button",30),t.j41(67,"button",29),t.bIt("click",function(){return i.nextPage()}),t.EFF(68," Next "),t.k0s()()()(),t.DNE(69,ze,44,10,"div",31)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","name"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","code"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","url"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedPermissions)("ngForTrackBy",i.trackByPermissionId),t.R7$(),t.Y8G("ngIf",0===i.paginatedPermissions.length&&!i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(3),t.E5c(" Showing ",i.showingStart," to ",i.showingEnd," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage||i.isLoading),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages||i.isLoading),t.R7$(2),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin:100px auto;max-width:500px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:6px;width:500px;max-width:700px}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),a})();function Xe(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",33),t.EFF(9),t.k0s()(),t.j41(10,"td")(11,"span",34),t.EFF(12),t.k0s()(),t.j41(13,"td")(14,"div",35)(15,"button",36),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editMenu(n))}),t.EFF(16,"Edit"),t.k0s(),t.j41(17,"button",37),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.toggleMenuStatus(n))}),t.EFF(18),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.menuName),t.R7$(2),t.JRh(o.menuUrl),t.R7$(3),t.JRh(o.priority),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Qe(r,a){1&r&&(t.j41(0,"tr")(1,"td",38),t.EFF(2,"No menus found"),t.k0s()())}function He(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.Y8G("disabled",-1===o),t.R7$(),t.SpI(" ",-1===o?"...":o," ")}}function Je(r,a){1&r&&(t.j41(0,"div",63),t.EFF(1," Menu name is required "),t.k0s())}function Ze(r,a){1&r&&(t.j41(0,"div",63),t.EFF(1," Menu URL is required "),t.k0s())}function tn(r,a){1&r&&(t.j41(0,"div",63),t.EFF(1," Priority is required "),t.k0s())}function en(r,a){1&r&&(t.j41(0,"div",63),t.EFF(1," Priority must be at least 1 "),t.k0s())}function nn(r,a){1&r&&t.nrm(0,"span",64)}function on(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",39),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",40),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",41)(3,"div",42)(4,"h4",43),t.EFF(5),t.k0s(),t.j41(6,"button",44),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",45)(10,"form",46,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateMenu():n.addMenu())}),t.j41(12,"div",47)(13,"label",48),t.EFF(14,"Menu Name"),t.k0s(),t.j41(15,"input",49,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentMenu.menuName,n)||(i.currentMenu.menuName=n),s.Njj(n)}),t.k0s(),t.DNE(17,Je,2,0,"div",50),t.k0s(),t.j41(18,"div",47)(19,"label",51),t.EFF(20,"Menu URL"),t.k0s(),t.j41(21,"input",52,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentMenu.menuUrl,n)||(i.currentMenu.menuUrl=n),s.Njj(n)}),t.k0s(),t.DNE(23,Ze,2,0,"div",50),t.k0s(),t.j41(24,"div",47)(25,"label",53),t.EFF(26,"Priority"),t.k0s(),t.j41(27,"input",54,3),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentMenu.priority,n)||(i.currentMenu.priority=n),s.Njj(n)}),t.k0s(),t.DNE(29,tn,2,0,"div",50)(30,en,2,0,"div",50),t.k0s(),t.j41(31,"div",47)(32,"div",55)(33,"label",56)(34,"input",57),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentMenu.active,n)||(i.currentMenu.active=n),s.Njj(n)}),t.k0s(),t.j41(35,"span",58),t.EFF(36,"Active"),t.k0s()()()(),t.j41(37,"div",59)(38,"button",60),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(39," Close "),t.k0s(),t.j41(40,"button",61),t.DNE(41,nn,1,0,"span",62),t.EFF(42),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(16),n=t.sdS(22),i=t.sdS(28),c=t.XpG();t.R7$(5),t.JRh(c.isEditMode?"Edit Menu":"Add Menu"),t.R7$(10),t.AVh("error",e.touched&&(null==e.errors?null:e.errors.required)),t.R50("ngModel",c.currentMenu.menuName),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(4),t.AVh("error",n.touched&&(null==n.errors?null:n.errors.required)),t.R50("ngModel",c.currentMenu.menuUrl),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(4),t.AVh("error",i.touched&&((null==i.errors?null:i.errors.required)||(null==i.errors?null:i.errors.min))),t.R50("ngModel",c.currentMenu.priority),t.R7$(2),t.Y8G("ngIf",i.touched&&(null==i.errors?null:i.errors.required)),t.R7$(),t.Y8G("ngIf",i.touched&&(null==i.errors?null:i.errors.min)),t.R7$(4),t.R50("ngModel",c.currentMenu.active),t.R7$(6),t.Y8G("disabled",o.invalid||c.isLoading),t.R7$(),t.Y8G("ngIf",c.isLoading),t.R7$(),t.SpI(" ",c.isEditMode?"Update":"Save"," ")}}let rn=(()=>{var r;class a{constructor(e){this.menuService=e,this.menus=[],this.filteredMenus=[],this.paginatedMenus=[],this.showModal=!1,this.currentMenu=this.createEmptyMenu(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.Math=Math}ngOnInit(){this.loadMenus()}loadMenus(){this.menuService.getMenus(this.currentPage,this.itemsPerPage,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:e=>{"SUCCESS"===e.status&&(this.menus=e.data||[],this.totalItems=e.pagination?.total||0,this.totalPages=e.pagination?.totalPages||0,this.updateFilteredData())},error:e=>{console.error("Error loading menus:",e)}})}createEmptyMenu(){return{id:0,menuName:"",menuUrl:"",priority:1,active:!0}}onSearch(){this.currentPage=1,this.loadMenus()}updateFilteredData(){this.filteredMenus=[...this.menus],this.updatePaginatedData()}updatePaginatedData(){this.paginatedMenus=[...this.menus]}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadMenus()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadMenus())}getVisiblePages(){const e=[];if(this.totalPages<=5)for(let i=1;i<=this.totalPages;i++)e.push(i);else{const i=Math.floor(2.5);let c=Math.max(1,this.currentPage-i),l=Math.min(this.totalPages,this.currentPage+i);this.currentPage<=i?l=5:this.currentPage>this.totalPages-i&&(c=this.totalPages-5+1),c>1&&(e.push(1),c>2&&e.push(-1));for(let p=c;p<=l;p++)e.push(p);l<this.totalPages&&(l<this.totalPages-1&&e.push(-1),e.push(this.totalPages))}return e}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadMenus()}getSortByField(){return{id:"id",name:"menuName",url:"menuUrl",priority:"priority",active:"active"}[this.sortColumn]||"priority"}showAddMenuModal(){this.isEditMode=!1,this.currentMenu=this.createEmptyMenu(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentMenu=this.createEmptyMenu(),this.isEditMode=!1}editMenu(e){this.isEditMode=!0,this.currentMenu={...e},this.showModal=!0}toggleMenuStatus(e){this.menuService.toggleMenuStatus(e.id,!e.active).subscribe({next:n=>{if("SUCCESS"===n.status){const i=this.menus.findIndex(c=>c.id===e.id);-1!==i&&(this.menus[i].active=!e.active),this.updateFilteredData()}},error:n=>{console.error("Error toggling menu status:",n)}})}addMenu(){this.isLoading||(this.isLoading=!0,this.menuService.createMenu(this.currentMenu).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadMenus())},error:e=>{this.isLoading=!1,console.error("Error creating menu:",e)}}))}updateMenu(){this.isLoading||(this.isLoading=!0,this.menuService.updateMenu(this.currentMenu.id,this.currentMenu).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadMenus())},error:e=>{this.isLoading=!1,console.error("Error updating menu:",e)}}))}trackByMenuId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-menus"]],standalone:!1,decls:69,vars:27,consts:[["menuForm","ngForm"],["menuName","ngModel"],["menuUrl","ngModel"],["menuPriority","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search menus...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","6",1,"no-data"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","menuName",1,"required"],["type","text","id","menuName","name","menuName","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","menuUrl",1,"required"],["type","text","id","menuUrl","name","menuUrl","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","menuPriority",1,"required"],["type","number","id","menuPriority","name","menuPriority","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","menuActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(n,i){1&n&&(t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Menus"),t.k0s()(),t.j41(7,"button",8),t.bIt("click",function(){return i.showAddMenuModal()}),t.EFF(8,"Add Menu"),t.k0s()(),t.j41(9,"div",9)(10,"div",10)(11,"label",11),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",12),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",13),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",14),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",15),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",16),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",17),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",18)(27,"label",19),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",20),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",21)(31,"table",22)(32,"thead")(33,"tr")(34,"th",23),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",24),t.EFF(37),t.k0s()(),t.j41(38,"th",23),t.bIt("click",function(){return i.sortTable("menuName")}),t.EFF(39," Menu Name "),t.j41(40,"span",24),t.EFF(41),t.k0s()(),t.j41(42,"th",23),t.bIt("click",function(){return i.sortTable("menuUrl")}),t.EFF(43," Menu URL "),t.j41(44,"span",24),t.EFF(45),t.k0s()(),t.j41(46,"th",23),t.bIt("click",function(){return i.sortTable("priority")}),t.EFF(47," Priority "),t.j41(48,"span",24),t.EFF(49),t.k0s()(),t.j41(50,"th",23),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(51," Active "),t.j41(52,"span",24),t.EFF(53),t.k0s()(),t.j41(54,"th"),t.EFF(55,"Edit"),t.k0s()()(),t.j41(56,"tbody"),t.DNE(57,Xe,19,12,"tr",25)(58,Qe,3,0,"tr",26),t.k0s()()(),t.j41(59,"div",27)(60,"div",28),t.EFF(61),t.k0s(),t.j41(62,"div",29)(63,"button",30),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(64," Previous "),t.k0s(),t.DNE(65,He,2,4,"button",31),t.j41(66,"button",30),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(67," Next "),t.k0s()()(),t.DNE(68,on,43,18,"div",32),t.k0s()),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuUrl"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedMenus)("ngForTrackBy",i.trackByMenuId),t.R7$(),t.Y8G("ngIf",0===i.paginatedMenus.length),t.R7$(3),t.E5c(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.totalItems)," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages),t.R7$(2),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".url-cell[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;max-width:250px;word-break:break-all}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}"]}))}return r(),a})();function an(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",39),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"span",40),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"span",41),t.EFF(14),t.k0s()(),t.j41(15,"td")(16,"div",42)(17,"button",43),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editSubmenu(n))}),t.EFF(18,"Edit"),t.k0s(),t.j41(19,"button",44),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.toggleSubmenuStatus(n))}),t.EFF(20),t.k0s()()()()}if(2&r){const o=a.$implicit,e=t.XpG();t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.parentMenu||e.getMenuName(o.menuId)),t.R7$(2),t.JRh(o.menuName||o.subMenuName),t.R7$(2),t.JRh(o.menuUrl||o.subMenuUrl),t.R7$(3),t.JRh(o.priority),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function sn(r,a){1&r&&(t.j41(0,"tr")(1,"td",45),t.EFF(2,"No submenus found"),t.k0s()())}function cn(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",46),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.onPageChange(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function ln(r,a){if(1&r&&(t.j41(0,"option",59),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.menuName)}}function dn(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Menu selection is required "),t.k0s())}function un(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu name is required "),t.k0s())}function _n(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu URL is required "),t.k0s())}function pn(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Priority is required "),t.k0s())}function gn(r,a){1&r&&t.nrm(0,"span",77)}function mn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",47),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",48),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",49)(3,"div",50)(4,"h4",51),t.EFF(5,"Add Sub Menu"),t.k0s(),t.j41(6,"button",52),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",53)(10,"form",54,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.addSubmenu())}),t.j41(12,"div",55)(13,"label",56),t.EFF(14,"Menu "),t.j41(15,"span",57),t.EFF(16,"*"),t.k0s()(),t.j41(17,"select",58,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.menuId,n)||(i.currentSubmenu.menuId=n),s.Njj(n)}),t.j41(19,"option",59),t.EFF(20,"Select Menu"),t.k0s(),t.DNE(21,ln,2,2,"option",60),t.k0s(),t.DNE(22,dn,2,0,"div",61),t.k0s(),t.j41(23,"div",55)(24,"label",62),t.EFF(25,"Sub Menu Name "),t.j41(26,"span",57),t.EFF(27,"*"),t.k0s()(),t.j41(28,"input",63,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.subMenuName,n)||(i.currentSubmenu.subMenuName=n),s.Njj(n)}),t.k0s(),t.DNE(30,un,2,0,"div",61),t.k0s(),t.j41(31,"div",55)(32,"label",64),t.EFF(33,"Sub Menu URL "),t.j41(34,"span",57),t.EFF(35,"*"),t.k0s()(),t.j41(36,"input",65,3),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.subMenuUrl,n)||(i.currentSubmenu.subMenuUrl=n),s.Njj(n)}),t.k0s(),t.DNE(38,_n,2,0,"div",61),t.k0s(),t.j41(39,"div",55)(40,"label",66),t.EFF(41,"Priority "),t.j41(42,"span",57),t.EFF(43,"*"),t.k0s()(),t.j41(44,"input",67,4),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.priority,n)||(i.currentSubmenu.priority=n),s.Njj(n)}),t.k0s(),t.DNE(46,pn,2,0,"div",61),t.k0s(),t.j41(47,"div",55)(48,"div",68)(49,"label",69)(50,"input",70),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.active,n)||(i.currentSubmenu.active=n),s.Njj(n)}),t.k0s(),t.j41(51,"span",71),t.EFF(52,"Active"),t.k0s()()()(),t.j41(53,"div",72)(54,"button",73),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(55," Close "),t.k0s(),t.j41(56,"button",74),t.DNE(57,gn,1,0,"span",75),t.EFF(58," Save "),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(18),n=t.sdS(29),i=t.sdS(37),c=t.sdS(45),l=t.XpG();t.R7$(17),t.R50("ngModel",l.currentSubmenu.menuId),t.R7$(2),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",l.menus),t.R7$(),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuUrl),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.priority),t.R7$(2),t.Y8G("ngIf",c.invalid&&c.touched),t.R7$(4),t.R50("ngModel",l.currentSubmenu.active),t.R7$(6),t.Y8G("disabled",o.invalid||l.isLoading),t.R7$(),t.Y8G("ngIf",l.isLoading)}}function hn(r,a){if(1&r&&(t.j41(0,"option",59),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.menuName)}}function fn(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Menu selection is required "),t.k0s())}function bn(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu name is required "),t.k0s())}function Cn(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu URL is required "),t.k0s())}function Mn(r,a){1&r&&(t.j41(0,"div",76),t.EFF(1," Priority is required "),t.k0s())}function Pn(r,a){1&r&&t.nrm(0,"span",77)}function vn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",47),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",48),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",49)(3,"div",50)(4,"h4",51),t.EFF(5,"Edit Sub Menu"),t.k0s(),t.j41(6,"button",52),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",53)(10,"form",54,5),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.updateSubmenu())}),t.j41(12,"div",55)(13,"label",78),t.EFF(14,"Menu "),t.j41(15,"span",57),t.EFF(16,"*"),t.k0s()(),t.j41(17,"select",79,6),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.menuId,n)||(i.currentSubmenu.menuId=n),s.Njj(n)}),t.j41(19,"option",59),t.EFF(20,"Select Menu"),t.k0s(),t.DNE(21,hn,2,2,"option",60),t.k0s(),t.DNE(22,fn,2,0,"div",61),t.k0s(),t.j41(23,"div",55)(24,"label",80),t.EFF(25,"Sub Menu Name "),t.j41(26,"span",57),t.EFF(27,"*"),t.k0s()(),t.j41(28,"input",81,7),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.subMenuName,n)||(i.currentSubmenu.subMenuName=n),s.Njj(n)}),t.k0s(),t.DNE(30,bn,2,0,"div",61),t.k0s(),t.j41(31,"div",55)(32,"label",82),t.EFF(33,"Sub Menu URL "),t.j41(34,"span",57),t.EFF(35,"*"),t.k0s()(),t.j41(36,"input",83,8),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.subMenuUrl,n)||(i.currentSubmenu.subMenuUrl=n),s.Njj(n)}),t.k0s(),t.DNE(38,Cn,2,0,"div",61),t.k0s(),t.j41(39,"div",55)(40,"label",84),t.EFF(41,"Priority "),t.j41(42,"span",57),t.EFF(43,"*"),t.k0s()(),t.j41(44,"input",85,9),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.priority,n)||(i.currentSubmenu.priority=n),s.Njj(n)}),t.k0s(),t.DNE(46,Mn,2,0,"div",61),t.k0s(),t.j41(47,"div",55)(48,"div",68)(49,"label",69)(50,"input",86),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubmenu.active,n)||(i.currentSubmenu.active=n),s.Njj(n)}),t.k0s(),t.j41(51,"span",71),t.EFF(52,"Active"),t.k0s()()()(),t.j41(53,"div",72)(54,"button",73),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(55," Close "),t.k0s(),t.j41(56,"button",74),t.DNE(57,Pn,1,0,"span",75),t.EFF(58," Update "),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(18),n=t.sdS(29),i=t.sdS(37),c=t.sdS(45),l=t.XpG();t.R7$(17),t.R50("ngModel",l.currentSubmenu.menuId),t.R7$(2),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",l.menus),t.R7$(),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuUrl),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.priority),t.R7$(2),t.Y8G("ngIf",c.invalid&&c.touched),t.R7$(4),t.R50("ngModel",l.currentSubmenu.active),t.R7$(6),t.Y8G("disabled",o.invalid||l.isLoading),t.R7$(),t.Y8G("ngIf",l.isLoading)}}let xn=(()=>{var r;class a{constructor(e){this.apiService=e,this.menus=[],this.submenus=[],this.filteredData=[],this.paginatedData=[],this.currentPage=1,this.pageSize=10,this.totalPages=0,this.totalItems=0,this.itemsPerPage=10,this.searchTerm="",this.sortColumn="",this.sortDirection="asc",this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentSubmenu=this.createEmptySubmenu(),this.Math=Math}ngOnInit(){this.loadSubMenus()}loadSubMenus(){this.isLoading=!0,this.apiService.getSubMenus(this.currentPage,this.pageSize,this.searchTerm,this.sortColumn,this.sortDirection).subscribe({next:e=>{this.isLoading=!1,this.submenus=e.data||[];const n=new Map;for(const c of this.submenus)c.menuId&&c.parentMenu&&(n.has(c.menuId)||n.set(c.menuId,c.parentMenu));if(this.menus=Array.from(n.entries()).map(([c,l])=>({id:c,menuName:l})),e.pagination)this.totalItems=e.pagination.total||0,this.currentPage=e.pagination.page||this.currentPage,this.itemsPerPage=e.pagination.limit||this.pageSize,this.totalPages=e.pagination.totalPages||Math.ceil(this.totalItems/this.itemsPerPage);else if(e.data&&e.data.pagination){const c=e.data.pagination;this.totalItems=c.total||0,this.currentPage=c.page||this.currentPage,this.itemsPerPage=c.limit||this.pageSize,this.totalPages=c.totalPages||Math.ceil(this.totalItems/this.itemsPerPage)}else this.totalItems=this.submenus.length,this.itemsPerPage=this.pageSize,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage);this.paginatedData=this.submenus.slice(0,this.itemsPerPage)},error:e=>{this.isLoading=!1,this.submenus=[],this.menus=[],this.paginatedData=[],this.totalItems=0,this.totalPages=0}})}createEmptySubmenu(){return{id:0,menuId:0,subMenuName:"",subMenuUrl:"",priority:1,active:!0}}getMenuName(e){const n=this.menus.find(i=>i.id===e);return n?n.menuName:"Unknown Menu"}onSearch(){this.currentPage=1,this.applyFilters()}applyFilters(){this.currentPage=1,this.loadSubMenus()}onPageSizeChange(){this.currentPage=1,this.itemsPerPage=this.pageSize,this.loadSubMenus()}updatePagination(){this.totalPages=Math.ceil(this.filteredData.length/this.pageSize);const e=(this.currentPage-1)*this.pageSize;this.paginatedData=this.filteredData.slice(e,e+this.pageSize)}onPageChange(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadSubMenus())}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.currentPage=1,this.loadSubMenus()}showAddSubmenuModal(){this.isEditMode=!1,this.currentSubmenu=this.createEmptySubmenu(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentSubmenu=this.createEmptySubmenu(),this.isEditMode=!1}editSubmenu(e){this.isEditMode=!0,console.log("Original submenu data:",e),this.currentSubmenu={id:e.subMenuId||e.id,menuId:e.menuId,subMenuName:e.menuName||e.subMenuName,subMenuUrl:e.menuUrl||e.subMenuUrl,priority:e.priority,active:e.active,subMenuId:e.subMenuId,parentMenu:e.parentMenu},console.log("Mapped currentSubmenu:",this.currentSubmenu),this.showModal=!0}addSubmenu(){this.isLoading=!0;const e={menuId:this.currentSubmenu.menuId,subMenuName:this.currentSubmenu.subMenuName,subMenuUrl:this.currentSubmenu.subMenuUrl,priority:this.currentSubmenu.priority,active:this.currentSubmenu.active};console.log("Sending create data:",e),this.apiService.createSubMenu(e).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadSubMenus())},error:n=>{this.isLoading=!1,console.error("Create error:",n)}})}updateSubmenu(){this.isLoading=!0;const e={menuId:this.currentSubmenu.menuId,subMenuName:this.currentSubmenu.subMenuName,subMenuUrl:this.currentSubmenu.subMenuUrl,priority:this.currentSubmenu.priority,active:this.currentSubmenu.active};console.log("Sending update data:",e),this.apiService.updateSubMenu(this.currentSubmenu.id,e).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadSubMenus())},error:n=>{this.isLoading=!1,console.error("Update error:",n)}})}toggleSubmenuStatus(e){this.apiService.toggleSubMenuStatus(e.id,!e.active).subscribe({next:n=>{"SUCCESS"===n.status&&(e.active=!e.active)},error:n=>{}})}getPageNumbers(){const e=[];for(let n=1;n<=this.totalPages;n++)e.push(n);return e}getVisiblePages(){const n=[],i=[],c=Math.max(2,this.currentPage-2),l=Math.min(this.totalPages-1,this.currentPage+2);for(let p=c;p<=l;p++)n.push(p);return this.currentPage-2>2?i.push(1,-1):i.push(1),i.push(...n),this.currentPage+2<this.totalPages-1?i.push(-1,this.totalPages):i.push(this.totalPages),i.filter((p,C,v)=>v.indexOf(p)===C&&p<=this.totalPages)}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-submenus"]],standalone:!1,decls:74,vars:30,consts:[["submenuForm","ngForm"],["menuIdInput","ngModel"],["submenuNameInput","ngModel"],["submenuUrlInput","ngModel"],["priorityInput","ngModel"],["editSubmenuForm","ngForm"],["editMenuIdInput","ngModel"],["editSubmenuNameInput","ngModel"],["editSubmenuUrlInput","ngModel"],["editPriorityInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search submenus...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"url-cell"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","7",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","menuId"],[1,"required"],["id","menuId","name","menuId","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["for","submenuName"],["type","text","id","submenuName","name","submenuName","required","","placeholder","Enter sub menu name",1,"form-control",3,"ngModelChange","ngModel"],["for","submenuUrl"],["type","text","id","submenuUrl","name","submenuUrl","required","","placeholder","Enter sub menu URL",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","required","","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","submenuActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"],["for","editMenuId"],["id","editMenuId","name","editMenuId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editSubmenuName"],["type","text","id","editSubmenuName","name","editSubmenuName","required","","placeholder","Enter sub menu name",1,"form-control",3,"ngModelChange","ngModel"],["for","editSubmenuUrl"],["type","text","id","editSubmenuUrl","name","editSubmenuUrl","required","","placeholder","Enter sub menu URL",1,"form-control",3,"ngModelChange","ngModel"],["for","editPriority"],["type","number","id","editPriority","name","editPriority","required","","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","name","editSubmenuActive",3,"ngModelChange","ngModel"]],template:function(n,i){1&n&&(t.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Sub Menus"),t.k0s()(),t.j41(7,"button",14),t.bIt("click",function(){return i.showAddSubmenuModal()}),t.EFF(8,"Add Sub Menu"),t.k0s()(),t.j41(9,"div",15)(10,"div",16)(11,"label",17),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",18),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",19),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",20),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",21),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",22),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",23),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",24)(27,"label",25),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",26),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",27)(31,"table",28)(32,"thead")(33,"tr")(34,"th",29),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," ID "),t.j41(36,"span",30),t.EFF(37),t.k0s()(),t.j41(38,"th",29),t.bIt("click",function(){return i.sortTable("parentMenu")}),t.EFF(39," Menu Name "),t.j41(40,"span",30),t.EFF(41),t.k0s()(),t.j41(42,"th",29),t.bIt("click",function(){return i.sortTable("subMenuName")}),t.EFF(43," SubMenu Name "),t.j41(44,"span",30),t.EFF(45),t.k0s()(),t.j41(46,"th",29),t.bIt("click",function(){return i.sortTable("menuUrl")}),t.EFF(47,"SubMenu Url "),t.j41(48,"span",30),t.EFF(49),t.k0s()(),t.j41(50,"th",29),t.bIt("click",function(){return i.sortTable("priority")}),t.EFF(51," Priority "),t.j41(52,"span",30),t.EFF(53),t.k0s()(),t.j41(54,"th",29),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(55," Status "),t.j41(56,"span",30),t.EFF(57),t.k0s()(),t.j41(58,"th"),t.EFF(59,"Edit"),t.k0s()()(),t.j41(60,"tbody"),t.DNE(61,an,21,13,"tr",31)(62,sn,3,0,"tr",32),t.k0s()()(),t.j41(63,"div",33)(64,"div",34),t.EFF(65),t.k0s(),t.j41(66,"div",35)(67,"button",36),t.bIt("click",function(){return i.onPageChange(i.currentPage-1)}),t.EFF(68," Previous "),t.k0s(),t.DNE(69,cn,2,3,"button",37),t.j41(70,"button",36),t.bIt("click",function(){return i.onPageChange(i.currentPage+1)}),t.EFF(71," Next "),t.k0s()()()(),t.DNE(72,mn,59,13,"div",38)(73,vn,59,13,"div",38)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","parentMenu"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuUrl"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedData),t.R7$(),t.Y8G("ngIf",0===i.paginatedData.length),t.R7$(3),t.E5c(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.totalItems)," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages),t.R7$(2),t.Y8G("ngIf",i.showModal&&!i.isEditMode),t.R7$(),t.Y8G("ngIf",i.showModal&&i.isEditMode))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".url-cell[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;max-width:250px;word-break:break-all}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}"]}))}return r(),a})();function En(r,a){1&r&&(t.j41(0,"div",25),t.nrm(1,"div",26),t.k0s())}function On(r,a){1&r&&(t.j41(0,"div",27),t.nrm(1,"div",28),t.j41(2,"p"),t.EFF(3,"Loading states..."),t.k0s()())}function kn(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",35),t.EFF(9),t.k0s()(),t.j41(10,"td")(11,"div",36)(12,"button",37),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.editState(n))}),t.EFF(13,"Edit"),t.k0s(),t.j41(14,"button",38),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.toggleStateStatus(n))}),t.EFF(15),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.stateName),t.R7$(2),t.JRh(o.stateDescription||"No description"),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Fn(r,a){1&r&&(t.j41(0,"tr")(1,"td",39),t.EFF(2," No states found "),t.k0s()())}function Rn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th",31),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("id"))}),t.EFF(5," Id "),t.j41(6,"span",32),t.EFF(7),t.k0s()(),t.j41(8,"th",31),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("name"))}),t.EFF(9," State Name "),t.j41(10,"span",32),t.EFF(11),t.k0s()(),t.j41(12,"th",31),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("description"))}),t.EFF(13," Description "),t.j41(14,"span",32),t.EFF(15),t.k0s()(),t.j41(16,"th",31),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("active"))}),t.EFF(17," Active "),t.j41(18,"span",32),t.EFF(19),t.k0s()(),t.j41(20,"th"),t.EFF(21,"Actions"),t.k0s()()(),t.j41(22,"tbody"),t.DNE(23,kn,16,11,"tr",33)(24,Fn,3,0,"tr",34),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(6),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","name"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","description"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedStates)("ngForTrackBy",o.trackByStateId),t.R7$(),t.Y8G("ngIf",0===o.states.length&&!o.isLoading)}}function Tn(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.AVh("active",o===e.currentPage),t.Y8G("disabled",-1===o),t.R7$(),t.SpI(" ",-1===o?"...":o," ")}}function Dn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",40)(1,"div",41),t.EFF(2),t.k0s(),t.j41(3,"div",42)(4,"button",43),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.previousPage())}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,Tn,2,4,"button",44),t.j41(7,"button",43),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.nextPage())}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(2),t.E5c(" Showing ",o.showingStart," to ",o.showingEnd," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages)}}function Sn(r,a){1&r&&(t.j41(0,"div",68),t.EFF(1," State name is required "),t.k0s())}function In(r,a){1&r&&t.nrm(0,"span",28)}function jn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",46),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",47)(3,"div",48)(4,"h4",49),t.EFF(5),t.k0s(),t.j41(6,"button",50),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",51)(10,"form",52,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateState():n.addState())}),t.j41(12,"div",53)(13,"label",54),t.EFF(14,"State Name "),t.j41(15,"span",55),t.EFF(16,"*"),t.k0s()(),t.j41(17,"input",56,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentState.stateName,n)||(i.currentState.stateName=n),s.Njj(n)}),t.k0s(),t.DNE(19,Sn,2,0,"div",57),t.k0s(),t.j41(20,"div",53)(21,"label",58),t.EFF(22,"Description"),t.k0s(),t.j41(23,"textarea",59,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentState.stateDescription,n)||(i.currentState.stateDescription=n),s.Njj(n)}),t.k0s()(),t.j41(25,"div",53)(26,"div",60)(27,"label",61)(28,"input",62),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentState.active,n)||(i.currentState.active=n),s.Njj(n)}),t.k0s(),t.j41(29,"span",63),t.EFF(30,"Active"),t.k0s()()()(),t.j41(31,"div",64)(32,"button",65),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(33," Close "),t.k0s(),t.j41(34,"button",66),t.DNE(35,In,1,0,"span",67),t.EFF(36),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(18),n=t.XpG();t.R7$(5),t.JRh(n.isEditMode?"Edit State":"Add State"),t.R7$(12),t.R50("ngModel",n.currentState.stateName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",n.currentState.stateDescription),t.R7$(5),t.R50("ngModel",n.currentState.active),t.R7$(6),t.Y8G("disabled",o.invalid||n.isLoading),t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(),t.SpI(" ",n.isEditMode?"Update":"Save"," ")}}let yn=(()=>{var r;class a{constructor(e){this.apiService=e,this.states=[],this.filteredStates=[],this.searchText="",this.currentPage=1,this.entriesPerPage=10,this.totalPages=1,this.totalItems=0,this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentState={id:0,stateName:"",stateDescription:"",active:!0},this.sortColumn="",this.sortDirection="asc",this.searchSubject=new U.B}ngOnInit(){this.setupSearchDebouncing(),this.loadStates()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearchDebouncing(){this.searchSubscription=this.searchSubject.pipe(X(500),Q()).subscribe(e=>{this.performSearch(e)})}onSearchInput(){this.searchSubject.next(this.searchText)}performSearch(e){this.currentPage=1,this.loadStates()}onSearch(){this.searchSubject.next(this.searchText)}clearSearch(){this.searchText="",this.currentPage=1,this.loadStates()}loadStates(){this.isLoading=!0,this.apiService.getStates(this.currentPage,this.entriesPerPage,this.searchText,this.getSortByField(),this.sortDirection).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.states=e.data||[],this.filteredStates=[...this.states],this.totalItems=e.pagination?.total||0,this.totalPages=e.pagination?.totalPages||0)},error:e=>{this.isLoading=!1,console.error("Error loading states:",e)}})}onEntriesPerPageChange(){this.currentPage=1,this.loadStates()}get paginatedStates(){return this.filteredStates}get showingStart(){return(this.currentPage-1)*this.entriesPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.entriesPerPage,this.totalItems)}showAddStateModal(){this.currentState={id:0,stateName:"",stateDescription:"",active:!0},this.isEditMode=!1,this.showModal=!0}editState(e){this.currentState={...e},this.isEditMode=!0,this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.currentState={id:0,stateName:"",stateDescription:"",active:!0}}addState(){this.isLoading||(this.isLoading=!0,this.apiService.createState(this.currentState).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadStates())},error:e=>{this.isLoading=!1,console.error("Error creating state:",e)}}))}updateState(){this.isLoading||(this.isLoading=!0,this.apiService.updateState(this.currentState.id,this.currentState).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadStates())},error:e=>{this.isLoading=!1,console.error("Error updating state:",e)}}))}toggleStateStatus(e){this.apiService.toggleStateStatus(e.id,!e.active).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadStates()},error:n=>{console.error("Error toggling state status:",n)}})}deleteState(e){confirm(`Are you sure you want to delete ${e.stateName}?`)&&this.apiService.deleteState(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadStates()},error:n=>{console.error("Error deleting state:",n)}})}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadStates()}getSortByField(){return{id:"id",name:"stateName",description:"stateDescription",active:"active"}[this.sortColumn]||"stateName"}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadStates())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadStates())}goToPage(e){this.currentPage=e,this.loadStates()}getVisiblePages(){const e=this.totalPages,n=this.currentPage,c=[],l=[];for(let p=Math.max(2,n-2);p<=Math.min(e-1,n+2);p++)c.push(p);return n-2>2?l.push(1,-1):l.push(1),l.push(...c),n+2<e-1?l.push(-1,e):l.push(e),l.filter((p,C,v)=>v.indexOf(p)===C&&p>0)}getTotalPages(){return this.totalPages}trackByStateId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-state-management"]],standalone:!1,decls:35,vars:7,consts:[["stateForm","ngForm"],["stateName","ngModel"],["stateDescription","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search states...",3,"ngModelChange","input","ngModel"],["class","search-loading",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"search-loading"],[1,"spinner-small"],[1,"loading-container"],[1,"spinner"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","5",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","stateName"],[1,"required"],["type","text","id","stateName","name","stateName","required","","placeholder","Enter state name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","stateDescription"],["id","stateDescription","name","stateDescription","rows","3","placeholder","Enter state description",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","stateActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"]],template:function(n,i){1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f5fa}\ufe0f"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of States"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return i.showAddStateModal()}),t.EFF(8,"Add State"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(i.entriesPerPage,l)||(i.entriesPerPage=l),l}),t.bIt("change",function(){return i.onEntriesPerPageChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(i.searchText,l)||(i.searchText=l),l}),t.bIt("input",function(){return i.onSearchInput()}),t.k0s(),t.DNE(30,En,2,0,"div",20),t.k0s()(),t.DNE(31,On,4,0,"div",21)(32,Rn,25,15,"div",22)(33,Dn,9,6,"div",23),t.k0s(),t.DNE(34,jn,37,8,"div",24)),2&n&&(t.R7$(13),t.R50("ngModel",i.entriesPerPage),t.R7$(16),t.R50("ngModel",i.searchText),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading&&0===i.states.length),t.R7$(),t.Y8G("ngIf",!i.isLoading||i.states.length>0),t.R7$(),t.Y8G("ngIf",i.states.length>0),t.R7$(),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:["[_ngcontent-%COMP%]:root{--primary-color: #4361ee;--secondary-color: #3f37c9;--success-color: #4cc9f0;--light-color: #f8f9fa;--dark-color: #212529;--gradient: linear-gradient(135deg, #4361ee, #3a0ca3);--shadow: 0 4px 6px rgba(0, 0, 0, .1);--radius: 10px}.dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.page-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#0dcaf0);color:#fff;padding:25px 30px;display:flex;justify-content:space-between;align-items:center;border-radius:8px;box-shadow:0 2px 10px #0000001a}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-title-icon[_ngcontent-%COMP%]{font-size:28px;background:#ffffff40;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center}.page-title-text[_ngcontent-%COMP%]{font-size:24px;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px}.btn-primary-custom[_ngcontent-%COMP%]{background:#0d6efd;border:none;color:#fff;padding:10px 20px;border-radius:30px;font-weight:500;transition:all .3s;display:flex;align-items:center;gap:8px}.btn-primary-custom[_ngcontent-%COMP%]:hover{background:#0b5ed7;transform:translateY(-2px);box-shadow:0 4px 8px #0d6efd4d}.content-section[_ngcontent-%COMP%]{padding:30px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#f8f9fa;border-bottom:1px solid #e9ecef}.entries-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.search-box[_ngcontent-%COMP%]{position:relative;width:250px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px;border-radius:30px;border:1px solid #ddd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#6c757d}.table[_ngcontent-%COMP%]{margin:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#2d458d;border-bottom:2px solid #dee2e6;font-weight:600;color:#0a0a0a;padding:15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;vertical-align:middle}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500}.status-active[_ngcontent-%COMP%]{background:#e7f7ef;color:#1ea97c}.status-inactive[_ngcontent-%COMP%]{background:#fef0f0;color:#f05d5d}.action-buttons-cell[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-edit[_ngcontent-%COMP%]{background:#e9ecef;border:none;color:#6c757d;padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s}.btn-edit[_ngcontent-%COMP%]:hover{background:#4361ee;color:#fff}.btn-deactivate[_ngcontent-%COMP%]{background:#f8d7da;border:none;color:#721c24;padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s}.btn-deactivate[_ngcontent-%COMP%]:hover{background:#f1b0b7}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;border:none;color:#fff;padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#f8f9fa;border-top:1px solid #e9ecef}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.page-info[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.modal-header[_ngcontent-%COMP%]{background:var(--gradient);color:#fff}.modal-title[_ngcontent-%COMP%]{font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ddd;padding:10px 15px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #4361ee33;border-color:var(--primary-color)}.btn-submit[_ngcontent-%COMP%]{background:var(--gradient);border:none;border-radius:30px;padding:10px 25px;font-weight:500;transition:all .3s;color:#fff}.btn-submit[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #4361ee4d;color:#fff}.btn-submit[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6c757d}.no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;margin-bottom:15px;color:#dee2e6}@media (max-width: 768px){.table-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.search-box[_ngcontent-%COMP%]{width:100%}.action-buttons-cell[_ngcontent-%COMP%]{flex-direction:column}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.pagination-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin:100px auto;max-width:500px}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),a})();function wn(r,a){1&r&&(t.j41(0,"div",25),t.EFF(1," Loading Zone... "),t.k0s())}function Nn(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td")(16,"span",32),t.EFF(17),t.k0s()(),t.j41(18,"td")(19,"div",33)(20,"button",34),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.editRange(n))}),t.EFF(21,"Edit"),t.k0s(),t.j41(22,"button",35),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.toggleRangeStatus(n))}),t.EFF(23),t.k0s()()()()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(e.getStateName(o)),t.R7$(2),t.JRh(o.rangeName),t.R7$(2),t.JRh(o.rangeHead),t.R7$(2),t.JRh(o.rangeContactNo),t.R7$(2),t.JRh(o.rangeMobileNo),t.R7$(2),t.JRh(o.rangeEmail),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.Y8G("disabled",e.isLoading),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Bn(r,a){1&r&&(t.j41(0,"tr")(1,"td",36),t.EFF(2,"No Zone found"),t.k0s()())}function Un(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",26)(1,"table",27)(2,"thead")(3,"tr")(4,"th",28),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("id"))}),t.EFF(5," Id "),t.j41(6,"span",29),t.EFF(7),t.k0s()(),t.j41(8,"th",28),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("stateName"))}),t.EFF(9," State Name "),t.j41(10,"span",29),t.EFF(11),t.k0s()(),t.j41(12,"th",28),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("rangeName"))}),t.EFF(13," Zone Name "),t.j41(14,"span",29),t.EFF(15),t.k0s()(),t.j41(16,"th",28),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("rangeHead"))}),t.EFF(17," Zone Head "),t.j41(18,"span",29),t.EFF(19),t.k0s()(),t.j41(20,"th"),t.EFF(21,"Contact No"),t.k0s(),t.j41(22,"th"),t.EFF(23,"Mobile No"),t.k0s(),t.j41(24,"th"),t.EFF(25,"Email"),t.k0s(),t.j41(26,"th",28),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("active"))}),t.EFF(27," Active "),t.j41(28,"span",29),t.EFF(29),t.k0s()(),t.j41(30,"th"),t.EFF(31,"Actions"),t.k0s()()(),t.j41(32,"tbody"),t.DNE(33,Nn,24,16,"tr",30)(34,Bn,3,0,"tr",31),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(6),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","stateName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","rangeName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","rangeHead"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(9),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedRanges)("ngForTrackBy",o.trackByRangeId),t.R7$(),t.Y8G("ngIf",0===o.paginatedRanges.length&&!o.isLoading)}}function An(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(-1!==n&&i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.AVh("active",o===e.currentPage)("ellipsis",-1===o),t.Y8G("disabled",-1===o),t.R7$(),t.SpI(" ",-1===o?"...":o," ")}}function $n(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",37)(1,"div",38),t.EFF(2),t.k0s(),t.j41(3,"div",39)(4,"button",40),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.goToPage(n.currentPage-1))}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,An,2,6,"button",41),t.j41(7,"button",40),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.goToPage(n.currentPage+1))}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(2),t.E5c(" Showing ",(o.currentPage-1)*o.itemsPerPage+1," to ",o.Math.min(o.currentPage*o.itemsPerPage,o.totalItems)," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages)}}function Ln(r,a){1&r&&(t.j41(0,"div",72),t.EFF(1," Zone name is required "),t.k0s())}function Gn(r,a){1&r&&(t.j41(0,"div",72),t.EFF(1," Zone head is required "),t.k0s())}function Vn(r,a){1&r&&t.nrm(0,"span",73)}function qn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",42),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",43),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",44)(3,"div",45)(4,"h4",46),t.EFF(5),t.k0s(),t.j41(6,"button",47),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",48)(10,"form",49,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateRange():n.addRange())}),t.j41(12,"div",50)(13,"label",51),t.EFF(14,"Zone Name"),t.k0s(),t.j41(15,"input",52,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.rangeName,n)||(i.currentRange.rangeName=n),s.Njj(n)}),t.k0s(),t.DNE(17,Ln,2,0,"div",53),t.k0s(),t.j41(18,"div",50)(19,"label",54),t.EFF(20,"Zone Head"),t.k0s(),t.j41(21,"input",55,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.rangeHead,n)||(i.currentRange.rangeHead=n),s.Njj(n)}),t.k0s(),t.DNE(23,Gn,2,0,"div",53),t.k0s(),t.j41(24,"div",50)(25,"label",56),t.EFF(26,"Email"),t.k0s(),t.j41(27,"input",57),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.rangeEmail,n)||(i.currentRange.rangeEmail=n),s.Njj(n)}),t.k0s()(),t.j41(28,"div",50)(29,"label",58),t.EFF(30,"Contact Number"),t.k0s(),t.j41(31,"input",59),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.rangeContactNo,n)||(i.currentRange.rangeContactNo=n),s.Njj(n)}),t.k0s()(),t.j41(32,"div",50)(33,"label",60),t.EFF(34,"Mobile Number"),t.k0s(),t.j41(35,"input",61),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.rangeMobileNo,n)||(i.currentRange.rangeMobileNo=n),s.Njj(n)}),t.k0s()(),t.j41(36,"div",50)(37,"label",62),t.EFF(38,"Description"),t.k0s(),t.j41(39,"textarea",63),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.rangeDescription,n)||(i.currentRange.rangeDescription=n),s.Njj(n)}),t.k0s()(),t.j41(40,"div",50)(41,"div",64)(42,"label",65)(43,"input",66),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentRange.active,n)||(i.currentRange.active=n),s.Njj(n)}),t.k0s(),t.j41(44,"span",67),t.EFF(45,"Active"),t.k0s()()()(),t.j41(46,"div",68)(47,"button",69),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(48," Close "),t.k0s(),t.j41(49,"button",70),t.DNE(50,Vn,1,0,"span",71),t.EFF(51),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(16),n=t.sdS(22),i=t.XpG();t.R7$(5),t.JRh(i.isEditMode?"Edit Zone":"Add Zone"),t.R7$(),t.Y8G("disabled",i.isLoading),t.R7$(9),t.AVh("error",e.touched&&(null==e.errors?null:e.errors.required)),t.R50("ngModel",i.currentRange.rangeName),t.Y8G("disabled",i.isLoading),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(4),t.AVh("error",n.touched&&(null==n.errors?null:n.errors.required)),t.R50("ngModel",i.currentRange.rangeHead),t.Y8G("disabled",i.isLoading),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(4),t.R50("ngModel",i.currentRange.rangeEmail),t.Y8G("disabled",i.isLoading),t.R7$(4),t.R50("ngModel",i.currentRange.rangeContactNo),t.Y8G("disabled",i.isLoading),t.R7$(4),t.R50("ngModel",i.currentRange.rangeMobileNo),t.Y8G("disabled",i.isLoading),t.R7$(4),t.R50("ngModel",i.currentRange.rangeDescription),t.Y8G("disabled",i.isLoading),t.R7$(4),t.R50("ngModel",i.currentRange.active),t.Y8G("disabled",i.isLoading),t.R7$(4),t.Y8G("disabled",i.isLoading),t.R7$(2),t.Y8G("disabled",o.invalid||i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(),t.SpI(" ",i.isEditMode?"Update":"Save"," ")}}let Yn=(()=>{var r;class a{constructor(e){this.apiService=e,this.ranges=[],this.filteredRanges=[],this.paginatedRanges=[],this.showModal=!1,this.currentRange=this.createEmptyRange(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.Math=Math}ngOnInit(){this.loadRanges()}loadRanges(){this.isLoading=!0,this.apiService.getRanges(this.currentPage,this.itemsPerPage,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.ranges=e.data||[],this.totalItems=e.pagination?.total||0,this.totalPages=e.pagination?.totalPages||0,this.updateFilteredData())},error:e=>{this.isLoading=!1,console.error("Error loading ranges:",e)}})}createEmptyRange(){return{id:0,stateId:4,rangeName:"",rangeHead:"",rangeContactNo:"",rangeMobileNo:"",rangeEmail:"",rangeDescription:"",rangeImage:"",rangePersonImage:"",active:!0,state:{id:0,stateName:""}}}getStateName(e){return e.state?.stateName||""}onSearch(){this.currentPage=1,this.loadRanges()}updateFilteredData(){this.filteredRanges=[...this.ranges],this.updatePaginatedData()}updatePaginatedData(){this.paginatedRanges=[...this.ranges]}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadRanges()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadRanges())}getVisiblePages(){const e=[];if(this.totalPages<=5)for(let i=1;i<=this.totalPages;i++)e.push(i);else{const i=Math.floor(2.5);let c=Math.max(1,this.currentPage-i),l=Math.min(this.totalPages,this.currentPage+i);this.currentPage<=i?l=5:this.currentPage>this.totalPages-i&&(c=this.totalPages-5+1),c>1&&(e.push(1),c>2&&e.push(-1));for(let p=c;p<=l;p++)e.push(p);l<this.totalPages&&(l<this.totalPages-1&&e.push(-1),e.push(this.totalPages))}return e}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadRanges()}getSortByField(){return{id:"id",stateName:"stateName",rangeName:"rangeName",rangeHead:"rangeHead",active:"active"}[this.sortColumn]||"id"}showAddRangeModal(){this.isEditMode=!1,this.currentRange=this.createEmptyRange(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentRange=this.createEmptyRange(),this.isEditMode=!1}editRange(e){this.isEditMode=!0,this.currentRange={...e},this.showModal=!0}toggleRangeStatus(e){confirm("Are you sure you want to change the status of this range?")&&(this.isLoading=!0,(e.active?this.apiService.deactivateRange(e.id):this.apiService.activateRange(e.id)).subscribe({next:i=>{this.isLoading=!1,"SUCCESS"===i.status&&this.loadRanges()},error:i=>{this.isLoading=!1,console.error("Error toggling range status:",i)}}))}addRange(){if(this.isLoading)return;this.isLoading=!0;const e={stateId:4,rangeName:this.currentRange.rangeName,rangeHead:this.currentRange.rangeHead,rangeContactNo:this.currentRange.rangeContactNo,rangeMobileNo:this.currentRange.rangeMobileNo,rangeEmail:this.currentRange.rangeEmail,rangeDescription:this.currentRange.rangeDescription,rangeImage:this.currentRange.rangeImage||"",rangePersonImage:this.currentRange.rangePersonImage||""};console.log("Creating range with data:",e),this.apiService.createRange(e).subscribe({next:n=>{this.isLoading=!1,console.log("Create response:",n),"SUCCESS"===n.status&&(this.closeModal(),this.loadRanges())},error:n=>{this.isLoading=!1,console.error("Error creating range:",n)}})}updateRange(){if(this.isLoading)return;if(!this.currentRange.id)return void console.error("Cannot update range: ID is missing");this.isLoading=!0;const e={stateId:this.currentRange.stateId,rangeName:this.currentRange.rangeName,rangeHead:this.currentRange.rangeHead,rangeContactNo:this.currentRange.rangeContactNo,rangeMobileNo:this.currentRange.rangeMobileNo,rangeEmail:this.currentRange.rangeEmail,rangeDescription:this.currentRange.rangeDescription,rangeImage:this.currentRange.rangeImage||"",rangePersonImage:this.currentRange.rangePersonImage||""};console.log("Updating range with data:",{id:this.currentRange.id,data:e}),this.apiService.updateRange(this.currentRange.id,e).subscribe({next:n=>{this.isLoading=!1,console.log("Update response:",n),"SUCCESS"===n.status&&(this.closeModal(),this.loadRanges())},error:n=>{this.isLoading=!1,console.error("Error updating range:",n)}})}trackByRangeId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-range"]],standalone:!1,decls:36,vars:6,consts:[["rangeForm","ngForm"],["rangeName","ngModel"],["rangeHead","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search Zone...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn","p-1",3,"click"],["class","loading-indicator",4,"ngIf"],["class","table-container",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-indicator"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click","disabled"],["colspan","9",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","ellipsis","disabled","click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-2"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click","disabled"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","rangeName",1,"required"],["type","text","id","rangeName","name","rangeName","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["for","rangeHead",1,"required"],["type","text","id","rangeHead","name","rangeHead","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeEmail"],["type","email","id","rangeEmail","name","rangeEmail",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeContactNo"],["type","text","id","rangeContactNo","name","rangeContactNo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeMobileNo"],["type","text","id","rangeMobileNo","name","rangeMobileNo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeDescription"],["id","rangeDescription","name","rangeDescription","rows","3",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","rangeActive",3,"ngModelChange","ngModel","disabled"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click","disabled"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(n,i){1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f3e0}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Zone"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return i.showAddRangeModal()}),t.EFF(8,"Add Zone"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("keyup.enter",function(){return i.onSearch()}),t.k0s(),t.j41(30,"button",20),t.bIt("click",function(){return i.onSearch()}),t.EFF(31,"Search"),t.k0s()()(),t.DNE(32,wn,2,0,"div",21)(33,Un,35,18,"div",22)(34,$n,9,6,"div",23),t.k0s(),t.DNE(35,qn,52,26,"div",24)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(3),t.Y8G("ngIf",i.isLoading),t.R7$(),t.Y8G("ngIf",!i.isLoading),t.R7$(),t.Y8G("ngIf",i.totalPages>0&&!i.isLoading),t.R7$(),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".email-cell[_ngcontent-%COMP%]{max-width:200px;word-break:break-all;font-size:.85rem}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin:50px auto;max-width:700px;width:90%}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),a})();function Wn(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"strong"),t.EFF(5),t.k0s()(),t.j41(6,"td")(7,"span",31),t.EFF(8),t.k0s()(),t.j41(9,"td")(10,"div",32)(11,"button",33),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editDistrict(n))}),t.EFF(12,"Edit"),t.k0s(),t.j41(13,"button",34),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.toggleDistrictStatus(n))}),t.EFF(14),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(3),t.JRh(o.districtName),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function zn(r,a){1&r&&(t.j41(0,"tr")(1,"td",35),t.EFF(2,"No districts found"),t.k0s()())}function Kn(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function Xn(r,a){1&r&&(t.j41(0,"div",57),t.EFF(1," District name is required "),t.k0s())}function Qn(r,a){1&r&&t.nrm(0,"span",58)}function Hn(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateDistrict():n.addDistrict())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"District Name"),t.k0s(),t.j41(15,"input",47,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.districtName,n)||(i.currentDistrict.districtName=n),s.Njj(n)}),t.k0s(),t.DNE(17,Xn,2,0,"div",48),t.k0s(),t.j41(18,"div",45)(19,"div",49)(20,"label",50)(21,"input",51),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.active,n)||(i.currentDistrict.active=n),s.Njj(n)}),t.k0s(),t.j41(22,"span",52),t.EFF(23,"Active"),t.k0s()()()(),t.j41(24,"div",53)(25,"button",54),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(26," Close "),t.k0s(),t.j41(27,"button",55),t.DNE(28,Qn,1,0,"span",56),t.EFF(29),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(16),n=t.XpG();t.R7$(5),t.JRh(n.isEditMode?"Edit District":"Add District"),t.R7$(10),t.AVh("error",e.touched&&(null==e.errors?null:e.errors.required)),t.R50("ngModel",n.currentDistrict.districtName),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(4),t.R50("ngModel",n.currentDistrict.active),t.R7$(6),t.Y8G("disabled",o.invalid||n.isLoading),t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(),t.SpI(" ",n.isEditMode?"Update":"Save"," ")}}let Jn=(()=>{var r;class a{constructor(e){this.apiService=e,this.districts=[],this.filteredDistricts=[],this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.searchSubject=new U.B,this.Math=Math}ngOnInit(){this.setupSearchDebouncing(),this.loadDistricts()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearchDebouncing(){this.searchSubscription=this.searchSubject.pipe(X(500),Q()).subscribe(e=>{this.performSearch(e)})}onSearchInput(){this.searchSubject.next(this.searchTerm)}performSearch(e){this.currentPage=1,this.loadDistricts()}clearSearch(){this.searchTerm="",this.currentPage=1,this.loadDistricts()}loadDistricts(){this.isLoading=!0,this.apiService.getDistricts(this.currentPage,this.itemsPerPage,this.searchTerm,this.sortColumn,this.sortDirection).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.districts=e.data||[],this.filteredDistricts=[...this.districts],this.totalItems=e.pagination?.total||0,this.totalPages=e.pagination?.totalPages||0)},error:e=>{this.isLoading=!1,console.error("Error loading districts:",e)}})}createEmptyDistrict(){return{id:0,districtName:"",active:!0}}onSearch(){this.searchSubject.next(this.searchTerm)}updateFilteredData(){}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadDistricts()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadDistricts())}getVisiblePages(){const e=[];if(this.totalPages<=5)for(let i=1;i<=this.totalPages;i++)e.push(i);else{const i=Math.floor(2.5);let c=Math.max(1,this.currentPage-i),l=Math.min(this.totalPages,this.currentPage+i);this.currentPage<=i?l=5:this.currentPage>this.totalPages-i&&(c=this.totalPages-5+1),c>1&&(e.push(1),c>2&&e.push(-1));for(let p=c;p<=l;p++)e.push(p);l<this.totalPages&&(l<this.totalPages-1&&e.push(-1),e.push(this.totalPages))}return e}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadDistricts()}showAddDistrictModal(){this.isEditMode=!1,this.currentDistrict=this.createEmptyDistrict(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1}editDistrict(e){this.isEditMode=!0,this.currentDistrict={...e},this.showModal=!0}toggleDistrictStatus(e){}addDistrict(){this.isLoading||(this.isLoading=!0,this.apiService.createDistrict({districtName:this.currentDistrict.districtName,active:this.currentDistrict.active}).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadDistricts())},error:n=>{this.isLoading=!1,console.error("Error creating district:",n)}}))}updateDistrict(){if(this.isLoading)return;if(!this.currentDistrict.id)return void console.error("Cannot update district: ID is missing");this.isLoading=!0;const e={districtName:this.currentDistrict.districtName,active:this.currentDistrict.active};console.log("Updating district:",{id:this.currentDistrict.id,data:e}),this.apiService.updateDistrict(this.currentDistrict.id,e).subscribe({next:n=>{this.isLoading=!1,console.log("Update response:",n),"SUCCESS"===n.status?(n.data&&(console.log("Sent data:",e),console.log("Response data:",n.data),e.active!==n.data.active&&console.warn("Server returned different active status than sent!")),this.closeModal(),this.loadDistricts()):console.error("Update failed with status:",n.status)},error:n=>{this.isLoading=!1,console.error("Error updating district:",n),console.error("Error details:",{message:n.message,status:n.status,url:n.url})}})}deleteDistrict(e){confirm("Are you sure you want to delete this district? This action cannot be undone.")&&(this.isLoading=!0,this.apiService.deleteDistrict(e).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&this.loadDistricts()},error:n=>{this.isLoading=!1,console.error("Error deleting district:",n)}}))}getNextId(){return this.districts.length>0?Math.max(...this.districts.map(e=>e.id))+1:1}trackByDistrictId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-district-list"]],standalone:!1,decls:61,vars:21,consts:[["districtForm","ngForm"],["districtName","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search districts...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","4",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","districtName",1,"required"],["type","text","id","districtName","name","districtName","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","districtActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(n,i){1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t.EFF(4,"\u{1f5fa}\ufe0f"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Districts"),t.k0s()(),t.j41(7,"button",6),t.bIt("click",function(){return i.showAddDistrictModal()}),t.EFF(8,"Add District"),t.k0s()(),t.j41(9,"div",7)(10,"div",8)(11,"label",9),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",10),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",11),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",12),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",13),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",14),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",15),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",16)(27,"label",17),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",18),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," ID "),t.j41(36,"span",22),t.EFF(37),t.k0s()(),t.j41(38,"th",21),t.bIt("click",function(){return i.sortTable("districtName")}),t.EFF(39," District Name "),t.j41(40,"span",22),t.EFF(41),t.k0s()(),t.j41(42,"th",21),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(43," Active "),t.j41(44,"span",22),t.EFF(45),t.k0s()(),t.j41(46,"th"),t.EFF(47,"Actions"),t.k0s()()(),t.j41(48,"tbody"),t.DNE(49,Wn,15,10,"tr",23)(50,zn,3,0,"tr",24),t.k0s()()(),t.j41(51,"div",25)(52,"div",26),t.EFF(53),t.k0s(),t.j41(54,"div",27)(55,"button",28),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(56," Previous "),t.k0s(),t.DNE(57,Kn,2,3,"button",29),t.j41(58,"button",28),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(59," Next "),t.k0s()()()(),t.DNE(60,Hn,30,9,"div",30)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","districtName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.districts)("ngForTrackBy",i.trackByDistrictId),t.R7$(),t.Y8G("ngIf",0===i.districts.length),t.R7$(3),t.E5c(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.totalItems)," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages),t.R7$(2),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".area-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background-color:#e3f2fd;border:1px solid #bbdefb;border-radius:4px;font-size:.875em;font-weight:500;color:#1976d2}.description-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.data-table[_ngcontent-%COMP%]{width:100%;min-width:900px;table-layout:auto}@media (min-width: 1200px){.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:5%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:12%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:10%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:12%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8){width:8%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9){width:8%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10){width:5%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(11){width:8%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(12){width:12%}}@media (min-width: 768px) and (max-width: 1199px){.data-table[_ngcontent-%COMP%]{min-width:800px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){max-width:100px}}@media (max-width: 767px){.data-table[_ngcontent-%COMP%]{min-width:700px;font-size:12px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8), .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){display:none}.area-badge[_ngcontent-%COMP%]{font-size:.75em;padding:2px 6px}.description-cell[_ngcontent-%COMP%]{max-width:80px}}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;object-fit:cover;border:2px solid #e0e0e0}.no-image[_ngcontent-%COMP%]{color:#9e9e9e;font-style:italic;font-size:.875em;padding:.875rem 1.75rem;border-radius:10px;color:#fff;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease}.header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px);box-shadow:0 6px 20px #fff3}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1050;padding:20px}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:600px;max-height:90vh}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 10px 30px #0000004d;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}@media (max-width: 768px){.modal[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{max-width:95vw}.modal-header[_ngcontent-%COMP%]{padding:15px 20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:18px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:18px}}@media (max-width: 576px){.modal[_ngcontent-%COMP%]{padding:5px}.modal-header[_ngcontent-%COMP%]{padding:12px 15px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:16px}}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),a})(),Zn=(()=>{var r;class a{constructor(){}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275cmp=t.VBU({type:a,selectors:[["app-user"]],standalone:!1,decls:5,vars:0,consts:[[1,"user-container"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"User Management"),t.k0s(),t.j41(3,"p"),t.EFF(4,"User management functionality will be implemented here."),t.k0s()())},styles:[".user-container[_ngcontent-%COMP%]{padding:20px}.user-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}.close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{width:95%;max-width:95vw}.modal-header[_ngcontent-%COMP%]{padding:15px 20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]{padding:15px 20px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;flex-direction:column-reverse;gap:8px}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.modal-header[_ngcontent-%COMP%]{padding:12px 15px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:12px 15px}}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}"]}))}return r(),a})();var H=u(2409);function to(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",31),t.EFF(7),t.k0s()(),t.j41(8,"td")(9,"span",32),t.EFF(10),t.k0s()(),t.j41(11,"td")(12,"div",33)(13,"button",34),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editModule(n))}),t.EFF(14,"Edit"),t.k0s(),t.j41(15,"button",35),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.toggleModuleStatus(n))}),t.EFF(16),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.moduleName),t.R7$(3),t.JRh(o.priority),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function eo(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function no(r,a){1&r&&(t.j41(0,"div",55),t.EFF(1," Module name is required "),t.k0s())}function oo(r,a){1&r&&(t.j41(0,"div",55),t.EFF(1," Priority is required and must be a positive number "),t.k0s())}function io(r,a){1&r&&t.nrm(0,"span",56)}function ro(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.saveModule())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"Name"),t.k0s(),t.j41(15,"input",47,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentModule.moduleName,n)||(i.currentModule.moduleName=n),s.Njj(n)}),t.k0s(),t.DNE(17,no,2,0,"div",48),t.k0s(),t.j41(18,"div",45)(19,"label",49),t.EFF(20,"Priority"),t.k0s(),t.j41(21,"input",50,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentModule.priority,n)||(i.currentModule.priority=n),s.Njj(n)}),t.k0s(),t.DNE(23,oo,2,0,"div",48),t.k0s(),t.j41(24,"div",51)(25,"button",52),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(26," Close "),t.k0s(),t.j41(27,"button",53),t.DNE(28,io,1,0,"span",54),t.EFF(29),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(16),n=t.sdS(22),i=t.XpG();t.R7$(5),t.JRh(i.isEditMode?"Edit Module":"Add Module"),t.R7$(10),t.R50("ngModel",i.currentModule.moduleName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",i.currentModule.priority),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.Y8G("disabled",o.invalid||i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(),t.SpI(" ",i.isEditMode?"Update":"Save"," ")}}let ao=(()=>{var r;class a{constructor(e,n){this.apiService=e,this.notificationService=n,this.modules=[],this.filteredModules=[],this.paginatedModules=[],this.searchTerm="",this.pageSize=10,this.currentPage=1,this.totalModules=0,this.totalPages=0,this.serverSidePagination=!0,this.hasNextPage=!1,this.hasPrevPage=!1,this.sortColumn="",this.sortDirection="asc",this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.loadingError="",this.currentModule={id:0,moduleName:"",priority:1,active:!0}}ngOnInit(){this.loadModules()}loadModules(){this.isLoading=!0,this.loadingError="";const e=this.sortColumn||"priority",n=this.sortDirection.toUpperCase();this.apiService.getModules(this.currentPage,this.pageSize,this.searchTerm,e,n).subscribe({next:i=>{"SUCCESS"===i.status&&i.data?(this.modules=i.data,this.paginatedModules=[...this.modules],i.pagination?(this.totalModules=i.pagination.total,this.totalPages=i.pagination.totalPages,this.currentPage=i.pagination.page,this.hasNextPage=i.pagination.hasNextPage||!1,this.hasPrevPage=i.pagination.hasPrevPage||!1):(this.totalModules=this.modules.length,this.totalPages=1,this.hasNextPage=!1,this.hasPrevPage=!1)):Array.isArray(i)?(this.modules=i,this.paginatedModules=[...this.modules],this.totalModules=this.modules.length,this.totalPages=1):(this.modules=i.data||[],this.paginatedModules=[...this.modules],this.totalModules=0,this.totalPages=1),this.isLoading=!1},error:i=>{console.error("Error loading modules:",i),this.loadingError="Failed to load modules. Please try again.",this.notificationService.error("Failed to load modules. Using offline data."),this.isLoading=!1,this.initializeData()}})}refreshModules(){this.loadModules()}initializeData(){this.modules=[{id:4,moduleName:"Crime Statistics",priority:1,active:!0},{id:5,moduleName:"General Administration",priority:4,active:!0},{id:6,moduleName:"Prosecution and Trial",priority:2,active:!0},{id:7,moduleName:"Crime Prevention Measures",priority:3,active:!0},{id:8,moduleName:"Police Line Functioning",priority:5,active:!0},{id:9,moduleName:"Office Management",priority:6,active:!0},{id:10,moduleName:"Budget Control",priority:7,active:!0}],this.totalModules=this.modules.length,this.totalPages=Math.ceil(this.totalModules/this.pageSize),this.paginatedModules=[...this.modules]}onSearch(){this.currentPage=1,this.loadModules()}onPageSizeChange(){this.currentPage=1,this.loadModules()}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.loadModules()}goToPage(e){e>=1&&e<=this.getTotalPages()&&(this.currentPage=e,this.loadModules())}nextPage(){this.hasNextPage&&this.goToPage(this.currentPage+1)}prevPage(){this.hasPrevPage&&this.goToPage(this.currentPage-1)}getTotalPages(){return this.totalPages}getVisiblePages(){const e=this.getTotalPages(),n=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(e,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1));for(let p=c;p<=l;p++)n.push(p);return n}getStartRecord(){return 0===this.totalModules?0:(this.currentPage-1)*this.pageSize+1}getEndRecord(){return Math.min(this.currentPage*this.pageSize,this.totalModules)}showAddModuleModal(){this.isEditMode=!1,this.currentModule={id:0,moduleName:"",priority:1,active:!0},this.showModal=!0}editModule(e){this.isEditMode=!0,this.currentModule={...e},this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentModule={id:0,moduleName:"",priority:1,active:!0}}saveModule(){if(!this.currentModule.moduleName.trim()||!this.currentModule.priority)return void this.notificationService.error("Please fill in all required fields.");this.isLoading=!0;const e={moduleName:this.currentModule.moduleName.trim(),priority:this.currentModule.priority,active:this.currentModule.active};this.isEditMode?this.apiService.updateModule(this.currentModule.id,e).subscribe({next:n=>{"SUCCESS"===n.status?(this.loadModules(),this.closeModal(),this.notificationService.success(`Module "${this.currentModule.moduleName}" has been updated successfully!`)):(this.isLoading=!1,this.notificationService.error(n.message||"Error updating module"))},error:n=>{console.error("Error updating module:",n),this.isLoading=!1,this.notificationService.error("Error updating module. Please try again.")}}):this.apiService.addModule(e).subscribe({next:n=>{"SUCCESS"===n.status?(this.loadModules(),this.closeModal(),this.notificationService.success(`Module "${this.currentModule.moduleName}" has been added successfully!`)):(this.isLoading=!1,this.notificationService.error(n.message||"Error adding module"))},error:n=>{console.error("Error adding module:",n),this.isLoading=!1,this.notificationService.error("Error adding module. Please try again.")}})}toggleModuleStatus(e){const n=e.active?"deactivate":"activate";confirm(`Are you sure you want to ${n} the module "${e.moduleName}"?`)&&(this.isLoading=!0,this.apiService.toggleModuleStatus(e.id,{active:!e.active}).subscribe({next:l=>{"SUCCESS"===l.status?(e.active=!e.active,console.log(`Module ${e.moduleName} ${n}d`),this.notificationService.success(`Module "${e.moduleName}" has been ${n}d successfully!`)):this.notificationService.error(l.message||`Error ${n}ing module`),this.isLoading=!1},error:l=>{console.error(`Error ${n}ing module:`,l),this.isLoading=!1,this.notificationService.error(`Error ${n}ing module. Please try again.`)}}))}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G),t.rXU(H.J))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-modules"]],standalone:!1,decls:64,vars:22,consts:[["moduleForm","ngForm"],["moduleNameInput","ngModel"],["priorityInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search modules...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","moduleName"],["type","text","id","moduleName","name","moduleName","required","","placeholder","Enter module name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","priority"],["type","number","id","priority","name","priority","required","","min","1","placeholder","Enter priority number",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"close-btn-footer",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(n,i){1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f4e6}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Modules"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return i.showAddModuleModal()}),t.EFF(8,"Add Module"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",20)(31,"table",21)(32,"thead")(33,"tr")(34,"th",22),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",23),t.EFF(37),t.k0s()(),t.j41(38,"th",22),t.bIt("click",function(){return i.sortTable("moduleName")}),t.EFF(39," Module Name "),t.j41(40,"span",23),t.EFF(41),t.k0s()(),t.j41(42,"th",22),t.bIt("click",function(){return i.sortTable("priority")}),t.EFF(43," Priority "),t.j41(44,"span",23),t.EFF(45),t.k0s()(),t.j41(46,"th",22),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(47," Active "),t.j41(48,"span",23),t.EFF(49),t.k0s()(),t.j41(50,"th"),t.EFF(51,"Edit"),t.k0s()()(),t.j41(52,"tbody"),t.DNE(53,to,17,11,"tr",24),t.k0s()()(),t.j41(54,"div",25)(55,"div",26),t.EFF(56),t.k0s(),t.j41(57,"div",27)(58,"button",28),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(59," Previous "),t.k0s(),t.DNE(60,eo,2,3,"button",29),t.j41(61,"button",28),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(62," Next "),t.k0s()()(),t.DNE(63,ro,30,8,"div",30),t.k0s()),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","moduleName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedModules),t.R7$(3),t.E5c(" Showing ",i.getStartRecord()," to ",i.getEndRecord()," of ",i.totalModules," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.getTotalPages()),t.R7$(2),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#007bff;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.controls[_ngcontent-%COMP%]{margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;box-shadow:0 2px 4px #28a74533}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #28a7454d}.table-controls[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px 8px 0 0;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.modules-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.modules-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative;border-right:1px solid rgba(255,255,255,.2)}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:10%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:20%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none}.modules-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#ffffff1a}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;opacity:.5;transition:opacity .3s}.sort-icon.active[_ngcontent-%COMP%]{opacity:1}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;color:#333}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496);color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #17a2b84d}.deactivate-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dc3545,#c82333);color:#fff}.deactivate-btn.activate[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997)}.deactivate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #dc35454d}.deactivate-btn.activate[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #28a7454d}.pagination-container[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;margin-top:-1px}.pagination[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#007bff;color:#fff;border-color:#007bff}.page-btn.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#ddd}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.modules-container[_ngcontent-%COMP%]{padding:10px}.table-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.modules-table[_ngcontent-%COMP%]{font-size:12px}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:15px 20px}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px}.table-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden;margin-bottom:20px}.modules-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:20%;box-sizing:border-box;word-wrap:break-word}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;font-weight:600;padding:15px 12px;text-align:left;border-bottom:2px solid #e9ecef;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;color:#999}.sort-icon.active[_ngcontent-%COMP%]{color:#007bff}.modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #e9ecef;vertical-align:middle}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]{background-color:#fff}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]{background-color:#f9f9f9}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]:hover, .modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]:hover{background-color:#f1f3f4}.priority-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;min-width:25px;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .3s;text-decoration:none;display:inline-block}.edit-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.deactivate-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.deactivate-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:30px}.pagination-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;flex-wrap:wrap;gap:15px}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:5px}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background-color:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e9ecef}.page-btn.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#dee2e6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:20px}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .3s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#fff3}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#495057}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px;transition:border-color .3s,box-shadow .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;background-color:#f8f9fa;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #e9ecef}.close-btn-footer[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.close-btn-footer[_ngcontent-%COMP%]:hover{background-color:#5a6268}.save-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s;display:flex;align-items:center;gap:8px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.save-btn[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.table-controls[_ngcontent-%COMP%]{justify-content:space-between}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px}.pagination-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.modal-dialog[_ngcontent-%COMP%]{margin:10px}}@media (max-width: 576px){.modules-container[_ngcontent-%COMP%]{padding:15px}.title-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.modules-table[_ngcontent-%COMP%]{font-size:12px}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:120px}}"]}))}return r(),a})();function so(r,a){1&r&&(t.j41(0,"div",28),t.nrm(1,"div",29),t.j41(2,"p"),t.EFF(3,"Loading topics..."),t.k0s()())}function co(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",30)(1,"p"),t.EFF(2),t.k0s(),t.j41(3,"button",31),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.loadTopics())}),t.EFF(4,"Retry"),t.k0s()()}if(2&r){const o=t.XpG();t.R7$(2),t.JRh(o.loadingError)}}function lo(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"span",37),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"span",38),t.EFF(14),t.k0s()(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td")(18,"span",38),t.EFF(19),t.k0s()(),t.j41(20,"td")(21,"span",38),t.EFF(22),t.k0s()(),t.j41(23,"td")(24,"div",39)(25,"button",40),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.editTopic(n))}),t.EFF(26," Edit "),t.k0s(),t.j41(27,"button",41),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.toggleTopicStatus(n))}),t.EFF(28),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.moduleName||"N/A"),t.R7$(2),t.JRh(o.topicName),t.R7$(2),t.JRh(o.subName||"N/A"),t.R7$(3),t.JRh(o.priority),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(2),t.JRh(o.formType||"N/A"),t.R7$(2),t.AVh("active",o.isShowPrevious)("inactive",!o.isShowPrevious),t.R7$(),t.SpI(" ",o.isShowPrevious?"YES":"NO"," "),t.R7$(2),t.AVh("active",o.isShowCummulative)("inactive",!o.isShowCummulative),t.R7$(),t.SpI(" ",o.isShowCummulative?"YES":"NO"," "),t.R7$(5),t.Y8G("title",o.active?"Deactivate Topic":"Activate Topic"),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function uo(r,a){1&r&&(t.j41(0,"tr")(1,"td",42),t.EFF(2,"No topics found matching your search criteria."),t.k0s()())}function _o(r,a){if(1&r){const o=t.RV6();t.j41(0,"table",32)(1,"thead")(2,"tr")(3,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("id"))}),t.EFF(4," Id "),t.j41(5,"span",34),t.EFF(6),t.k0s()(),t.j41(7,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("moduleName"))}),t.EFF(8," Module Name "),t.j41(9,"span",34),t.EFF(10),t.k0s()(),t.j41(11,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("topicName"))}),t.EFF(12," Topic Name "),t.j41(13,"span",34),t.EFF(14),t.k0s()(),t.j41(15,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("subName"))}),t.EFF(16," Topic Sub Name "),t.j41(17,"span",34),t.EFF(18),t.k0s()(),t.j41(19,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("priority"))}),t.EFF(20," Priority "),t.j41(21,"span",34),t.EFF(22),t.k0s()(),t.j41(23,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("active"))}),t.EFF(24," Active "),t.j41(25,"span",34),t.EFF(26),t.k0s()(),t.j41(27,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("formType"))}),t.EFF(28," Form Type "),t.j41(29,"span",34),t.EFF(30),t.k0s()(),t.j41(31,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("isShowPrevious"))}),t.EFF(32," Previous "),t.j41(33,"span",34),t.EFF(34),t.k0s()(),t.j41(35,"th",33),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.sortTable("isShowCummulative"))}),t.EFF(36," Cumulative "),t.j41(37,"span",34),t.EFF(38),t.k0s()(),t.j41(39,"th"),t.EFF(40,"Edit"),t.k0s()()(),t.j41(41,"tbody"),t.DNE(42,lo,29,23,"tr",35)(43,uo,3,0,"tr",36),t.k0s()()}if(2&r){const o=t.XpG();t.R7$(5),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","moduleName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","topicName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","subName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","formType"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","isShowPrevious"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","isShowCummulative"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedTopics),t.R7$(),t.Y8G("ngIf",0===o.paginatedTopics.length&&!o.isLoading)}}function po(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function go(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",43)(1,"div",44),t.EFF(2),t.k0s(),t.j41(3,"div",45)(4,"button",46),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.prevPage())}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,po,2,3,"button",47),t.j41(7,"button",46),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.nextPage())}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(2),t.E5c(" Showing ",o.getStartRecord()," to ",o.getEndRecord()," of ",o.totalTopics," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.getTotalPages())}}function mo(r,a){if(1&r&&(t.j41(0,"option",90),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.moduleName," ")}}function ho(r,a){1&r&&(t.j41(0,"div",91),t.EFF(1," Module selection is required "),t.k0s())}function fo(r,a){1&r&&(t.j41(0,"div",91),t.EFF(1," Topic name is required "),t.k0s())}function bo(r,a){1&r&&(t.j41(0,"div",91),t.EFF(1," Priority is required and must be a positive number "),t.k0s())}function Co(r,a){1&r&&(t.j41(0,"div",91),t.EFF(1," Form type selection is required "),t.k0s())}function Mo(r,a){if(1&r&&(t.j41(0,"option",90),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.label," ")}}function Po(r,a){if(1&r&&(t.j41(0,"option",90),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.label," ")}}function vo(r,a){1&r&&t.nrm(0,"span",29)}function xo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",49),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",50),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",51)(3,"div",52)(4,"h4",53),t.EFF(5),t.k0s(),t.j41(6,"button",54),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",55)(10,"form",56,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.saveTopic())}),t.j41(12,"div",57)(13,"div",58)(14,"label",59),t.EFF(15,"Module"),t.k0s(),t.j41(16,"select",60,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.moduleId,n)||(i.currentTopic.moduleId=n),s.Njj(n)}),t.j41(18,"option",61),t.EFF(19,"Select Module"),t.k0s(),t.DNE(20,mo,2,2,"option",62),t.k0s(),t.DNE(21,ho,2,0,"div",63),t.k0s(),t.j41(22,"div",58)(23,"label",64),t.EFF(24,"Name"),t.k0s(),t.j41(25,"input",65,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.topicName,n)||(i.currentTopic.topicName=n),s.Njj(n)}),t.k0s(),t.DNE(27,fo,2,0,"div",63),t.k0s()(),t.j41(28,"div",57)(29,"div",58)(30,"label",66),t.EFF(31,"Sub Name"),t.k0s(),t.j41(32,"input",67),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.subName,n)||(i.currentTopic.subName=n),s.Njj(n)}),t.k0s()(),t.j41(33,"div",58)(34,"label",68),t.EFF(35,"Priority"),t.k0s(),t.j41(36,"input",69,3),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.priority,n)||(i.currentTopic.priority=n),s.Njj(n)}),t.k0s(),t.DNE(38,bo,2,0,"div",63),t.k0s()(),t.j41(39,"div",57)(40,"div",58)(41,"label",70),t.EFF(42,"Form Type"),t.k0s(),t.j41(43,"select",71,4),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.formType,n)||(i.currentTopic.formType=n),s.Njj(n)}),t.j41(45,"option",61),t.EFF(46,"Select Form Type"),t.k0s(),t.j41(47,"option",72),t.EFF(48,"NORMAL"),t.k0s(),t.j41(49,"option",73),t.EFF(50,"QUESTION / SUBTOPIC"),t.k0s(),t.j41(51,"option",74),t.EFF(52,"SUBTOPIC / QUESTION"),t.k0s()(),t.DNE(53,Co,2,0,"div",63),t.k0s()(),t.j41(54,"div",75)(55,"div",76)(56,"label",77)(57,"input",78),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.isShowPrevious,n)||(i.currentTopic.isShowPrevious=n),s.Njj(n)}),t.k0s(),t.nrm(58,"span",79),t.EFF(59," Show/Hide Previous "),t.k0s()(),t.j41(60,"div",76)(61,"label",77)(62,"input",80),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.isShowCummulative,n)||(i.currentTopic.isShowCummulative=n),s.Njj(n)}),t.k0s(),t.nrm(63,"span",79),t.EFF(64," Show/Hide Cumulative "),t.k0s()()(),t.j41(65,"div",75)(66,"div",76)(67,"label",77)(68,"input",81),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.isStartJan,n)||(i.currentTopic.isStartJan=n),s.Njj(n)}),t.k0s(),t.nrm(69,"span",79),t.EFF(70," Is Starting From First Month Of Cumulative Year "),t.k0s()()(),t.j41(71,"div",57)(72,"div",58)(73,"label",82),t.EFF(74,"Starting Month"),t.k0s(),t.j41(75,"select",83),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.startMonth,n)||(i.currentTopic.startMonth=n),s.Njj(n)}),t.j41(76,"option",61),t.EFF(77,"Select Start Month"),t.k0s(),t.DNE(78,Mo,2,2,"option",62),t.k0s()(),t.j41(79,"div",58)(80,"label",84),t.EFF(81,"Ending Month"),t.k0s(),t.j41(82,"select",85),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentTopic.endMonth,n)||(i.currentTopic.endMonth=n),s.Njj(n)}),t.j41(83,"option",61),t.EFF(84,"Select End Month"),t.k0s(),t.DNE(85,Po,2,2,"option",62),t.k0s()()(),t.j41(86,"div",86)(87,"button",87),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(88," Close "),t.k0s(),t.j41(89,"button",88),t.DNE(90,vo,1,0,"span",89),t.EFF(91),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(17),n=t.sdS(26),i=t.sdS(37),c=t.sdS(44),l=t.XpG();t.R7$(5),t.JRh(l.isEditMode?"Edit Topic":"Add Topic"),t.R7$(11),t.R50("ngModel",l.currentTopic.moduleId),t.R7$(4),t.Y8G("ngForOf",l.availableModules),t.R7$(),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",l.currentTopic.topicName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(5),t.R50("ngModel",l.currentTopic.subName),t.R7$(4),t.R50("ngModel",l.currentTopic.priority),t.R7$(2),t.Y8G("ngIf",i.invalid&&i.touched),t.R7$(5),t.R50("ngModel",l.currentTopic.formType),t.R7$(10),t.Y8G("ngIf",c.invalid&&c.touched),t.R7$(4),t.R50("ngModel",l.currentTopic.isShowPrevious),t.R7$(5),t.R50("ngModel",l.currentTopic.isShowCummulative),t.R7$(6),t.R50("ngModel",l.currentTopic.isStartJan),t.R7$(7),t.R50("ngModel",l.currentTopic.startMonth),t.R7$(3),t.Y8G("ngForOf",l.months),t.R7$(4),t.R50("ngModel",l.currentTopic.endMonth),t.R7$(3),t.Y8G("ngForOf",l.months),t.R7$(4),t.Y8G("disabled",o.invalid||l.isLoading),t.R7$(),t.Y8G("ngIf",l.isLoading),t.R7$(),t.SpI(" ",l.isEditMode?"Update":"Save"," ")}}let Eo=(()=>{var r;class a{constructor(e,n){this.apiService=e,this.notificationService=n,this.topics=[],this.paginatedTopics=[],this.searchTerm="",this.pageSize=10,this.currentPage=1,this.totalTopics=0,this.totalPages=0,this.serverSidePagination=!0,this.hasNextPage=!1,this.hasPrevPage=!1,this.sortColumn="",this.sortDirection="asc",this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.loadingError="",this.currentTopic={id:0,moduleId:0,topicName:"",subName:"",priority:1,active:!0,formType:"",isShowCummulative:!1,isShowPrevious:!1,isStartJan:!1,startMonth:1,endMonth:12},this.availableModules=[],this.months=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]}ngOnInit(){this.loadTopics(),this.loadAvailableModules()}loadTopics(){this.isLoading=!0,this.loadingError="";const e=Math.max(1,this.currentPage),n=Math.min(100,Math.max(5,this.pageSize)),i=this.mapSortColumn(this.sortColumn||"priority");this.apiService.getTopics(e,n,this.searchTerm,i,this.sortDirection.toUpperCase()).subscribe({next:c=>{this.isLoading=!1,"SUCCESS"===c.status&&c.data&&(this.topics=c.data,this.paginatedTopics=c.data,this.totalTopics=c.pagination?.total||0,this.totalPages=c.pagination?.totalPages||0,this.hasNextPage=c.pagination?.hasNextPage||!1,this.hasPrevPage=c.pagination?.hasPrevPage||!1)},error:c=>{this.isLoading=!1,this.loadingError="Failed to load topics. Please try again.",this.notificationService.error("Failed to load topics"),console.error("Error loading topics:",c)}})}mapSortColumn(e){return{id:"id",moduleName:"moduleName",topicName:"topicName",subName:"subName",priority:"priority",active:"active",formType:"formType",isShowPrevious:"isShowPrevious",isShowCummulative:"isShowCummulative"}[e]||"priority"}loadAvailableModules(){this.apiService.getModuleDropdown().subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.availableModules=e.data)},error:e=>{console.error("Error fetching modules:",e),this.notificationService.error("Failed to load modules")}})}onSearch(){this.currentPage=1,this.loadTopics()}onPageSizeChange(){this.currentPage=1,this.loadTopics()}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.currentPage=1,this.loadTopics()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadTopics())}nextPage(){this.hasNextPage&&(this.currentPage++,this.loadTopics())}prevPage(){this.hasPrevPage&&(this.currentPage--,this.loadTopics())}getTotalPages(){return this.totalPages}getVisiblePages(){const e=this.getTotalPages(),n=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(e,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1));for(let p=c;p<=l;p++)n.push(p);return n}getStartRecord(){return 0===this.totalTopics?0:(this.currentPage-1)*this.pageSize+1}getEndRecord(){return Math.min(this.currentPage*this.pageSize,this.totalTopics)}showAddTopicModal(){this.isEditMode=!1,this.currentTopic={id:0,moduleId:0,topicName:"",subName:"",priority:1,active:!0,formType:"",isShowCummulative:!1,isShowPrevious:!1,isStartJan:!1,startMonth:1,endMonth:12},this.showModal=!0}editTopic(e){this.isEditMode=!0,this.currentTopic={...e},this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentTopic={id:0,moduleId:0,topicName:"",subName:"",priority:1,active:!0,formType:"",isShowCummulative:!1,isShowPrevious:!1,isStartJan:!1,startMonth:1,endMonth:12}}saveTopic(){if(!this.currentTopic.topicName.trim()||!this.currentTopic.moduleId||!this.currentTopic.formType)return void this.notificationService.error("Please fill all required fields");this.isLoading=!0;const e={moduleId:this.currentTopic.moduleId,topicName:this.currentTopic.topicName,subName:this.currentTopic.subName||"",priority:this.currentTopic.priority,formType:this.currentTopic.formType,isShowCummulative:this.currentTopic.isShowCummulative,isShowPrevious:this.currentTopic.isShowPrevious,isStartJan:this.currentTopic.isStartJan,startMonth:this.currentTopic.startMonth,endMonth:this.currentTopic.endMonth,active:this.currentTopic.active};this.isEditMode?this.apiService.updateTopic(this.currentTopic.id,e).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.notificationService.success(`Topic "${this.currentTopic.topicName}" updated successfully!`),this.closeModal(),this.loadTopics())},error:n=>{this.isLoading=!1,this.notificationService.error("Failed to update topic"),console.error("Error updating topic:",n)}}):this.apiService.addTopic(e).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.notificationService.success(`Topic "${this.currentTopic.topicName}" created successfully!`),this.closeModal(),this.loadTopics())},error:n=>{this.isLoading=!1,this.notificationService.error("Failed to create topic"),console.error("Error creating topic:",n)}})}toggleTopicStatus(e){const n=e.active?"deactivate":"activate";confirm(`Are you sure you want to ${n} the topic "${e.topicName}"?`)&&(e.active?this.apiService.deactivateTopic(e.id):this.apiService.activateTopic(e.id)).subscribe({next:l=>{"SUCCESS"===l.status&&(this.notificationService.success(`Topic "${e.topicName}" ${n}d successfully!`),this.loadTopics())},error:l=>{this.notificationService.error(`Failed to ${n} topic`),console.error(`Error ${n}ing topic:`,l)}})}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G),t.rXU(H.J))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-topics"]],standalone:!1,decls:36,vars:7,consts:[["topicForm","ngForm"],["moduleSelect","ngModel"],["topicNameInput","ngModel"],["priorityInput","ngModel"],["formTypeSelect","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search topics...",3,"ngModelChange","input","ngModel"],[1,"table-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","pagination-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[1,"retry-btn",3,"click"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],["title","Edit Topic",1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click","title"],["colspan","10",1,"no-data"],[1,"pagination-section"],[1,"pagination-info"],[1,"pagination-controls"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","moduleSelect"],["id","moduleSelect","name","moduleId","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["for","topicName"],["type","text","id","topicName","name","topicName","required","","placeholder","Enter topic name",1,"form-control",3,"ngModelChange","ngModel"],["for","subName"],["type","text","id","subName","name","subName","placeholder","Enter topic sub name",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","required","","min","1","placeholder","Enter priority number",1,"form-control",3,"ngModelChange","ngModel"],["for","formTypeSelect"],["id","formTypeSelect","name","formType","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","NORMAL"],["value","Q/ST"],["value","ST/Q"],[1,"form-row","checkbox-row"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","isShowPrevious",3,"ngModelChange","ngModel"],[1,"checkmark"],["type","checkbox","name","isShowCummulative",3,"ngModelChange","ngModel"],["type","checkbox","name","isStartJan",3,"ngModelChange","ngModel"],["for","startMonth"],["id","startMonth","name","startMonth",1,"form-control",3,"ngModelChange","ngModel"],["for","endMonth"],["id","endMonth","name","endMonth",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"close-btn-footer",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[3,"value"],[1,"error-message"]],template:function(n,i){1&n&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),t.EFF(4,"\u{1f4c4}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Topics"),t.k0s()(),t.j41(7,"button",9),t.bIt("click",function(){return i.showAddTopicModal()}),t.EFF(8,"Add Topic"),t.k0s()(),t.j41(9,"div",10)(10,"div",11)(11,"label",12),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",13),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",14),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",15),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",16),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",17),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",18),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",19)(27,"label",20),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",21),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",22),t.DNE(31,so,4,0,"div",23)(32,co,5,1,"div",24)(33,_o,44,29,"table",25),t.k0s(),t.DNE(34,go,9,6,"div",26)(35,xo,92,21,"div",27),t.k0s()),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(2),t.Y8G("ngIf",i.isLoading&&0===i.topics.length),t.R7$(),t.Y8G("ngIf",i.loadingError&&0===i.topics.length),t.R7$(),t.Y8G("ngIf",!i.isLoading||i.topics.length>0),t.R7$(),t.Y8G("ngIf",i.totalTopics>0),t.R7$(),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#007bff;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.controls[_ngcontent-%COMP%]{margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;box-shadow:0 2px 4px #28a74533}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #28a7454d}.table-controls[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px 8px 0 0;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.topics-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative;border-right:1px solid rgba(255,255,255,.2)}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none}.topics-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#ffffff1a}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;opacity:.5;transition:opacity .3s}.sort-icon.active[_ngcontent-%COMP%]{opacity:1}.table-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px;flex-wrap:wrap}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 8px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px}.table-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden;margin-bottom:20px}.topics-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #e9ecef;word-wrap:break-word;box-sizing:border-box}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:5%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:12%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:12%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:10%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10){width:14%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;font-weight:600;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none;border-bottom:2px solid #e9ecef}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;color:#999}.sort-icon.active[_ngcontent-%COMP%]{color:#007bff}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]{background-color:#fff}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]{background-color:#f9f9f9}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]:hover, .topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]:hover{background-color:#f1f3f4}.priority-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;min-width:25px;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .3s;text-decoration:none;display:inline-block}.edit-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.deactivate-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.deactivate-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:30px}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:#666}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.error-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:#dc3545}.retry-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;margin-top:10px}.retry-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.pagination-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;flex-wrap:wrap;gap:15px}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:5px}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background-color:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e9ecef}.page-btn.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#dee2e6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;overflow-y:auto;padding:20px;box-sizing:border-box}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:800px;max-height:90vh;margin:0;position:relative;display:flex;flex-direction:column}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;overflow:hidden;display:flex;flex-direction:column;max-height:100%}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .3s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#fff3}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#495057}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px;transition:border-color .3s,box-shadow .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}.checkbox-row[_ngcontent-%COMP%]{align-items:center}.checkbox-group[_ngcontent-%COMP%]{flex:none;margin-right:20px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-weight:400;margin-bottom:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px;width:auto}.checkmark[_ngcontent-%COMP%]{margin-left:8px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;background-color:#f8f9fa;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #e9ecef}.close-btn-footer[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.close-btn-footer[_ngcontent-%COMP%]:hover{background-color:#5a6268}.save-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s;display:flex;align-items:center;gap:8px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.save-btn[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1200px){.topics-table[_ngcontent-%COMP%]{font-size:11px}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}}@media (max-width: 768px){.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.table-controls[_ngcontent-%COMP%]{justify-content:space-between}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px}.pagination-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.modal-dialog[_ngcontent-%COMP%]{margin:0;max-width:calc(100% - 20px);max-height:calc(100% - 40px)}.modal-overlay[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.checkbox-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.checkbox-group[_ngcontent-%COMP%]{margin-right:0;margin-bottom:10px}}@media (max-width: 576px){.topics-container[_ngcontent-%COMP%]{padding:15px}.title-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.topics-table[_ngcontent-%COMP%]{font-size:10px}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:120px}.modal-overlay[_ngcontent-%COMP%]{padding:5px;align-items:center}.modal-body[_ngcontent-%COMP%]{padding:15px}.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 10px);max-height:calc(100% - 20px)}}"]}))}return r(),a})();function Oo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",30),t.EFF(1),t.j41(2,"button",31),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.errorMessage="")}),t.EFF(3,"\xd7"),t.k0s()()}if(2&r){const o=t.XpG();t.R7$(),t.SpI(" ",o.errorMessage," ")}}function ko(r,a){1&r&&(t.j41(0,"div",32),t.nrm(1,"div",33),t.j41(2,"span"),t.EFF(3,"Loading subtopics..."),t.k0s()())}function Fo(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",35),t.EFF(9),t.k0s()(),t.j41(10,"td")(11,"span",36),t.EFF(12),t.k0s()(),t.j41(13,"td")(14,"div",37)(15,"button",38),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.editSubTopic(n))}),t.EFF(16,"Edit"),t.k0s(),t.j41(17,"button",39),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(i.toggleSubTopicStatus(n))}),t.EFF(18),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.topicName||"N/A"),t.R7$(2),t.JRh(o.subTopicName),t.R7$(3),t.JRh(o.priority||"N/A"),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Ro(r,a){1&r&&(t.j41(0,"tr")(1,"td",40),t.EFF(2,"No subtopics found"),t.k0s()())}function To(r,a){if(1&r&&(t.j41(0,"tbody"),t.DNE(1,Fo,19,12,"tr",34)(2,Ro,3,0,"tr",23),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.paginatedSubTopics),t.R7$(),t.Y8G("ngIf",0===o.paginatedSubTopics.length)}}function Do(r,a){1&r&&(t.j41(0,"tbody")(1,"tr")(2,"td",40),t.EFF(3,"Loading..."),t.k0s()()())}function So(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function Io(r,a){if(1&r&&(t.j41(0,"option",65),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.topicName," ")}}function jo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",42),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",43),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",44)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",45),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(6,"\xd7"),t.k0s()(),t.j41(7,"div",46)(8,"form",47,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.saveSubTopic())}),t.j41(10,"div",48)(11,"label",49),t.EFF(12,"Topic "),t.j41(13,"span",50),t.EFF(14,"*"),t.k0s()(),t.j41(15,"select",51),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubTopic.topicId,n)||(i.currentSubTopic.topicId=n),s.Njj(n)}),t.j41(16,"option",52),t.EFF(17),t.k0s(),t.DNE(18,Io,2,2,"option",53),t.k0s()(),t.j41(19,"div",48)(20,"label",54),t.EFF(21,"SubTopic Name "),t.j41(22,"span",50),t.EFF(23,"*"),t.k0s()(),t.j41(24,"input",55),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubTopic.subTopicName,n)||(i.currentSubTopic.subTopicName=n),s.Njj(n)}),t.k0s()(),t.j41(25,"div",48)(26,"label",56),t.EFF(27,"Priority "),t.j41(28,"span",50),t.EFF(29,"*"),t.k0s()(),t.j41(30,"input",57),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubTopic.priority,n)||(i.currentSubTopic.priority=n),s.Njj(n)}),t.k0s()(),t.j41(31,"div",58)(32,"label",59)(33,"input",60),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentSubTopic.active,n)||(i.currentSubTopic.active=n),s.Njj(n)}),t.k0s(),t.nrm(34,"span",61),t.EFF(35," Active "),t.k0s()(),t.j41(36,"div",62)(37,"button",63),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(38,"Close"),t.k0s(),t.j41(39,"button",64),t.EFF(40,"Save"),t.k0s()()()()()()}if(2&r){const o=t.sdS(9),e=t.XpG();t.R7$(4),t.JRh(e.isEditMode?"Edit SubTopic":"Add SubTopic"),t.R7$(11),t.R50("ngModel",e.currentSubTopic.topicId),t.Y8G("disabled",e.isTopicsLoading),t.R7$(2),t.JRh(e.isTopicsLoading?"Loading topics...":"Select Topic"),t.R7$(),t.Y8G("ngForOf",e.availableTopics),t.R7$(6),t.R50("ngModel",e.currentSubTopic.subTopicName),t.R7$(6),t.R50("ngModel",e.currentSubTopic.priority),t.R7$(3),t.R50("ngModel",e.currentSubTopic.active),t.R7$(6),t.Y8G("disabled",!o.form.valid)}}let yo=(()=>{var r;class a{constructor(e){this.apiService=e,this.subTopics=[],this.filteredSubTopics=[],this.paginatedSubTopics=[],this.availableTopics=[],this.showModal=!1,this.isEditMode=!1,this.currentSubTopic=this.getEmptySubTopic(),this.searchTerm="",this.sortColumn="subTopicName",this.sortDirection="asc",this.currentPage=1,this.itemsPerPage=10,this.totalPages=1,this.serverPagination={total:0,page:1,limit:10,totalPages:1},this.isLoading=!1,this.isTopicsLoading=!1,this.errorMessage=""}ngOnInit(){this.loadSubTopics(),this.loadTopics()}loadSubTopics(){this.isLoading=!0,this.errorMessage="",this.apiService.getSubTopics(this.currentPage,this.itemsPerPage,this.searchTerm||void 0,this.sortColumn,this.sortDirection.toUpperCase()).subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.subTopics=e.data,this.filteredSubTopics=[...this.subTopics],this.paginatedSubTopics=[...this.subTopics],e.pagination&&(this.serverPagination=e.pagination,this.totalPages=e.pagination.totalPages)),this.isLoading=!1},error:e=>{console.error("Error loading subtopics:",e),this.errorMessage="Failed to load subtopics. Please try again.",this.isLoading=!1}})}loadTopics(){this.isTopicsLoading=!0,this.apiService.getActiveTopics().subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.availableTopics=e.data),this.isTopicsLoading=!1},error:e=>{console.error("Error loading topics:",e),this.isTopicsLoading=!1}})}openAddModal(){this.isEditMode=!1,this.currentSubTopic=this.getEmptySubTopic(),this.showModal=!0}editSubTopic(e){this.isEditMode=!0,this.currentSubTopic={...e},this.showModal=!0}closeModal(){this.showModal=!1,this.currentSubTopic=this.getEmptySubTopic(),this.isEditMode=!1}saveSubTopic(){const e={subTopicName:this.currentSubTopic.subTopicName,topicId:this.currentSubTopic.topicId,priority:this.currentSubTopic.priority||1,active:void 0===this.currentSubTopic.active||this.currentSubTopic.active};this.isEditMode&&this.currentSubTopic.id?this.apiService.updateSubTopic(this.currentSubTopic.id,e).subscribe({next:n=>{"SUCCESS"===n.status&&(this.loadSubTopics(),this.closeModal())},error:n=>{console.error("Error updating subtopic:",n),this.errorMessage="Failed to update subtopic. Please try again."}}):this.apiService.addSubTopic(e).subscribe({next:n=>{"SUCCESS"===n.status&&(this.loadSubTopics(),this.closeModal())},error:n=>{console.error("Error creating subtopic:",n),this.errorMessage="Failed to create subtopic. Please try again."}})}toggleSubTopicStatus(e){e.active?this.apiService.deactivateSubTopic(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadSubTopics()},error:n=>{console.error("Error deactivating subtopic:",n),this.errorMessage="Failed to deactivate subtopic. Please try again."}}):this.apiService.activateSubTopic(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadSubTopics()},error:n=>{console.error("Error activating subtopic:",n),this.errorMessage="Failed to activate subtopic. Please try again."}})}deleteSubTopic(e){confirm("Are you sure you want to delete this subtopic?")&&this.apiService.deleteSubTopic(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadSubTopics()},error:n=>{console.error("Error deleting subtopic:",n),this.errorMessage="Failed to delete subtopic. Please try again."}})}filterSubTopics(){this.currentPage=1,this.loadSubTopics()}sortBy(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.currentPage=1,this.loadSubTopics()}updatePagination(){console.log("Updating pagination - itemsPerPage:",this.itemsPerPage),this.currentPage=1,this.loadSubTopics()}goToPage(e){console.log("Going to page:",e,"Total pages:",this.serverPagination.totalPages),e>=1&&e<=(this.serverPagination.totalPages||1)&&(this.currentPage=e,this.loadSubTopics())}getPageNumbers(){const e=[],i=Math.floor(2.5),c=this.serverPagination.totalPages||1;let l=Math.max(1,this.currentPage-i),p=Math.min(c,l+5-1);p-l<4&&(l=Math.max(1,p-5+1));for(let C=l;C<=p;C++)e.push(C);return e}getStartIndex(){return 0===this.serverPagination.total?0:(this.currentPage-1)*this.itemsPerPage+1}getEndIndex(){return Math.min(this.currentPage*this.itemsPerPage,this.serverPagination.total)}getEmptySubTopic(){return{id:0,subTopicName:"",topicId:0,priority:1,active:!0}}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-subtopics"]],standalone:!1,decls:68,vars:28,consts:[["subTopicForm","ngForm"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search subtopics...",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"error-message"],[1,"close-error",3,"click"],[1,"loading-indicator"],[1,"spinner"],[4,"ngFor","ngForOf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","6",1,"text-center"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","topic"],[1,"required"],["id","topic","name","topic","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","subTopicName"],["type","text","id","subTopicName","name","subTopicName","required","","placeholder","Enter subtopic name",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","required","","min","1","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],[3,"value"]],template:function(n,i){1&n&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of SubTopics"),t.k0s()(),t.j41(7,"button",5),t.bIt("click",function(){return i.openAddModal()}),t.EFF(8,"Add SubTopic"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"label",8),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",9),t.mxI("ngModelChange",function(l){return t.DH7(i.itemsPerPage,l)||(i.itemsPerPage=l),l}),t.bIt("ngModelChange",function(){return i.updatePagination()}),t.j41(14,"option",10),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",11),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",12),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",13),t.EFF(21,"50"),t.k0s()(),t.j41(22,"span"),t.EFF(23,"entries"),t.k0s()(),t.j41(24,"div",14)(25,"label",15),t.EFF(26,"Search:"),t.k0s(),t.j41(27,"input",16),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.filterSubTopics()}),t.k0s()()(),t.DNE(28,Oo,4,1,"div",17)(29,ko,4,0,"div",18),t.j41(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),t.bIt("click",function(){return i.sortBy("id")}),t.EFF(35," Id "),t.j41(36,"span",22),t.EFF(37),t.k0s()(),t.j41(38,"th",21),t.bIt("click",function(){return i.sortBy("topicName")}),t.EFF(39," Topic Name "),t.j41(40,"span",22),t.EFF(41),t.k0s()(),t.j41(42,"th",21),t.bIt("click",function(){return i.sortBy("subTopicName")}),t.EFF(43," SubTopic Name "),t.j41(44,"span",22),t.EFF(45),t.k0s()(),t.j41(46,"th",21),t.bIt("click",function(){return i.sortBy("priority")}),t.EFF(47," Priority "),t.j41(48,"span",22),t.EFF(49),t.k0s()(),t.j41(50,"th",21),t.bIt("click",function(){return i.sortBy("active")}),t.EFF(51," Active "),t.j41(52,"span",22),t.EFF(53),t.k0s()(),t.j41(54,"th"),t.EFF(55,"Actions"),t.k0s()()(),t.DNE(56,To,3,2,"tbody",23)(57,Do,4,0,"tbody",23),t.k0s()(),t.j41(58,"div",24)(59,"div",25),t.EFF(60),t.k0s(),t.j41(61,"div",26)(62,"button",27),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(63," Previous "),t.k0s(),t.DNE(64,So,2,3,"button",28),t.j41(65,"button",27),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(66," Next "),t.k0s()()()(),t.DNE(67,jo,41,9,"div",29)),2&n&&(t.R7$(13),t.R50("ngModel",i.itemsPerPage),t.R7$(14),t.R50("ngModel",i.searchTerm),t.R7$(),t.Y8G("ngIf",i.errorMessage),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","topicName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","subTopicName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.Y8G("ngIf",!i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(3),t.E5c(" Showing ",i.getStartIndex()," to ",i.getEndIndex()," of ",i.serverPagination.total," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getPageNumbers()),t.R7$(),t.Y8G("disabled",i.currentPage===(i.serverPagination.totalPages||1)),t.R7$(2),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#007bff;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.controls[_ngcontent-%COMP%]{margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;box-shadow:0 2px 4px #28a74533}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #28a7454d}.table-controls[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px 8px 0 0;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.subtopics-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.subtopics-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative;border-right:1px solid rgba(255,255,255,.2)}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:5%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:20%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none}.subtopics-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#ffffff1a}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;opacity:.5;transition:opacity .3s}.sort-icon.active[_ngcontent-%COMP%]{opacity:1}.subtopics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s}.subtopics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.subtopics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.subtopics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;color:#333}.priority-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;min-width:25px;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .3s;text-decoration:none;display:inline-block}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496);color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #17a2b84d}.deactivate-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dc3545,#c82333);color:#fff}.deactivate-btn.activate[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997)}.deactivate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #dc35454d}.deactivate-btn.activate[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #28a7454d}.pagination-container[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;margin-top:-1px}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#007bff;color:#fff;border-color:#007bff}.page-btn.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#ddd}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.subtopics-container[_ngcontent-%COMP%]{padding:10px}.table-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.subtopics-table[_ngcontent-%COMP%]{font-size:12px}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .subtopics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:15px 20px}}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #f3f3f3;border-top:2px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:15px;border-radius:8px;border:1px solid #f5c6cb;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between}.close-error[_ngcontent-%COMP%]{background:none;border:none;color:#721c24;font-size:18px;cursor:pointer;padding:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.close-error[_ngcontent-%COMP%]:hover{background:#721c241a;border-radius:50%}.text-center[_ngcontent-%COMP%]{text-align:center}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-1px)}"]}))}return r(),a})();function wo(r,a){1&r&&(t.j41(0,"tr")(1,"td",19),t.EFF(2,"Loading questions..."),t.k0s()())}function No(r,a){if(1&r&&(t.j41(0,"pre",29),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit,e=t.XpG();t.R7$(),t.JRh(e.formatFormula(o.formula))}}function Bo(r,a){1&r&&(t.j41(0,"span",30),t.EFF(1,"-"),t.k0s())}function Uo(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr",20)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td",21),t.DNE(12,No,2,1,"pre",22)(13,Bo,2,0,"span",23),t.k0s(),t.j41(14,"td")(15,"span",24),t.EFF(16),t.k0s()(),t.j41(17,"td")(18,"span",25),t.EFF(19),t.k0s()(),t.j41(20,"td")(21,"div",26)(22,"button",27),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editQuestion(n))}),t.EFF(23,"Edit"),t.k0s(),t.j41(24,"button",28),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.toggleQuestionStatus(n))}),t.EFF(25),t.k0s()()()()}if(2&r){const o=a.$implicit,e=t.XpG();t.Y8G("hidden",e.loading),t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(e.getTopicName(o)),t.R7$(2),t.JRh(e.getSubTopicName(o)),t.R7$(2),t.JRh(o.question),t.R7$(2),t.JRh(o.defaultVal||"NONE"),t.R7$(2),t.Y8G("ngIf",o.formula&&""!==o.formula),t.R7$(),t.Y8G("ngIf",!o.formula||""===o.formula),t.R7$(3),t.JRh(o.priority||0),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Ao(r,a){1&r&&(t.j41(0,"tr")(1,"td",31),t.EFF(2,"No questions found matching your search criteria."),t.k0s()())}function $o(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG(2);return s.Njj(-1!==n?i.goToPage(n):null)}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG(2);t.AVh("active",o===e.currentPage)("ellipsis",-1===o),t.Y8G("disabled",-1===o),t.BMQ("aria-label",-1===o?"More pages":"Page "+o)("aria-current",o===e.currentPage?"page":null),t.R7$(),t.SpI(" ",-1===o?"...":o," ")}}function Lo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",32)(1,"div",33),t.EFF(2),t.k0s(),t.j41(3,"nav",34)(4,"div",35)(5,"button",36),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.goToPage(n.currentPage-1))}),t.EFF(6," Previous "),t.k0s(),t.DNE(7,$o,2,8,"button",37),t.j41(8,"button",38),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.goToPage(n.currentPage+1))}),t.EFF(9," Next "),t.k0s()()()()}if(2&r){const o=t.XpG();t.R7$(2),t.E5c(" Showing ",o.getStartEntry()," to ",o.getEndEntry()," of ",o.totalRecords," entries "),t.R7$(3),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getPageNumbers()),t.R7$(),t.Y8G("disabled",o.currentPage===o.getTotalPages())}}function Go(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.topicName)}}function Vo(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.subTopicName)}}function qo(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.JRh(o.label)}}function Yo(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.JRh(o.label)}}function Wo(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.question)}}function zo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45)(1,"label",75),t.EFF(2,"Choose Default Question"),t.k0s(),t.j41(3,"select",82),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(2);return t.DH7(i.formData.defaultQue,n)||(i.formData.defaultQue=n),s.Njj(n)}),t.j41(4,"option",49),t.EFF(5,"Select Question"),t.k0s(),t.DNE(6,Wo,2,2,"option",50),t.k0s()()}if(2&r){const o=t.XpG(2);t.R7$(3),t.R50("ngModel",o.formData.defaultQue),t.R7$(3),t.Y8G("ngForOf",o.availableQuestions)}}function Ko(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.subTopicName)}}function Xo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45)(1,"label",83),t.EFF(2,"Choose Default SubTopic"),t.k0s(),t.j41(3,"select",84),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(2);return t.DH7(i.formData.defaultSub,n)||(i.formData.defaultSub=n),s.Njj(n)}),t.j41(4,"option",49),t.EFF(5,"Select SubTopic"),t.k0s(),t.DNE(6,Ko,2,2,"option",50),t.k0s()()}if(2&r){const o=t.XpG(2);t.R7$(3),t.R50("ngModel",o.formData.defaultSub),t.R7$(3),t.Y8G("ngForOf",o.filteredSubTopics)}}function Qo(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.Lme(" ",o.id," - ",o.question," ")}}function Ho(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45)(1,"label",86),t.EFF(2,"Choose Question"),t.k0s(),t.j41(3,"select",87),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(3);return t.DH7(i.formulaBuilderState.selectedQuestion,n)||(i.formulaBuilderState.selectedQuestion=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG(3);return s.Njj(n.onQuestionSelect())}),t.j41(4,"option",49),t.EFF(5,"Select Question"),t.k0s(),t.DNE(6,Qo,2,3,"option",50),t.k0s()()}if(2&r){const o=t.XpG(3);t.R7$(3),t.R50("ngModel",o.formulaBuilderState.selectedQuestion),t.R7$(3),t.Y8G("ngForOf",o.availableQuestions)}}function Jo(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.subTopicName," ")}}function Zo(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45)(1,"label",88),t.EFF(2,"Choose Sub Topic (Optional)"),t.k0s(),t.j41(3,"div",89)(4,"select",90),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(3);return t.DH7(i.formulaBuilderState.selectedSubTopic,n)||(i.formulaBuilderState.selectedSubTopic=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG(3);return s.Njj(n.onSubTopicSelect())}),t.j41(5,"option",49),t.EFF(6,"Select SubTopic"),t.k0s(),t.DNE(7,Jo,2,2,"option",50),t.k0s(),t.j41(8,"button",91),t.bIt("click",function(){s.eBV(o);const n=t.XpG(3);return s.Njj(n.skipSubTopic())}),t.EFF(9," Skip "),t.k0s()()()}if(2&r){const o=t.XpG(3);t.R7$(4),t.R50("ngModel",o.formulaBuilderState.selectedSubTopic),t.R7$(3),t.Y8G("ngForOf",o.filteredSubTopics)}}function ti(r,a){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.Lme(" ",o.label," (",o.value,") ")}}function ei(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45)(1,"label",92),t.EFF(2,"Choose Operation"),t.k0s(),t.j41(3,"select",93),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(3);return t.DH7(i.formulaBuilderState.selectedOperation,n)||(i.formulaBuilderState.selectedOperation=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG(3);return s.Njj(n.onOperationSelect())}),t.j41(4,"option",49),t.EFF(5,"Select Operation"),t.k0s(),t.DNE(6,ti,2,3,"option",50),t.k0s()()}if(2&r){const o=t.XpG(3);t.R7$(3),t.R50("ngModel",o.formulaBuilderState.selectedOperation),t.R7$(3),t.Y8G("ngForOf",o.mathOperations)}}function ni(r,a){if(1&r&&(t.j41(0,"div",85),t.DNE(1,Ho,7,2,"div",61)(2,Zo,10,2,"div",61)(3,ei,7,2,"div",61),t.k0s()),2&r){const o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.formulaBuilderState.showQuestionDiv),t.R7$(),t.Y8G("ngIf",o.formulaBuilderState.showSubTopicDiv),t.R7$(),t.Y8G("ngIf",o.formulaBuilderState.showOperationDiv)}}function oi(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",40),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",41),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",42)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",43),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(6,"\xd7"),t.k0s()(),t.j41(7,"div",44)(8,"form",null,0)(10,"div",45)(11,"label",46),t.EFF(12,"Topic "),t.j41(13,"span",47),t.EFF(14,"*"),t.k0s()(),t.j41(15,"select",48),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.topicId,n)||(i.formData.topicId=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.onTopicChange())}),t.j41(16,"option",49),t.EFF(17),t.k0s(),t.DNE(18,Go,2,2,"option",50),t.k0s()(),t.j41(19,"div",45)(20,"label",51),t.EFF(21,"SubTopic"),t.k0s(),t.j41(22,"select",52),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.subTopicId,n)||(i.formData.subTopicId=n),s.Njj(n)}),t.j41(23,"option",49),t.EFF(24),t.k0s(),t.DNE(25,Vo,2,2,"option",50),t.k0s()(),t.j41(26,"div",45)(27,"label",53),t.EFF(28,"Question "),t.j41(29,"span",47),t.EFF(30,"*"),t.k0s()(),t.j41(31,"textarea",54),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.question,n)||(i.formData.question=n),s.Njj(n)}),t.k0s()(),t.j41(32,"div",45)(33,"label",55),t.EFF(34,"Priority"),t.k0s(),t.j41(35,"input",56),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.priority,n)||(i.formData.priority=n),s.Njj(n)}),t.k0s()(),t.j41(36,"div",45)(37,"label",57),t.EFF(38,"Question Type "),t.j41(39,"span",47),t.EFF(40,"*"),t.k0s()(),t.j41(41,"select",58),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.type,n)||(i.formData.type=n),s.Njj(n)}),t.DNE(42,qo,2,2,"option",50),t.k0s()(),t.j41(43,"div",45)(44,"label",59),t.EFF(45,"Default Value "),t.j41(46,"span",47),t.EFF(47,"*"),t.k0s()(),t.j41(48,"select",60),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.defaultVal,n)||(i.formData.defaultVal=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.onDefaultValueChange())}),t.DNE(49,Yo,2,2,"option",50),t.k0s()(),t.DNE(50,zo,7,2,"div",61)(51,Xo,7,2,"div",61),t.j41(52,"div",45)(53,"div",62)(54,"label",63)(55,"input",64),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.isPrevious,n)||(i.formData.isPrevious=n),s.Njj(n)}),t.k0s(),t.j41(56,"span",65),t.EFF(57,"Show Previous"),t.k0s()()()(),t.j41(58,"div",45)(59,"div",62)(60,"label",63)(61,"input",66),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.isCumulative,n)||(i.formData.isCumulative=n),s.Njj(n)}),t.k0s(),t.j41(62,"span",65),t.EFF(63,"Show Cumulative"),t.k0s()()()(),t.j41(64,"div",45)(65,"label",67),t.EFF(66,"Question Formula"),t.k0s(),t.j41(67,"div",68)(68,"textarea",69),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.formula,n)||(i.formData.formula=n),s.Njj(n)}),t.k0s(),t.j41(69,"div",70)(70,"button",71),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.startFormulaBuilder())}),t.EFF(71," Build Formula "),t.k0s(),t.j41(72,"button",72),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.resetFormula())}),t.EFF(73," Reset "),t.k0s(),t.j41(74,"button",73),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.finishFormula())}),t.EFF(75," Finish "),t.k0s()()()(),t.DNE(76,ni,4,3,"div",74),t.j41(77,"div",45)(78,"label",75),t.EFF(79,"Default Question ID"),t.k0s(),t.j41(80,"input",76),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.defaultQue,n)||(i.formData.defaultQue=n),s.Njj(n)}),t.k0s()(),t.j41(81,"div",45)(82,"div",62)(83,"label",63)(84,"input",77),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.formData.active,n)||(i.formData.active=n),s.Njj(n)}),t.k0s(),t.j41(85,"span",65),t.EFF(86,"Active"),t.k0s()()()()()(),t.j41(87,"div",78)(88,"button",79),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.resetForm())}),t.EFF(89,"Reset Formula"),t.k0s(),t.j41(90,"button",79),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(91,"Close"),t.k0s(),t.j41(92,"button",80),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.saveQuestion())}),t.EFF(93),t.k0s()()()()}if(2&r){const o=t.XpG();t.R7$(4),t.JRh(o.isEditing?"Edit Question":"Add Question"),t.R7$(11),t.R50("ngModel",o.formData.topicId),t.Y8G("disabled",o.loadingTopics),t.R7$(2),t.JRh(o.loadingTopics?"Loading topics...":"Select Topic"),t.R7$(),t.Y8G("ngForOf",o.topics),t.R7$(4),t.R50("ngModel",o.formData.subTopicId),t.Y8G("disabled",!o.formData.topicId||o.loadingSubTopics),t.R7$(2),t.JRh(o.loadingSubTopics?"Loading sub-topics...":"Select SubTopic"),t.R7$(),t.Y8G("ngForOf",o.filteredSubTopics),t.R7$(6),t.R50("ngModel",o.formData.question),t.R7$(4),t.R50("ngModel",o.formData.priority),t.R7$(6),t.R50("ngModel",o.formData.type),t.R7$(),t.Y8G("ngForOf",o.questionTypes),t.R7$(6),t.R50("ngModel",o.formData.defaultVal),t.R7$(),t.Y8G("ngForOf",o.defaultValueTypes),t.R7$(),t.Y8G("ngIf",o.showDefaultQuestion),t.R7$(),t.Y8G("ngIf",o.showDefaultSubTopic),t.R7$(4),t.R50("ngModel",o.formData.isPrevious),t.R7$(6),t.R50("ngModel",o.formData.isCumulative),t.R7$(7),t.R50("ngModel",o.formData.formula),t.R7$(8),t.Y8G("ngIf",o.formulaBuilderState.showQuestionDiv||o.formulaBuilderState.showSubTopicDiv||o.formulaBuilderState.showOperationDiv),t.R7$(4),t.R50("ngModel",o.formData.defaultQue),t.R7$(4),t.R50("ngModel",o.formData.active),t.R7$(8),t.Y8G("disabled",!o.formData.question||!o.formData.topicId),t.R7$(),t.SpI(" ",o.isEditing?"Update":"Save"," ")}}let ii=(()=>{var r;class a{constructor(e){this.apiService=e,this.questions=[],this.filteredQuestions=[],this.paginatedQuestions=[],this.currentPage=1,this.entriesPerPage=10,this.totalPages=0,this.totalRecords=0,this.showModal=!1,this.isEditing=!1,this.loading=!1,this.loadingTopics=!1,this.loadingSubTopics=!1,this.formData={topicId:"",subTopicId:"",question:"",priority:"",type:"NUMBER",defaultVal:"NONE",isPrevious:!1,isCumulative:!1,formula:"",defaultQue:"",defaultSub:"",active:!0},this.topics=[],this.subTopics=[],this.filteredSubTopics=[],this.availableQuestions=[],this.formulaBuilderState={step:"question",showQuestionDiv:!1,showSubTopicDiv:!1,showOperationDiv:!1,selectedQuestion:"",selectedSubTopic:"",selectedOperation:""},this.questionTypes=[{value:"TEXT",label:"Text"},{value:"DATE",label:"Date"},{value:"NUMBER",label:"Number"},{value:"PRICE",label:"Price"},{value:"MULTIPLE_CHOICE",label:"Multiple Choice"}],this.defaultValueTypes=[{value:"NONE",label:"NONE"},{value:"PREVIOUS",label:"PREVIOUS"},{value:"QUESTION",label:"QUESTION"},{value:"PS",label:"PS"},{value:"SUB",label:"Subdivision"},{value:"CIRCLE",label:"Circle"},{value:"PSOP",label:"PS/OP"}],this.mathOperations=[{value:"+",label:"Plus"},{value:"-",label:"Minus"},{value:"*",label:"Multiply"},{value:"/",label:"Division"},{value:"=",label:"Equal"},{value:"==",label:"Equal To"}],this.showDefaultQuestion=!1,this.showDefaultSubTopic=!1}ngOnInit(){this.loadActiveTopics(),this.loadQuestions()}loadActiveTopics(){this.loadingTopics=!0,this.apiService.getActiveTopics().subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.topics=e.data),this.loadingTopics=!1},error:e=>{console.error("Error loading topics:",e),this.loadingTopics=!1}})}loadSubTopicsByTopic(e){e?(this.loadingSubTopics=!0,this.apiService.getSubTopicsByTopicForForm(e).subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.filteredSubTopics=n.data),this.loadingSubTopics=!1},error:n=>{console.error("Error loading sub-topics:",n),this.loadingSubTopics=!1}})):this.filteredSubTopics=[]}loadQuestions(){this.loading=!0,this.apiService.getQuestions(this.currentPage,this.entriesPerPage).subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.questions=e.data,e.pagination&&(this.totalRecords=e.pagination.total,this.totalPages=e.pagination.totalPages)),this.loading=!1},error:e=>{console.error("Error loading questions:",e),this.loading=!1}})}onEntriesPerPageChange(){this.currentPage=1,this.loadQuestions()}goToPage(e){this.currentPage=e,this.loadQuestions()}getTotalPages(){return this.totalPages}getPageNumbers(){const e=[],n=this.totalPages,i=this.currentPage;if(n<=7)for(let c=1;c<=n;c++)e.push(c);else if(i<=4){for(let c=1;c<=5;c++)e.push(c);n>6&&(e.push(-1),e.push(n))}else if(i>=n-3){e.push(1),n>6&&e.push(-1);for(let c=n-4;c<=n;c++)e.push(c)}else{e.push(1),e.push(-1);for(let c=i-1;c<=i+1;c++)e.push(c);e.push(-1),e.push(n)}return e}getStartEntry(){return 0===this.totalRecords?0:(this.currentPage-1)*this.entriesPerPage+1}getEndEntry(){const e=this.currentPage*this.entriesPerPage;return e>this.totalRecords?this.totalRecords:e}openAddModal(){this.isEditing=!1,this.resetFormData(),this.showModal=!0}closeModal(){this.showModal=!1,this.resetFormData()}resetFormData(){this.formData={topicId:"",subTopicId:"",question:"",priority:"",type:"NUMBER",defaultVal:"NONE",isPrevious:!1,isCumulative:!1,formula:"",defaultQue:"",defaultSub:"",active:!0},this.filteredSubTopics=[],this.availableQuestions=[],this.resetFormulaBuilder(),this.showDefaultQuestion=!1,this.showDefaultSubTopic=!1}onTopicChange(){this.formData.subTopicId="",this.formData.formula="",this.resetFormulaBuilder(),this.formData.topicId?(this.loadSubTopicsByTopic(this.formData.topicId),this.loadQuestionsByTopic(this.formData.topicId)):(this.filteredSubTopics=[],this.availableQuestions=[])}onDefaultValueChange(){this.showDefaultQuestion="QUESTION"===this.formData.defaultVal,this.showDefaultSubTopic="QUESTION"===this.formData.defaultVal,"QUESTION"!==this.formData.defaultVal&&(this.formData.defaultQue="",this.formData.defaultSub="")}loadQuestionsByTopic(e){this.apiService.getQuestionsByTopic(e).subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.availableQuestions=n.data)},error:n=>{console.error("Error loading questions:",n)}})}startFormulaBuilder(){this.formulaBuilderState.showQuestionDiv=!0,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!1,this.formulaBuilderState.step="question"}resetFormulaBuilder(){this.formulaBuilderState={step:"question",showQuestionDiv:!1,showSubTopicDiv:!1,showOperationDiv:!1,selectedQuestion:"",selectedSubTopic:"",selectedOperation:""}}onQuestionSelect(){this.formulaBuilderState.selectedQuestion&&(this.formData.formula+=this.formulaBuilderState.selectedQuestion,this.formulaBuilderState.showQuestionDiv=!1,this.formulaBuilderState.showSubTopicDiv=!0,this.formulaBuilderState.showOperationDiv=!1,this.formulaBuilderState.step="subtopic")}onSubTopicSelect(){this.formulaBuilderState.selectedSubTopic&&(this.formData.formula+="_"+this.formulaBuilderState.selectedSubTopic),this.formulaBuilderState.showQuestionDiv=!1,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!0,this.formulaBuilderState.step="operation"}skipSubTopic(){this.formulaBuilderState.showQuestionDiv=!1,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!0,this.formulaBuilderState.step="operation"}onOperationSelect(){this.formulaBuilderState.selectedOperation&&(this.formData.formula+=this.formulaBuilderState.selectedOperation,this.formulaBuilderState.selectedQuestion="",this.formulaBuilderState.selectedSubTopic="",this.formulaBuilderState.selectedOperation="",this.formulaBuilderState.showQuestionDiv=!0,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!1,this.formulaBuilderState.step="question")}resetFormula(){this.formData.formula="",this.resetFormulaBuilder()}finishFormula(){this.resetFormulaBuilder()}saveQuestion(){if(!this.formData.question||!this.formData.topicId)return void alert("Please fill all required fields");const e={question:this.formData.question,topicId:parseInt(this.formData.topicId),subTopicId:this.formData.subTopicId?parseInt(this.formData.subTopicId):void 0,priority:this.formData.priority?parseInt(this.formData.priority):void 0,type:this.formData.type,defaultVal:this.formData.defaultVal,isPrevious:this.formData.isPrevious,isCumulative:this.formData.isCumulative,formula:this.formData.formula,defaultQue:this.formData.defaultQue?parseInt(this.formData.defaultQue):void 0,active:this.formData.active};this.isEditing?this.apiService.updateQuestion(this.formData.id,e).subscribe({next:n=>{"SUCCESS"===n.status&&(this.loadQuestions(),this.closeModal())},error:n=>{console.error("Error updating question:",n),alert("Error updating question")}}):this.apiService.addQuestion(e).subscribe({next:n=>{"SUCCESS"===n.status&&(this.loadQuestions(),this.closeModal())},error:n=>{console.error("Error creating question:",n),alert("Error creating question")}})}toggleQuestionStatus(e){(e.active?this.apiService.deactivateQuestion(e.id):this.apiService.activateQuestion(e.id)).subscribe({next:i=>{"SUCCESS"===i.status&&(e.active=!e.active)},error:i=>{console.error("Error toggling question status:",i),alert("Error updating question status")}})}editQuestion(e){this.isEditing=!0,this.formData={id:e.id,topicId:e.topicId,subTopicId:e.subTopicId,question:e.question,priority:e.priority,type:e.type,defaultVal:e.defaultVal,isPrevious:e.isPrevious,isCumulative:e.isCumulative,formula:e.formula,defaultQue:e.defaultQue,active:e.active},this.formData.topicId&&(this.loadSubTopicsByTopic(this.formData.topicId),this.loadQuestionsByTopic(this.formData.topicId)),this.onDefaultValueChange(),this.showModal=!0}deleteQuestion(e){confirm("Are you sure you want to delete this question?")&&this.apiService.deleteQuestion(e.id).subscribe({next:n=>{"SUCCESS"===n.status&&this.loadQuestions()},error:n=>{console.error("Error deleting question:",n),alert("Error deleting question")}})}getTopicName(e){if(e.topic&&e.topic.topicName)return e.topic.topicName;const n=this.topics.find(i=>i.id===e.topicId);return n?n.topicName:""}getSubTopicName(e){if(e.subTopic&&e.subTopic.subTopicName)return e.subTopic.subTopicName;if(e.subTopicId){const n=this.filteredSubTopics.find(i=>i.id===e.subTopicId);return n?n.subTopicName:""}return""}resetForm(){this.formData.formula=""}trackByQuestionId(e,n){return n.id}formatFormula(e){if(!e)return"";let i="";for(let c=0;c<e.length;c+=20)i+=e.substr(c,20),c+20<e.length&&(i+="\n");return i}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-questions"]],standalone:!1,decls:52,vars:7,consts:[["questionForm","ngForm"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],[3,"ngModelChange","change","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"table-container"],[1,"data-table"],[4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","9",1,"loading"],[3,"hidden"],[1,"formula-cell"],["class","formula-text",4,"ngIf"],["class","no-formula",4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],[1,"formula-text"],[1,"no-formula"],["colspan","9",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],["aria-label","Table pagination"],[1,"pagination"],["aria-label","Previous page",1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","ellipsis","disabled","click",4,"ngFor","ngForOf"],["aria-label","Next page",1,"page-btn",3,"click","disabled"],[1,"page-btn",3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","topicSelect"],[1,"required"],["id","topicSelect","name","topicId","required","",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","subTopicSelect"],["id","subTopicSelect","name","subTopicId",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","questionName"],["id","questionName","name","question","required","","placeholder","Enter question text","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","min","1","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","defaultVal"],["id","defaultVal","name","defaultVal","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["class","form-group",4,"ngIf"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","isPrevious",3,"ngModelChange","ngModel"],[1,"checkmark"],["type","checkbox","name","isCumulative",3,"ngModelChange","ngModel"],["for","formula"],[1,"formula-container"],["id","formula","name","formula","rows","2","placeholder","Formula will be built automatically","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"formula-buttons"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],["class","formula-builder",4,"ngIf"],["for","defaultQue"],["type","number","id","defaultQue","name","defaultQue","placeholder","Enter default question ID",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click","disabled"],[3,"value"],["id","defaultQue","name","defaultQue",1,"form-control",3,"ngModelChange","ngModel"],["for","defaultSub"],["id","defaultSub","name","defaultSub",1,"form-control",3,"ngModelChange","ngModel"],[1,"formula-builder"],["for","chooseQuestion"],["id","chooseQuestion","name","selectedQuestion",1,"form-control",3,"ngModelChange","change","ngModel"],["for","chooseSubTopic"],[1,"subtopic-selection"],["id","chooseSubTopic","name","selectedSubTopic",1,"form-control",3,"ngModelChange","change","ngModel"],["type","button",1,"btn","btn-outline-success","btn-sm",3,"click"],["for","chooseOperation"],["id","chooseOperation","name","selectedOperation",1,"form-control",3,"ngModelChange","change","ngModel"]],template:function(n,i){1&n&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.EFF(4,"\u2753"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Questions"),t.k0s()(),t.j41(7,"button",5),t.bIt("click",function(){return i.openAddModal()}),t.EFF(8,"Add Question"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"span"),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",8),t.mxI("ngModelChange",function(l){return t.DH7(i.entriesPerPage,l)||(i.entriesPerPage=l),l}),t.bIt("change",function(){return i.onEntriesPerPageChange()}),t.j41(14,"option",9),t.EFF(15,"10"),t.k0s(),t.j41(16,"option",10),t.EFF(17,"25"),t.k0s(),t.j41(18,"option",11),t.EFF(19,"50"),t.k0s(),t.j41(20,"option",12),t.EFF(21,"100"),t.k0s()(),t.j41(22,"span"),t.EFF(23,"entries"),t.k0s()()(),t.j41(24,"div",13)(25,"table",14)(26,"thead")(27,"tr")(28,"th"),t.EFF(29,"Id"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Topic Name"),t.k0s(),t.j41(32,"th"),t.EFF(33,"SubTopic Name"),t.k0s(),t.j41(34,"th"),t.EFF(35,"Question Name"),t.k0s(),t.j41(36,"th"),t.EFF(37,"Default Value"),t.k0s(),t.j41(38,"th"),t.EFF(39,"Formula"),t.k0s(),t.j41(40,"th"),t.EFF(41,"Priority"),t.k0s(),t.j41(42,"th"),t.EFF(43,"Active"),t.k0s(),t.j41(44,"th"),t.EFF(45,"Edit"),t.k0s()()(),t.j41(46,"tbody"),t.DNE(47,wo,3,0,"tr",15)(48,Uo,26,17,"tr",16)(49,Ao,3,0,"tr",15),t.k0s()()(),t.DNE(50,Lo,10,6,"div",17),t.k0s(),t.DNE(51,oi,94,25,"div",18)),2&n&&(t.R7$(13),t.R50("ngModel",i.entriesPerPage),t.R7$(34),t.Y8G("ngIf",i.loading),t.R7$(),t.Y8G("ngForOf",i.questions)("ngForTrackBy",i.trackByQuestionId),t.R7$(),t.Y8G("ngIf",0===i.questions.length&&!i.loading),t.R7$(),t.Y8G("ngIf",i.totalRecords>0),t.R7$(),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:['.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.data-table[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]{width:100%;table-layout:fixed;min-width:1200px;border-collapse:collapse}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:4%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:13%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:17%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:19%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:8%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:17%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:5%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:4%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:12%}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:8px 5px;vertical-align:middle;border-right:1px solid #dee2e6;font-size:12px;line-height:1.3;max-width:0}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 6px;text-align:left;font-weight:600;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-right:1px solid rgba(255,255,255,.2);font-size:13px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){white-space:normal;max-height:50px;overflow:hidden;line-height:1.2;word-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){padding:6px 4px;vertical-align:top}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6)   pre[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:12px;line-height:1.3;margin:0;padding:2px;white-space:pre-wrap;word-break:break-all;max-height:65px;overflow:hidden;background:transparent;border:none}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6).css-only{white-space:pre-line;max-height:60px;overflow:hidden;line-height:1.2;word-break:break-all;font-size:10px;font-family:Courier New,monospace}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6):after{content:"";position:absolute;bottom:0;left:0;right:0;height:15px;background:linear-gradient(transparent,#fff);pointer-events:none}.formula-text[_ngcontent-%COMP%]{display:block;word-break:break-all;overflow-wrap:anywhere;white-space:pre-wrap;font-family:Courier New,monospace;font-size:9px;line-height:1.1;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);-webkit-text-size-adjust:100%}.formula-break-30[_ngcontent-%COMP%], .formula-break-25[_ngcontent-%COMP%], .formula-break-20[_ngcontent-%COMP%]{word-break:break-all;overflow-wrap:anywhere;-webkit-hyphens:none;hyphens:none}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6)   .formula-content[_ngcontent-%COMP%]{display:block;word-spacing:-.1em;letter-spacing:0;word-break:break-all;overflow-wrap:anywhere;white-space:pre-wrap}.formula-char-break[_ngcontent-%COMP%]{display:inline-block;width:100%;word-break:break-all!important;overflow-wrap:break-word!important;-webkit-hyphens:none!important;hyphens:none!important;white-space:normal!important;font-feature-settings:"kern" 0;text-rendering:optimizeSpeed}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6):after{content:"";display:block;width:100%;height:0;overflow:hidden}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){font-variant-ligatures:none;text-align:left;text-justify:none}.form-row[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.checkbox-row[_ngcontent-%COMP%]{align-items:center}.checkbox-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:none;margin-right:20px}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:20px}.loading[_ngcontent-%COMP%]{text-align:center;color:#007bff;font-style:italic;padding:20px}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;margin-left:5px}.formula-container[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:4px;padding:15px;background-color:#f8f9fa}.formula-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:10px}.formula-builder[_ngcontent-%COMP%]{background-color:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;padding:15px;margin-top:15px}.formula-builder[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px}.formula-builder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#856404}.subtopic-selection[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.subtopic-selection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:400;text-align:center;vertical-align:middle;transition:all .15s ease-in-out;display:inline-block}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-outline-success[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #28a745;color:#28a745;padding:6px 12px;border-radius:4px;cursor:pointer;transition:all .15s ease-in-out}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#28a745;color:#fff}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.formula-preview[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:4px;padding:10px;margin-bottom:15px;font-family:Courier New,monospace;font-size:14px;min-height:40px;display:flex;align-items:center}.formula-help[_ngcontent-%COMP%]{background:#d1ecf1;border:1px solid #bee5eb;border-radius:4px;padding:10px;margin-top:10px;font-size:12px;color:#0c5460}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-weight:400;margin:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px}.checkmark[_ngcontent-%COMP%]{color:#495057}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}.close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 1199px){.questions-table[_ngcontent-%COMP%]{min-width:1000px}}@media (max-width: 991px){.questions-table[_ngcontent-%COMP%]{min-width:700px;font-size:13px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px}}@media (max-width: 768px){.questions-table[_ngcontent-%COMP%]{min-width:700px;font-size:11px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px;font-size:11px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){display:none}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:6%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:18%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:25%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:30%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:8%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:6%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:7%}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.formula-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.subtopic-selection[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal-content[_ngcontent-%COMP%]{width:95%;max-width:95vw;margin:10px}.modal-header[_ngcontent-%COMP%]{padding:15px 20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]{padding:15px 20px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;flex-direction:column-reverse;gap:8px}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.questions-table[_ngcontent-%COMP%]{min-width:500px;font-size:10px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 1px;font-size:10px}.modal-header[_ngcontent-%COMP%]{padding:12px 15px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:12px 15px}}.questions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.questions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff0d}.questions-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;align-items:stretch;width:100%}.questions-table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:10px;padding:3px 4px;margin:0;width:100%;text-align:center;min-height:22px;display:flex;align-items:center;justify-content:center;border-radius:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.questions-table[_ngcontent-%COMP%]   .btn.edit-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;font-size:9px}.questions-table[_ngcontent-%COMP%]   .btn.deactivate-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:9px}.questions-table[_ngcontent-%COMP%]   .btn.activate[_ngcontent-%COMP%]{background:#28a745;color:#fff;font-size:9px}.questions-table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1.02);z-index:5}.questions-table[_ngcontent-%COMP%]   .priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:1px 4px;border-radius:8px;font-size:10px;font-weight:500;background:#007bff;color:#fff;text-align:center;min-width:20px}.questions-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:10px;padding:1px 4px}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){text-align:center;padding:8px 4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7)   .priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 6px;border-radius:10px;font-size:11px;font-weight:500;background:#007bff;color:#fff;min-width:20px;text-align:center}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){text-align:center;padding:8px 4px;white-space:nowrap}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8)   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;min-width:35px;text-align:center}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8)   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8)   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){padding:3px 1px;overflow:visible;white-space:nowrap}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9)   .action-buttons[_ngcontent-%COMP%]{min-width:100%;width:100%}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6)[title]{cursor:help}']}))}return r(),a})();var F=u(6977);function ri(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.rangeId),t.R7$(),t.SpI(" ",o.battalionName," ")}}function ai(r,a){1&r&&(t.j41(0,"div",50),t.EFF(1," Please select at least one battalion "),t.k0s())}function si(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.moduleName," ")}}function ci(r,a){1&r&&(t.j41(0,"div",50),t.EFF(1," Please select a module "),t.k0s())}function li(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.topicName," ")}}function di(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.subTopicName," ")}}function ui(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.question," ")}}function _i(r,a){1&r&&(t.j41(0,"div",17),t.nrm(1,"div",2),t.k0s())}function pi(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.label," ")}}function gi(r,a){1&r&&(t.j41(0,"div",50),t.EFF(1," Please select a month "),t.k0s())}function mi(r,a){if(1&r&&(t.j41(0,"option",49),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function hi(r,a){1&r&&(t.j41(0,"div",50),t.EFF(1," Please select a year "),t.k0s())}function fi(r,a){if(1&r&&(t.j41(0,"div",17)(1,"div",18)(2,"label",51),t.EFF(3,"Month "),t.j41(4,"span",20),t.EFF(5,"*"),t.k0s()(),t.j41(6,"select",52)(7,"option",27),t.EFF(8,"Select Month"),t.k0s(),t.DNE(9,pi,2,2,"option",22),t.k0s(),t.DNE(10,gi,2,0,"div",24),t.k0s(),t.j41(11,"div",18)(12,"label",51),t.EFF(13,"Year "),t.j41(14,"span",20),t.EFF(15,"*"),t.k0s()(),t.j41(16,"select",53),t.DNE(17,mi,2,2,"option",22),t.k0s(),t.DNE(18,hi,2,0,"div",24),t.k0s()()),2&r){const o=t.XpG();t.R7$(6),t.AVh("is-invalid",o.isFieldInvalid("month")),t.R7$(3),t.Y8G("ngForOf",o.months),t.R7$(),t.Y8G("ngIf",o.isFieldInvalid("month")),t.R7$(6),t.AVh("is-invalid",o.isFieldInvalid("year")),t.R7$(),t.Y8G("ngForOf",o.years),t.R7$(),t.Y8G("ngIf",o.isFieldInvalid("year"))}}function bi(r,a){1&r&&(t.j41(0,"div",50),t.EFF(1," Please select from date "),t.k0s())}function Ci(r,a){1&r&&(t.j41(0,"div",50),t.EFF(1," Please select to date "),t.k0s())}function Mi(r,a){if(1&r&&(t.j41(0,"div",17)(1,"div",18)(2,"label",51),t.EFF(3,"From Date "),t.j41(4,"span",20),t.EFF(5,"*"),t.k0s()(),t.nrm(6,"input",54),t.DNE(7,bi,2,0,"div",24),t.k0s(),t.j41(8,"div",18)(9,"label",51),t.EFF(10,"To Date "),t.j41(11,"span",20),t.EFF(12,"*"),t.k0s()(),t.nrm(13,"input",55),t.DNE(14,Ci,2,0,"div",24),t.k0s()()),2&r){const o=t.XpG();t.R7$(6),t.AVh("is-invalid",o.isFieldInvalid("fromDate")),t.R7$(),t.Y8G("ngIf",o.isFieldInvalid("fromDate")),t.R7$(6),t.AVh("is-invalid",o.isFieldInvalid("toDate")),t.R7$(),t.Y8G("ngIf",o.isFieldInvalid("toDate"))}}function Pi(r,a){1&r&&(t.j41(0,"span"),t.EFF(1,"Generate Report"),t.k0s())}function vi(r,a){1&r&&(t.j41(0,"span"),t.nrm(1,"span",56),t.EFF(2," Generating... "),t.k0s())}function xi(r,a){if(1&r&&(t.j41(0,"div",37)(1,"div",2)(2,"div",61)(3,"h6"),t.nrm(4,"i",45),t.EFF(5,"Report Summary"),t.k0s(),t.j41(6,"div",1)(7,"div",62)(8,"strong"),t.EFF(9,"Total Records:"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"div",62)(12,"strong"),t.EFF(13,"Total Battalions:"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"div",62)(16,"strong"),t.EFF(17,"Total Modules:"),t.k0s(),t.EFF(18),t.k0s(),t.j41(19,"div",62)(20,"strong"),t.EFF(21,"Total Questions:"),t.k0s(),t.EFF(22),t.k0s()(),t.j41(23,"div",63)(24,"div",62)(25,"strong"),t.EFF(26,"Submission Rate:"),t.k0s(),t.EFF(27),t.k0s(),t.j41(28,"div",62)(29,"strong"),t.EFF(30,"Approval Rate:"),t.k0s(),t.EFF(31),t.k0s(),t.j41(32,"div",62)(33,"strong"),t.EFF(34,"Total Submitted:"),t.k0s(),t.EFF(35),t.k0s(),t.j41(36,"div",62)(37,"strong"),t.EFF(38,"Total Draft:"),t.k0s(),t.EFF(39),t.k0s()()()()()),2&r){const o=t.XpG(2);t.R7$(10),t.SpI(" ",(null==o.reportData.summary.overview?null:o.reportData.summary.overview.totalRecords)||0," "),t.R7$(4),t.SpI(" ",(null==o.reportData.summary.overview?null:o.reportData.summary.overview.totalBattalions)||0," "),t.R7$(4),t.SpI(" ",(null==o.reportData.summary.overview?null:o.reportData.summary.overview.totalModules)||0," "),t.R7$(4),t.SpI(" ",(null==o.reportData.summary.overview?null:o.reportData.summary.overview.totalQuestions)||0," "),t.R7$(5),t.SpI(" ",(null==o.reportData.summary.completionStatistics?null:o.reportData.summary.completionStatistics.submissionRate)||"0.00","% "),t.R7$(4),t.SpI(" ",(null==o.reportData.summary.completionStatistics?null:o.reportData.summary.completionStatistics.approvalRate)||"0.00","% "),t.R7$(4),t.SpI(" ",(null==o.reportData.summary.completionStatistics?null:o.reportData.summary.completionStatistics.totalSubmitted)||0," "),t.R7$(4),t.SpI(" ",(null==o.reportData.summary.completionStatistics?null:o.reportData.summary.completionStatistics.totalDraft)||0," ")}}function Ei(r,a){if(1&r&&(t.j41(0,"div",67)(1,"span",68),t.EFF(2),t.k0s(),t.j41(3,"span",69),t.EFF(4),t.k0s()()),2&r){const o=a.$implicit;t.R7$(),t.AVh("bg-danger","HIGH"===o.severity)("bg-warning","MEDIUM"===o.severity)("bg-info","LOW"===o.severity),t.R7$(),t.SpI(" ",o.type," "),t.R7$(2),t.JRh(o.message)}}function Oi(r,a){if(1&r&&(t.j41(0,"div",37)(1,"div",2)(2,"div",64)(3,"h6"),t.nrm(4,"i",65),t.EFF(5,"Performance Alerts"),t.k0s(),t.DNE(6,Ei,5,8,"div",66),t.k0s()()()),2&r){const o=t.XpG(2);t.R7$(6),t.Y8G("ngForOf",o.reportData.summary.alerts)}}function ki(r,a){if(1&r&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.R7$(),t.SpI(" ",o," ")}}function Fi(r,a){if(1&r&&(t.j41(0,"div",37)(1,"div",2)(2,"div",70)(3,"h6"),t.nrm(4,"i",71),t.EFF(5,"Recommendations"),t.k0s(),t.j41(6,"ul",72),t.DNE(7,ki,2,1,"li",73),t.k0s()()()()),2&r){const o=t.XpG(2);t.R7$(7),t.Y8G("ngForOf",o.reportData.summary.recommendations)}}function Ri(r,a){if(1&r&&(t.j41(0,"div",37)(1,"div",2)(2,"div",7)(3,"div",8)(4,"h5",11),t.nrm(5,"i",40),t.EFF(6),t.k0s()(),t.j41(7,"div",15)(8,"div",74),t.nrm(9,"canvas",75),t.k0s()()()()()),2&r){const o=t.XpG(2);t.R7$(6),t.SpI("",o.reportData.chartData.title," ")}}function Ti(r,a){if(1&r&&(t.j41(0,"span",84),t.EFF(1),t.k0s()),2&r){const o=t.XpG(3);t.R7$(),t.Lme(" Page ",o.getCurrentPage()," of ",o.getTotalPages()," ")}}function Di(r,a){if(1&r&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td")(14,"span",85),t.EFF(15),t.k0s()(),t.j41(16,"td"),t.EFF(17),t.k0s(),t.j41(18,"td")(19,"span",68),t.EFF(20),t.k0s()(),t.j41(21,"td")(22,"span",68),t.EFF(23),t.k0s()(),t.j41(24,"td"),t.EFF(25),t.nI1(26,"date"),t.k0s()()),2&r){const o=a.$implicit,e=a.index,n=t.XpG(3);t.R7$(2),t.JRh(o.rowNumber||e+1),t.R7$(2),t.JRh(o.battalionName),t.R7$(2),t.JRh(o.moduleName),t.R7$(2),t.JRh(o.topicName),t.R7$(2),t.JRh(o.subTopicName),t.R7$(2),t.JRh(o.question),t.R7$(3),t.JRh(o.displayValue||o.value),t.R7$(2),t.JRh(n.formatMonthYear(o.monthYear)),t.R7$(2),t.AVh("bg-success","SUBMITTED"===o.status)("bg-warning","DRAFT"===o.status)("bg-danger","REJECTED"===o.status)("bg-info","APPROVED"===o.status),t.R7$(),t.SpI(" ",o.status," "),t.R7$(2),t.AVh("bg-success","A+"===o.performanceGrade||"A"===o.performanceGrade)("bg-primary","B+"===o.performanceGrade||"B"===o.performanceGrade)("bg-warning","C+"===o.performanceGrade||"C"===o.performanceGrade)("bg-danger","D"===o.performanceGrade||"F"===o.performanceGrade),t.R7$(),t.SpI(" ",o.performanceGrade," "),t.R7$(2),t.JRh(t.i5U(26,27,o.createdAt,"short"))}}function Si(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",86)(1,"div",87)(2,"div")(3,"small",59),t.EFF(4),t.k0s()(),t.j41(5,"nav")(6,"ul",88)(7,"li",89)(8,"a",90),t.bIt("click",function(n){return s.eBV(o),t.XpG(3).onPreviousPage(),s.Njj(n.preventDefault())}),t.EFF(9," Previous "),t.k0s()(),t.j41(10,"li",91)(11,"span",92),t.EFF(12),t.k0s()(),t.j41(13,"li",89)(14,"a",90),t.bIt("click",function(n){return s.eBV(o),t.XpG(3).onNextPage(),s.Njj(n.preventDefault())}),t.EFF(15," Next "),t.k0s()()()()()()}if(2&r){const o=t.XpG(3);t.R7$(4),t.Lme(" Showing ",o.getNumberOfElements()," of ",o.getTotalElements()," records "),t.R7$(3),t.AVh("disabled",o.isPreviousDisabled()),t.R7$(5),t.SpI(" ",o.getCurrentPage()," "),t.R7$(),t.AVh("disabled",o.isNextDisabled())}}function Ii(r,a){if(1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"h5",11),t.nrm(7,"i",76),t.EFF(8,"Report Data "),t.k0s()(),t.j41(9,"div",12)(10,"div",77)(11,"span",78),t.EFF(12),t.k0s(),t.DNE(13,Ti,2,2,"span",79),t.k0s()()()(),t.j41(14,"div",15)(15,"div",80)(16,"table",81)(17,"thead",82)(18,"tr")(19,"th"),t.EFF(20,"#"),t.k0s(),t.j41(21,"th"),t.EFF(22,"Battalion"),t.k0s(),t.j41(23,"th"),t.EFF(24,"Module"),t.k0s(),t.j41(25,"th"),t.EFF(26,"Topic"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Subtopic"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Question"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Value"),t.k0s(),t.j41(33,"th"),t.EFF(34,"Month/Year"),t.k0s(),t.j41(35,"th"),t.EFF(36,"Status"),t.k0s(),t.j41(37,"th"),t.EFF(38,"Performance"),t.k0s(),t.j41(39,"th"),t.EFF(40,"Created Date"),t.k0s()()(),t.j41(41,"tbody"),t.DNE(42,Di,27,30,"tr",73),t.k0s()()(),t.DNE(43,Si,16,7,"div",83),t.k0s()()()()),2&r){const o=t.XpG(2);t.R7$(12),t.SpI(" ",o.getTotalElements()," total records "),t.R7$(),t.Y8G("ngIf",null==o.reportData?null:o.reportData.pagination),t.R7$(29),t.Y8G("ngForOf",o.reportData.data),t.R7$(),t.Y8G("ngIf",o.hasPagination())}}function ji(r,a){if(1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"h4",11),t.nrm(7,"i",57),t.EFF(8,"Report Results "),t.j41(9,"span",58),t.EFF(10),t.k0s()()(),t.j41(11,"div",12)(12,"span",59),t.EFF(13),t.nI1(14,"date"),t.k0s()()()(),t.j41(15,"div",15),t.DNE(16,xi,40,8,"div",60)(17,Oi,7,1,"div",60)(18,Fi,8,1,"div",60)(19,Ri,10,1,"div",60)(20,Ii,44,4,"div",48),t.k0s()()()()),2&r){const o=t.XpG();t.R7$(10),t.JRh(null==o.reportData.metadata?null:o.reportData.metadata.reportType),t.R7$(3),t.SpI(" Generated: ",t.i5U(14,7,null==o.reportData.metadata?null:o.reportData.metadata.generatedAt,"medium")," "),t.R7$(3),t.Y8G("ngIf",o.reportData.summary),t.R7$(),t.Y8G("ngIf",(null==o.reportData.summary?null:o.reportData.summary.alerts)&&o.reportData.summary.alerts.length>0),t.R7$(),t.Y8G("ngIf",(null==o.reportData.summary?null:o.reportData.summary.recommendations)&&o.reportData.summary.recommendations.length>0),t.R7$(),t.Y8G("ngIf",o.reportData.chartData),t.R7$(),t.Y8G("ngIf",o.reportData.data&&o.reportData.data.length>0)}}function yi(r,a){if(1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"div",7)(3,"div",8)(4,"h5",11),t.nrm(5,"i",93),t.EFF(6,"Performance Metrics "),t.k0s()(),t.j41(7,"div",15)(8,"div",1)(9,"div",28)(10,"div",94)(11,"div",95)(12,"h6",96),t.EFF(13,"Query Performance"),t.k0s(),t.j41(14,"h4",97),t.EFF(15),t.k0s(),t.j41(16,"p",98),t.EFF(17,"Total Query Time"),t.k0s(),t.j41(18,"small",59),t.EFF(19),t.k0s()()()(),t.j41(20,"div",28)(21,"div",94)(22,"div",95)(23,"h6",96),t.EFF(24,"Processing Time"),t.k0s(),t.j41(25,"h4",99),t.EFF(26),t.k0s(),t.j41(27,"p",98),t.EFF(28,"Total Processing"),t.k0s(),t.j41(29,"small",59),t.EFF(30),t.k0s()()()(),t.j41(31,"div",28)(32,"div",94)(33,"div",95)(34,"h6",96),t.EFF(35,"Cache Status"),t.k0s(),t.j41(36,"h4",100),t.EFF(37),t.k0s(),t.j41(38,"p",98),t.EFF(39,"Cache Performance"),t.k0s(),t.j41(40,"small",59),t.EFF(41),t.k0s()()()()()()()()()),2&r){const o=t.XpG();t.R7$(15),t.JRh(null==o.reportData||null==o.reportData.performance||null==o.reportData.performance.queryMetrics?null:o.reportData.performance.queryMetrics.totalQueryTime),t.R7$(4),t.SpI(" ",null==o.reportData||null==o.reportData.performance||null==o.reportData.performance.queryMetrics?null:o.reportData.performance.queryMetrics.recordsScanned," records scanned "),t.R7$(7),t.JRh(null==o.reportData||null==o.reportData.performance||null==o.reportData.performance.processingMetrics?null:o.reportData.performance.processingMetrics.totalProcessingTime),t.R7$(4),t.SpI(" ",null==o.reportData||null==o.reportData.performance||null==o.reportData.performance.queryMetrics?null:o.reportData.performance.queryMetrics.recordsReturned," records returned "),t.R7$(7),t.SpI(" ",null!=o.reportData&&null!=o.reportData.performance&&null!=o.reportData.performance.cacheMetrics&&o.reportData.performance.cacheMetrics.cacheHit?"HIT":"MISS"," "),t.R7$(4),t.SpI(" ",null!=o.reportData&&null!=o.reportData.performance&&null!=o.reportData.performance.cacheMetrics&&o.reportData.performance.cacheMetrics.cacheChecked?"Checked":"Not Checked"," ")}}let Pt=(()=>{var r;class a{constructor(e,n,i){this.fb=e,this.apiService=n,this.notificationService=i,this.isLoading=!1,this.isGenerating=!1,this.battalions=[],this.modules=[],this.topics=[],this.subTopics=[],this.questions=[],this.filteredTopics=[],this.filteredSubTopics=[],this.filteredQuestions=[],this.reportData=null,this.lastReportId=null,this.metadata=null,this.templates=[],this.destroy$=new U.B,this.months=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],this.years=[],this.initializeForm(),this.generateYears()}ngOnInit(){this.loadInitialData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.reportForm=this.fb.group({reportType:["SUMMARY",d.k0.required],battalionIds:[[],d.k0.required],moduleId:["",d.k0.required],topicId:[""],subTopicId:[""],questionId:[""],month:[""],year:[(new Date).getFullYear()],fromDate:[""],toDate:[""],trendPeriod:["MONTHLY"],viewType:["BOTH"],chartType:["BAR"],page:[0],pageSize:[50]}),this.reportForm.get("reportType")?.valueChanges.pipe((0,F.Q)(this.destroy$)).subscribe(e=>{this.updateValidators(e)})}updateValidators(e){this.reportForm.get("month")?.clearValidators(),this.reportForm.get("year")?.clearValidators(),this.reportForm.get("fromDate")?.clearValidators(),this.reportForm.get("toDate")?.clearValidators(),this.reportForm.get("trendPeriod")?.clearValidators(),this.isSingleMonthReportType(e)?(this.reportForm.get("month")?.setValidators([d.k0.required]),this.reportForm.get("year")?.setValidators([d.k0.required])):this.isDateRangeReportType(e)&&(this.reportForm.get("fromDate")?.setValidators([d.k0.required]),this.reportForm.get("toDate")?.setValidators([d.k0.required])),"TREND"===e&&this.reportForm.get("trendPeriod")?.setValidators([d.k0.required]),this.reportForm.get("month")?.updateValueAndValidity(),this.reportForm.get("year")?.updateValueAndValidity(),this.reportForm.get("fromDate")?.updateValueAndValidity(),this.reportForm.get("toDate")?.updateValueAndValidity(),this.reportForm.get("trendPeriod")?.updateValueAndValidity()}isSingleMonthReportType(e){return["SUMMARY","PERFORMANCE","COMPLIANCE"].includes(e)}isDateRangeReportType(e){return["DETAILED","COMPARISON","TREND"].includes(e)}isSingleMonthReport(){return this.isSingleMonthReportType(this.reportForm.get("reportType")?.value)}isDateRangeReport(){return this.isDateRangeReportType(this.reportForm.get("reportType")?.value)}showDateRange(){return this.isSingleMonthReport()||this.isDateRangeReport()}showChartConfig(){const e=this.reportForm.get("reportType")?.value;return["SUMMARY","COMPARISON","TREND"].includes(e)}generateYears(){const e=(new Date).getFullYear();for(let n=e;n>=e-10;n--)this.years.push(n)}loadInitialData(){this.isLoading=!0,this.loadBattalions(),this.loadModules()}loadBattalions(){this.apiService.getActiveBattalions().pipe((0,F.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status&&(this.battalions=e.data||[])},error:e=>{console.error("Error loading battalions:",e),this.notificationService.error("Failed to load battalions")}})}loadModules(){this.apiService.getActiveModules().pipe((0,F.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status&&(this.modules=e.data||[])},error:e=>{console.error("Error loading modules:",e),this.notificationService.error("Failed to load modules")},complete:()=>{this.isLoading=!1}})}onModuleChange(){const e=this.reportForm.get("moduleId")?.value;e?this.apiService.getTopicsByModule(e).pipe((0,F.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status&&(this.filteredTopics=n.data||[],this.topics=this.filteredTopics)},error:n=>{console.error("Error loading topics:",n),this.notificationService.error("Failed to load topics")}}):(this.filteredTopics=[],this.filteredSubTopics=[],this.filteredQuestions=[]),this.reportForm.patchValue({topicId:"",subTopicId:"",questionId:""})}onTopicChange(){const e=this.reportForm.get("topicId")?.value;e?(this.apiService.getSubTopicsByTopicForForm(e).pipe((0,F.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status&&(this.filteredSubTopics=n.data||[],this.subTopics=this.filteredSubTopics)},error:n=>{console.error("Error loading subtopics:",n),this.notificationService.error("Failed to load subtopics")}}),this.apiService.getQuestionsByTopic(e).pipe((0,F.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status&&(this.filteredQuestions=n.data||[],this.questions=this.filteredQuestions)},error:n=>{console.error("Error loading questions:",n),this.notificationService.error("Failed to load questions")}})):(this.filteredSubTopics=[],this.filteredQuestions=[]),this.reportForm.patchValue({subTopicId:"",questionId:""})}onSubTopicChange(){const e=this.reportForm.get("subTopicId")?.value,n=this.reportForm.get("topicId")?.value;e&&n&&this.apiService.getQuestionsBySubTopic(e).pipe((0,F.Q)(this.destroy$)).subscribe({next:i=>{"SUCCESS"===i.status&&(this.filteredQuestions=i.data||[],this.questions=this.filteredQuestions)},error:i=>{console.error("Error loading filtered questions:",i),this.notificationService.error("Failed to load filtered questions")}}),this.reportForm.patchValue({questionId:""})}buildReportData(){const e=this.reportForm.value,n=e.reportType,i={battalionIds:e.battalionIds||[],moduleId:e.moduleId,page:e.page||0,size:e.pageSize||50};return e.topicId&&(i.topicIds=[e.topicId]),e.subTopicId&&(i.subTopicIds=[e.subTopicId]),e.questionId&&(i.questionIds=[e.questionId]),this.isSingleMonthReportType(n)?e.month&&e.year&&(i.monthYear=this.formatMonthYearForAPI(e.month,e.year)):this.isDateRangeReportType(n)&&(e.fromDate&&(i.fromDate=new Date(e.fromDate).toISOString()),e.toDate&&(i.toDate=new Date(e.toDate).toISOString())),"SUMMARY"===n?i.viewType=e.viewType||"BOTH":"TREND"===n&&(i.trendPeriod=e.trendPeriod||"MONTHLY"),{reportType:n,filters:i}}onGenerateReport(){if(this.reportForm.valid){this.isGenerating=!0;const e=this.buildReportData();console.log("reportData",e),this.apiService.generateReport(e).pipe((0,F.Q)(this.destroy$)).subscribe({next:c=>{"SUCCESS"===c.status?(this.reportData=c.data,this.lastReportId=c.data?.metadata?.reportId||c.data?.reportId,console.log("Report generated successfully"),console.log("Report ID:",this.lastReportId),console.log("Report Data:",this.reportData),console.log("Can export:",this.hasGeneratedReport()),this.notificationService.success("Report generated successfully"),setTimeout(()=>{document.querySelector(".card:last-child")?.scrollIntoView({behavior:"smooth"})},100)):this.notificationService.error(c.message||"Failed to generate report")},error:c=>{console.error("Error generating report:",c),this.notificationService.error("Failed to generate report")},complete:()=>{this.isGenerating=!1}})}else this.notificationService.error("Please fill in all required fields"),this.markFormGroupTouched()}onExportReport(e){console.log(`Exporting report as ${e}...`),this.lastReportId?(console.log(`Exporting report as ${this.lastReportId}...`),this.isGenerating=!0,this.apiService.exportReport(this.lastReportId,e).pipe((0,F.Q)(this.destroy$)).subscribe({next:n=>{if("SUCCESS"===n.status){if(this.notificationService.success(`${e} report exported successfully`),n.data?.downloadUrl){const i=document.createElement("a");i.href=n.data.downloadUrl,i.download=n.data.fileName||`report.${e.toLowerCase()}`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}else this.notificationService.error(n.message||`Failed to export ${e} report`)},error:n=>{console.error(`Error exporting ${e} report:`,n),this.notificationService.error(`Failed to export ${e} report`)},complete:()=>{this.isGenerating=!1}})):this.notificationService.error("Please generate a report first")}onGetMetadata(){this.isLoading=!0,this.apiService.getReportMetadata().pipe((0,F.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status?(this.metadata=e.data,this.notificationService.success("Metadata retrieved successfully"),new window.bootstrap.Modal(document.getElementById("metadataModal")).show()):this.notificationService.error(e.message||"Failed to get metadata")},error:e=>{console.error("Error getting metadata:",e),this.notificationService.error("Failed to get metadata")},complete:()=>{this.isLoading=!1}})}onGetTemplates(){this.isLoading=!0,this.apiService.getReportTemplates().pipe((0,F.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status?(this.templates=e.data||[],this.notificationService.success("Templates retrieved successfully"),new window.bootstrap.Modal(document.getElementById("templatesModal")).show()):this.notificationService.error(e.message||"Failed to get templates")},error:e=>{console.error("Error getting templates:",e),this.notificationService.error("Failed to get templates")},complete:()=>{this.isLoading=!1}})}onResetForm(){this.reportForm.reset(),this.reportForm.patchValue({reportType:"SUMMARY",year:(new Date).getFullYear(),viewType:"BOTH",chartType:"BAR",page:0,pageSize:50,trendPeriod:"MONTHLY"}),this.filteredTopics=[],this.filteredSubTopics=[],this.filteredQuestions=[],this.reportData=null,this.lastReportId=null}onPageChange(e){null!=e&&e>=0&&(this.reportForm.patchValue({page:e}),this.onGenerateReport())}markFormGroupTouched(){Object.keys(this.reportForm.controls).forEach(e=>{this.reportForm.get(e)?.markAsTouched()})}isFieldInvalid(e){const n=this.reportForm.get(e);return!(!n||!n.invalid||!n.dirty&&!n.touched)}getMinDate(){const e=new Date;return e.setFullYear(e.getFullYear()-5),e.toISOString().split("T")[0]}getMaxDate(){return(new Date).toISOString().split("T")[0]}get reportTypeValue(){return this.reportForm.get("reportType")?.value||"SUMMARY"}get battalionIdsValue(){return this.reportForm.get("battalionIds")?.value||[]}get moduleIdValue(){return this.reportForm.get("moduleId")?.value}validateDateRange(){const e=this.reportForm.get("fromDate")?.value,n=this.reportForm.get("toDate")?.value;return!e||!n||new Date(e)<=new Date(n)}getFieldErrorMessage(e){const n=this.reportForm.get(e);return n?.errors&&n.errors.required?`${this.getFieldDisplayName(e)} is required`:""}getFieldDisplayName(e){return{reportType:"Report Type",battalionIds:"Battalion(s)",moduleId:"Module",month:"Month",year:"Year",fromDate:"From Date",toDate:"To Date",trendPeriod:"Trend Period"}[e]||e}hasPagination(){return!!(this.reportData?.pagination&&this.reportData.pagination.totalPages>1)}getCurrentPage(){return(this.reportData?.pagination?.currentPage||0)+1}getTotalPages(){return this.reportData?.pagination?.totalPages||1}getNumberOfElements(){return this.reportData?.pagination?.numberOfElements||0}getTotalElements(){return this.reportData?.pagination?.totalElements||this.reportData?.data?.length||0}isPreviousDisabled(){return!this.reportData?.pagination?.hasPrevious}isNextDisabled(){return!this.reportData?.pagination?.hasNext}onPreviousPage(){const e=this.reportData?.pagination?.previousPage;null!=e&&this.onPageChange(e)}onNextPage(){const e=this.reportData?.pagination?.nextPage;null!=e&&this.onPageChange(e)}hasGeneratedReport(){return!(!this.lastReportId||!this.reportData)}formatMonthYear(e){if(!e)return"";if(e.includes(" "))return e;if(e.includes("-")){const n=e.split("-");if(2===n.length){const i=n[0].trim(),c=n[1].trim();if(isNaN(Number(i)))return`${i} ${c}`;const l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],p=parseInt(i,10)-1;if(p>=0&&p<12)return`${l[p]} ${c}`}}return e}formatMonthYearForAPI(e,n){if(!e||!n)return"";const c=parseInt(e,10)-1;return c>=0&&c<12?`${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][c]} ${n}`:`${e}-${n}`}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(d.ok),t.rXU(b.G),t.rXU(H.J))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-report"]],decls:89,vars:25,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-center"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"card"],[1,"card-header"],[1,"row","align-items-center"],[1,"col"],[1,"card-title","mb-0"],[1,"col-auto"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fas","fa-redo","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","battalionIds",1,"form-label"],[1,"text-danger"],["id","battalionIds","formControlName","battalionIds","multiple","","size","4",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text"],["class","invalid-feedback",4,"ngIf"],["for","moduleId",1,"form-label"],["id","moduleId","formControlName","moduleId",1,"form-select",3,"change"],["value",""],[1,"col-md-4"],["for","topicId",1,"form-label"],["id","topicId","formControlName","topicId",1,"form-select",3,"change","disabled"],["for","subTopicId",1,"form-label"],["id","subTopicId","formControlName","subTopicId",1,"form-select",3,"change","disabled"],[1,"col-md-12"],["for","questionId",1,"form-label"],["id","questionId","formControlName","questionId",1,"form-select",3,"disabled"],["class","row mb-3",4,"ngIf"],[1,"row","mb-4"],[1,"d-flex","justify-content-center","gap-3","flex-wrap"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-chart-bar","me-2"],[4,"ngIf"],["type","button",1,"btn","btn-outline-primary","me-2",3,"click"],[1,"fas","fa-file-excel","me-2","text-success"],["type","button",1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-info-circle","me-2"],["type","button",1,"btn","btn-warning",3,"click","disabled"],[1,"fas","fa-template","me-2"],["class","row",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],[1,"form-label"],["formControlName","month",1,"form-select"],["formControlName","year",1,"form-select"],["type","date","formControlName","fromDate",1,"form-select"],["type","date","formControlName","toDate",1,"form-select"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-chart-line","me-2"],[1,"badge","bg-primary","ms-2"],[1,"text-muted"],["class","row mb-4",4,"ngIf"],[1,"alert","alert-info"],[1,"col-md-3"],[1,"row","mt-2"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-triangle","me-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"badge"],[1,"ms-2"],[1,"alert","alert-success"],[1,"fas","fa-lightbulb","me-2"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"chart-container",2,"height","400px"],["id","reportChart"],[1,"fas","fa-table","me-2"],[1,"d-flex","gap-2"],[1,"badge","bg-secondary"],["class","badge bg-info",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[1,"table-dark"],["class","row mt-3",4,"ngIf"],[1,"badge","bg-info"],[1,"badge","bg-primary"],[1,"row","mt-3"],[1,"col-12","d-flex","justify-content-between","align-items-center"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["href","#",1,"page-link",3,"click"],[1,"page-item","active"],[1,"page-link"],[1,"fas","fa-tachometer-alt","me-2"],[1,"card","bg-light"],[1,"card-body","text-center"],[1,"card-title"],[1,"text-primary"],[1,"text-muted","mb-0"],[1,"text-success"],[1,"text-info"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t.EFF(5,"Report Generation"),t.k0s(),t.j41(6,"div",5),t.nrm(7,"ol",6),t.k0s()()()(),t.j41(8,"div",1)(9,"div",2)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h4",11),t.EFF(15,"Generate Performance Reports"),t.k0s()(),t.j41(16,"div",12)(17,"button",13),t.bIt("click",function(){return i.onResetForm()}),t.nrm(18,"i",14),t.EFF(19,"Reset Form "),t.k0s()()()(),t.j41(20,"div",15)(21,"form",16),t.bIt("ngSubmit",function(){return i.onGenerateReport()}),t.j41(22,"div",17)(23,"div",18)(24,"label",19),t.EFF(25,"Battalion(s) "),t.j41(26,"span",20),t.EFF(27,"*"),t.k0s()(),t.j41(28,"select",21),t.DNE(29,ri,2,2,"option",22),t.k0s(),t.j41(30,"div",23),t.EFF(31,"Hold Ctrl/Cmd to select multiple battalions"),t.k0s(),t.DNE(32,ai,2,0,"div",24),t.k0s(),t.j41(33,"div",18)(34,"label",25),t.EFF(35,"Module "),t.j41(36,"span",20),t.EFF(37,"*"),t.k0s()(),t.j41(38,"select",26),t.bIt("change",function(){return i.onModuleChange()}),t.j41(39,"option",27),t.EFF(40,"Select Module"),t.k0s(),t.DNE(41,si,2,2,"option",22),t.k0s(),t.DNE(42,ci,2,0,"div",24),t.k0s()(),t.j41(43,"div",17)(44,"div",28)(45,"label",29),t.EFF(46,"Topic"),t.k0s(),t.j41(47,"select",30),t.bIt("change",function(){return i.onTopicChange()}),t.j41(48,"option",27),t.EFF(49,"Select Topic"),t.k0s(),t.DNE(50,li,2,2,"option",22),t.k0s()(),t.j41(51,"div",28)(52,"label",31),t.EFF(53,"Sub Topic"),t.k0s(),t.j41(54,"select",32),t.bIt("change",function(){return i.onSubTopicChange()}),t.j41(55,"option",27),t.EFF(56,"Select SubTopic"),t.k0s(),t.DNE(57,di,2,2,"option",22),t.k0s()()(),t.j41(58,"div",17)(59,"div",33)(60,"label",34),t.EFF(61,"Questions"),t.k0s(),t.j41(62,"select",35)(63,"option",27),t.EFF(64,"Select Question"),t.k0s(),t.DNE(65,ui,2,2,"option",22),t.k0s()()(),t.DNE(66,_i,2,0,"div",36)(67,fi,19,8,"div",36)(68,Mi,15,6,"div",36),t.nrm(69,"div",37),t.j41(70,"div",1)(71,"div",2)(72,"div",38)(73,"button",39),t.nrm(74,"i",40),t.DNE(75,Pi,2,0,"span",41)(76,vi,3,0,"span",41),t.k0s(),t.j41(77,"div")(78,"button",42),t.bIt("click",function(){return i.onExportReport("EXCEL")}),t.nrm(79,"i",43),t.EFF(80," Download Excel Report "),t.k0s()(),t.j41(81,"button",44),t.bIt("click",function(){return i.onGetMetadata()}),t.nrm(82,"i",45),t.EFF(83,"Get Metadata "),t.k0s(),t.j41(84,"button",46),t.bIt("click",function(){return i.onGetTemplates()}),t.nrm(85,"i",47),t.EFF(86,"View Templates "),t.k0s()()()()()()()()(),t.DNE(87,ji,21,10,"div",48)(88,yi,42,6,"div",48),t.k0s()),2&n&&(t.R7$(21),t.Y8G("formGroup",i.reportForm),t.R7$(7),t.AVh("is-invalid",i.isFieldInvalid("battalionIds")),t.R7$(),t.Y8G("ngForOf",i.battalions),t.R7$(3),t.Y8G("ngIf",i.isFieldInvalid("battalionIds")),t.R7$(6),t.AVh("is-invalid",i.isFieldInvalid("moduleId")),t.R7$(3),t.Y8G("ngForOf",i.modules),t.R7$(),t.Y8G("ngIf",i.isFieldInvalid("moduleId")),t.R7$(5),t.Y8G("disabled",0===i.filteredTopics.length),t.R7$(3),t.Y8G("ngForOf",i.filteredTopics),t.R7$(4),t.Y8G("disabled",0===i.filteredSubTopics.length),t.R7$(3),t.Y8G("ngForOf",i.filteredSubTopics),t.R7$(5),t.Y8G("disabled",0===i.filteredQuestions.length),t.R7$(3),t.Y8G("ngForOf",i.filteredQuestions),t.R7$(),t.Y8G("ngIf",i.showDateRange()),t.R7$(),t.Y8G("ngIf",i.isSingleMonthReport()),t.R7$(),t.Y8G("ngIf",i.isDateRangeReport()),t.R7$(5),t.Y8G("disabled",i.isGenerating||i.reportForm.invalid),t.R7$(2),t.Y8G("ngIf",!i.isGenerating),t.R7$(),t.Y8G("ngIf",i.isGenerating),t.R7$(5),t.Y8G("disabled",i.isGenerating),t.R7$(3),t.Y8G("disabled",i.isGenerating),t.R7$(3),t.Y8G("ngIf",i.reportData),t.R7$(),t.Y8G("ngIf",null==i.reportData?null:i.reportData.performance))},dependencies:[m.MD,m.Sq,m.bT,d.X1,d.qT,d.xH,d.y7,d.me,d.wz,d.W0,d.BC,d.cb,d.j4,d.JD,d.YN,m.vh],styles:[".container-fluid[_ngcontent-%COMP%]{padding:1.5rem}.page-title-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem;border-radius:8px;margin-bottom:1.5rem}.page-title-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0}.breadcrumb[_ngcontent-%COMP%]{background:none;margin:0}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fffc;text-decoration:none}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #00000012;border-radius:12px;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0!important;padding:1rem 1.5rem}.card-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:6px;padding:.6rem .75rem;transition:all .2s ease-in-out}.form-select[multiple][_ngcontent-%COMP%]{height:auto;min-height:120px;padding:.5rem}.form-select[multiple][_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;margin-bottom:2px}.form-select[multiple][_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:checked{background-color:#667eea;color:#fff}.form-text[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;margin-top:.25rem}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.form-select.is-invalid[_ngcontent-%COMP%], .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#dc3545;margin-top:.25rem}.form-check[_ngcontent-%COMP%]{padding-left:1.25rem}.form-check-input[type=radio][_ngcontent-%COMP%]{margin-top:.25rem}.btn[_ngcontent-%COMP%]{border-radius:6px;padding:.6rem 1.2rem;font-weight:500;transition:all .2s ease-in-out}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a67d8,#6b46c1);transform:translateY(-1px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78,#38a169);border:none}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#38a169,#2d7d32);transform:translateY(-1px)}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4299e1,#3182ce);border:none}.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ed8936,#dd6b20);border:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a0aec0,#718096);border:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .65rem;border-radius:4px}.badge.bg-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ed8936!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#e53e3e!important}.badge.bg-primary[_ngcontent-%COMP%]{background-color:#667eea!important}.badge.bg-secondary[_ngcontent-%COMP%]{background-color:#a0aec0!important}.badge.bg-info[_ngcontent-%COMP%]{background-color:#4299e1!important}.alert[_ngcontent-%COMP%]{border:none;border-radius:8px;padding:1rem 1.25rem}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ebf8ff,#e6fffa);color:#2b6cb0;border-left:4px solid #4299e1}.table[_ngcontent-%COMP%]{margin-bottom:0}.table-responsive[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;border-bottom:2px solid #dee2e6;font-weight:600;text-transform:uppercase;font-size:.75rem;letter-spacing:.5px;padding:1rem .75rem}.table-dark[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a5568,#2d3748)}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#00000006}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#667eea1a}.chart-container[_ngcontent-%COMP%]{position:relative;margin:1rem 0}#reportChart[_ngcontent-%COMP%]{max-height:400px}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 10px 25px #00000026}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0}.modal-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:.5rem}.dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #00000012;border-radius:8px}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;transition:all .2s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#667eea}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1.2rem}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.d-flex.gap-3[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}}@media (max-width: 576px){.form-check[_ngcontent-%COMP%]{margin-bottom:.5rem}.card-header[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.page-title-right[_ngcontent-%COMP%]{margin-top:1rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.btn[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.btn[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.text-danger[_ngcontent-%COMP%]{color:#e53e3e!important}.text-success[_ngcontent-%COMP%]{color:#48bb78!important}.text-info[_ngcontent-%COMP%]{color:#4299e1!important}.text-muted[_ngcontent-%COMP%]{color:#718096!important}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40;outline:none}.form-select[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;opacity:.6;cursor:not-allowed}h5[_ngcontent-%COMP%]{color:#495057;font-weight:600;border-bottom:2px solid #e3ebf0;padding-bottom:.5rem;margin-bottom:1rem}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#667eea;border-color:#667eea}.form-check-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-weight:500;border-radius:6px;transition:all .3s ease;min-width:140px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#5a6fd8,#6a4190);transform:translateY(-2px);box-shadow:0 4px 12px #667eea4d}.btn-outline-primary[_ngcontent-%COMP%]{border:2px solid #667eea;color:#667eea;background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff;transform:translateY(-2px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);border:none}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1ea583);transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#e74c3c);border:none}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#c82333,#d62c1a);transform:translateY(-2px);box-shadow:0 4px 12px #dc35454d}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);border:none;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#5a6268,#495057);transform:translateY(-1px)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.d-flex.justify-content-center[_ngcontent-%COMP%]{gap:1rem}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ffffffe6;z-index:1050;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{min-width:120px;margin-bottom:.5rem}.d-flex.justify-content-center[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}@media (max-width: 576px){.page-title-box[_ngcontent-%COMP%]{text-align:center}.page-title-right[_ngcontent-%COMP%]{margin-top:1rem}.card-header[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{text-align:center}.card-header[_ngcontent-%COMP%]   .col-auto[_ngcontent-%COMP%]{margin-top:1rem}}.form-select.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.form-select.ng-valid.ng-touched[_ngcontent-%COMP%], .form-control.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#28a745}.breadcrumb[_ngcontent-%COMP%]{background:none;padding:0;margin:0}.breadcrumb-item[_ngcontent-%COMP%]{font-size:.9rem}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#6c757d}.form-select[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.btn[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.btn[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{vertical-align:middle}"]}))}return r(),a})();const T=Object.create(null);T.open="0",T.close="1",T.ping="2",T.pong="3",T.message="4",T.upgrade="5",T.noop="6";const $=Object.create(null);Object.keys(T).forEach(r=>{$[T[r]]=r});const J={type:"error",data:"parser error"},vt="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),xt="function"==typeof ArrayBuffer,Et=r=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,Z=({type:r,data:a},o,e)=>vt&&a instanceof Blob?o?e(a):Ot(a,e):xt&&(a instanceof ArrayBuffer||Et(a))?o?e(a):Ot(new Blob([a]),e):e(T[r]+(a||"")),Ot=(r,a)=>{const o=new FileReader;return o.onload=function(){const e=o.result.split(",")[1];a("b"+(e||""))},o.readAsDataURL(r)};function kt(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let tt;const y=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<64;r++)y["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(r)]=r;const Bi="function"==typeof ArrayBuffer,et=(r,a)=>{if("string"!=typeof r)return{type:"message",data:Ft(r,a)};const o=r.charAt(0);return"b"===o?{type:"message",data:Ui(r.substring(1),a)}:$[o]?r.length>1?{type:$[o],data:r.substring(1)}:{type:$[o]}:J},Ui=(r,a)=>{if(Bi){const o=(r=>{let e,i,c,l,p,a=.75*r.length,o=r.length,n=0;"="===r[r.length-1]&&(a--,"="===r[r.length-2]&&a--);const C=new ArrayBuffer(a),v=new Uint8Array(C);for(e=0;e<o;e+=4)i=y[r.charCodeAt(e)],c=y[r.charCodeAt(e+1)],l=y[r.charCodeAt(e+2)],p=y[r.charCodeAt(e+3)],v[n++]=i<<2|c>>4,v[n++]=(15&c)<<4|l>>2,v[n++]=(3&l)<<6|63&p;return C})(r);return Ft(o,a)}return{base64:!0,data:r}},Ft=(r,a)=>"blob"===a?r instanceof Blob?r:new Blob([r]):r instanceof ArrayBuffer?r:r.buffer;let nt;function L(r){return r.reduce((a,o)=>a+o.length,0)}function G(r,a){if(r[0].length===a)return r.shift();const o=new Uint8Array(a);let e=0;for(let n=0;n<a;n++)o[n]=r[0][e++],e===r[0].length&&(r.shift(),e=0);return r.length&&e<r[0].length&&(r[0]=r[0].slice(e)),o}function x(r){if(r)return function Vi(r){for(var a in x.prototype)r[a]=x.prototype[a];return r}(r)}x.prototype.on=x.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},x.prototype.once=function(r,a){function o(){this.off(r,o),a.apply(this,arguments)}return o.fn=a,this.on(r,o),this},x.prototype.off=x.prototype.removeListener=x.prototype.removeAllListeners=x.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+r],this;for(var e,n=0;n<o.length;n++)if((e=o[n])===a||e.fn===a){o.splice(n,1);break}return 0===o.length&&delete this._callbacks["$"+r],this},x.prototype.emitReserved=x.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),o=this._callbacks["$"+r],e=1;e<arguments.length;e++)a[e-1]=arguments[e];if(o){e=0;for(var n=(o=o.slice(0)).length;e<n;++e)o[e].apply(this,a)}return this},x.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},x.prototype.hasListeners=function(r){return!!this.listeners(r).length};const V="function"==typeof Promise&&"function"==typeof Promise.resolve?a=>Promise.resolve().then(a):(a,o)=>o(a,0),k=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Dt(r,...a){return a.reduce((o,e)=>(r.hasOwnProperty(e)&&(o[e]=r[e]),o),{})}const Yi=k.setTimeout,Wi=k.clearTimeout;function q(r,a){a.useNativeTimers?(r.setTimeoutFn=Yi.bind(k),r.clearTimeoutFn=Wi.bind(k)):(r.setTimeoutFn=k.setTimeout.bind(k),r.clearTimeoutFn=k.clearTimeout.bind(k))}function Ki(r){return"string"==typeof r?function Xi(r){let a=0,o=0;for(let e=0,n=r.length;e<n;e++)a=r.charCodeAt(e),a<128?o+=1:a<2048?o+=2:a<55296||a>=57344?o+=3:(e++,o+=4);return o}(r):Math.ceil(1.33*(r.byteLength||r.size))}function St(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Ji extends Error{constructor(a,o,e){super(a),this.description=o,this.context=e,this.type="TransportError"}}class ot extends x{constructor(a){super(),this.writable=!1,q(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,o,e){return super.emitReserved("error",new Ji(a,o,e)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(a){"open"===this.readyState&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const o=et(a,this.socket.binaryType);this.onPacket(o)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,o={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(o)}_hostname(){const a=this.opts.hostname;return-1===a.indexOf(":")?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(a){const o=function Qi(r){let a="";for(let o in r)r.hasOwnProperty(o)&&(a.length&&(a+="&"),a+=encodeURIComponent(o)+"="+encodeURIComponent(r[o]));return a}(a);return o.length?"?"+o:""}}class Zi extends ot{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const o=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||o()})),this.writable||(e++,this.once("drain",function(){--e||o()}))}else o()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){((r,a)=>{const o=r.split("\x1e"),e=[];for(let n=0;n<o.length;n++){const i=et(o[n],a);if(e.push(i),"error"===i.type)break}return e})(a,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};"open"===this.readyState?a():this.once("open",a)}write(a){this.writable=!1,((r,a)=>{const o=r.length,e=new Array(o);let n=0;r.forEach((i,c)=>{Z(i,!1,l=>{e[c]=l,++n===o&&a(e.join("\x1e"))})})})(a,o=>{this.doWrite(o,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",o=this.query||{};return!1!==this.opts.timestampRequests&&(o[this.opts.timestampParam]=St()),!this.supportsBinary&&!o.sid&&(o.b64=1),this.createUri(a,o)}}let It=!1;try{It=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const tr=It;function er(){}class nr extends Zi{constructor(a){if(super(a),typeof location<"u"){const o="https:"===location.protocol;let e=location.port;e||(e=o?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||e!==a.port}}doWrite(a,o){const e=this.request({method:"POST",data:a});e.on("success",o),e.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(o,e)=>{this.onError("xhr poll error",o,e)}),this.pollXhr=a}}let Y=(()=>{class r extends x{constructor(o,e,n){super(),this.createRequest=o,q(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var o;const e=Dt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}null===(o=this._opts.cookieJar)||void 0===o||o.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;3===n.readyState&&(null===(i=this._opts.cookieJar)||void 0===i||i.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof n.status?n.status:0)},0))},n.send(this._data)}catch(i){return void this.setTimeoutFn(()=>{this._onError(i)},0)}typeof document<"u"&&(this._index=r.requestsCount++,r.requests[this._index]=this)}_onError(o){this.emitReserved("error",o,this._xhr),this._cleanup(!0)}_cleanup(o){if(!(typeof this._xhr>"u"||null===this._xhr)){if(this._xhr.onreadystatechange=er,o)try{this._xhr.abort()}catch{}typeof document<"u"&&delete r.requests[this._index],this._xhr=null}}_onLoad(){const o=this._xhr.responseText;null!==o&&(this.emitReserved("data",o),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return r.requestsCount=0,r.requests={},r})();function jt(){for(let r in Y.requests)Y.requests.hasOwnProperty(r)&&Y.requests[r].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",jt):"function"==typeof addEventListener&&addEventListener("onpagehide"in k?"pagehide":"unload",jt,!1));const or=function(){const r=yt({xdomain:!1});return r&&null!==r.responseType}();function yt(r){const a=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||tr))return new XMLHttpRequest}catch{}if(!a)try{return new(k[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}const wt=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class rr extends ot{get name(){return"websocket"}doOpen(){const a=this.uri(),o=this.opts.protocols,e=wt?{}:Dt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(e.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,o,e)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let o=0;o<a.length;o++){const e=a[o],n=o===a.length-1;Z(e,this.supportsBinary,i=>{try{this.doWrite(e,i)}catch{}n&&V(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",o=this.query||{};return this.opts.timestampRequests&&(o[this.opts.timestampParam]=St()),this.supportsBinary||(o.b64=1),this.createUri(a,o)}}const it=k.WebSocket||k.MozWebSocket,cr={websocket:class ar extends rr{createSocket(a,o,e){return wt?new it(a,o,e):o?new it(a,o):new it(a)}doWrite(a,o){this.ws.send(o)}},webtransport:class sr extends ot{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const o=function Gi(r,a){nt||(nt=new TextDecoder);const o=[];let e=0,n=-1,i=!1;return new TransformStream({transform(c,l){for(o.push(c);;){if(0===e){if(L(o)<1)break;const p=G(o,1);i=!(128&~p[0]),n=127&p[0],e=n<126?3:126===n?1:2}else if(1===e){if(L(o)<2)break;const p=G(o,2);n=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),e=3}else if(2===e){if(L(o)<8)break;const p=G(o,8),C=new DataView(p.buffer,p.byteOffset,p.length),v=C.getUint32(0);if(v>Math.pow(2,21)-1){l.enqueue(J);break}n=v*Math.pow(2,32)+C.getUint32(4),e=3}else{if(L(o)<n)break;const p=G(o,n);l.enqueue(et(i?p:nt.decode(p),a)),e=0}if(0===n||n>r){l.enqueue(J);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),e=a.readable.pipeThrough(o).getReader(),n=function Li(){return new TransformStream({transform(r,a){!function wi(r,a){vt&&r.data instanceof Blob?r.data.arrayBuffer().then(kt).then(a):xt&&(r.data instanceof ArrayBuffer||Et(r.data))?a(kt(r.data)):Z(r,!1,o=>{tt||(tt=new TextEncoder),a(tt.encode(o))})}(r,o=>{const e=o.length;let n;if(e<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,e);else if(e<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,e)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(e))}r.data&&"string"!=typeof r.data&&(n[0]|=128),a.enqueue(n),a.enqueue(o)})}})}();n.readable.pipeTo(a.writable),this._writer=n.writable.getWriter();const i=()=>{e.read().then(({done:l,value:p})=>{l||(this.onPacket(p),i())}).catch(l=>{})};i();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let o=0;o<a.length;o++){const n=o===a.length-1;this._writer.write(a[o]).then(()=>{n&&V(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;null===(a=this._transport)||void 0===a||a.close()}},polling:class ir extends nr{constructor(a){super(a),this.supportsBinary=or&&!(a&&a.forceBase64)}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new Y(yt,this.uri(),a)}}},lr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rt(r){if(r.length>8e3)throw"URI too long";const a=r,o=r.indexOf("["),e=r.indexOf("]");-1!=o&&-1!=e&&(r=r.substring(0,o)+r.substring(o,e).replace(/:/g,";")+r.substring(e,r.length));let n=lr.exec(r||""),i={},c=14;for(;c--;)i[dr[c]]=n[c]||"";return-1!=o&&-1!=e&&(i.source=a,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function ur(r,a){const e=a.replace(/\/{2,9}/g,"/").split("/");return("/"==a.slice(0,1)||0===a.length)&&e.splice(0,1),"/"==a.slice(-1)&&e.splice(e.length-1,1),e}(0,i.path),i.queryKey=function _r(r,a){const o={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,n,i){n&&(o[n]=i)}),o}(0,i.query),i}const at="function"==typeof addEventListener&&"function"==typeof removeEventListener,W=[];at&&addEventListener("offline",()=>{W.forEach(r=>r())},!1);let st=(()=>{class r extends x{constructor(o,e){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,o&&"object"==typeof o&&(e=o,o=null),o){const n=rt(o);e.hostname=n.host,e.secure="https"===n.protocol||"wss"===n.protocol,e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=rt(e.host).host);q(this,e),this.secure=null!=e.secure?e.secure:typeof location<"u"&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function Hi(r){let a={},o=r.split("&");for(let e=0,n=o.length;e<n;e++){let i=o[e].split("=");a[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return a}(this.opts.query)),at&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},W.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(o){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=o,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[o]);return new this._transportsByName[o](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const o=this.opts.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(o);e.open(),this.setTransport(e)}setTransport(o){this.transport&&this.transport.removeAllListeners(),this.transport=o,o.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(o){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",o),this.emitReserved("heartbeat"),o.type){case"open":this.onHandshake(JSON.parse(o.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=o.data,this._onError(e);break;case"message":this.emitReserved("data",o.data),this.emitReserved("message",o.data)}}onHandshake(o){this.emitReserved("handshake",o),this.id=o.sid,this.transport.query.sid=o.sid,this._pingInterval=o.pingInterval,this._pingTimeout=o.pingTimeout,this._maxPayload=o.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const o=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+o,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},o),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const o=this._getWritablePackets();this.transport.send(o),this._prevBufferLen=o.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+=Ki(i)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const o=Date.now()>this._pingTimeoutTime;return o&&(this._pingTimeoutTime=0,V(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),o}write(o,e,n){return this._sendPacket("message",o,e,n),this}send(o,e,n){return this._sendPacket("message",o,e,n),this}_sendPacket(o,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const c={type:o,data:e,options:n};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),i&&this.once("flush",i),this.flush()}close(){const o=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),o()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():o()}):this.upgrading?n():o()),this}_onError(o){if(r.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",o),this._onClose("transport error",o)}_onClose(o,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),at&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=W.indexOf(this._offlineEventListener);-1!==n&&W.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",o,e),this.writeBuffer=[],this._prevBufferLen=0}}}return r.protocol=4,r})();class pr extends st{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let o=this.createTransport(a),e=!1;st.priorWebsocketSuccess=!1;const n=()=>{e||(o.send([{type:"ping",data:"probe"}]),o.once("packet",D=>{if(!e)if("pong"===D.type&&"probe"===D.data){if(this.upgrading=!0,this.emitReserved("upgrading",o),!o)return;st.priorWebsocketSuccess="websocket"===o.name,this.transport.pause(()=>{e||"closed"!==this.readyState&&(v(),this.setTransport(o),o.send([{type:"upgrade"}]),this.emitReserved("upgrade",o),o=null,this.upgrading=!1,this.flush())})}else{const B=new Error("probe error");B.transport=o.name,this.emitReserved("upgradeError",B)}}))};function i(){e||(e=!0,v(),o.close(),o=null)}const c=D=>{const B=new Error("probe error: "+D);B.transport=o.name,i(),this.emitReserved("upgradeError",B)};function l(){c("transport closed")}function p(){c("socket closed")}function C(D){o&&D.name!==o.name&&i()}const v=()=>{o.removeListener("open",n),o.removeListener("error",c),o.removeListener("close",l),this.off("close",p),this.off("upgrading",C)};o.once("open",n),o.once("error",c),o.once("close",l),this.once("close",p),this.once("upgrading",C),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==a?this.setTimeoutFn(()=>{e||o.open()},200):o.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const o=[];for(let e=0;e<a.length;e++)~this.transports.indexOf(a[e])&&o.push(a[e]);return o}}class Nt extends pr{constructor(a,o={}){const e="object"==typeof a?a:o;(!e.transports||e.transports&&"string"==typeof e.transports[0])&&(e.transports=(e.transports||["polling","websocket","webtransport"]).map(n=>cr[n]).filter(n=>!!n)),super(a,e)}}const mr="function"==typeof ArrayBuffer,Bt=Object.prototype.toString,fr="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Bt.call(Blob),br="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===Bt.call(File);function ct(r){return mr&&(r instanceof ArrayBuffer||(r=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer)(r))||fr&&r instanceof Blob||br&&r instanceof File}function z(r,a){if(!r||"object"!=typeof r)return!1;if(Array.isArray(r)){for(let o=0,e=r.length;o<e;o++)if(z(r[o]))return!0;return!1}if(ct(r))return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return z(r.toJSON(),!0);for(const o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&z(r[o]))return!0;return!1}function Cr(r){const a=[],e=r;return e.data=lt(r.data,a),e.attachments=a.length,{packet:e,buffers:a}}function lt(r,a){if(!r)return r;if(ct(r)){const o={_placeholder:!0,num:a.length};return a.push(r),o}if(Array.isArray(r)){const o=new Array(r.length);for(let e=0;e<r.length;e++)o[e]=lt(r[e],a);return o}if("object"==typeof r&&!(r instanceof Date)){const o={};for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=lt(r[e],a));return o}return r}function Mr(r,a){return r.data=dt(r.data,a),delete r.attachments,r}function dt(r,a){if(!r)return r;if(r&&!0===r._placeholder){if("number"==typeof r.num&&r.num>=0&&r.num<a.length)return a[r.num];throw new Error("illegal attachments")}if(Array.isArray(r))for(let o=0;o<r.length;o++)r[o]=dt(r[o],a);else if("object"==typeof r)for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(r[o]=dt(r[o],a));return r}const Pr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],vr=5;var M=function(r){return r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK",r}(M||{});class xr{constructor(a){this.replacer=a}encode(a){return a.type!==M.EVENT&&a.type!==M.ACK||!z(a)?[this.encodeAsString(a)]:this.encodeAsBinary({type:a.type===M.EVENT?M.BINARY_EVENT:M.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id})}encodeAsString(a){let o=""+a.type;return(a.type===M.BINARY_EVENT||a.type===M.BINARY_ACK)&&(o+=a.attachments+"-"),a.nsp&&"/"!==a.nsp&&(o+=a.nsp+","),null!=a.id&&(o+=a.id),null!=a.data&&(o+=JSON.stringify(a.data,this.replacer)),o}encodeAsBinary(a){const o=Cr(a),e=this.encodeAsString(o.packet),n=o.buffers;return n.unshift(e),n}}function Ut(r){return"[object Object]"===Object.prototype.toString.call(r)}class ut extends x{constructor(a){super(),this.reviver=a}add(a){let o;if("string"==typeof a){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");o=this.decodeString(a);const e=o.type===M.BINARY_EVENT;e||o.type===M.BINARY_ACK?(o.type=e?M.EVENT:M.ACK,this.reconstructor=new Er(o),0===o.attachments&&super.emitReserved("decoded",o)):super.emitReserved("decoded",o)}else{if(!ct(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");o=this.reconstructor.takeBinaryData(a),o&&(this.reconstructor=null,super.emitReserved("decoded",o))}}decodeString(a){let o=0;const e={type:Number(a.charAt(0))};if(void 0===M[e.type])throw new Error("unknown packet type "+e.type);if(e.type===M.BINARY_EVENT||e.type===M.BINARY_ACK){const i=o+1;for(;"-"!==a.charAt(++o)&&o!=a.length;);const c=a.substring(i,o);if(c!=Number(c)||"-"!==a.charAt(o))throw new Error("Illegal attachments");e.attachments=Number(c)}if("/"===a.charAt(o+1)){const i=o+1;for(;++o&&","!==a.charAt(o)&&o!==a.length;);e.nsp=a.substring(i,o)}else e.nsp="/";const n=a.charAt(o+1);if(""!==n&&Number(n)==n){const i=o+1;for(;++o;){const c=a.charAt(o);if(null==c||Number(c)!=c){--o;break}if(o===a.length)break}e.id=Number(a.substring(i,o+1))}if(a.charAt(++o)){const i=this.tryParse(a.substr(o));if(!ut.isPayloadValid(e.type,i))throw new Error("invalid payload");e.data=i}return e}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,o){switch(a){case M.CONNECT:return Ut(o);case M.DISCONNECT:return void 0===o;case M.CONNECT_ERROR:return"string"==typeof o||Ut(o);case M.EVENT:case M.BINARY_EVENT:return Array.isArray(o)&&("number"==typeof o[0]||"string"==typeof o[0]&&-1===Pr.indexOf(o[0]));case M.ACK:case M.BINARY_ACK:return Array.isArray(o)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Er{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const o=Mr(this.reconPack,this.buffers);return this.finishedReconstruction(),o}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function R(r,a,o){return r.on(a,o),function(){r.off(a,o)}}const Or=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class At extends x{constructor(a,o,e){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=o,e&&e.auth&&(this.auth=e.auth),this._opts=Object.assign({},e),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[R(a,"open",this.onopen.bind(this)),R(a,"packet",this.onpacket.bind(this)),R(a,"error",this.onerror.bind(this)),R(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...o){var e,n,i;if(Or.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(o.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const c={type:M.EVENT,data:o,options:{}};if(c.options.compress=!1!==this.flags.compress,"function"==typeof o[o.length-1]){const v=this.ids++,D=o.pop();this._registerAckCallback(v,D),c.id=v}const l=null===(n=null===(e=this.io.engine)||void 0===e?void 0:e.transport)||void 0===n?void 0:n.writable,p=this.connected&&!(null!==(i=this.io.engine)&&void 0!==i&&i._hasPingExpired());return this.flags.volatile&&!l||(p?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(a,o){var e;const n=null!==(e=this.flags.timeout)&&void 0!==e?e:this._opts.ackTimeout;if(void 0===n)return void(this.acks[a]=o);const i=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===a&&this.sendBuffer.splice(l,1);o.call(this,new Error("operation has timed out"))},n),c=(...l)=>{this.io.clearTimeoutFn(i),o.apply(this,l)};c.withError=!0,this.acks[a]=c}emitWithAck(a,...o){return new Promise((e,n)=>{const i=(c,l)=>c?n(c):e(l);i.withError=!0,o.push(i),this.emit(a,...o)})}_addToQueue(a){let o;"function"==typeof a[a.length-1]&&(o=a.pop());const e={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((n,...i)=>e!==this._queue[0]?void 0:(null!==n?e.tryCount>this._opts.retries&&(this._queue.shift(),o&&o(n)):(this._queue.shift(),o&&o(null,...i)),e.pending=!1,this._drainQueue())),this._queue.push(e),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||0===this._queue.length)return;const o=this._queue[0];o.pending&&!a||(o.pending=!0,o.tryCount++,this.flags=o.flags,this.emit.apply(this,o.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){"function"==typeof this.auth?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:M.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,o){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,o),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(e=>String(e.id)===a)){const e=this.acks[a];delete this.acks[a],e.withError&&e.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case M.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case M.EVENT:case M.BINARY_EVENT:this.onevent(a);break;case M.ACK:case M.BINARY_ACK:this.onack(a);break;case M.DISCONNECT:this.ondisconnect();break;case M.CONNECT_ERROR:this.destroy();const e=new Error(a.data.message);e.data=a.data.data,this.emitReserved("connect_error",e)}}onevent(a){const o=a.data||[];null!=a.id&&o.push(this.ack(a.id)),this.connected?this.emitEvent(o):this.receiveBuffer.push(Object.freeze(o))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const o=this._anyListeners.slice();for(const e of o)e.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&"string"==typeof a[a.length-1]&&(this._lastOffset=a[a.length-1])}ack(a){const o=this;let e=!1;return function(...n){e||(e=!0,o.packet({type:M.ACK,id:a,data:n}))}}onack(a){const o=this.acks[a.id];"function"==typeof o&&(delete this.acks[a.id],o.withError&&a.data.unshift(null),o.apply(this,a.data))}onconnect(a,o){this.id=a,this.recovered=o&&this._pid===o,this._pid=o,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:M.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const o=this._anyListeners;for(let e=0;e<o.length;e++)if(a===o[e])return o.splice(e,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const o=this._anyOutgoingListeners;for(let e=0;e<o.length;e++)if(a===o[e])return o.splice(e,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const o=this._anyOutgoingListeners.slice();for(const e of o)e.apply(this,a.data)}}}function I(r){this.ms=(r=r||{}).min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}I.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),o=Math.floor(a*this.jitter*r);r=1&Math.floor(10*a)?r+o:r-o}return 0|Math.min(r,this.max)},I.prototype.reset=function(){this.attempts=0},I.prototype.setMin=function(r){this.ms=r},I.prototype.setMax=function(r){this.max=r},I.prototype.setJitter=function(r){this.jitter=r};class _t extends x{constructor(a,o){var e;super(),this.nsps={},this.subs=[],a&&"object"==typeof a&&(o=a,a=void 0),(o=o||{}).path=o.path||"/socket.io",this.opts=o,q(this,o),this.reconnection(!1!==o.reconnection),this.reconnectionAttempts(o.reconnectionAttempts||1/0),this.reconnectionDelay(o.reconnectionDelay||1e3),this.reconnectionDelayMax(o.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(e=o.randomizationFactor)&&void 0!==e?e:.5),this.backoff=new I({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==o.timeout?2e4:o.timeout),this._readyState="closed",this.uri=a;const n=o.parser||h;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==o.autoConnect,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return void 0===a?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var o;return void 0===a?this._reconnectionDelay:(this._reconnectionDelay=a,null===(o=this.backoff)||void 0===o||o.setMin(a),this)}randomizationFactor(a){var o;return void 0===a?this._randomizationFactor:(this._randomizationFactor=a,null===(o=this.backoff)||void 0===o||o.setJitter(a),this)}reconnectionDelayMax(a){var o;return void 0===a?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,null===(o=this.backoff)||void 0===o||o.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new Nt(this.uri,this.opts);const o=this.engine,e=this;this._readyState="opening",this.skipReconnect=!1;const n=R(o,"open",function(){e.onopen(),a&&a()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),a?a(l):this.maybeReconnectOnOpen()},c=R(o,"error",i);if(!1!==this._timeout){const p=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),o.close()},this._timeout);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(n),this.subs.push(c),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(R(a,"ping",this.onping.bind(this)),R(a,"data",this.ondata.bind(this)),R(a,"error",this.onerror.bind(this)),R(a,"close",this.onclose.bind(this)),R(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(o){this.onclose("parse error",o)}}ondecoded(a){V(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,o){let e=this.nsps[a];return e?this._autoConnect&&!e.active&&e.connect():(e=new At(this,a,o),this.nsps[a]=e),e}_destroy(a){const o=Object.keys(this.nsps);for(const e of o)if(this.nsps[e].active)return;this._close()}_packet(a){const o=this.encoder.encode(a);for(let e=0;e<o.length;e++)this.engine.write(o[e],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,o){var e;this.cleanup(),null===(e=this.engine)||void 0===e||e.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,o),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const o=this.backoff.duration();this._reconnecting=!0;const e=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(n=>{n?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",n)):a.onreconnect()}))},o);this.opts.autoUnref&&e.unref(),this.subs.push(()=>{this.clearTimeoutFn(e)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const w={};function K(r,a){"object"==typeof r&&(a=r,r=void 0);const o=function gr(r,a="",o){let e=r;o=o||typeof location<"u"&&location,null==r&&(r=o.protocol+"//"+o.host),"string"==typeof r&&("/"===r.charAt(0)&&(r="/"===r.charAt(1)?o.protocol+r:o.host+r),/^(https?|wss?):\/\//.test(r)||(r=typeof o<"u"?o.protocol+"//"+r:"https://"+r),e=rt(r)),e.port||(/^(http|ws)$/.test(e.protocol)?e.port="80":/^(http|ws)s$/.test(e.protocol)&&(e.port="443")),e.path=e.path||"/";const i=-1!==e.host.indexOf(":")?"["+e.host+"]":e.host;return e.id=e.protocol+"://"+i+":"+e.port+a,e.href=e.protocol+"://"+i+(o&&o.port===e.port?"":":"+e.port),e}(r,(a=a||{}).path||"/socket.io"),e=o.source,n=o.id;let p;return a.forceNew||a["force new connection"]||!1===a.multiplex||w[n]&&o.path in w[n].nsps?p=new _t(e,a):(w[n]||(w[n]=new _t(e,a)),p=w[n]),o.query&&!a.query&&(a.query=o.queryKey),p.socket(o.path,a)}Object.assign(K,{Manager:_t,Socket:At,io:K,connect:K});var N=u(1985),kr=u(7144);let Fr=(()=>{var r;class a{constructor(){this.isConnected=!1,this.initializeSocket()}initializeSocket(){const e=localStorage.getItem("auth_token");this.socket=K(kr.c.wsUrl,{query:{token:e},transports:["websocket","polling"]}),this.socket.on("connect",()=>{this.isConnected=!0,console.log("\u2705 Connected to WebSocket server")}),this.socket.on("disconnect",()=>{this.isConnected=!1,console.warn("\u26a0\ufe0f Disconnected from WebSocket server")}),this.socket.on("connect_error",n=>{console.error("\u274c WebSocket connection error:",n)})}onNewMessage(){return new N.c(e=>{this.socket.on("new_message",n=>{e.next(n)})})}onCommunicationUpdate(){return new N.c(e=>{this.socket.on("communication_update",n=>{e.next(n)})})}onMessageStatusUpdate(){return new N.c(e=>{this.socket.on("message_status_update",n=>{e.next(n)})})}sendMessage(e){this.isConnected?this.socket.emit("new_message",e):console.error("WebSocket not connected")}markAsRead(e){this.isConnected&&this.socket.emit("message_read",e)}notifyBattalion(e,n,i){this.isConnected&&this.socket.emit(n,{battalionId:e,...i})}startTyping(e){this.isConnected&&this.socket.emit("start_typing",e)}stopTyping(e){this.isConnected&&this.socket.emit("stop_typing",e)}onNewCommunication(){return new N.c(e=>{this.socket.on("new_communication",n=>{e.next(n)})})}onUserTyping(){return new N.c(e=>{this.socket.on("user_typing",n=>{e.next(n)})})}disconnect(){this.socket&&this.socket.disconnect()}getConnectionStatus(){return this.isConnected}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275prov=s.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}))}return r(),a})();function Rr(r,a){if(1&r&&(t.j41(0,"span",40),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit,e=t.XpG();t.Y8G("title",e.getMultipleBattalionNames(o.selectedBattalions)),t.R7$(),t.SpI(" Multiple (",o.selectedBattalions.length,") ")}}function Tr(r,a){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit,e=t.XpG();t.R7$(),t.SpI(" ",o.battalionName||e.getBattalionName(o.battalionId)," ")}}function Dr(r,a){1&r&&(t.j41(0,"span",41),t.EFF(1," \u{1f4ce} Attached "),t.k0s())}function Sr(r,a){1&r&&(t.j41(0,"span",42),t.EFF(1," No Document "),t.k0s())}function Ir(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td")(7,"strong"),t.EFF(8),t.k0s()(),t.j41(9,"td"),t.DNE(10,Rr,2,2,"span",32)(11,Tr,2,1,"span",25),t.k0s(),t.j41(12,"td",33),t.EFF(13),t.k0s(),t.j41(14,"td"),t.DNE(15,Dr,2,0,"span",34)(16,Sr,2,0,"span",35),t.k0s(),t.j41(17,"td")(18,"span",36),t.EFF(19),t.k0s()(),t.j41(20,"td")(21,"div",37)(22,"button",38),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.viewCommunicationDetails(n))}),t.EFF(23,"View"),t.k0s(),t.j41(24,"button",39),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editCommunication(n))}),t.EFF(25,"Edit"),t.k0s()()()()}if(2&r){const o=a.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(t.i5U(5,14,o.createdDate,"dd/MM/yyyy")),t.R7$(4),t.JRh(o.subject),t.R7$(2),t.Y8G("ngIf",o.selectedBattalions&&o.selectedBattalions.length>1),t.R7$(),t.Y8G("ngIf",!o.selectedBattalions||o.selectedBattalions.length<=1),t.R7$(),t.Y8G("title",o.message),t.R7$(),t.SpI(" ",o.message," "),t.R7$(2),t.Y8G("ngIf",o.document),t.R7$(),t.Y8G("ngIf",!o.document),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," ")}}function jr(r,a){1&r&&(t.j41(0,"tr")(1,"td",43),t.EFF(2,"No communications found"),t.k0s()())}function yr(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function wr(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",78)(1,"label",74)(2,"input",75),t.bIt("change",function(){const n=s.eBV(o).$implicit,i=t.XpG(3);return s.Njj(i.toggleBattalionSelection(n.id))}),t.k0s(),t.EFF(3),t.k0s()()}if(2&r){const o=a.$implicit;t.R7$(2),t.Y8G("checked",o.selected),t.R7$(),t.SpI(" ",o.name," ")}}function Nr(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",72)(1,"div",73)(2,"label",74)(3,"input",75),t.bIt("change",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.toggleSelectAll())}),t.k0s(),t.j41(4,"strong"),t.EFF(5,"Select All Battalions"),t.k0s()()(),t.nrm(6,"div",76),t.DNE(7,wr,4,2,"div",77),t.k0s()}if(2&r){const o=t.XpG(2);t.R7$(3),t.Y8G("checked",o.allBattalionsSelected),t.R7$(4),t.Y8G("ngForOf",o.battalions)("ngForTrackBy",o.trackByBattalionId)}}function Br(r,a){1&r&&(t.j41(0,"div",79),t.EFF(1," Please select at least one battalion "),t.k0s())}function Ur(r,a){1&r&&(t.j41(0,"div",79),t.EFF(1," Subject is required "),t.k0s())}function Ar(r,a){1&r&&(t.j41(0,"div",79),t.EFF(1," Message is required "),t.k0s())}function $r(r,a){1&r&&t.nrm(0,"span",80)}function Lr(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",46),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",47)(3,"div",48)(4,"h4",49),t.EFF(5),t.k0s(),t.j41(6,"button",50),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",51)(10,"form",52,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateCommunication():n.addCommunication())}),t.j41(12,"div",53)(13,"label",54),t.EFF(14,"Select Battalions"),t.k0s(),t.j41(15,"div",55),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.toggleBattalionDropdown())}),t.j41(16,"div",56)(17,"span",57),t.EFF(18),t.k0s(),t.j41(19,"span",58),t.EFF(20),t.k0s()()(),t.DNE(21,Nr,8,3,"div",59)(22,Br,2,0,"div",60),t.k0s(),t.j41(23,"div",53)(24,"label",61),t.EFF(25,"Subject"),t.k0s(),t.j41(26,"input",62,1),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentCommunication.subject,n)||(i.currentCommunication.subject=n),s.Njj(n)}),t.k0s(),t.DNE(28,Ur,2,0,"div",60),t.k0s(),t.j41(29,"div",53)(30,"label",63),t.EFF(31,"Message"),t.k0s(),t.j41(32,"textarea",64,2),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentCommunication.message,n)||(i.currentCommunication.message=n),s.Njj(n)}),t.k0s(),t.DNE(34,Ar,2,0,"div",60),t.k0s(),t.j41(35,"div",53)(36,"label",65),t.EFF(37,"Attachments"),t.k0s(),t.nrm(38,"input",66),t.j41(39,"small",67),t.EFF(40," You can select multiple files. Allowed formats: PDF, DOC, DOCX, JPG, JPEG, PNG, TXT "),t.k0s()(),t.j41(41,"div",68)(42,"button",69),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(43," Close "),t.k0s(),t.j41(44,"button",70),t.DNE(45,$r,1,0,"span",71),t.EFF(46),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.sdS(27),n=t.sdS(33),i=t.XpG();t.R7$(5),t.JRh(i.isEditMode?"Edit Communication":"Add Communication"),t.R7$(13),t.SpI(" ",i.getSelectedBattalionNames()," "),t.R7$(2),t.JRh(i.isBattalionDropdownOpen?"\u25b2":"\u25bc"),t.R7$(),t.Y8G("ngIf",i.isBattalionDropdownOpen),t.R7$(),t.Y8G("ngIf",0===i.selectedBattalionIds.length&&o.submitted),t.R7$(4),t.R50("ngModel",i.currentCommunication.subject),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(4),t.R50("ngModel",i.currentCommunication.message),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(10),t.Y8G("disabled",o.invalid||i.isLoading||0===i.selectedBattalionIds.length),t.R7$(),t.Y8G("ngIf",i.isLoading),t.R7$(),t.SpI(" ",i.isEditMode?"Update":"Save"," ")}}function Gr(r,a){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const o=t.XpG(3);t.R7$(),t.SpI(" ",o.getMultipleBattalionNames(o.selectedCommunication.selectedBattalions)," ")}}function Vr(r,a){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const o=t.XpG(3);t.R7$(),t.SpI(" ",o.selectedCommunication.battalionName||o.getBattalionName(o.selectedCommunication.battalionId)," ")}}function qr(r,a){1&r&&(t.j41(0,"span",98),t.EFF(1,"\u{1f4ce}"),t.k0s())}function Yr(r,a){1&r&&(t.j41(0,"span"),t.EFF(1,"-"),t.k0s())}function Wr(r,a){if(1&r&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.DNE(11,qr,2,0,"span",97)(12,Yr,2,0,"span",25),t.k0s()()),2&r){const o=a.$implicit,e=a.index;t.R7$(2),t.JRh(e+1),t.R7$(2),t.JRh(t.i5U(5,6,o.replyDate,"dd/MM/yyyy")),t.R7$(3),t.JRh(o.replyBy),t.R7$(2),t.JRh(o.replyMessage),t.R7$(2),t.Y8G("ngIf",o.document),t.R7$(),t.Y8G("ngIf",!o.document)}}function zr(r,a){if(1&r&&(t.j41(0,"div",96)(1,"h5"),t.EFF(2,"Replies"),t.k0s(),t.j41(3,"div",20)(4,"table",21)(5,"thead")(6,"tr")(7,"th"),t.EFF(8,"Sr. No."),t.k0s(),t.j41(9,"th"),t.EFF(10,"Reply Date"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Reply By"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Reply Messages"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Document"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,Wr,13,9,"tr",24),t.k0s()()(),t.j41(19,"div",27),t.EFF(20),t.k0s()()),2&r){const o=t.XpG(3);t.R7$(18),t.Y8G("ngForOf",o.selectedCommunication.replies)("ngForTrackBy",o.trackByReplyId),t.R7$(2),t.Lme(" Showing 1 to ",o.selectedCommunication.replies.length," of ",o.selectedCommunication.replies.length," entries ")}}function Kr(r,a){1&r&&t.nrm(0,"span",80)}function Xr(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",51)(1,"div",86)(2,"div",87)(3,"strong"),t.EFF(4,"Subject:"),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"div",87)(7,"strong"),t.EFF(8,"Message:"),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"div",87)(11,"strong"),t.EFF(12,"Battalions:"),t.k0s(),t.DNE(13,Gr,2,1,"span",25)(14,Vr,2,1,"span",25),t.k0s(),t.j41(15,"div",87)(16,"strong"),t.EFF(17,"Created Date:"),t.k0s(),t.EFF(18),t.nI1(19,"date"),t.k0s()(),t.DNE(20,zr,21,4,"div",88),t.j41(21,"div",89)(22,"h5"),t.EFF(23,"Send Reply"),t.k0s(),t.j41(24,"div",53)(25,"label",90),t.EFF(26,"Message:"),t.k0s(),t.j41(27,"textarea",91),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG(2);return t.DH7(i.replyMessage,n)||(i.replyMessage=n),s.Njj(n)}),t.k0s()(),t.j41(28,"div",53)(29,"label",92),t.EFF(30,"Attachments:"),t.k0s(),t.j41(31,"input",93),t.bIt("change",function(n){s.eBV(o);const i=t.XpG(2);return s.Njj(i.onFileChange(n))}),t.k0s()(),t.j41(32,"div",94)(33,"button",95),t.bIt("click",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.sendReply())}),t.DNE(34,Kr,1,0,"span",71),t.EFF(35," Send "),t.k0s()()()()}if(2&r){const o=t.XpG(2);t.R7$(5),t.SpI(" ",o.selectedCommunication.subject," "),t.R7$(4),t.SpI(" ",o.selectedCommunication.message," "),t.R7$(4),t.Y8G("ngIf",o.selectedCommunication.selectedBattalions&&o.selectedCommunication.selectedBattalions.length>1),t.R7$(),t.Y8G("ngIf",!o.selectedCommunication.selectedBattalions||o.selectedCommunication.selectedBattalions.length<=1),t.R7$(4),t.SpI(" ",t.i5U(19,9,o.selectedCommunication.createdDate,"dd/MM/yyyy")," "),t.R7$(2),t.Y8G("ngIf",o.selectedCommunication.replies&&o.selectedCommunication.replies.length>0),t.R7$(7),t.R50("ngModel",o.replyMessage),t.R7$(6),t.Y8G("disabled",!o.replyMessage.trim()||o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading)}}function Qr(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",45),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeDetailView())}),t.j41(1,"div",81),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",47)(3,"div",48)(4,"div",82)(5,"button",83),t.EFF(6,"Show Status"),t.k0s(),t.j41(7,"button",84),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeDetailView())}),t.EFF(8,"Back"),t.k0s()()(),t.DNE(9,Xr,36,12,"div",85),t.k0s()()()}if(2&r){const o=t.XpG();t.R7$(9),t.Y8G("ngIf",o.selectedCommunication)}}let Hr=(()=>{var r;class a{constructor(e,n,i,c){this.apiService=e,this.authService=n,this.webSocketService=i,this.router=c,this.communications=[],this.filteredCommunications=[],this.paginatedCommunications=[],this.battalions=[],this.currentUser=null,this.selectedCommunication=null,this.showModal=!1,this.showDetailView=!1,this.showStatusView=!1,this.currentCommunication=this.createEmptyCommunication(),this.isEditMode=!1,this.isLoading=!1,this.replyMessage="",this.replyAttachments=[],this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.selectedBattalionIds=[],this.allBattalionsSelected=!1,this.isBattalionDropdownOpen=!1,this.isConnected=!1,this.typingUsers={},this.subscriptions=new mt.yU,this.Math=Math}ngOnInit(){this.loadCurrentUser(),this.loadBattalions(),this.loadCommunications(),this.initializeWebSocketListeners()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.webSocketService.disconnect()}initializeWebSocketListeners(){this.isConnected=this.webSocketService.getConnectionStatus(),this.subscriptions.add(this.webSocketService.onNewMessage().subscribe(e=>{this.handleIncomingMessage(e)})),this.subscriptions.add(this.webSocketService.onCommunicationUpdate().subscribe(e=>{this.handleCommunicationUpdate(e)})),this.subscriptions.add(this.webSocketService.onMessageStatusUpdate().subscribe(e=>{this.handleMessageStatusUpdate(e)})),this.subscriptions.add(this.webSocketService.onNewCommunication().subscribe(e=>{this.handleNewCommunication(e)})),this.subscriptions.add(this.webSocketService.onUserTyping().subscribe(e=>{this.handleUserTyping(e)}))}handleIncomingMessage(e){console.log("\u{1f4e8} New real-time message received:",e);const n=this.communications.find(i=>i.id===e.communicationId);if(n){n.replies||(n.replies=[]);const i={id:e.replyId||Date.now(),replyDate:new Date(e.timestamp),replyBy:e.fromUserName||"Unknown User",replyMessage:e.message,message:e.message,userId:e.fromUser,battalionId:e.battalionId,fromUserName:e.fromUserName,read:!1};n.replies.push(i),n.unreadCount=(n.unreadCount||0)+1,this.selectedCommunication&&this.selectedCommunication.id===e.communicationId&&(this.selectedCommunication.replies=[...n.replies],this.selectedCommunication.unreadCount=n.unreadCount,this.markMessageAsRead(i)),this.showNotification(`New reply from ${e.fromUserName} in ${this.getBattalionName(e.battalionId)}`),this.applyFilters()}}handleCommunicationUpdate(e){console.log("\u{1f504} Communication update:",e),"NEW_REPLY"===e.type&&(this.loadCommunications(),(!this.selectedCommunication||this.selectedCommunication.id!==e.communicationId)&&this.showNotification(`New reply received from ${e.fromUserName}`))}handleMessageStatusUpdate(e){console.log("\u{1f440} Message status update:",e);const n=this.communications.find(i=>i.id===e.communicationId);if(n&&n.replies){const i=n.replies.find(c=>c.id===e.messageId);i&&(i.read=!0)}}handleNewCommunication(e){console.log("\u{1f4e2} New communication:",e),this.loadCommunications(),this.showNotification(`New communication: ${e.subject}`)}handleUserTyping(e){this.typingUsers[e.communicationId]||(this.typingUsers[e.communicationId]=[]),e.isTyping?this.typingUsers[e.communicationId].includes(e.userName)||this.typingUsers[e.communicationId].push(e.userName):this.typingUsers[e.communicationId]=this.typingUsers[e.communicationId].filter(n=>n!==e.userName)}getTypingText(e){const n=this.typingUsers[e];return n&&0!==n.length?1===n.length?`${n[0]} is typing...`:2===n.length?`${n[0]} and ${n[1]} are typing...`:`${n[0]} and ${n.length-1} others are typing...`:""}showNotification(e){console.log("\u{1f4ac} Notification:",e),"Notification"in window&&"granted"===Notification.permission&&new Notification("New Message",{body:e,icon:"/assets/notification-icon.png"})}loadCurrentUser(){this.currentUser=this.authService.getCurrentUser(),this.currentUser||this.subscriptions.add(this.authService.user$.subscribe(e=>{this.currentUser=e}))}loadBattalions(){this.subscriptions.add(this.apiService.getActiveBattalions().subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.battalions=e.data.map(n=>({id:n.id,name:n.battalionName,battalionName:n.battalionName,selected:!1})))},error:e=>{console.error("Error loading battalions:",e)}}))}getMultipleBattalionNames(e){return this.battalions.filter(i=>e.includes(i.id)).map(i=>i.name).join(", ")}getBattalionNames(e){return this.battalions.filter(n=>e.includes(n.id)).map(n=>n.name)}getBattalionDisplay(e){return e.selectedBattalionNames&&e.selectedBattalionNames.length>0?e.selectedBattalionNames.join(", "):e.selectedBattalions&&e.selectedBattalions.length>1?this.getMultipleBattalionNames(e.selectedBattalions):this.getBattalionName(e.selectedBattalions?.[0]||e.battalionId)}getBattalionName(e){if(!e)return"Unknown Battalion";const n=this.battalions.find(i=>i.id===e);return n?n.name:"Unknown Battalion"}getStatusBadgeClass(e){return e.unreadCount&&e.unreadCount>0?"status-unread":e.active?"status-active":"status-inactive"}getStatusText(e){return e.unreadCount&&e.unreadCount>0?`Unread (${e.unreadCount})`:e.active?"Active":"Inactive"}toggleBattalionDropdown(){this.isBattalionDropdownOpen=!this.isBattalionDropdownOpen}toggleBattalionSelection(e){const n=this.battalions.find(i=>i.id===e);n&&(n.selected=!n.selected,this.selectedBattalionIds=this.battalions.filter(i=>i.selected).map(i=>i.id),this.updateSelectAllState(),this.isEditMode&&this.currentCommunication&&(this.currentCommunication.selectedBattalions=[...this.selectedBattalionIds],this.currentCommunication.selectedBattalionNames=this.getBattalionNames(this.selectedBattalionIds)))}toggleSelectAll(){this.allBattalionsSelected=!this.allBattalionsSelected,this.battalions.forEach(e=>{e.selected=this.allBattalionsSelected}),this.selectedBattalionIds=this.allBattalionsSelected?this.battalions.map(e=>e.id):[],this.isEditMode&&this.currentCommunication&&(this.currentCommunication.selectedBattalions=[...this.selectedBattalionIds],this.currentCommunication.selectedBattalionNames=this.getBattalionNames(this.selectedBattalionIds))}updateSelectAllState(){this.allBattalionsSelected=this.battalions.length>0&&this.battalions.every(e=>e.selected)}getSelectedBattalionNames(){return this.allBattalionsSelected||this.selectedBattalionIds.length===this.battalions.length?"All Battalions":0===this.selectedBattalionIds.length?"Select battalions...":this.battalions.filter(n=>this.selectedBattalionIds.includes(n.id)).map(n=>n.name).join(", ")}loadCommunications(){this.isLoading=!0,this.subscriptions.add(this.apiService.getCommunications(this.currentPage,this.itemsPerPage,this.searchTerm).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&e.data?(this.communications=this.transformCommunications(e.data),this.applyFilters(),e.pagination?(this.totalItems=e.pagination.total,this.totalPages=e.pagination.totalPages):(this.totalItems=this.communications.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage))):this.loadMockCommunications()},error:e=>{this.isLoading=!1,console.error("Error loading communications:",e),this.loadMockCommunications()}}))}transformCommunications(e){return e.map(n=>({id:n.id,createdDate:new Date(n.createdDate||n.created_date||n.createdAt),subject:n.name||n.subject,battalionId:n.battalionId,battalionName:n.battalionName||this.getBattalionName(n.battalionId),message:n.message,document:n.document,active:void 0===n.active||n.active,replies:n.messages?this.transformReplies(n.messages):n.replies||[],name:n.name,createdBy:n.createdBy,selectedBattalions:n.selectedBattalions||[n.battalionId],selectedBattalionNames:n.selectedBattalionNames||this.getBattalionNames(n.selectedBattalions||[n.battalionId]),unreadCount:n.unreadCount||0,status:n.status||"active"}))}transformReplies(e){return e.map(n=>({id:n.id,replyDate:new Date(n.createdAt||n.replyDate),replyBy:n.user?`${n.user.firstName} ${n.user.lastName}`:"Unknown User",replyMessage:n.message,message:n.message,document:n.attachments&&n.attachments.length>0?"attached":void 0,userId:n.userId,battalionId:n.battalionId,fromUserName:n.fromUserName||(n.user?`${n.user.firstName} ${n.user.lastName}`:"Unknown User"),read:n.read||!1}))}loadMockCommunications(){this.communications=[{id:1,createdDate:new Date("2024-01-15"),subject:"Training Schedule Update",battalionId:1,battalionName:"Alpha Battalion",message:"Updated training schedule for next month...",active:!0,selectedBattalions:[1],selectedBattalionNames:["Alpha Battalion"],unreadCount:2,status:"active"},{id:2,createdDate:new Date("2024-01-10"),subject:"Equipment Maintenance",battalionId:2,battalionName:"Bravo Battalion",message:"Quarterly equipment maintenance notice...",active:!0,selectedBattalions:[2,3],selectedBattalionNames:["Bravo Battalion","Charlie Battalion"],unreadCount:0,status:"active"}],this.applyFilters()}createEmptyCommunication(){return{id:0,createdDate:new Date,subject:"",battalionId:0,message:"",document:"",active:!0,name:"",createdBy:this.currentUser?.id,selectedBattalions:[],selectedBattalionNames:[],unreadCount:0,status:"active"}}onSearch(){this.currentPage=1,this.loadCommunications()}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadCommunications()}applyFilters(){if(this.searchTerm.trim()){const e=this.searchTerm.toLowerCase().trim();this.filteredCommunications=this.communications.filter(n=>n.subject.toLowerCase().includes(e)||n.battalionName&&n.battalionName.toLowerCase().includes(e)||n.message.toLowerCase().includes(e))}else this.filteredCommunications=[...this.communications];this.updatePaginatedData()}updatePaginatedData(){this.totalItems=this.filteredCommunications.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage);const e=(this.currentPage-1)*this.itemsPerPage,n=Math.min(e+this.itemsPerPage,this.totalItems);this.paginatedCommunications=this.filteredCommunications.slice(e,n)}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.updatePaginatedData())}getVisiblePages(){const e=[];let i=Math.max(1,this.currentPage-Math.floor(2.5)),c=Math.min(this.totalPages,i+5-1);c-i+1<5&&(i=Math.max(1,c-5+1));for(let l=i;l<=c;l++)e.push(l);return e}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.filteredCommunications.sort((n,i)=>{let c=n[e],l=i[e];return c instanceof Date&&l instanceof Date&&(c=c.getTime(),l=l.getTime()),null==c&&(c=""),null==l&&(l=""),"string"==typeof c&&(c=c.toLowerCase(),l=l.toLowerCase()),c<l?"asc"===this.sortDirection?-1:1:c>l?"asc"===this.sortDirection?1:-1:0}),this.updatePaginatedData()}showAddCommunicationModal(){this.isEditMode=!1,this.currentCommunication=this.createEmptyCommunication(),this.showModal=!0,this.isBattalionDropdownOpen=!1}closeModal(){this.showModal=!1,this.currentCommunication=this.createEmptyCommunication(),this.isEditMode=!1,this.battalions.forEach(e=>e.selected=!1),this.selectedBattalionIds=[],this.allBattalionsSelected=!1,this.isBattalionDropdownOpen=!1}editCommunication(e){this.isEditMode=!0,this.currentCommunication={...e},e.selectedBattalions&&e.selectedBattalions.length>0&&(this.selectedBattalionIds=[...e.selectedBattalions],this.battalions.forEach(n=>{n.selected=this.selectedBattalionIds.includes(n.id)}),this.updateSelectAllState()),this.showModal=!0,this.isBattalionDropdownOpen=!1}showCommunicationStatus(e){this.selectedCommunication=e,this.showStatusView=!0}closeStatusView(){this.showStatusView=!1,this.selectedCommunication=null}toggleCommunicationStatus(e){this.subscriptions.add(this.apiService.updateCommunication(e.id,{active:!e.active,updatedBy:this.currentUser?.id}).subscribe({next:i=>{if("SUCCESS"===i.status){const c=this.communications.findIndex(l=>l.id===e.id);-1!==c&&(this.communications[c].active=!e.active),this.applyFilters()}},error:i=>{console.error("Error toggling communication status:",i);const c=this.communications.findIndex(l=>l.id===e.id);-1!==c&&(this.communications[c].active=!e.active,this.applyFilters())}}))}addCommunication(){if(!this.currentCommunication.subject||!this.currentCommunication.message||0===this.selectedBattalionIds.length)return void alert("Please fill all required fields");this.isLoading=!0;const e=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],n=this.getBattalionNames(e);this.subscriptions.add(this.apiService.createCommunication({name:this.currentCommunication.subject,subject:this.currentCommunication.subject,message:this.currentCommunication.message,battalionId:e[0],selectedBattalions:e,selectedBattalionNames:n,userIds:e,active:this.currentCommunication.active,createdBy:this.currentUser?.id}).subscribe({next:c=>{if(this.isLoading=!1,"SUCCESS"===c.status&&c.data){const l=this.transformCommunications([c.data])[0];this.communications.unshift(l),this.applyFilters(),this.closeModal(),e.forEach(p=>{this.webSocketService.notifyBattalion(p.toString(),"new_communication",{communicationId:l.id,subject:l.subject,message:"New communication created",fromUserName:this.currentUser?.firstName+" "+this.currentUser?.lastName})})}else this.handleApiError("Failed to create communication")},error:c=>{this.isLoading=!1,console.error("Error creating communication:",c),this.handleApiError("Error creating communication. Please try again."),this.addCommunicationLocally()}}))}addCommunicationLocally(){const e=this.getNextId(),n=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],i=this.getBattalionNames(n);this.currentCommunication.id=e,this.currentCommunication.active=this.currentCommunication.active||!1,this.currentCommunication.battalionName=this.getBattalionName(n[0]),this.currentCommunication.selectedBattalions=n,this.currentCommunication.selectedBattalionNames=i,this.communications.unshift({...this.currentCommunication}),this.applyFilters(),this.isLoading=!1,this.closeModal()}updateCommunication(){if(!this.currentCommunication.subject||!this.currentCommunication.message||0===this.selectedBattalionIds.length)return void alert("Please fill all required fields");this.isLoading=!0;const e=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],n=this.getBattalionNames(e);this.subscriptions.add(this.apiService.updateCommunication(this.currentCommunication.id,{name:this.currentCommunication.subject,subject:this.currentCommunication.subject,message:this.currentCommunication.message,battalionId:e[0],selectedBattalions:e,selectedBattalionNames:n,userIds:e,active:this.currentCommunication.active,updatedBy:this.currentUser?.id}).subscribe({next:c=>{if(this.isLoading=!1,"SUCCESS"===c.status&&c.data){const l=this.transformCommunications([c.data])[0],p=this.communications.findIndex(C=>C.id===this.currentCommunication.id);-1!==p&&(this.communications[p]=l),this.applyFilters(),this.closeModal()}else this.handleApiError("Failed to update communication")},error:c=>{this.isLoading=!1,console.error("Error updating communication:",c),this.handleApiError("Error updating communication. Please try again."),this.updateCommunicationLocally()}}))}updateCommunicationLocally(){const e=this.communications.findIndex(n=>n.id===this.currentCommunication.id);if(-1!==e){const n=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],i=this.getBattalionNames(n);this.communications[e]={...this.currentCommunication},this.communications[e].battalionName=this.getBattalionName(this.currentCommunication.battalionId),this.communications[e].selectedBattalions=n,this.communications[e].selectedBattalionNames=i}this.applyFilters(),this.isLoading=!1,this.closeModal()}getNextId(){return this.communications.length>0?Math.max(...this.communications.map(e=>e.id))+1:1}viewCommunicationDetails(e){this.isLoading=!0,this.subscriptions.add(this.apiService.getCommunicationById(e.id).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&n.data?(this.selectedCommunication=this.transformCommunications([n.data])[0],this.showDetailView=!0,this.markAllRepliesAsRead(this.selectedCommunication)):(this.selectedCommunication=e,this.showDetailView=!0,this.markAllRepliesAsRead(this.selectedCommunication))},error:n=>{this.isLoading=!1,console.error("Error loading communication details:",n),this.selectedCommunication=e,this.showDetailView=!0,this.markAllRepliesAsRead(this.selectedCommunication)}}))}closeDetailView(){this.showDetailView=!1,this.replyMessage="",this.replyAttachments=[],this.selectedCommunication&&this.webSocketService.stopTyping({communicationId:this.selectedCommunication.id,battalionId:this.currentUser.battalionId}),this.selectedCommunication=null}onFileChange(e){this.replyAttachments=Array.from(e.target.files)}sendReply(){this.replyMessage.trim()&&this.selectedCommunication?(this.isLoading=!0,this.webSocketService.sendMessage({communicationId:this.selectedCommunication.id,message:this.replyMessage,battalionId:this.currentUser.battalionId}),this.subscriptions.add(this.apiService.sendReply(this.selectedCommunication.id,{message:this.replyMessage,battalionId:this.currentUser.battalionId,userIds:[]}).subscribe({next:i=>{this.isLoading=!1,"SUCCESS"===i.status&&i.data?(this.addReplyLocally(i.data),this.replyMessage="",this.webSocketService.stopTyping({communicationId:this.selectedCommunication.id,battalionId:this.currentUser.battalionId})):this.handleApiError("Failed to send reply")},error:i=>{this.isLoading=!1,console.error("Error sending reply:",i),this.handleApiError("Error sending reply. Please try again."),this.addReplyLocally()}}))):alert("Please enter a reply message")}onReplyInputChange(){this.selectedCommunication&&this.webSocketService.startTyping({communicationId:this.selectedCommunication.id,battalionId:this.currentUser.battalionId})}markMessageAsRead(e){!e.read&&this.selectedCommunication&&(e.read=!0,this.selectedCommunication.unreadCount&&this.selectedCommunication.unreadCount>0&&this.selectedCommunication.unreadCount--,this.webSocketService.markAsRead({communicationId:this.selectedCommunication.id,messageId:e.id}))}markAllRepliesAsRead(e){e.replies&&(e.replies.forEach(n=>{n.read||(n.read=!0,this.markMessageAsRead(n))}),e.unreadCount=0)}addReplyLocally(e){if(!this.selectedCommunication)return;const n={id:e?.id||this.getNextReplyId(),replyDate:new Date,replyBy:`${this.currentUser?.firstName||"Current"} ${this.currentUser?.lastName||"User"}`,replyMessage:this.replyMessage,message:this.replyMessage,document:this.replyAttachments.length>0?"attached":void 0,userId:this.currentUser?.id,battalionId:this.currentUser?.battalionId,fromUserName:`${this.currentUser?.firstName||"Current"} ${this.currentUser?.lastName||"User"}`,read:!0};this.selectedCommunication.replies||(this.selectedCommunication.replies=[]),this.selectedCommunication.replies.push(n);const i=this.communications.findIndex(c=>c.id===this.selectedCommunication.id);-1!==i&&(this.communications[i]={...this.selectedCommunication}),this.replyMessage="",this.replyAttachments=[],this.isLoading=!1}getNextReplyId(){let e=0;return this.communications.forEach(n=>{n.replies&&n.replies.forEach(i=>{i.id>e&&(e=i.id)})}),e+1}handleApiError(e){alert(e)}trackByCommunicationId(e,n){return n.id}trackByReplyId(e,n){return n.id}trackByBattalionId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G),t.rXU(E.u),t.rXU(Fr),t.rXU(f.Ix))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-communications"]],standalone:!1,decls:74,vars:28,consts:[["communicationForm","ngForm"],["subject","ngModel"],["message","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search communications...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","multiple-battalions",3,"title",4,"ngIf"],[1,"message-cell",3,"title"],["class","document-link",4,"ngIf"],["class","no-document",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"view-btn",3,"click"],[1,"edit-btn",3,"click"],[1,"multiple-battalions",3,"title"],[1,"document-link"],[1,"no-document"],["colspan","8",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],[1,"required"],[1,"dropdown-trigger",3,"click"],[1,"dropdown-display"],[1,"selected-text"],[1,"dropdown-arrow"],["class","dropdown-content",4,"ngIf"],["class","error-message",4,"ngIf"],["for","subject",1,"required"],["type","text","id","subject","name","subject","required","","placeholder","Enter subject",1,"form-control",3,"ngModelChange","ngModel"],["for","message",1,"required"],["id","message","name","message","required","","rows","4","placeholder","Enter your message",1,"form-control",3,"ngModelChange","ngModel"],["for","attachments"],["type","file","id","attachments","name","attachments","multiple","","accept",".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt",1,"form-control"],[1,"form-text","text-muted"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"dropdown-content"],[1,"dropdown-item","select-all-item"],[1,"checkbox-label"],["type","checkbox",1,"mr-2",3,"change","checked"],[1,"dropdown-divider"],["class","dropdown-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"dropdown-item"],[1,"error-message"],[1,"spinner"],[1,"modal-dialog","detail-modal",3,"click"],[1,"detail-header"],[1,"status-btn"],[1,"back-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"communication-details"],[1,"detail-row"],["class","replies-section",4,"ngIf"],[1,"send-reply-section"],["for","replyMessage"],["id","replyMessage","rows","4","placeholder","Enter your reply message",1,"form-control",3,"ngModelChange","ngModel"],["for","replyAttachments"],["type","file","id","replyAttachments","multiple","",1,"form-control",3,"change"],[1,"reply-actions"],[1,"send-btn",3,"click","disabled"],[1,"replies-section"],["class","document-icon",4,"ngIf"],[1,"document-icon"]],template:function(n,i){1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f4ac}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Communications"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return i.showAddCommunicationModal()}),t.EFF(8,"Add Communication"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",20)(31,"table",21)(32,"thead")(33,"tr")(34,"th",22),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(35," Serial No. "),t.j41(36,"span",23),t.EFF(37),t.k0s()(),t.j41(38,"th",22),t.bIt("click",function(){return i.sortTable("createdDate")}),t.EFF(39," Sending Date "),t.j41(40,"span",23),t.EFF(41),t.k0s()(),t.j41(42,"th",22),t.bIt("click",function(){return i.sortTable("subject")}),t.EFF(43," Subject "),t.j41(44,"span",23),t.EFF(45),t.k0s()(),t.j41(46,"th",22),t.bIt("click",function(){return i.sortTable("battalionName")}),t.EFF(47," Battalion "),t.j41(48,"span",23),t.EFF(49),t.k0s()(),t.j41(50,"th"),t.EFF(51,"Message"),t.k0s(),t.j41(52,"th"),t.EFF(53,"Document"),t.k0s(),t.j41(54,"th",22),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(55," Active "),t.j41(56,"span",23),t.EFF(57),t.k0s()(),t.j41(58,"th"),t.EFF(59,"Actions"),t.k0s()()(),t.j41(60,"tbody"),t.DNE(61,Ir,26,17,"tr",24)(62,jr,3,0,"tr",25),t.k0s()()(),t.j41(63,"div",26)(64,"div",27),t.EFF(65),t.k0s(),t.j41(66,"div",28)(67,"button",29),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(68," Previous "),t.k0s(),t.DNE(69,yr,2,3,"button",30),t.j41(70,"button",29),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(71," Next "),t.k0s()()()(),t.DNE(72,Lr,47,12,"div",31)(73,Qr,10,1,"div",31)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(7),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","createdDate"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","subject"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","battalionName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(7),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedCommunications)("ngForTrackBy",i.trackByCommunicationId),t.R7$(),t.Y8G("ngIf",0===i.paginatedCommunications.length),t.R7$(3),t.E5c(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.totalItems)," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages),t.R7$(2),t.Y8G("ngIf",i.showModal),t.R7$(),t.Y8G("ngIf",i.showDetailView))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV,m.vh],styles:['.table-panel[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 6px #0000001a;margin-top:15px}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table[_ngcontent-%COMP%]{margin-bottom:0;min-width:800px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;text-align:center;padding:12px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;vertical-align:middle}@media (max-width: 768px){.table-panel[_ngcontent-%COMP%]{padding:10px;margin:0 -10px;border-radius:0}.table[_ngcontent-%COMP%]{min-width:600px;font-size:14px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}}@media (max-width: 576px){.table[_ngcontent-%COMP%]{min-width:500px;font-size:12px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1050;left:0;top:0;width:100%;height:100%;overflow:auto;background:#0009;padding:10px}.modal-dialog[_ngcontent-%COMP%]{margin:40px auto;max-width:800px}.modal-content[_ngcontent-%COMP%]{border-radius:12 px;max-width:120vw;margin:10px auto;background:#fff;box-shadow:0 10px 30px #0000004d}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100%;background:#0009;overflow-y:auto;padding:20px}.modal-dialog[_ngcontent-%COMP%]{margin:60px auto;max-width:700px}.modal-content[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;background:#fff}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{font-weight:600;color:#fff;margin:0;font-size:20px;text-shadow:0 1px 2px rgba(0,0,0,.1)}.btn-close[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.form-group[_ngcontent-%COMP%]{padding:20px}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border-radius:6px}textarea.form-control[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.modal-footer[_ngcontent-%COMP%]{padding:12px 20px;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:10px}.btn[_ngcontent-%COMP%]{border-radius:6px;min-width:90px}#fileList[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.85rem;padding:6px 10px;border-radius:6px}.detail-modal[_ngcontent-%COMP%]{max-width:1000px;width:95%}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.status-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px}.status-btn[_ngcontent-%COMP%]:hover, .back-btn[_ngcontent-%COMP%]:hover{background:#138496}.communication-details[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px}.detail-row[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.5}.detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;margin-right:8px}.replies-section[_ngcontent-%COMP%]{margin:20px 0}.send-reply-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-top:20px}.send-reply-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:15px;color:#333;font-weight:600}.reply-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:15px}.send-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;min-width:80px;display:flex;align-items:center;justify-content:center;gap:5px}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.send-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.view-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;margin-right:5px}.view-btn[_ngcontent-%COMP%]:hover{background:#218838}.document-icon[_ngcontent-%COMP%]{color:#007bff;font-size:16px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dropdown-trigger[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:8px 12px;background:#fff;cursor:pointer;margin-bottom:10px;position:relative}.dropdown-trigger[_ngcontent-%COMP%]:hover{border-color:#aaa}.dropdown-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.selected-text[_ngcontent-%COMP%]{color:#333;font-size:14px;flex:1}.dropdown-arrow[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-left:8px}.dropdown-content[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #ddd;border-radius:4px;padding:20px;max-height:200px;overflow-y:auto;z-index:1000;width:100%;box-shadow:0 2px 8px #0000001a;margin-top:2px;left:0}.dropdown-item[_ngcontent-%COMP%]{padding:8px 20px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.select-all-item[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:2px solid #ddd;font-weight:600}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#ddd;margin:4px 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;margin:0;width:100%;font-size:14px}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px}.form-group[_ngcontent-%COMP%]{position:relative}.multiple-battalions[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 6px;border-radius:12px;font-size:12px;cursor:help}.required[_ngcontent-%COMP%]:after{content:" *";color:#dc3545}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}.edit-btn[_ngcontent-%COMP%]{background:#ffc107;color:#212529;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px}.edit-btn[_ngcontent-%COMP%]:hover{background:#e0a800}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.document-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer}.no-document[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}.message-cell[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.no-data[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:20px!important}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.save-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;min-width:80px;display:flex;align-items:center;justify-content:center;gap:5px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.cancel-btn[_ngcontent-%COMP%]:hover{background:#545b62}']}))}return r(),a})();var $t=u(1155);function Jr(r,a){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"strong"),t.EFF(9),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.k0s(),t.j41(16,"td"),t.EFF(17),t.k0s(),t.j41(18,"td"),t.EFF(19),t.k0s(),t.j41(20,"td")(21,"span",31),t.EFF(22),t.k0s()(),t.j41(23,"td")(24,"div",32)(25,"button",33),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.editDistrict(n))}),t.EFF(26,"Edit"),t.k0s(),t.j41(27,"button",34),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.toggleDistrictStatus(n))}),t.EFF(28),t.k0s()()()()}if(2&r){const o=a.$implicit,e=t.XpG();t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(e.getRangeName(o.rangeId)),t.R7$(2),t.JRh(e.getDistrictName(o.districtId)),t.R7$(3),t.JRh(o.battalionName),t.R7$(2),t.JRh(o.battalionArea),t.R7$(2),t.JRh(o.battalionHead),t.R7$(2),t.JRh(o.battalionMobileNo),t.R7$(2),t.JRh(o.battalionContactNo),t.R7$(2),t.JRh(o.battalionEmail),t.R7$(2),t.AVh("active",o.active)("inactive",!o.active),t.R7$(),t.SpI(" ",o.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!o.active),t.R7$(),t.SpI(" ",o.active?"Deactivate":"Activate"," ")}}function Zr(r,a){1&r&&(t.j41(0,"tr")(1,"td",35),t.EFF(2,"No districts found"),t.k0s()())}function ta(r,a){if(1&r){const o=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){const n=s.eBV(o).$implicit,i=t.XpG();return s.Njj(i.goToPage(n))}),t.EFF(1),t.k0s()}if(2&r){const o=a.$implicit,e=t.XpG();t.AVh("active",o===e.currentPage),t.R7$(),t.SpI(" ",o," ")}}function ea(r,a){if(1&r&&(t.j41(0,"option",73),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.rangeName)}}function na(r,a){if(1&r&&(t.j41(0,"option",73),t.EFF(1),t.k0s()),2&r){const o=a.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(o.districtName)}}function oa(r,a){1&r&&t.nrm(0,"span",74)}function ia(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.isEditMode?n.updateDistrict():n.addDistrict())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"Zone "),t.j41(15,"span",47),t.EFF(16,"*"),t.k0s()(),t.j41(17,"select",48),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.rangeId,n)||(i.currentDistrict.rangeId=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.onRangeChange())}),t.j41(18,"option",49),t.EFF(19,"Select Zone"),t.k0s(),t.DNE(20,ea,2,2,"option",50),t.k0s()(),t.j41(21,"div",45)(22,"label",51),t.EFF(23,"District "),t.j41(24,"span",47),t.EFF(25,"*"),t.k0s()(),t.j41(26,"select",52),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.districtId,n)||(i.currentDistrict.districtId=n),s.Njj(n)}),t.j41(27,"option",49),t.EFF(28,"Select District"),t.k0s(),t.DNE(29,na,2,2,"option",50),t.k0s()(),t.j41(30,"div",45)(31,"label",53),t.EFF(32,"Battalion Name"),t.k0s(),t.j41(33,"input",54),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.battalionName,n)||(i.currentDistrict.battalionName=n),s.Njj(n)}),t.k0s()(),t.j41(34,"div",45)(35,"label",55),t.EFF(36,"Battalion Head"),t.k0s(),t.j41(37,"input",56),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.battalionHead,n)||(i.currentDistrict.battalionHead=n),s.Njj(n)}),t.k0s()(),t.j41(38,"div",45)(39,"label",57),t.EFF(40,"Battalion Mobile Number"),t.k0s(),t.j41(41,"input",58),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.battalionMobileNo,n)||(i.currentDistrict.battalionMobileNo=n),s.Njj(n)}),t.k0s()(),t.j41(42,"div",45)(43,"label",59),t.EFF(44,"Battalion Contact Number"),t.k0s(),t.j41(45,"input",60),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.battalionContactNo,n)||(i.currentDistrict.battalionContactNo=n),s.Njj(n)}),t.k0s()(),t.j41(46,"div",45)(47,"label",61),t.EFF(48,"Battalion User ID (Email)"),t.k0s(),t.j41(49,"input",62),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.battalionEmail,n)||(i.currentDistrict.battalionEmail=n),s.Njj(n)}),t.k0s()(),t.j41(50,"div",45)(51,"label",63),t.EFF(52,"Battalion Specialisation"),t.k0s(),t.j41(53,"input",64),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.battalionArea,n)||(i.currentDistrict.battalionArea=n),s.Njj(n)}),t.k0s()(),t.j41(54,"div",45)(55,"div",65)(56,"label",66)(57,"input",67),t.mxI("ngModelChange",function(n){s.eBV(o);const i=t.XpG();return t.DH7(i.currentDistrict.active,n)||(i.currentDistrict.active=n),s.Njj(n)}),t.k0s(),t.j41(58,"span",68),t.EFF(59,"Active"),t.k0s()()()(),t.j41(60,"div",69)(61,"button",70),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.closeModal())}),t.EFF(62," Close "),t.k0s(),t.j41(63,"button",71),t.DNE(64,oa,1,0,"span",72),t.EFF(65),t.k0s()()()()()()()}if(2&r){const o=t.sdS(11),e=t.XpG();t.R7$(5),t.JRh(e.isEditMode?"Edit Battalion":"Add Battalion"),t.R7$(12),t.R50("ngModel",e.currentDistrict.rangeId),t.R7$(3),t.Y8G("ngForOf",e.ranges),t.R7$(6),t.R50("ngModel",e.currentDistrict.districtId),t.R7$(3),t.Y8G("ngForOf",e.adminDistricts),t.R7$(4),t.R50("ngModel",e.currentDistrict.battalionName),t.R7$(4),t.R50("ngModel",e.currentDistrict.battalionHead),t.R7$(4),t.R50("ngModel",e.currentDistrict.battalionMobileNo),t.R7$(4),t.R50("ngModel",e.currentDistrict.battalionContactNo),t.R7$(4),t.R50("ngModel",e.currentDistrict.battalionEmail),t.R7$(4),t.R50("ngModel",e.currentDistrict.battalionArea),t.R7$(4),t.R50("ngModel",e.currentDistrict.active),t.R7$(6),t.Y8G("disabled",o.invalid||e.isLoading),t.R7$(),t.Y8G("ngIf",e.isLoading),t.R7$(),t.SpI(" ",e.isEditMode?"Update":"Save"," ")}}function aa(r,a){if(1&r&&(t.j41(0,"div",7)(1,"span",8)(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&r){const o=t.XpG();t.R7$(3),t.JRh(o.roleName),t.R7$(),t.SpI(" (ID: ",o.roleId,") ")}}function sa(r,a){1&r&&(t.j41(0,"div",9)(1,"p"),t.EFF(2,"No role selected. Please select a role from the roles page."),t.k0s()())}function ca(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",30)(1,"div",31)(2,"span",22),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5),t.k0s()(),t.j41(6,"div",33)(7,"label",34)(8,"input",35),t.mxI("ngModelChange",function(n){const i=s.eBV(o).$implicit;return t.DH7(i.permissions.selected,n)||(i.permissions.selected=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.onPermissionChange())}),t.k0s(),t.nrm(9,"span",36),t.k0s()()()}if(2&r){const o=a.$implicit;t.R7$(3),t.JRh(o.name),t.R7$(2),t.JRh(o.description),t.R7$(3),t.R50("ngModel",o.permissions.selected)}}function la(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",30)(1,"div",31)(2,"span",22),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5),t.k0s()(),t.j41(6,"div",33)(7,"label",34)(8,"input",35),t.mxI("ngModelChange",function(n){const i=s.eBV(o).$implicit;return t.DH7(i.permissions.selected,n)||(i.permissions.selected=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.onPermissionChange())}),t.k0s(),t.nrm(9,"span",36),t.k0s()()()}if(2&r){const o=a.$implicit;t.R7$(3),t.JRh(o.name),t.R7$(2),t.SpI("Parent: ",o.parentMenu),t.R7$(3),t.R50("ngModel",o.permissions.selected)}}function da(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",30)(1,"div",31)(2,"span",22),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5),t.k0s()(),t.j41(6,"div",33)(7,"label",34)(8,"input",35),t.mxI("ngModelChange",function(n){const i=s.eBV(o).$implicit;return t.DH7(i.permissions.selected,n)||(i.permissions.selected=n),s.Njj(n)}),t.bIt("change",function(){s.eBV(o);const n=t.XpG(2);return s.Njj(n.onPermissionChange())}),t.k0s(),t.nrm(9,"span",36),t.k0s()()()}if(2&r){const o=a.$implicit;t.R7$(3),t.JRh(o.path),t.R7$(2),t.Lme("",o.method," - ",o.description),t.R7$(3),t.R50("ngModel",o.permissions.selected)}}function ua(r,a){if(1&r){const o=t.RV6();t.j41(0,"div",10)(1,"div",11)(2,"button",12),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.selectAllPermissions())}),t.EFF(3,"Select All"),t.k0s(),t.j41(4,"button",13),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.deselectAllPermissions())}),t.EFF(5,"Deselect All"),t.k0s(),t.j41(6,"button",14),t.bIt("click",function(){s.eBV(o);const n=t.XpG();return s.Njj(n.savePermissions())}),t.EFF(7,"Save Permissions"),t.k0s()(),t.j41(8,"div",15)(9,"div",16)(10,"h3"),t.EFF(11,"\u{1f4cb} Menu Permissions"),t.k0s(),t.j41(12,"div",17)(13,"label",18)(14,"input",19),t.bIt("change",function(n){s.eBV(o);const i=t.XpG();return s.Njj(i.toggleAllMenus(n))}),t.k0s(),t.EFF(15," Select All Menus "),t.k0s()()(),t.j41(16,"div",20)(17,"div",21)(18,"div",22),t.EFF(19,"Menu Name"),t.k0s(),t.j41(20,"div",23)(21,"span"),t.EFF(22,"Select"),t.k0s()()(),t.DNE(23,ca,10,3,"div",24),t.k0s()(),t.j41(24,"div",15)(25,"div",16)(26,"h3"),t.EFF(27,"\u{1f4c2} Submenu Permissions"),t.k0s(),t.j41(28,"div",17)(29,"label",18)(30,"input",19),t.bIt("change",function(n){s.eBV(o);const i=t.XpG();return s.Njj(i.toggleAllSubmenus(n))}),t.k0s(),t.EFF(31," Select All Submenus "),t.k0s()()(),t.j41(32,"div",20)(33,"div",21)(34,"div",22),t.EFF(35,"Submenu Name"),t.k0s(),t.j41(36,"div",23)(37,"span"),t.EFF(38,"Select"),t.k0s()()(),t.DNE(39,la,10,3,"div",24),t.k0s()(),t.j41(40,"div",15)(41,"div",16)(42,"h3"),t.EFF(43,"\u{1f517} URL Permissions"),t.k0s(),t.j41(44,"div",17)(45,"label",18)(46,"input",19),t.bIt("change",function(n){s.eBV(o);const i=t.XpG();return s.Njj(i.toggleAllUrls(n))}),t.k0s(),t.EFF(47," Select All URLs "),t.k0s()()(),t.j41(48,"div",20)(49,"div",21)(50,"div",22),t.EFF(51,"URL Path"),t.k0s(),t.j41(52,"div",23)(53,"span"),t.EFF(54,"Select"),t.k0s()()(),t.DNE(55,da,10,4,"div",24),t.k0s()(),t.j41(56,"div",25)(57,"h4"),t.EFF(58,"Permission Summary"),t.k0s(),t.j41(59,"div",26)(60,"div",27)(61,"span",28),t.EFF(62),t.k0s(),t.j41(63,"span",29),t.EFF(64,"Total Permissions Selected"),t.k0s()(),t.j41(65,"div",27)(66,"span",28),t.EFF(67),t.k0s(),t.j41(68,"span",29),t.EFF(69,"Menu Permissions"),t.k0s()(),t.j41(70,"div",27)(71,"span",28),t.EFF(72),t.k0s(),t.j41(73,"span",29),t.EFF(74,"Submenu Permissions"),t.k0s()(),t.j41(75,"div",27)(76,"span",28),t.EFF(77),t.k0s(),t.j41(78,"span",29),t.EFF(79,"URL Permissions"),t.k0s()()()()()}if(2&r){const o=t.XpG();t.R7$(14),t.Y8G("checked",o.areAllMenusSelected()),t.R7$(9),t.Y8G("ngForOf",o.menus),t.R7$(7),t.Y8G("checked",o.areAllSubmenusSelected()),t.R7$(9),t.Y8G("ngForOf",o.submenus),t.R7$(7),t.Y8G("checked",o.areAllUrlsSelected()),t.R7$(9),t.Y8G("ngForOf",o.urls),t.R7$(7),t.JRh(o.getSelectedPermissionsCount()),t.R7$(5),t.JRh(o.getMenuPermissionsCount()),t.R7$(5),t.JRh(o.getSubmenuPermissionsCount()),t.R7$(5),t.JRh(o.getUrlPermissionsCount())}}const pa=[{path:"",component:pt,children:[{path:"",redirectTo:"homePage",pathMatch:"full"},{path:"homePage",component:gt},{path:"user",component:Ie},{path:"settings",component:Ct},{path:"profile",component:Mt},{path:"role",component:Ae},{path:"permissions",component:Ke},{path:"menus",component:rn},{path:"submenus",component:xn},{path:"state",component:yn},{path:"range",component:Yn},{path:"district",component:Jn},{path:"userManage",component:Zn},{path:"modules",component:ao},{path:"topics",component:Eo},{path:"subtopics",component:yo},{path:"questions",component:ii},{path:"report",component:Pt},{path:"communications",component:Hr},{path:"performance",component:$t.W},{path:"battalion",component:(()=>{var r;class a{constructor(e){this.apiService=e,this.ranges=[],this.adminDistricts=[],this.battalions=[],this.filteredBattalions=[],this.paginatedBattalions=[],this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.Math=Math}get paginatedDistricts(){return this.paginatedBattalions}get districtsForSelectedRange(){return this.currentDistrict&&null!=this.currentDistrict.rangeId?this.adminDistricts.filter(e=>e.rangeId===this.currentDistrict.rangeId):[]}onRangeChange(){this.currentDistrict.districtId=void 0}getRangeName(e){if(null==e)return"";const n=this.ranges.find(i=>i.id===e);return n?n.rangeName:""}getDistrictName(e){if(null==e)return"";const n=this.adminDistricts.find(i=>i.id===e);return n?n.districtName:""}ngOnInit(){this.loadData()}loadData(){this.loadRanges(),this.loadDistricts(),this.loadBattalions()}loadRanges(){this.apiService.GetRangeDropdown().subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.ranges=e.data)},error:e=>{console.error("Error loading ranges:",e),this.ranges=[]}})}loadDistricts(){this.apiService.getDistrictDropdown().subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.adminDistricts=e.data)},error:e=>{console.error("Error loading districts:",e),this.adminDistricts=[]}})}loadBattalions(){this.isLoading=!0,this.apiService.getBattalions(this.currentPage,this.itemsPerPage,"asc"===this.sortDirection?"ASC":"DESC").subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.battalions=e.data,e.pagination&&(this.currentPage=e.pagination.currentPage||this.currentPage,this.totalPages=e.pagination.totalPages||this.totalPages,this.totalItems=e.pagination.totalItems||this.totalItems,this.itemsPerPage=e.pagination.itemsPerPage||this.itemsPerPage),this.updateFilteredData()),this.isLoading=!1},error:e=>{console.error("Error loading battalions:",e),this.battalions=[],this.updateFilteredData(),this.isLoading=!1}})}createEmptyDistrict(){return{id:0,rangeId:void 0,districtId:void 0,battalionName:"",battalionHead:"",battalionMobileNo:"",battalionContactNo:"",battalionEmail:"",battalionArea:"",active:!0}}onSearch(){this.currentPage=1,this.updateFilteredData()}updateFilteredData(){if(this.searchTerm&&this.searchTerm.trim()){const e=this.searchTerm.toLowerCase();this.filteredBattalions=this.battalions.filter(n=>n.battalionName.toLowerCase().includes(e)||(n.range?.rangeName||"").toLowerCase().includes(e)||(n.battalionHead||"").toLowerCase().includes(e)||(n.battalionEmail||"").toLowerCase().includes(e)||(n.battalionArea||"").toLowerCase().includes(e)),this.paginatedBattalions=this.filteredBattalions}else this.filteredBattalions=this.battalions,this.paginatedBattalions=this.battalions}updatePaginatedData(){const e=(this.currentPage-1)*this.itemsPerPage;this.paginatedBattalions=this.filteredBattalions.slice(e,e+this.itemsPerPage)}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadBattalions()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.loadBattalions())}getVisiblePages(){const e=[];if(this.totalPages<=5)for(let i=1;i<=this.totalPages;i++)e.push(i);else{const i=Math.floor(2.5);let c=Math.max(1,this.currentPage-i),l=Math.min(this.totalPages,this.currentPage+i);this.currentPage<=i?l=5:this.currentPage>this.totalPages-i&&(c=this.totalPages-5+1),c>1&&(e.push(1),c>2&&e.push(-1));for(let p=c;p<=l;p++)e.push(p);l<this.totalPages&&(l<this.totalPages-1&&e.push(-1),e.push(this.totalPages))}return e}sortTable(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.filteredBattalions.sort((n,i)=>{let c=n[e],l=i[e];return null==c&&(c=""),null==l&&(l=""),"string"==typeof c&&(c=c.toLowerCase(),l=l.toLowerCase()),c<l?"asc"===this.sortDirection?-1:1:c>l?"asc"===this.sortDirection?1:-1:0}),this.updatePaginatedData(),this.loadBattalions()}showAddDistrictModal(){this.isEditMode=!1,this.currentDistrict=this.createEmptyDistrict(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1}editDistrict(e){this.isEditMode=!0,this.currentDistrict={...e},this.showModal=!0}toggleDistrictStatus(e){this.apiService.toggleBattalionStatus(e.id).subscribe({next:n=>{if("SUCCESS"===n.status&&n.data){const i=this.battalions.findIndex(c=>c.id===e.id);-1!==i&&(this.battalions[i]=n.data,this.updateFilteredData())}},error:n=>{console.error("Error toggling battalion status:",n),alert("Failed to toggle battalion status. Please try again.")}})}addDistrict(){this.isLoading=!0,this.apiService.createBattalion({rangeId:this.currentDistrict.rangeId,districtId:this.currentDistrict.districtId,battalionName:this.currentDistrict.battalionName,battalionHead:this.currentDistrict.battalionHead,battalionContactNo:this.currentDistrict.battalionContactNo,battalionMobileNo:this.currentDistrict.battalionMobileNo,battalionEmail:this.currentDistrict.battalionEmail,battalionArea:this.currentDistrict.battalionArea,active:this.currentDistrict.active}).subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.battalions.unshift(n.data),this.updateFilteredData(),this.closeModal()),this.isLoading=!1},error:n=>{console.error("Error creating battalion:",n),this.isLoading=!1,alert("Failed to create battalion. Please try again.")}})}updateDistrict(){this.isLoading=!0,this.apiService.updateBattalion(this.currentDistrict.id,{rangeId:this.currentDistrict.rangeId,districtId:this.currentDistrict.districtId,battalionName:this.currentDistrict.battalionName,battalionHead:this.currentDistrict.battalionHead,battalionContactNo:this.currentDistrict.battalionContactNo,battalionMobileNo:this.currentDistrict.battalionMobileNo,battalionEmail:this.currentDistrict.battalionEmail,battalionArea:this.currentDistrict.battalionArea,active:this.currentDistrict.active}).subscribe({next:n=>{if("SUCCESS"===n.status&&n.data){const i=this.battalions.findIndex(c=>c.id===this.currentDistrict.id);-1!==i&&(this.battalions[i]=n.data),this.updateFilteredData(),this.closeModal()}this.isLoading=!1},error:n=>{console.error("Error updating battalion:",n),this.isLoading=!1,alert("Failed to update battalion. Please try again.")}})}trackByDistrictId(e,n){return n.id}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-battalion"]],standalone:!1,decls:84,vars:33,consts:[["districtForm","ngForm"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search districts...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"table-wrapper"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","11",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-2"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","rangeSelect",1,"required"],[1,"required"],["id","rangeSelect","name","rangeId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","districtSelect"],["id","districtSelect","name","districtId","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","battalionName",1,"required"],["type","text","id","battalionName","name","battalionName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionHead",1,"required"],["type","text","id","battalionHead","name","battalionHead","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionMobileNo"],["type","tel","id","battalionMobileNo","name","battalionMobileNo",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionContactNo"],["type","tel","id","battalionContactNo","name","battalionContactNo",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionEmail"],["type","email","id","battalionEmail","name","battalionEmail",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionArea"],["type","text","id","battalionArea","name","battalionArea",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","districtActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[3,"value"],[1,"spinner"]],template:function(n,i){1&n&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.EFF(4,"\u{1f5fa}\ufe0f"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Battalions"),t.k0s()(),t.j41(7,"button",5),t.bIt("click",function(){return i.showAddDistrictModal()}),t.EFF(8,"Add Battalion"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"label",8),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",9),t.mxI("ngModelChange",function(l){return t.DH7(i.pageSize,l)||(i.pageSize=l),l}),t.bIt("change",function(){return i.onPageSizeChange()}),t.j41(14,"option",10),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",11),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",12),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",13),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",14),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",15)(27,"label",16),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",17),t.mxI("ngModelChange",function(l){return t.DH7(i.searchTerm,l)||(i.searchTerm=l),l}),t.bIt("input",function(){return i.onSearch()}),t.k0s()()(),t.j41(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead")(34,"tr")(35,"th",21),t.bIt("click",function(){return i.sortTable("id")}),t.EFF(36," ID "),t.j41(37,"span",22),t.EFF(38),t.k0s()(),t.j41(39,"th",21),t.bIt("click",function(){return i.sortTable("rangeName")}),t.EFF(40," Zone "),t.j41(41,"span",22),t.EFF(42),t.k0s()(),t.j41(43,"th",21),t.bIt("click",function(){return i.sortTable("districtName")}),t.EFF(44," District Name "),t.j41(45,"span",22),t.EFF(46),t.k0s()(),t.j41(47,"th",21),t.bIt("click",function(){return i.sortTable("battalionName")}),t.EFF(48," Battalion Name "),t.j41(49,"span",22),t.EFF(50),t.k0s()(),t.j41(51,"th",21),t.bIt("click",function(){return i.sortTable("area")}),t.EFF(52," Battalion Specialisation "),t.j41(53,"span",22),t.EFF(54),t.k0s()(),t.j41(55,"th",21),t.bIt("click",function(){return i.sortTable("districtHead")}),t.EFF(56," Battalion Head "),t.j41(57,"span",22),t.EFF(58),t.k0s()(),t.j41(59,"th"),t.EFF(60,"Mobile"),t.k0s(),t.j41(61,"th"),t.EFF(62,"Contact"),t.k0s(),t.j41(63,"th"),t.EFF(64,"Email"),t.k0s(),t.j41(65,"th",21),t.bIt("click",function(){return i.sortTable("active")}),t.EFF(66," Active "),t.j41(67,"span",22),t.EFF(68),t.k0s()(),t.j41(69,"th"),t.EFF(70,"Actions"),t.k0s()()(),t.j41(71,"tbody"),t.DNE(72,Jr,29,17,"tr",23)(73,Zr,3,0,"tr",24),t.k0s()()()(),t.j41(74,"div",25)(75,"div",26),t.EFF(76),t.k0s(),t.j41(77,"div",27)(78,"button",28),t.bIt("click",function(){return i.goToPage(i.currentPage-1)}),t.EFF(79," Previous "),t.k0s(),t.DNE(80,ta,2,3,"button",29),t.j41(81,"button",28),t.bIt("click",function(){return i.goToPage(i.currentPage+1)}),t.EFF(82," Next "),t.k0s()()()(),t.DNE(83,ia,66,15,"div",30)),2&n&&(t.R7$(13),t.R50("ngModel",i.pageSize),t.R7$(16),t.R50("ngModel",i.searchTerm),t.R7$(8),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","rangeName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","districtName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","battalionName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","area"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","districtHead"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(9),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedBattalions)("ngForTrackBy",i.trackByDistrictId),t.R7$(),t.Y8G("ngIf",0===i.paginatedDistricts.length),t.R7$(3),t.E5c(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.totalItems)," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages),t.R7$(2),t.Y8G("ngIf",i.showModal))},dependencies:[m.Sq,m.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".area-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background-color:#e3f2fd;border:1px solid #bbdefb;border-radius:4px;font-size:.875em;font-weight:500;color:#1976d2}.description-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.data-table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px;vertical-align:middle}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10){white-space:nowrap;text-align:center;vertical-align:middle;width:80px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(11), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(11){min-width:120px}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;object-fit:cover;border:2px solid #e0e0e0}.no-image[_ngcontent-%COMP%]{color:#9e9e9e;font-style:italic;font-size:.875em;padding:.875rem 1.75rem;border-radius:10px;color:#fff;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease}.header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px);box-shadow:0 6px 20px #fff3}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#00000073;padding:16px;z-index:9999}.modal-dialog[_ngcontent-%COMP%]{margin:0;max-width:640px;width:100%}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-height:90vh;overflow:auto;box-shadow:0 10px 30px #00000026}@media (max-width: 768px){.modal-dialog[_ngcontent-%COMP%]{max-width:560px}}@media (max-width: 420px){.modal-dialog[_ngcontent-%COMP%]{max-width:100%}.modal-content[_ngcontent-%COMP%]{padding:12px;border-radius:6px}}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 12px;line-height:1.2;vertical-align:middle;font-weight:700;text-align:left;background-color:#0a62c8;color:#fff;position:sticky;top:0;z-index:2}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort-icon[_ngcontent-%COMP%]{margin-left:8px;font-size:.95em}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.8rem;font-weight:700;color:#fff;background:#b0e5b8;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-badge.inactive[_ngcontent-%COMP%]{background:#f5bdbd}"]}))}return r(),a})()},{path:"role-permissions",component:(()=>{var r;class a{constructor(e,n){this.route=e,this.apiService=n,this.roleId=null,this.roleName="",this.menus=[],this.submenus=[],this.urls=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{e.roleId&&(this.roleId=+e.roleId,console.log("Role ID received:",this.roleId),this.loadRoleDetails(),this.loadPermissionsData())})}loadRoleDetails(){this.roleId&&this.apiService.getRoles(1,100).subscribe({next:e=>{const n=e.data?.find(i=>i.id===this.roleId);n&&(this.roleName=n.roleName,console.log("Role details loaded:",n))},error:e=>{console.error("Error loading role details:",e)}})}loadPermissionsData(){Promise.all([this.loadMenusAsync(),this.loadSubmenusAsync(),this.loadUrlsAsync()]).then(()=>{this.loadRolePermissions()})}loadMenusAsync(){return new Promise((e,n)=>{this.apiService.getActiveMenus().subscribe({next:i=>{console.log("Active menus response:",i),"SUCCESS"===i.status&&i.data?(this.menus=i.data.map(c=>({id:c.id,name:c.menuName,description:`${c.menuUrl} - Priority: ${c.priority}`,permissions:{selected:!1}})),console.log("Mapped menus:",this.menus)):(console.error("Invalid response format or no data received"),this.menus=[]),e()},error:i=>{console.error("Error loading menus:",i),this.menus=[],n(i)}})})}loadSubmenusAsync(){return new Promise((e,n)=>{this.apiService.getActiveSubMenus().subscribe({next:i=>{console.log("Active submenus response:",i),"SUCCESS"===i.status&&i.data?(this.submenus=i.data.map(c=>({id:c.id,name:c.menuName,description:`${c.menuUrl} - Priority: ${c.priority}`,parentMenu:c.parentMenu,permissions:{selected:!1}})),console.log("Mapped submenus:",this.submenus)):(console.error("Invalid response format or no data received"),this.submenus=[]),e()},error:i=>{console.error("Error loading submenus:",i),this.submenus=[],n(i)}})})}loadUrlsAsync(){return new Promise((e,n)=>{this.apiService.getActivePermissions().subscribe({next:i=>{console.log("Active permissions response:",i),"SUCCESS"===i.status&&i.data?(this.urls=i.data.map(c=>({id:c.id,path:`${c.permissionName} - ${c.permissionCode}`,method:c.permissionUrl,description:c.permissionName,permissions:{selected:!1}})),console.log("Mapped permissions:",this.urls)):(console.error("Invalid response format or no data received"),this.urls=[]),e()},error:i=>{console.error("Error loading permissions:",i),this.urls=[{id:1,path:"/api/auth/login",method:"POST",description:"User login",permissions:{selected:!1}},{id:2,path:"/api/roles",method:"GET",description:"View all roles",permissions:{selected:!1}},{id:3,path:"/api/users",method:"GET",description:"View all users",permissions:{selected:!1}}],n(i)}})})}loadRolePermissions(){this.roleId&&this.apiService.getRolePermissions(this.roleId).subscribe({next:e=>{console.log("Role permissions response:",e),e.success&&e.data&&(this.preselectMenuPermissions(e.data.menu),this.preselectSubmenuPermissions(e.data.SubMenu),this.preselectUrlPermissions(e.data.RolePermission),console.log("Role permissions applied successfully"))},error:e=>{console.error("Error loading role permissions:",e)}})}preselectMenuPermissions(e){this.menus.forEach(n=>{e.includes(n.id)&&(n.permissions.selected=!0)})}preselectSubmenuPermissions(e){this.submenus.forEach(n=>{e.includes(n.id)&&(n.permissions.selected=!0)})}preselectUrlPermissions(e){this.urls.forEach(n=>{e.includes(n.id)&&(n.permissions.selected=!0)})}selectAllPermissions(){this.setAllPermissions(!0)}deselectAllPermissions(){this.setAllPermissions(!1)}setAllPermissions(e){this.menus.forEach(n=>{n.permissions.selected=e}),this.submenus.forEach(n=>{n.permissions.selected=e}),this.urls.forEach(n=>{n.permissions.selected=e})}toggleAllMenus(e){const n=e.target.checked;this.menus.forEach(i=>{i.permissions.selected=n})}toggleAllSubmenus(e){const n=e.target.checked;this.submenus.forEach(i=>{i.permissions.selected=n})}toggleAllUrls(e){const n=e.target.checked;this.urls.forEach(i=>{i.permissions.selected=n})}areAllMenusSelected(){return this.menus.length>0&&this.menus.every(e=>e.permissions.selected)}areAllSubmenusSelected(){return this.submenus.length>0&&this.submenus.every(e=>e.permissions.selected)}areAllUrlsSelected(){return this.urls.length>0&&this.urls.every(e=>e.permissions.selected)}onPermissionChange(){console.log("Permission changed")}getSelectedPermissionsCount(){let e=0;return this.menus.forEach(n=>{n.permissions.selected&&e++}),this.submenus.forEach(n=>{n.permissions.selected&&e++}),this.urls.forEach(n=>{n.permissions.selected&&e++}),e}getMenuPermissionsCount(){let e=0;return this.menus.forEach(n=>{n.permissions.selected&&e++}),e}getSubmenuPermissionsCount(){let e=0;return this.submenus.forEach(n=>{n.permissions.selected&&e++}),e}getUrlPermissionsCount(){let e=0;return this.urls.forEach(n=>{n.permissions.selected&&e++}),e}savePermissions(){if(!this.roleId)return void alert("Role ID is required to save permissions");const c={menu:this.menus.filter(l=>l.permissions.selected).map(l=>l.id),SubMenu:this.submenus.filter(l=>l.permissions.selected).map(l=>l.id),RolePermission:this.urls.filter(l=>l.permissions.selected).map(l=>l.id)};console.log("Saving permissions for Role ID:",this.roleId),console.log("Permissions data:",c),this.apiService.createRolePermissions(this.roleId,c).subscribe({next:l=>{console.log("Permissions saved successfully:",l),alert("Permissions saved successfully!")},error:l=>{console.error("Error saving permissions:",l),alert("Failed to save permissions. Please try again.")}})}static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)(t.rXU(f.nX),t.rXU(b.G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-role-permission"]],standalone:!1,decls:10,vars:3,consts:[[1,"role-permission-container"],[1,"header"],[1,"title-section"],[1,"icon"],["class","role-info",4,"ngIf"],["class","no-role-selected",4,"ngIf"],["class","permissions-content",4,"ngIf"],[1,"role-info"],[1,"role-badge"],[1,"no-role-selected"],[1,"permissions-content"],[1,"bulk-actions"],[1,"bulk-btn","select-all",3,"click"],[1,"bulk-btn","deselect-all",3,"click"],[1,"save-btn",3,"click"],[1,"permissions-section"],[1,"section-header"],[1,"section-controls"],[1,"select-all-section"],["type","checkbox",3,"change","checked"],[1,"permissions-table"],[1,"table-header"],[1,"resource-name"],[1,"permission-types"],["class","permission-row",4,"ngFor","ngForOf"],[1,"permissions-summary"],[1,"summary-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"permission-row"],[1,"resource-info"],[1,"resource-description"],[1,"permission-checkboxes"],[1,"permission-checkbox","select"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"checkmark"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4,"\u{1f510}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"Role Permissions"),t.k0s()(),t.DNE(7,aa,5,2,"div",4)(8,sa,3,0,"div",5),t.k0s(),t.DNE(9,ua,80,10,"div",6),t.k0s()),2&n&&(t.R7$(7),t.Y8G("ngIf",i.roleId&&i.roleName),t.R7$(),t.Y8G("ngIf",!i.roleId),t.R7$(),t.Y8G("ngIf",i.roleId))},dependencies:[m.Sq,m.bT,d.Zm,d.BC,d.vS],styles:['.role-permission-container[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;min-height:100vh}.header[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#6f42c1;font-size:24px;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.role-info[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:linear-gradient(45deg,#6f42c1,#5a32a3);color:#fff;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.no-role-selected[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeeba;color:#856404;padding:15px;border-radius:8px;margin-top:20px}.permission-types-legend[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.permission-types-legend[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:18px}.legend-items[_ngcontent-%COMP%]{display:flex;gap:30px;flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 15px;border-radius:6px;font-size:14px;font-weight:500}.legend-item.read[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.legend-item.write[_ngcontent-%COMP%]{background:#e8f5e8;color:#388e3c}.legend-item.delete[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.legend-item.select[_ngcontent-%COMP%]{background:#f3e5f5;color:#6f42c1}.legend-icon[_ngcontent-%COMP%]{font-size:16px}.bulk-actions[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;display:flex;gap:15px;align-items:center;position:sticky;top:0;z-index:100;transition:all .3s ease}.bulk-actions.sticky[_ngcontent-%COMP%]{box-shadow:0 4px 12px #00000026;border-bottom:1px solid #e0e0e0}.bulk-btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:14px;transition:all .3s}.bulk-btn.select-all[_ngcontent-%COMP%]{border-color:#28a745;color:#28a745}.bulk-btn.select-all[_ngcontent-%COMP%]:hover{background:#28a745;color:#fff}.bulk-btn.deselect-all[_ngcontent-%COMP%]{border-color:#dc3545;color:#dc3545}.bulk-btn.deselect-all[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.save-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#6f42c1,#5a32a3);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;margin-left:auto}.save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #6f42c14d}.permissions-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;overflow:hidden}.section-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0;font-size:18px;display:flex;align-items:center;gap:8px}.select-all-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666;cursor:pointer}.select-all-section[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0}.permissions-table[_ngcontent-%COMP%]{width:100%}.table-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;display:grid;grid-template-columns:1fr 80px;gap:20px;align-items:center;border-bottom:1px solid #dee2e6;font-weight:600;color:#495057}.permission-types[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;text-align:center}.permission-row[_ngcontent-%COMP%]{padding:15px 20px;display:grid;grid-template-columns:1fr 80px;gap:20px;align-items:center;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.permission-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.resource-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.resource-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.resource-description[_ngcontent-%COMP%]{color:#666;font-size:12px}.permission-checkboxes[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;justify-items:center}.permission-checkbox[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.permission-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:0;height:0}.checkmark[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:2px solid #ddd;border-radius:4px;position:relative;transition:all .3s}.permission-checkbox.read[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#1976d2}.permission-checkbox.write[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#388e3c}.permission-checkbox.delete[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#d32f2f}.permission-checkbox.select[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#6f42c1}.permission-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:currentColor}.permission-checkbox.read[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#1976d2}.permission-checkbox.write[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#388e3c}.permission-checkbox.delete[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#d32f2f}.permission-checkbox.select[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#6f42c1}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:6px;top:2px;width:6px;height:12px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.permission-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{display:block}.permission-checkbox[_ngcontent-%COMP%]:hover   .checkmark[_ngcontent-%COMP%]{transform:scale(1.1);box-shadow:0 2px 4px #0003}.permissions-summary[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.permissions-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:18px}.summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#f8f9fa;border-radius:6px;border-left:4px solid #6f42c1}.stat-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#6f42c1;margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.legend-items[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.bulk-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;position:sticky;top:0;padding:10px 15px}.save-btn[_ngcontent-%COMP%]{margin-left:0}.table-header[_ngcontent-%COMP%], .permission-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.permission-types[_ngcontent-%COMP%], .permission-checkboxes[_ngcontent-%COMP%]{justify-self:start}.summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.role-permission-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%], .permission-types-legend[_ngcontent-%COMP%], .permissions-section[_ngcontent-%COMP%], .permissions-summary[_ngcontent-%COMP%]{padding:15px}.bulk-actions[_ngcontent-%COMP%]{padding:10px 15px;gap:10px}.bulk-btn[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.permission-types[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:left}.permission-checkboxes[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}}']}))}return r(),a})()}]}];let ga=(()=>{var r;class a{static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275mod=t.$C({type:a}),this.\u0275inj=s.G2t({imports:[P.iI.forChild(pa),P.iI]}))}return r(),a})(),ma=(()=>{var r;class a{static#t=r=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275mod=t.$C({type:a}),this.\u0275inj=s.G2t({imports:[m.MD,d.YN,d.X1,ga,pt,gt,Ct,Mt,$t.W,Pt]}))}return r(),a})()},6319:(_,g,u)=>{u.d(g,{a:()=>P});var h=u(9330),m=u(7144),d=u(2615);let P=(()=>{var t;class s{constructor(f){this.http=f,this.baseUrl=`${m.c.apiUrl}performance-statistics`}getPerformanceForm(f=0,b=1){const O=(new h.Nl).set("module",f.toString()).set("topic",b.toString());return this.http.get(`${this.baseUrl}/performance`,{params:O})}getPerformanceFormByModuleTopic(f,b){return this.http.get(`${this.baseUrl}/performance/module/${f}/topic/${b}`)}saveStatistics(f){return this.http.post(`${this.baseUrl}/save-statistics`,f)}sendOTP(){return this.http.post(`${this.baseUrl}/sent-otp`,{})}verifyOTP(f){return this.http.post(`${this.baseUrl}/verify-otp`,{otp:f})}makeActive(f,b=!0){return this.http.post(`${this.baseUrl}/${f}/make-active`,{active:b})}getPerformanceStatistics(f={}){let b=new h.Nl;return Object.keys(f).forEach(O=>{null!=f[O]&&(b=b.set(O,f[O].toString()))}),this.http.get(`${this.baseUrl}`,{params:b})}getPerformanceStatisticById(f){return this.http.get(`${this.baseUrl}/${f}`)}createPerformanceStatistic(f){return this.http.post(`${this.baseUrl}`,f)}updatePerformanceStatistic(f,b){return this.http.put(`${this.baseUrl}/${f}`,b)}deletePerformanceStatistic(f){return this.http.delete(`${this.baseUrl}/${f}`)}bulkSaveStatistics(f){return this.http.post(`${this.baseUrl}/bulk-save`,{statistics:f})}getByUserId(f){return this.http.get(`${this.baseUrl}/user/${f}`)}getByUserIdAndMonth(f,b){return this.http.get(`${this.baseUrl}/user/${f}/month/${b}`)}getSummary(f={}){let b=new h.Nl;return Object.keys(f).forEach(O=>{null!=f[O]&&(b=b.set(O,f[O].toString()))}),this.http.get(`${this.baseUrl}/summary`,{params:b})}getLabels(){return this.http.get(`${this.baseUrl}/labels`)}getLabelsByFilters(f){return this.http.post(`${this.baseUrl}/labels/filter`,f)}getReportValues(f){return this.http.post(`${this.baseUrl}/report-values`,f)}getCountByUserDate(f,b){return this.http.get(`${this.baseUrl}/count/user/${f}/date/${b}`)}getSuccessCountByUserDate(f,b){return this.http.get(`${this.baseUrl}/success-count/user/${f}/date/${b}`)}static#t=t=()=>(this.\u0275fac=function(b){return new(b||s)(d.KVO(h.Qq))},this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return t(),s})()}}]);