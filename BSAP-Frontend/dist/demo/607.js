"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[607],{1155:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>PerformanceComponent});var _angular_forms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4341),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2200),_angular_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8132),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2615),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3664),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9464),_services_performance_statistic_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6319);const _forTrack0=(_,g)=>g.id;function PerformanceComponent_div_0_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(2,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(3,"Loading performance data..."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()())}function PerformanceComponent_div_1_div_7_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",15)(1,"div")(2,"span",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(3,"Module - "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(4,"span",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(6,"div")(7,"span",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8,"Topic - "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(9,"span",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentModule.moduleName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicName)}}function PerformanceComponent_div_1_div_8_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"i",19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"button",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.clearMessages())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.errorMessage," ")}}function PerformanceComponent_div_1_div_9_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"button",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.clearMessages())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.successMessage," ")}}function PerformanceComponent_div_1_div_10_Conditional_2_Conditional_11_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",45),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1,"Signed PDF"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(2,"th",46),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(3,"Editable Word File"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s())}function PerformanceComponent_div_1_div_10_Conditional_2_Conditional_12_Conditional_0_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",47),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1,"Previous Month"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s())}function PerformanceComponent_div_1_div_10_Conditional_2_Conditional_12_Conditional_3_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1,"Cumulative Month"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s())}function PerformanceComponent_div_1_div_10_Conditional_2_Conditional_12_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(0,PerformanceComponent_div_1_div_10_Conditional_2_Conditional_12_Conditional_0_Template,2,0,"th",47),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(1,"th",48),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2,"Current Month"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(3,PerformanceComponent_div_1_div_10_Conditional_2_Conditional_12_Conditional_3_Template,2,0,"th",49)),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(u.hasPreviousQuestion()?0:-1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(u.hasCumulativeQuestion()?3:-1)}}function PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_5_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",53)(1,"input",54),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("change",function(d){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,M=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(M.onFileSelect(d,"pdf_"+h.id))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(2,"td",53)(3,"input",55),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("change",function(d){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,M=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(M.onFileSelect(d,"word_"+h.id))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()}}function PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_6_Conditional_0_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"input",60),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("value",u.previousCount||"0")}}function PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_6_Conditional_3_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",59),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"input",60),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2).$implicit,p=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("value",p.getCumulativeValue(u))}}function PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_6_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(0,PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_6_Conditional_0_Template,2,1,"td",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(1,"td",57),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(2,"input",58),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(3,PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_6_Conditional_3_Template,2,1,"td",59)),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,p=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(p.hasPreviousQuestion()?0:-1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formControlName","question_"+u.id)("placeholder",u.defaultVal)("readonly",u.isDisabled),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(p.hasCumulativeQuestion()?3:-1)}}function PerformanceComponent_div_1_div_10_Conditional_2_For_15_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"tr",44)(1,"td",50),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"td",51),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(4,"span",52),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(5,PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_5_Template,4,0)(6,PerformanceComponent_div_1_div_10_Conditional_2_For_15_Conditional_6_Template,4,5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,p=g.$index,d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(p+1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("innerHTML",d.formatQuestionText(u),_angular_core__WEBPACK_IMPORTED_MODULE_4__.npT),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(d.isDocumentType(u)?5:6)}}function PerformanceComponent_div_1_div_10_Conditional_2_For_17_Conditional_0_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$index;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" Question ",u+1,": This field is required ")}}function PerformanceComponent_div_1_div_10_Conditional_2_For_17_Template(_,g){if(1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(0,PerformanceComponent_div_1_div_10_Conditional_2_For_17_Conditional_0_Template,2,1,"div",61),2&_){let u;const p=g.$implicit,d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(null!=(u=d.performanceForm.get("question_"+p.id))&&u.invalid&&null!=(u=d.performanceForm.get("question_"+p.id))&&u.touched?0:-1)}}function PerformanceComponent_div_1_div_10_Conditional_2_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",25)(1,"h3",39),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"div",40)(4,"table",41)(5,"thead")(6,"tr")(7,"th",42),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8,"Sr No"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(9,"th",43),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(10,"Questions"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(11,PerformanceComponent_div_1_div_10_Conditional_2_Conditional_11_Template,4,0)(12,PerformanceComponent_div_1_div_10_Conditional_2_Conditional_12_Template,4,2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(13,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Z7z(14,PerformanceComponent_div_1_div_10_Conditional_2_For_15_Template,7,3,"tr",44,_forTrack0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Z7z(16,PerformanceComponent_div_1_div_10_Conditional_2_For_17_Template,1,1,null,null,_forTrack0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicSubName||u.currentTopic.topicName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(u.hasDocumentType()?11:12),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Dyx(u.currentTopic.questionDTOs),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Dyx(u.currentTopic.questionDTOs)}}function PerformanceComponent_div_1_div_10_div_3_th_9_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",68),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.subTopicName," ")}}function PerformanceComponent_div_1_div_10_div_3_tr_11_td_5_Conditional_1_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"input",75),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("change",function(d){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,M=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,C=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(C.onFileSelect(d,"pdf_"+M.id+"_"+h.id))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()}}function PerformanceComponent_div_1_div_10_div_3_tr_11_td_5_Conditional_2_Template(_,g){if(1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(0,"input",76),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,p=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.AVh("calculated-field",d.isCalculatedField(p.id,u.id)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formControlName","matrix_"+p.id+"_"+u.id)}}function PerformanceComponent_div_1_div_10_div_3_tr_11_td_5_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",72),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(1,PerformanceComponent_div_1_div_10_div_3_tr_11_td_5_Conditional_1_Template,1,0,"input",73)(2,PerformanceComponent_div_1_div_10_div_3_tr_11_td_5_Conditional_2_Template,1,3,"input",74),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,p=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM(p.isDocumentType(u)?1:2)}}function PerformanceComponent_div_1_div_10_div_3_tr_11_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"tr",69)(1,"td",51)(2,"span",70),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(4,"span",52),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(5,PerformanceComponent_div_1_div_10_div_3_tr_11_td_5_Template,3,1,"td",71),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,p=g.index,d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI("",p+1,"."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("innerHTML",d.formatQuestionText(u),_angular_core__WEBPACK_IMPORTED_MODULE_4__.npT),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",d.currentTopic.subTopics)}}function PerformanceComponent_div_1_div_10_div_3_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",62)(1,"h3",39),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"div",63)(4,"table",64)(5,"thead")(6,"tr")(7,"th",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8,"Questions"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(9,PerformanceComponent_div_1_div_10_div_3_th_9_Template,2,1,"th",66),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(11,PerformanceComponent_div_1_div_10_div_3_tr_11_Template,6,3,"tr",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicSubName||u.currentTopic.topicName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.subTopics),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.questions||u.currentTopic.questionDTOs)}}function PerformanceComponent_div_1_div_10_div_4_th_9_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"th",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.question," ")}}function PerformanceComponent_div_1_div_10_div_4_tr_11_td_3_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"td",72),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"input",76),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,p=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG().$implicit,d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AVh("calculated-field",d.isCalculatedField(u.id,p.id)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formControlName","matrix_"+u.id+"_"+p.id)}}function PerformanceComponent_div_1_div_10_div_4_tr_11_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"tr",69)(1,"td",78),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(3,PerformanceComponent_div_1_div_10_div_4_tr_11_td_3_Template,2,3,"td",71),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=g.$implicit,p=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.subTopicName," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",p.currentTopic.questions||p.currentTopic.questionDTOs)}}function PerformanceComponent_div_1_div_10_div_4_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",62)(1,"h3",39),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"div",63)(4,"table",64)(5,"thead")(6,"tr")(7,"th",68),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(9,PerformanceComponent_div_1_div_10_div_4_th_9_Template,2,1,"th",77),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(11,PerformanceComponent_div_1_div_10_div_4_tr_11_Template,4,2,"tr",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.JRh(u.currentTopic.topicSubName||u.currentTopic.topicName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.getSubTopicHeader(),"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.questions||u.currentTopic.questionDTOs),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngForOf",u.currentTopic.subTopics)}}function PerformanceComponent_div_1_div_10_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",23)(1,"form",24),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nVh(2,PerformanceComponent_div_1_div_10_Conditional_2_Template,18,2,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(3,PerformanceComponent_div_1_div_10_div_3_Template,12,3,"div",26)(4,PerformanceComponent_div_1_div_10_div_4_Template,12,4,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"div",27)(6,"div",28)(7,"button",29),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.navigatePrevious())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(8,"i",30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(9," Previous "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"button",29),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.navigateNext())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(11," Next "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(12,"i",31),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(13,"button",32),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.goToPreviousModule())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(14," Previous Module "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(15,"i",33),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(16,"button",32),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.goToNextModule())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(17," Next Module "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(18,"i",34),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(19,"div",35)(20,"button",36),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.saveForm())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(21,"i",37),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(23,"button",32),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.submitForm())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(24,"i",38),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("formGroup",u.performanceForm),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.vxM("NORMAL"===u.currentTopic.formType?2:-1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf","Q/ST"===u.currentTopic.formType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf","ST/Q"===u.currentTopic.formType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.prevModule&&!u.prevTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.nextModule&&!u.nextTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.prevModule),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.nextModule),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",u.saving),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.saving?"Saving...":"Save Draft"," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",u.saving||!u.performanceForm.valid),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.saving?"Submitting...":"Submit"," ")}}function PerformanceComponent_div_1_div_11_button_8_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"button",84),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.navigateNext())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1," Continue to Next "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()}}function PerformanceComponent_div_1_div_11_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",79)(1,"div",80),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(2,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(3,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"Form Submitted Successfully!"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(6,"Your performance statistics have been recorded."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(7,"div",81),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(8,PerformanceComponent_div_1_div_11_button_8_Template,2,0,"button",82),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(9,"button",83),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(10," Back to Dashboard "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.nextModule||u.nextTopic)}}function PerformanceComponent_div_1_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"p",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"BSAP-Field Report"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(7,PerformanceComponent_div_1_div_7_Template,11,2,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(8,PerformanceComponent_div_1_div_8_Template,5,1,"div",11)(9,PerformanceComponent_div_1_div_9_Template,5,1,"div",12)(10,PerformanceComponent_div_1_div_10_Template,26,12,"div",13)(11,PerformanceComponent_div_1_div_11_Template,11,1,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI("(",u.monthYear,")"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.currentModule&&u.currentTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.errorMessage),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.successMessage),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.currentModule&&u.currentTopic),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.isSuccess)}}function PerformanceComponent_div_2_div_12_Template(_,g){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()),2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.errorMessage," ")}}function PerformanceComponent_div_2_Template(_,g){if(1&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",85),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.closeOTPModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(1,"div",86),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(d){return _angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.stopPropagation())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(2,"div",87)(3,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(4,"OTP Verification"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(5,"button",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.closeOTPModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(7,"div",88)(8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(9,"Please enter the 6-digit OTP sent to your registered mobile number:"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(10,"div",89)(11,"input",90),_angular_core__WEBPACK_IMPORTED_MODULE_4__.mxI("ngModelChange",function(d){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.DH7(h.otpValue,d)||(h.otpValue=d),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d)}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(12,PerformanceComponent_div_2_div_12_Template,2,1,"div",91),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(13,"div",92)(14,"button",93),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.closeOTPModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(15,"Cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(16,"button",94),_angular_core__WEBPACK_IMPORTED_MODULE_4__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_3__.eBV(u);const d=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_3__.Njj(d.verifyOTP())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s()()()()}if(2&_){const u=_angular_core__WEBPACK_IMPORTED_MODULE_4__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R50("ngModel",u.otpValue),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.errorMessage),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("disabled",!u.otpValue||6!==u.otpValue.length||u.saving),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.SpI(" ",u.saving?"Verifying...":"Verify OTP"," ")}}function PerformanceComponent_div_3_Template(_,g){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.j41(0,"div",95),_angular_core__WEBPACK_IMPORTED_MODULE_4__.nrm(1,"i",96),_angular_core__WEBPACK_IMPORTED_MODULE_4__.EFF(2," Auto-saving...\n"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.k0s())}let PerformanceComponent=(()=>{var _staticBlock;class PerformanceComponent{constructor(_,g,u,p){this.route=_,this.router=g,this.formBuilder=u,this.performanceService=p,this.modules=[],this.currentModule=null,this.currentTopic=null,this.userDistrict="",this.monthYear="",this.moduleId=0,this.topicId=1,this.nextModule=!1,this.prevModule=!1,this.nextTopic=!1,this.prevTopic=!1,this.loading=!1,this.saving=!1,this.showOTPModal=!1,this.isSuccess=!1,this.errorMessage="",this.successMessage="",this.formData={},this.otpValue="",this.initializeForm()}ngOnInit(){this.route.queryParams.subscribe(_=>{this.clearComponentData(),this.moduleId=_.module?parseInt(_.module):0,this.topicId=_.topic?parseInt(_.topic):1,this.loadPerformanceData()})}ngOnDestroy(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval)}initializeForm(){this.performanceForm=this.formBuilder.group({})}clearComponentData(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null),this.performanceForm=this.formBuilder.group({}),this.formData={},this.modules=[],this.currentModule=null,this.currentTopic=null,this.userDistrict="",this.monthYear="",this.nextModule=!1,this.prevModule=!1,this.nextTopic=!1,this.prevTopic=!1,this.loading=!1,this.saving=!1,this.showOTPModal=!1,this.isSuccess=!1,this.errorMessage="",this.successMessage="",this.otpValue=""}loadPerformanceData(){this.loading=!0,this.errorMessage="",this.performanceService.getPerformanceForm(this.moduleId,this.topicId).subscribe({next:_=>{"SUCCESS"===_.status&&_.data?this.processFormData(_.data):this.errorMessage=_.message||"Failed to load performance data",this.loading=!1},error:_=>{this.errorMessage="Error loading performance data: "+_.message,this.loading=!1}})}processFormData(_){this.modules=_.modules||[],this.userDistrict=_.userDistrict||"",this.monthYear=_.monthYear||"",this.isSuccess=_.isSuccess||!1,this.nextModule=_.nextModule||!1,this.prevModule=_.prevModule||!1,this.nextTopic=_.nextTopic||!1,this.prevTopic=_.prevTopic||!1,this.modules.length>0?(this.currentModule=this.modules[0],this.currentModule.topicDTOs&&this.currentModule.topicDTOs.length>0?(this.currentTopic=this.currentModule.topicDTOs[0],this.buildFormControls(),this.setupAutoSave()):this.errorMessage="No topics available for this module"):this.errorMessage="No modules found in response"}buildFormControls(){if(!this.currentTopic)return void console.log("No current topic found");console.log("Building form controls for topic:",this.currentTopic.topicName);const _={};if("NORMAL"===this.currentTopic.formType&&(this.currentTopic.questionDTOs||[]).forEach(u=>{if(this.isDocumentType(u))_[`pdf_${u.id}`]=[null],_[`word_${u.id}`]=[null];else{const p=`question_${u.id}`;if(u.formula&&""!==u.formula.trim()){const h=this.calculateInitialFormulaValue(u);_[p]=[{value:h,disabled:!0},"REQUIRED"===u.type?[_angular_forms__WEBPACK_IMPORTED_MODULE_0__.k0.required]:[]]}else _[p]=[u.currentCount||u.defaultVal||"","REQUIRED"===u.type?[_angular_forms__WEBPACK_IMPORTED_MODULE_0__.k0.required]:[]]}}),["Q/ST","ST/Q"].includes(this.currentTopic.formType)){const u=this.currentTopic.subTopics||[];(this.currentTopic.questions||this.currentTopic.questionDTOs||[]).forEach(p=>{u.forEach((d,h)=>{if(this.isDocumentType(p))return _[`pdf_${p.id}_${d.id}`]=[null],void(_[`word_${p.id}_${d.id}`]=[null]);const M=`matrix_${p.id}_${d.id}`;let C="0";const t=p;t.currentCountList?.[h]?C=t.currentCountList[h]:t.valueList?.[h]?C=t.valueList[h]:t.currentCount&&"NONE"!==t.currentCount&&(C=t.currentCount),_[M]=[C,[_angular_forms__WEBPACK_IMPORTED_MODULE_0__.k0.required]]})})}this.performanceForm=this.formBuilder.group(_),console.log("\u2705 Created form controls:",Object.keys(_)),this.setupFormulaCalculations()}hasCumulativeQuestion(){return!!this.currentTopic?.questionDTOs?.some(_=>!0===_.isCumulative)}hasPreviousQuestion(){return!!this.currentTopic?.questionDTOs?.some(_=>!0===_.isPrevious)}getSubTopicHeader(){const _=this.currentTopic;return _?"Leave & Discipline"==_.topicSubName?"Type of Leave":"GP Stock"==_.topicSubName||"Armory"==_.topicSubName?"Items":"Adjutant Section"==_.topicSubName?"Physical Activity":"Budget Management"==_.topicSubName?"Budge Management":"Inspection"==_.topicSubName?"Inspected":"Training Session"==_.topicSubName?"Training Session":"DETAILS":"SUB TOPICS"}setupFormulaCalculations(){!this.currentTopic||!this.performanceForm||(this.performanceForm.valueChanges.subscribe(_=>{this.updateCalculatedFields()}),this.updateCalculatedFields())}updateCalculatedFields(){if(!this.currentTopic)return;const _=this.currentTopic.questionDTOs||this.currentTopic.questions||[];_.filter(u=>u.formula).forEach(u=>{}),_.forEach(u=>{if(u.formula){const p=this.calculateFormulaValue(u);if(this.currentTopic&&"NORMAL"===this.currentTopic.formType){const d=u.formula.split("=");if(2===d.length){const M=`question_${d[1].trim()}`,C=this.performanceForm.get(M);C?(console.log(`NORMAL form - Setting calculated value "${p}" to control "${M}"`),C.setValue(p,{emitEvent:!1})):console.warn(`NORMAL form - Target control "${M}" not found`)}}else if(this.currentTopic&&("Q/ST"===this.currentTopic.formType||"ST/Q"===this.currentTopic.formType)){const d=u.formula.split("=");if(2===d.length){const h=d[1].trim(),M=h.split("_");if(2===M.length){const f=this.performanceForm.get(`matrix_${M[0]}_${M[1]}`);f&&f.setValue(p,{emitEvent:!1})}else if(1===M.length&&/^\d+$/.test(h)){const C=h;this.currentTopic?.subTopics&&this.currentTopic.subTopics.forEach(t=>{const a=this.calculateFormulaValueForColumn(u,t.id),b=this.performanceForm.get(`matrix_${C}_${t.id}`);b&&b.setValue(a,{emitEvent:!1})})}}}}})}isCalculatedFieldNormal(_){if(!this.currentTopic||"NORMAL"!==this.currentTopic.formType)return!1;const u=(this.currentTopic.questionDTOs||this.currentTopic.questions||[]).find(p=>p.id===_);return!(!u||!u.formula||""===u.formula.trim())}isCalculatedField(_,g){if(!this.currentTopic)return!1;const p=`${_}_${g}`;return(this.currentTopic.questionDTOs||this.currentTopic.questions||[]).some(h=>{if(!h.formula)return!1;const M=h.formula.split("=");return 2===M.length&&M[1].trim()===p})}debugFormulas(){this.currentTopic&&(this.currentTopic.questionDTOs||this.currentTopic.questions||[]).filter(u=>u.formula).forEach(u=>{this.calculateFormulaValue(u)}),this.performanceForm&&Object.keys(this.performanceForm.controls).forEach(_=>{this.performanceForm.get(_)})}setupAutoSave(){this.autoSaveInterval=setInterval(()=>{this.performanceForm.dirty&&!this.saving&&this.autoSave()},3e4)}autoSave(){if(!this.performanceForm.valid)return;const _=this.prepareStatisticsData("DRAFT");_.length>0&&this.performanceService.saveStatistics({performanceStatistics:_}).subscribe({next:g=>{},error:g=>console.error("Auto-save failed:",g)})}saveForm(){if(!this.performanceForm.valid)return void this.markFormGroupTouched();this.saving=!0;const _=this.prepareStatisticsData("SAVED");this.performanceService.saveStatistics({performanceStatistics:_}).subscribe({next:g=>{"SUCCESS"===g.status?(this.successMessage="Form saved successfully",this.performanceForm.markAsPristine()):this.errorMessage=g.message||"Failed to save form",this.saving=!1},error:g=>{this.errorMessage="Error saving form: "+g.message,this.saving=!1}})}onFileSelect(_,g){const u=_.target;if(!u.files||0===u.files.length)return;const p=u.files[0];console.log(`File selected for ${g}:`,p.name),this.performanceForm.get(g)?.setValue(p),this.performanceForm.get(g)?.markAsDirty(),this.performanceForm.get(g)||console.warn(`\u26a0\ufe0f Control '${g}' does NOT exist in the form group!`),this.performanceService.uploadDocument(p).subscribe({next:d=>{if("SUCCESS"===d.status){const h=d.fileUrl;console.log("Uploaded file URL:",h),this.performanceForm.get(g)?.setValue(h)}},error:d=>{console.error("File upload failed:",d)}})}submitForm(){if(!this.performanceForm.valid)return void this.markFormGroupTouched();this.saving=!0;const _=this.prepareStatisticsData("SUBMITTED");this.performanceService.saveStatistics({performanceStatistics:_}).subscribe({next:g=>{"SUCCESS"===g.status?this.sendOTP():(this.errorMessage=g.message||"Failed to submit form",this.saving=!1)},error:g=>{this.errorMessage="Error submitting form: "+g.message,this.saving=!1}})}sendOTP(){this.performanceService.sendOTP().subscribe({next:_=>{"SUCCESS"===_.status?(this.showOTPModal=!0,this.successMessage="OTP sent successfully to your registered mobile number"):this.errorMessage=_.message||"Failed to send OTP",this.saving=!1},error:_=>{this.errorMessage="Error sending OTP: "+_.message,this.saving=!1}})}verifyOTP(){this.otpValue&&6===this.otpValue.length?(this.saving=!0,this.performanceService.verifyOTP(this.otpValue).subscribe({next:_=>{"SUCCESS"===_.status?(this.showOTPModal=!1,this.successMessage="Form submitted successfully!",this.isSuccess=!0,setTimeout(()=>this.navigateNext(),2e3)):this.errorMessage=_.message||"OTP verification failed",this.saving=!1},error:_=>{this.errorMessage="Error verifying OTP: "+_.message,this.saving=!1}})):this.errorMessage="Please enter a valid 6-digit OTP"}prepareStatisticsData(_){const g=[],u=this.performanceForm.value;console.log("Preparing statistics data with status:",_),console.log("Form values:",u);const p=this.currentTopic?.questions||this.currentTopic?.questionDTOs||[];return"NORMAL"===this.currentTopic?.formType&&p.forEach(d=>{if(this.isDocumentType(d))[u[`pdf_${d.id}`],u[`word_${d.id}`]].forEach(C=>{C&&g.push({questionId:d.id,value:C,topicId:this.currentTopic.id,moduleId:this.currentModule.id,status:_})});else{const h=u[`question_${d.id}`];null!=h&&(""!==h||0===h||"0"===h)&&g.push({questionId:d.id,value:h.toString(),topicId:this.currentTopic.id,moduleId:this.currentModule.id,status:_})}}),["Q/ST","ST/Q"].includes(this.currentTopic?.formType??"")&&p.forEach(d=>{this.currentTopic?.subTopics?.forEach(h=>{this.isDocumentType(d)?[u[`pdf_${d.id}_${h.id}`],u[`word_${d.id}_${h.id}`]].forEach(f=>{f&&g.push({questionId:d.id,subTopicId:h.id,value:f,topicId:this.currentTopic.id,moduleId:this.currentModule.id,status:_})}):g.push({questionId:d.id,subTopicId:h.id,value:u[`matrix_${d.id}_${h.id}`].toString(),topicId:this.currentTopic.id,moduleId:this.currentModule.id,status:_})})}),console.log("\u2705 Final prepared statistics:",g),g}markFormGroupTouched(){Object.keys(this.performanceForm.controls).forEach(_=>{this.performanceForm.get(_)?.markAsTouched()})}navigateNext(){console.log("Navigate Next - Current:",this.moduleId,this.topicId,"Next Topic:",this.nextTopic,"Next Module:",this.nextModule),this.nextTopic?this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId,topic:this.topicId+1}}):this.nextModule&&this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId+1,topic:1}})}navigatePrevious(){console.log("Navigate Previous - Current:",this.moduleId,this.topicId,"Prev Topic:",this.prevTopic,"Prev Module:",this.prevModule),this.prevTopic?this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId,topic:this.topicId-1}}):this.prevModule&&this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId-1,topic:this.modules[this.moduleId-1]?.topicDTOs?.length||1}})}goToNextModule(){this.nextModule&&this.router.navigate(["dashboard/performance"],{queryParams:{module:this.moduleId+1,topic:1}})}goToPreviousModule(){if(this.prevModule){const _=Number(this.moduleId);this.router.navigate(["dashboard/performance"],{queryParams:{module:_-1}})}}getFormValue(_){return this.performanceForm.get(_)?.value||""}getMatrixValue(_,g){const u=`matrix_${_}_${g}`;return this.performanceForm.get(u)?.value||""}shouldShowSubtopicHeader(_,g){return 0===_||this.currentTopic?.questions?.[_-1]?.subTopicId!==g}formatQuestionText(_){let g=_.question||"";return g=g.replace(/\{userDistrict\}/g,this.userDistrict),g=g.replace(/\{monthYear\}/g,this.monthYear),g}calculateInitialFormulaValue(question){if(!question.formula)return question.currentCount||question.defaultVal||"";try{const formulaParts=question.formula.split("=");if(2!==formulaParts.length)return question.currentCount||question.defaultVal||"";let calculationExpression=formulaParts[0].trim();if(this.currentTopic?.questionDTOs&&this.currentTopic.questionDTOs.forEach(_=>{const g=new RegExp(`\\b${_.id}\\b`,"g");if(g.test(calculationExpression)){const u=parseFloat(_.currentCount||"0")||0;console.log(`Initial calculation - Replacing ${_.id} with currentCount: ${u}`),calculationExpression=calculationExpression.replace(g,u.toString())}}),!/^[\d\s+\-*/().]+$/.test(calculationExpression))return question.currentCount||question.defaultVal||"";const result=eval(calculationExpression),resultString=result.toString();return console.log(`Initial formula calculation for question ${question.id}: ${question.formula} = ${resultString}`),resultString}catch(_){return console.error("Initial formula calculation error:",_),question.currentCount||question.defaultVal||""}}calculateFormulaValueForColumn(question,subTopicId){if(!question.formula)return question.defaultVal||"";try{const formulaParts=question.formula.split("=");if(2!==formulaParts.length)return question.defaultVal||"";let calculationExpression=formulaParts[0].trim();if((this.currentTopic?.questions||this.currentTopic?.questionDTOs)&&(this.currentTopic.questions||this.currentTopic.questionDTOs||[]).forEach(g=>{if(new RegExp(`\\b${g.id}\\b`,"g").test(calculationExpression)){const p=this.getMatrixValue(g.id,subTopicId),d=parseFloat(p)||0;calculationExpression=calculationExpression.replace(new RegExp(`\\b${g.id}\\b`,"g"),d.toString())}}),!/^[\d\s+\-*/().]+$/.test(calculationExpression))return question.defaultVal||"";const result=eval(calculationExpression);return result.toString()}catch(_){return question.defaultVal||""}}calculateFormulaValue(question){if(!question.formula)return question.defaultVal||"";try{const formulaParts=question.formula.split("=");if(2!==formulaParts.length)return question.defaultVal||"";let calculationExpression=formulaParts[0].trim();const targetRef=formulaParts[1].trim(),formValues=this.performanceForm.value;if(Object.keys(formValues).forEach(_=>{if(_.startsWith("matrix_")){const g=_.replace("matrix_","").split("_");if(2===g.length){const h=formValues[_]||"0";calculationExpression=calculationExpression.replace(new RegExp(`\\b${g[0]}_${g[1]}\\b`,"g"),h)}}}),this.currentTopic?.questionDTOs&&this.currentTopic.questionDTOs.forEach(_=>{if(new RegExp(`\\b${_.id}\\b`,"g").test(calculationExpression)){let u=0;if("NORMAL"===this.currentTopic?.formType){const d=formValues[`question_${_.id}`];u=void 0!==d&&""!==d?parseFloat(d)||0:parseFloat(_.currentCount||"0")||0,console.log(`NORMAL form - Replacing question ID ${_.id} with value: ${u} (control: ${d}, currentCount: ${_.currentCount})`)}else u=this.calculateRowTotal(_.id),console.log(`Matrix form - Replacing question ID ${_.id} with row total: ${u}`);calculationExpression=calculationExpression.replace(new RegExp(`\\b${_.id}\\b`,"g"),u.toString())}}),!/^[\d\s+\-*/().]+$/.test(calculationExpression))return question.defaultVal||"";const result=eval(calculationExpression),resultString=result.toString();return resultString}catch(_){return question.defaultVal||""}}calculateRowTotal(_){if(!this.currentTopic?.subTopics)return 0;let g=0;return this.currentTopic.subTopics.forEach(u=>{const p=this.getMatrixValue(_,u.id);g+=parseFloat(p)||0}),g}calculateColumnTotal(_){if(!this.currentTopic?.questionDTOs)return 0;let g=0;return this.currentTopic.questionDTOs.forEach(u=>{const p=this.getMatrixValue(u.id,_);g+=parseFloat(p)||0}),g}calculateSubTopicTotal(_){if(!this.currentTopic?.questionDTOs)return 0;let g=0;return this.currentTopic.questionDTOs.forEach(u=>{const p=this.getMatrixValue(u.id,_);g+=parseFloat(p)||0}),g}calculateQuestionTotal(_){if(!this.currentTopic?.subTopics)return 0;let g=0;return this.currentTopic.subTopics.forEach(u=>{const p=this.getMatrixValue(_,u.id);g+=parseFloat(p)||0}),g}calculateGrandTotal(){if(!this.currentTopic?.questionDTOs||!this.currentTopic?.subTopics)return 0;let _=0;return this.currentTopic.questionDTOs.forEach(g=>{this.currentTopic?.subTopics?.forEach(u=>{const p=this.getMatrixValue(g.id,u.id);_+=parseFloat(p)||0})}),_}closeOTPModal(){this.showOTPModal=!1,this.otpValue=""}getCumulativeValue(_){if(_.formula&&""!==_.formula.trim()){const d=this.performanceForm.get(`question_${_.id}`);if(d){const h=d.value;return void 0!==h&&""!==h?h:"0"}}const u=this.performanceForm.get(`question_${_.id}`);if(u){const p=u.value;if(void 0!==p&&""!==p)return p}return _.finYearCount||_.currentCount||"0"}clearMessages(){this.errorMessage="",this.successMessage=""}hasDocumentType(){return!!this.currentTopic?.questionDTOs?.some(_=>"PDF_DOCUMENT"===_.type||"WORD_DOCUMENT"===_.type)}isDocumentType(_){return"PDF_DOCUMENT"===_.type||"WORD_DOCUMENT"===_.type}onFileUpload(_,g,u,p){const d=_.target.files[0];d&&(console.log(`Uploading ${p} for question ${g.id}, subTopicId: ${u}`,d),this.performanceService.uploadDocument(d).subscribe({next:h=>{if("SUCCESS"===h.status){const M=h.fileUrl;console.log(`\u2705 File uploaded successfully: ${M}`);const C=`matrix_${g.id}_${u}`,t=this.performanceForm.get(C);t?(t.setValue(M),console.log(`Form control '${C}' updated with: ${M}`)):console.warn(`\u26a0\ufe0f Form control '${C}' not found.`)}},error:h=>{console.error("\u274c File upload failed:",h)}}))}static#_=_staticBlock=()=>(this.\u0275fac=function(g){return new(g||PerformanceComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_5__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_5__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_angular_forms__WEBPACK_IMPORTED_MODULE_0__.ok),_angular_core__WEBPACK_IMPORTED_MODULE_4__.rXU(_services_performance_statistic_service__WEBPACK_IMPORTED_MODULE_6__.a))},this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.VBU({type:PerformanceComponent,selectors:[["app-performance"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","performance-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","auto-save-indicator",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"performance-container"],[1,"header-section"],[1,"page-title1"],[1,"page-title"],["class","breadcrumb",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","form-container",4,"ngIf"],["class","success-container",4,"ngIf"],[1,"breadcrumb"],[1,"breadcrumb-item1"],[1,"breadcrumb-item","active"],[1,"alert","alert-error"],[1,"fas","fa-exclamation-triangle"],[1,"close-btn",3,"click"],[1,"alert","alert-success"],[1,"fas","fa-check-circle"],[1,"form-container"],[1,"performance-form",3,"formGroup"],[1,"normal-form"],["class","matrix-form",4,"ngIf"],[1,"action-buttons"],[1,"navigation-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-backward"],[1,"fas","fa-forward"],[1,"form-buttons"],["type","button",1,"btn","btn-outline",3,"click","disabled"],[1,"fas","fa-save"],[1,"fas","fa-paper-plane"],[1,"section-title"],[1,"normal-table-container"],[1,"normal-table"],[1,"sr-no-header"],[1,"questions-header"],[1,"normal-row"],[1,"signed-pdf-header"],[1,"editable-word-header"],[1,"previous-header"],[1,"current-header"],[1,"cumulative-header"],[1,"sr-no-cell"],[1,"question-cell"],[1,"question-text",3,"innerHTML"],[1,"document-cell"],["type","file","accept","application/pdf",1,"normal-input",3,"change"],["type","file","accept",".doc,.docx",1,"normal-input",3,"change"],[1,"previous-cell"],[1,"current-cell"],["type","number",1,"normal-input",3,"formControlName","placeholder","readonly"],[1,"cumulative-cell"],["type","text","readonly","",1,"normal-input","readonly",3,"value"],[1,"error-message"],[1,"matrix-form"],[1,"matrix-container"],[1,"matrix-table"],[1,"question-header"],["class","subtopic-header",4,"ngFor","ngForOf"],["class","matrix-row",4,"ngFor","ngForOf"],[1,"subtopic-header"],[1,"matrix-row"],[1,"question-number"],["class","input-cell",4,"ngFor","ngForOf"],[1,"input-cell"],["type","file","accept","application/pdf",1,"matrix-input"],["type","number","placeholder","0",1,"matrix-input",3,"formControlName","calculated-field"],["type","file","accept","application/pdf",1,"matrix-input",3,"change"],["type","number","placeholder","0",1,"matrix-input",3,"formControlName"],["class","question-header",4,"ngFor","ngForOf"],[1,"subtopic-cell"],[1,"success-container"],[1,"success-icon"],[1,"success-actions"],["class","btn btn-primary",3,"click",4,"ngIf"],["routerLink","/dashboard/homePage",1,"btn","btn-outline"],[1,"btn","btn-primary",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"otp-input-container"],["type","text","placeholder","Enter OTP","maxlength","6","pattern","[0-9]{6}",1,"otp-input",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-outline",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"auto-save-indicator"],[1,"fas","fa-clock"]],template:function(g,u){1&g&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.DNE(0,PerformanceComponent_div_0_Template,4,0,"div",0)(1,PerformanceComponent_div_1_Template,12,6,"div",1)(2,PerformanceComponent_div_2_Template,18,4,"div",2)(3,PerformanceComponent_div_3_Template,3,0,"div",3),2&g&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.loading),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",!u.loading),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",u.showOTPModal),_angular_core__WEBPACK_IMPORTED_MODULE_4__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y8G("ngIf",null==u.performanceForm?null:u.performanceForm.dirty))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.MD,_angular_common__WEBPACK_IMPORTED_MODULE_1__.Sq,_angular_common__WEBPACK_IMPORTED_MODULE_1__.bT,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.X1,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.qT,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.Q0,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.cb,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.tU,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.R_,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.j4,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.JD,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_0__.vS,_angular_router__WEBPACK_IMPORTED_MODULE_2__.iI,_angular_router__WEBPACK_IMPORTED_MODULE_2__.Wk],styles:['.performance-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a}.calculated-field[_ngcontent-%COMP%]{background-color:#f8f9fa!important;color:#6c757d!important;border:1px solid #dee2e6!important;cursor:not-allowed}.calculated-field[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 .2rem #007bff40}.debug-btn[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px}.debug-btn[_ngcontent-%COMP%]:hover{background-color:#138496}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.header-section[_ngcontent-%COMP%]{border-bottom:2px solid #e9ecef}.page-title[_ngcontent-%COMP%]{color:#2c3e50;font-size:28px;font-weight:600;margin:0 0 10px}.page-title1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#007bff}.breadcrumb[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:14px;color:#6c757d}.breadcrumb-item[_ngcontent-%COMP%]{color:#000;font-size:22px}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#007bff;font-weight:500;font-size:20px}.breadcrumb-item1[_ngcontent-%COMP%]{color:#000;font-size:22px}.breadcrumb-item1.active[_ngcontent-%COMP%]{color:#007bff;font-weight:500;font-size:20px}.breadcrumb-separator[_ngcontent-%COMP%]{margin:0 8px;color:#000}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:20px;position:relative;display:flex;align-items:center;gap:10px}.alert-error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer;color:inherit}.form-container[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;margin-bottom:20px}.form-header[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px;margin-bottom:20px;border-left:4px solid #007bff}.form-info[_ngcontent-%COMP%]{display:flex;gap:30px;flex-wrap:wrap}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#495057}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d}.form-type-badge[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.section-title[_ngcontent-%COMP%]{color:#2c3e50;font-size:22px;font-weight:600;margin-bottom:10px}.section-subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;margin-bottom:20px;font-style:italic}.questions-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.question-row[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:6px;padding:15px;background:#fff}.question-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;margin-bottom:15px}.question-number[_ngcontent-%COMP%]{color:#007bff;font-weight:600;min-width:20px}.question-text[_ngcontent-%COMP%]{flex:1;color:#495057;font-weight:500}.input-columns[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.input-group[_ngcontent-%COMP%]{flex:1;min-width:150px}.input-label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#6c757d;margin-bottom:5px;text-transform:uppercase}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.form-input.readonly[_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.form-input[_ngcontent-%COMP%]:invalid{border-color:#dc3545}.normal-form[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:6px}.normal-table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px}.normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border:1px solid #dee2e6;background:#fff}.normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;text-align:left;border:1px solid #dee2e6;vertical-align:middle}.normal-form[_ngcontent-%COMP%]   .normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#87ceeb!important;color:#fff!important;font-weight:600;text-align:center;font-size:14px}.sr-no-header[_ngcontent-%COMP%], .sr-no-cell[_ngcontent-%COMP%]{width:80px;text-align:center}.questions-header[_ngcontent-%COMP%], .question-cell[_ngcontent-%COMP%]{width:50%;text-align:left}.previous-header[_ngcontent-%COMP%], .current-header[_ngcontent-%COMP%], .cumulative-header[_ngcontent-%COMP%], .previous-cell[_ngcontent-%COMP%], .current-cell[_ngcontent-%COMP%], .cumulative-cell[_ngcontent-%COMP%]{width:120px;text-align:center}.normal-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ced4da;border-radius:4px;font-size:14px;text-align:center;box-sizing:border-box}.normal-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.normal-input.readonly[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#6c757d;cursor:not-allowed}.question-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}.normal-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.normal-row[_ngcontent-%COMP%]:hover{background-color:#e8f4fd}.matrix-form[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:6px}.matrix-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:20px}.matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border:1px solid #dee2e6;background:#fff}.matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;border:1px solid #dee2e6;vertical-align:middle}.matrix-form[_ngcontent-%COMP%]   .matrix-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#007bff!important;color:#fff!important;font-weight:600;font-size:12px;text-transform:uppercase}.question-header[_ngcontent-%COMP%], .subtopic-header[_ngcontent-%COMP%]{min-width:100px;max-width:150px;word-wrap:break-word}.matrix-form[_ngcontent-%COMP%]   .question-cell[_ngcontent-%COMP%], .matrix-form[_ngcontent-%COMP%]   .subtopic-cell[_ngcontent-%COMP%]{text-align:left;padding:12px;font-weight:500;background-color:#f8f9fa;min-width:200px}.matrix-form[_ngcontent-%COMP%]   .input-cell[_ngcontent-%COMP%]{padding:8px}.matrix-form[_ngcontent-%COMP%]   .matrix-input[_ngcontent-%COMP%]{width:80px;padding:6px 8px;border:1px solid #ced4da;border-radius:4px;text-align:center;font-size:14px}.matrix-form[_ngcontent-%COMP%]   .matrix-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.total-cell[_ngcontent-%COMP%]{background-color:#e9ecef;font-weight:600;color:#495057}.totals-row[_ngcontent-%COMP%]{background-color:#f8f9fa}.totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;color:#495057}.grand-total[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700}.total-value[_ngcontent-%COMP%]{color:#007bff;font-weight:600}.questions-details[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#f8f9fa;border-radius:6px}.questions-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px;font-size:16px;font-weight:600}.question-detail[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px;padding:8px;background:#fff;border-radius:4px}.question-label[_ngcontent-%COMP%]{font-weight:600;color:#007bff;min-width:40px}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:30px;padding-top:20px;border-top:1px solid #e9ecef;flex-wrap:wrap;gap:20px}.navigation-buttons[_ngcontent-%COMP%], .form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .15s ease-in-out;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#545b62}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;color:#007bff;border:1px solid #007bff}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#007bff;color:#fff}.success-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.success-icon[_ngcontent-%COMP%]{font-size:64px;color:#28a745;margin-bottom:20px}.success-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:24px;margin-bottom:10px}.success-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin-bottom:30px}.success-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-width:400px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 0;border-bottom:1px solid #e9ecef}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:18px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:#495057;line-height:1.5}.otp-input-container[_ngcontent-%COMP%]{margin-bottom:20px}.otp-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #ced4da;border-radius:6px;font-size:16px;text-align:center;letter-spacing:2px;font-weight:600}.otp-input[_ngcontent-%COMP%]:focus{outline:0;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:0 20px 20px;border-top:1px solid #e9ecef}.auto-save-indicator[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#28a745;color:#fff;padding:8px 12px;border-radius:20px;font-size:12px;display:flex;align-items:center;gap:6px;z-index:100;box-shadow:0 2px 10px #0003}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px;display:flex;align-items:center;gap:4px}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0"}@media (max-width: 768px){.performance-container[_ngcontent-%COMP%]{padding:15px;margin:10px}.form-info[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.input-columns[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.navigation-buttons[_ngcontent-%COMP%], .form-buttons[_ngcontent-%COMP%]{width:100%;justify-content:center}.matrix-container[_ngcontent-%COMP%]{font-size:12px}.matrix-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .matrix-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.matrix-form[_ngcontent-%COMP%]   .question-cell[_ngcontent-%COMP%], .matrix-form[_ngcontent-%COMP%]   .subtopic-cell[_ngcontent-%COMP%]{min-width:150px;font-size:12px}.matrix-form[_ngcontent-%COMP%]   .matrix-input[_ngcontent-%COMP%]{width:60px;padding:4px 6px}}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:22px}.section-title[_ngcontent-%COMP%]{font-size:18px}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}.modal-container[_ngcontent-%COMP%]{width:95%}}@media print{.action-buttons[_ngcontent-%COMP%], .auto-save-indicator[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%]{display:none!important}.performance-container[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}.matrix-table[_ngcontent-%COMP%], .question-row[_ngcontent-%COMP%]{page-break-inside:avoid}}']}))}return _staticBlock(),PerformanceComponent})()},2607:(_,g,u)=>{u.r(g),u.d(g,{DashboardModule:()=>Ci});var p=u(2200),d=u(4341),h=u(8132),M=u(9464),C=u(5964),t=u(3664),a=u(2615),f=u(2020),b=u(5070);const v=r=>({"active-page":r});function G(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",21)(1,"div",22)(2,"div",23),t.nrm(3,"img",24),t.k0s(),t.j41(4,"div",25)(5,"div",26),t.EFF(6),t.k0s(),t.j41(7,"div",27),t.EFF(8),t.k0s()()(),t.nrm(9,"div",28),t.j41(10,"div",29)(11,"div",30),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.editProfile())}),t.nrm(12,"i",31),t.j41(13,"span"),t.EFF(14,"User profile"),t.k0s(),t.j41(15,"span",32),t.EFF(16,"\u2318E"),t.k0s()()(),t.nrm(17,"div",28),t.j41(18,"div",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.logout())}),t.nrm(19,"i",34),t.j41(20,"span"),t.EFF(21,"Log out"),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(3),t.Y8G("src",i.getUserAvatar(),t.B4B)("alt",i.getUserDisplayName()),t.R7$(3),t.JRh(i.getUserDisplayName()),t.R7$(2),t.JRh(i.getUserEmail())}}function V(r,s){1&r&&(t.j41(0,"div",35)(1,"p"),t.EFF(2,"Loading menu..."),t.k0s()())}function W(r,s){if(1&r&&(t.j41(0,"span",44),t.EFF(1,"\u25bc"),t.k0s()),2&r){const i=t.XpG().$implicit,n=t.XpG(2);t.AVh("expanded",n.expandedMenus[i.id])}}function K(r,s){if(1&r&&(t.j41(0,"span",44),t.EFF(1,"\u25b6"),t.k0s()),2&r){const i=t.XpG().$implicit,n=t.XpG(4);t.AVh("expanded",n.expandedSubmenus[i.id])}}function Y(r,s){if(1&r){const i=t.RV6();t.qex(0),t.j41(1,"li",47)(2,"div",48),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(6);return a.Njj(e.url&&"#"!==e.url?o.navigate(e.url):null)}),t.EFF(3),t.k0s()(),t.bVm()}if(2&r){const i=s.$implicit,n=t.XpG(6);t.R7$(),t.Y8G("ngClass",t.eq3(2,v,n.currentUrl.includes(i.url))),t.R7$(2),t.SpI(" ",i.name," ")}}function z(r,s){if(1&r&&(t.j41(0,"ul",45),t.DNE(1,Y,4,4,"ng-container",37),t.k0s()),2&r){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",i.children)}}function X(r,s){if(1&r){const i=t.RV6();t.qex(0),t.j41(1,"li",46)(2,"div",39),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(4);return a.Njj(e.children&&e.children.length?o.toggleSubmenu(e.id):e.url&&"#"!==e.url?o.navigate(e.url):null)}),t.j41(3,"span",40),t.EFF(4),t.k0s(),t.j41(5,"span",41),t.DNE(6,K,2,2,"span",42),t.k0s()(),t.DNE(7,z,2,1,"ul",43),t.k0s(),t.bVm()}if(2&r){const i=s.$implicit,n=t.XpG(4);t.R7$(2),t.AVh("expanded",n.expandedSubmenus[i.id])("has-children",i.children&&i.children.length),t.R7$(2),t.JRh(i.name),t.R7$(2),t.Y8G("ngIf",i.children&&i.children.length),t.R7$(),t.Y8G("ngIf",i.children&&i.children.length&&n.expandedSubmenus[i.id])}}function q(r,s){if(1&r&&(t.j41(0,"ul",45),t.DNE(1,X,8,7,"ng-container",37),t.k0s()),2&r){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",i.children)}}function Q(r,s){if(1&r){const i=t.RV6();t.qex(0),t.j41(1,"li",38)(2,"div",39),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(e.children&&e.children.length?o.toggleMenu(e.id):e.url&&"#"!==e.url?o.navigate(e.url):null)}),t.j41(3,"span",40),t.EFF(4),t.k0s(),t.j41(5,"span",41),t.DNE(6,W,2,2,"span",42),t.k0s()(),t.DNE(7,q,2,1,"ul",43),t.k0s(),t.bVm()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.R7$(2),t.AVh("expanded",n.expandedMenus[i.id])("has-children",i.children&&i.children.length),t.R7$(2),t.JRh(i.name),t.R7$(2),t.Y8G("ngIf",i.children&&i.children.length),t.R7$(),t.Y8G("ngIf",i.children&&i.children.length&&n.expandedMenus[i.id])}}function H(r,s){if(1&r&&(t.j41(0,"ul",36),t.DNE(1,Q,8,7,"ng-container",37),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.Y8G("ngForOf",i.menuData)}}let I=(()=>{var r;class s{ngOnInit(){this.loadUserMenu(),this.loadUserData(),document.addEventListener("click",this.handleOutsideClick)}ngOnDestroy(){document.removeEventListener("click",this.handleOutsideClick),this.subscriptions.forEach(n=>n.unsubscribe())}toggleUserDropdown(){this.userDropdownOpen=!this.userDropdownOpen}logout(){this.router.navigate(["/login"])}toggleMenu(n){const e=!!this.expandedMenus[n];Object.keys(this.expandedMenus).forEach(o=>{this.expandedMenus[+o]=!1}),this.expandedMenus[n]=!e}toggleSubmenu(n){const e=!!this.expandedSubmenus[n];Object.keys(this.expandedSubmenus).forEach(o=>{this.expandedSubmenus[+o]=!1}),this.expandedSubmenus[n]=!e}toggleSubchild(n){this.expandedSubchildren[n]=!this.expandedSubchildren[n]}constructor(n,e,o,c){this.authService=n,this.router=e,this.route=o,this.apiService=c,this.handleOutsideClick=l=>{const m=document.querySelector(".user-profile-container");m&&!m.contains(l.target)&&(this.userDropdownOpen=!1)},this.userDropdownOpen=!1,this.isSidenavCollapsed=!1,this.user=null,this.isLoadingMenu=!0,this.menuData=[],this.expandedMenus={},this.expandedSubmenus={},this.expandedSubchildren={},this.subscriptions=[],this.currentUrl="",this.router.events.pipe((0,C.p)(l=>l instanceof M.wF)).subscribe(l=>{this.currentUrl=l.urlAfterRedirects})}loadUserData(){const n=this.authService.user$.subscribe(e=>{this.user=e});if(this.subscriptions.push(n),!this.user){const e=localStorage.getItem("email")||localStorage.getItem("userEmail"),o=localStorage.getItem("firstName"),c=localStorage.getItem("lastName"),l=localStorage.getItem("roleName");e&&o&&l&&(this.user={id:0,firstName:o,lastName:c||"",email:e,role:{id:0,roleName:l},permissions:[]});const m=this.authService.loadUserProfile().subscribe({next:P=>{this.user=P},error:P=>{console.error("Failed to load user profile:",P)}});this.subscriptions.push(m)}}loadUserMenu(){this.isLoadingMenu=!0;const n=this.apiService.get_user_menu().subscribe({next:e=>{this.menuData="SUCCESS"===e.status&&Array.isArray(e.data)?e.data:[],console.log("User menu loaded:",e),this.isLoadingMenu=!1},error:e=>{console.error("Failed to load user menu:",e),this.isLoadingMenu=!1,this.menuData=[]}});this.subscriptions.push(n)}toggleSidenav(){this.isSidenavCollapsed=!this.isSidenavCollapsed}navigate(n){if(n.includes("?")){const[e,o]=n.split("?"),c={};o&&o.split("&").forEach(m=>{const[P,x]=m.split("=");P&&x&&(c[P]=decodeURIComponent(x))});const l=e.startsWith("/")?e.substring(1):e;this.router.navigate([l],{relativeTo:this.route,queryParams:c})}else{const e=n.startsWith("/")?n.substring(1):n;this.router.navigate([e],{relativeTo:this.route})}}getUserDisplayName(){if(this.user?.firstName)return this.user.firstName;const n=localStorage.getItem("firstName");if(n)return n;const e=this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail");return e?e.split("@")[0]:"User"}getUserEmail(){return this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail")||""}getUserRole(){return this.user?.role?.roleName||localStorage.getItem("roleName")||""}getUserAvatar(){return"https://ui-avatars.com/api/?name="+encodeURIComponent(this.getUserDisplayName())+"&background=6366f1&color=fff&size=40"}editProfile(){event?.stopPropagation(),this.userDropdownOpen=!1,console.log("Edit profile clicked"),this.router.navigate(["/dashboard/profile"])}widgetSettings(){event?.stopPropagation(),this.userDropdownOpen=!1,console.log("Widget settings clicked")}upgradeToPro(){event?.stopPropagation(),this.userDropdownOpen=!1,console.log("Upgrade to professional clicked")}hasRole(n){return this.authService.hasRole(n)}hasPermission(n){return this.authService.hasPermission(n)}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(f.u),t.rXU(M.Ix),t.rXU(M.nX),t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-dashboard"]],decls:27,vars:19,consts:[[1,"dashboard-layout"],[1,"header"],[1,"header-left"],[1,"menu-toggle",3,"click"],[1,"hamburger-line"],[1,"app-title"],[1,"header-right"],[1,"user-profile-container",3,"click"],[1,"user-avatar"],[1,"avatar-img",3,"src","alt"],[1,"user-details"],[1,"user-name"],[1,"user-role"],[1,"dropdown-arrow"],[1,"fa","fa-chevron-down"],["class","profile-dropdown",4,"ngIf"],[1,"sidenav"],[1,"nav-content"],["class","menu-loading",4,"ngIf"],["class","nav-menu",4,"ngIf"],[1,"main-content"],[1,"profile-dropdown"],[1,"dropdown-header"],[1,"dropdown-avatar"],[3,"src","alt"],[1,"dropdown-user-info"],[1,"dropdown-name"],[1,"dropdown-email"],[1,"dropdown-divider"],[1,"dropdown-menu-items"],[1,"dropdown-menu-item",3,"click"],[1,"fa","fa-user"],[1,"shortcut"],[1,"dropdown-menu-item","logout-item",3,"click"],[1,"fa","fa-sign-out"],[1,"menu-loading"],[1,"nav-menu"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","collapsible-menu",2,"text-align","left","cursor","pointer","display","flex","justify-content","space-between","align-items","center",3,"click"],[1,"nav-label"],[1,"nav-icon"],["class","expand-icon",3,"expanded",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"expand-icon"],[1,"sub-menu"],[1,"sub-item"],[1,"sub-item",3,"ngClass"],[1,"sub-link",2,"text-align","left","cursor","pointer",3,"click"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return o.toggleSidenav()}),t.nrm(4,"span",4)(5,"span",4)(6,"span",4),t.k0s(),t.j41(7,"h1",5),t.EFF(8,"Menu"),t.k0s()(),t.j41(9,"div",6)(10,"div",7),t.bIt("click",function(){return o.toggleUserDropdown()}),t.j41(11,"div",8),t.nrm(12,"img",9),t.k0s(),t.j41(13,"div",10)(14,"span",11),t.EFF(15),t.k0s(),t.j41(16,"span",12),t.EFF(17),t.k0s()(),t.j41(18,"div",13),t.nrm(19,"i",14),t.k0s(),t.DNE(20,G,22,4,"div",15),t.k0s()()(),t.j41(21,"nav",16)(22,"div",17),t.DNE(23,V,3,0,"div",18)(24,H,2,1,"ul",19),t.k0s()(),t.j41(25,"main",20),t.nrm(26,"router-outlet"),t.k0s()()),2&e&&(t.R7$(4),t.AVh("collapsed",o.isSidenavCollapsed),t.R7$(),t.AVh("collapsed",o.isSidenavCollapsed),t.R7$(),t.AVh("collapsed",o.isSidenavCollapsed),t.R7$(6),t.Y8G("src",o.getUserAvatar(),t.B4B)("alt",o.getUserDisplayName()),t.R7$(3),t.JRh(o.getUserDisplayName()),t.R7$(2),t.JRh(o.getUserRole()),t.R7$(2),t.AVh("rotated",o.userDropdownOpen),t.R7$(),t.Y8G("ngIf",o.userDropdownOpen),t.R7$(),t.AVh("collapsed",o.isSidenavCollapsed),t.R7$(2),t.Y8G("ngIf",o.isLoadingMenu),t.R7$(),t.Y8G("ngIf",!o.isLoadingMenu),t.R7$(),t.AVh("expanded",o.isSidenavCollapsed))},dependencies:[p.MD,p.YU,p.Sq,p.bT,h.iI,M.n3],styles:['.dashboard-layout[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header header" "sidenav main";grid-template-rows:60px 1fr;grid-template-columns:300px 1fr;height:100vh;transition:grid-template-columns .3s ease}.dashboard-layout[_ngcontent-%COMP%]:has(.sidenav.collapsed){grid-template-columns:60px 1fr}.header[_ngcontent-%COMP%]{grid-area:header;background:linear-gradient(90deg,#0f172a,#1e293b,#64748b);color:#f8fafc;display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;box-shadow:0 2px 6px #0009;z-index:10;margin-bottom:0;border-radius:0}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.menu-toggle[_ngcontent-%COMP%]{background:#ffffff26;border:none;cursor:pointer;padding:.6rem;border-radius:8px;display:flex;flex-direction:column;gap:4px;width:28px;height:22px;transition:background-color .2s ease,transform .2s ease}.menu-toggle[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:scale(1.05)}.hamburger-line[_ngcontent-%COMP%]{width:100%;height:2px;background:#fff;box-shadow:0 0 4px #0000004d;transition:all .3s ease;transform-origin:center}.hamburger-line.collapsed[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(4px,5px)}.hamburger-line.collapsed[_ngcontent-%COMP%]:nth-child(2){opacity:0}.hamburger-line.collapsed[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(4px,-5px)}.app-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0;color:#fff}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.user-profile-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;cursor:pointer;padding:.5rem;border-radius:8px;transition:background-color .2s ease;gap:.75rem}.user-profile-container[_ngcontent-%COMP%]:hover{background:#ffffff1a}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,.2)}.user-avatar[_ngcontent-%COMP%]   .avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff;line-height:1.2}.user-role[_ngcontent-%COMP%]{font-size:.875rem;color:#cbd5e1;line-height:1.2}.dropdown-arrow[_ngcontent-%COMP%]{margin-left:.5rem;color:#cbd5e1;transition:transform .2s ease}.dropdown-arrow[_ngcontent-%COMP%]   .fa-chevron-down.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.profile-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);right:0;background:#fff;border-radius:12px;box-shadow:0 10px 25px #00000026;min-width:280px;z-index:1000;overflow:hidden;border:1px solid #e5e7eb}.dropdown-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;background:#f8fafc;gap:.75rem}.dropdown-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;overflow:hidden}.dropdown-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.dropdown-user-info[_ngcontent-%COMP%]{flex:1}.dropdown-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1f2937;margin-bottom:.25rem}.dropdown-email[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e5e7eb}.dropdown-menu-items[_ngcontent-%COMP%]{padding:.5rem 0}.dropdown-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1rem;cursor:pointer;transition:background-color .2s ease;gap:.75rem;color:#374151}.dropdown-menu-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.dropdown-menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;font-size:1rem;color:#6b7280}.dropdown-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:.875rem}.shortcut[_ngcontent-%COMP%]{font-size:.75rem!important;color:#9ca3af!important;font-weight:500;flex:none!important}.logout-item[_ngcontent-%COMP%], .logout-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444!important}.logout-item[_ngcontent-%COMP%]:hover{background:#fef2f2}.sidenav[_ngcontent-%COMP%]{grid-area:sidenav;background:linear-gradient(to bottom,#111827,#1f2937,#6b7280);color:#f1f5f9;transition:all .3s ease;overflow:hidden;box-shadow:2px 0 6px #0009}.sidenav.collapsed[_ngcontent-%COMP%]{width:60px}.nav-content[_ngcontent-%COMP%]{padding:1rem 0;height:100%;overflow-y:auto}.nav-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.nav-item[_ngcontent-%COMP%]{margin-bottom:.25rem}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem .5rem;color:#e0e7ff;text-decoration:none;cursor:pointer;transition:all .3s ease;border-radius:8px;margin:.25rem .5rem}.nav-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6366f1,#3b82f6);color:#fff;transform:translate(4px);box-shadow:0 2px 8px #3b82f666}.nav-link.has-children[_ngcontent-%COMP%]{justify-content:space-between}.nav-link.collapsible-menu[_ngcontent-%COMP%]{background:#ffffff0d;border-left:3px solid #f59e0b;justify-content:space-between}.nav-link.collapsible-menu[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#f59e0b,#f97316);color:#fff;transform:translate(4px);box-shadow:0 2px 8px #f59e0b66}.nav-link.collapsible-menu.expanded[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#f97316);color:#fff;border-left:3px solid #f59e0b}.nav-link.router-link[_ngcontent-%COMP%]{border-left:3px solid transparent}.nav-link.router-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6366f1,#3b82f6);color:#fff;transform:translate(4px);box-shadow:0 2px 8px #3b82f666;border-left:3px solid #3b82f6}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#22c55e,#16a34a);color:#fff;border-left:3px solid #22c55e;box-shadow:0 2px 8px #22c55e66}.nav-icon[_ngcontent-%COMP%]{font-size:1.25rem;min-width:28px;display:flex;justify-content:center}.nav-label[_ngcontent-%COMP%]{margin-left:.75rem;font-weight:500;white-space:nowrap;transition:opacity .3s ease;width:100%;text-align:left}.nav-label.hidden[_ngcontent-%COMP%]{opacity:0}.expand-icon[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .2s ease}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.sub-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;background:#00000040;border-left:3px solid #60a5fa;border-radius:0 0 8px 8px;margin:.25rem .5rem;animation:_ngcontent-%COMP%_slideDown .2s ease}.active-page[_ngcontent-%COMP%]   .sub-link[_ngcontent-%COMP%]{position:relative;background-color:#3b82f6;color:#fff;border-radius:4px;overflow:hidden}.active-page[_ngcontent-%COMP%]   .sub-link[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#3b82f6;z-index:-1;border-radius:4px}@keyframes _ngcontent-%COMP%_slideDown{0%{max-height:0;opacity:0}to{max-height:200px;opacity:1}}.sub-item[_ngcontent-%COMP%]{border-left:2px solid transparent}.sub-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem .5rem 1.75rem;color:#c7d2fe;text-decoration:none;font-size:.875rem;border-radius:6px;transition:all .3s ease;text-align:left}.sub-link[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#3b82f6,#2563eb);color:#fff;border-left-color:#2563eb}.main-content[_ngcontent-%COMP%]{grid-area:main;background:#f8fafc;overflow-y:auto;transition:all .3s ease}.main-content.expanded[_ngcontent-%COMP%]{grid-column:2 / -1}@media (max-width: 768px){.dashboard-layout[_ngcontent-%COMP%]{grid-template-areas:"header" "main";grid-template-columns:1fr;grid-template-rows:60px 1fr}.sidenav[_ngcontent-%COMP%]{position:fixed;left:0;top:60px;height:calc(100vh - 60px);width:250px;z-index:20;transform:translate(-100%)}.sidenav[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.main-content[_ngcontent-%COMP%]{grid-area:main;width:100%}.user-email[_ngcontent-%COMP%]{display:none}}']}))}return r(),s})();const J=r=>({"background-image":r});function Z(r,s){if(1&r&&(t.j41(0,"div",14)(1,"div",15),t.EFF(2),t.k0s(),t.j41(3,"div",16),t.EFF(4),t.k0s()()),2&r){const i=s.$implicit;t.Y8G("ngStyle",t.eq3(3,J,i.gradient)),t.R7$(2),t.JRh(i.title),t.R7$(2),t.JRh(i.count)}}function tt(r,s){if(1&r&&(t.j41(0,"div",12),t.DNE(1,Z,5,5,"div",13),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.Y8G("ngForOf",i.cards)}}function et(r,s){if(1&r&&(t.j41(0,"div",21)(1,"div",22),t.EFF(2),t.k0s(),t.j41(3,"div",23),t.EFF(4),t.k0s()()),2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.name),t.R7$(2),t.SpI("(",i.progress,")")}}function nt(r,s){if(1&r&&(t.j41(0,"aside",17)(1,"div",18)(2,"h3"),t.EFF(3,"Dashboard"),t.k0s()(),t.j41(4,"div",19),t.DNE(5,et,5,2,"div",20),t.k0s()()),2&r){const i=t.XpG();t.R7$(5),t.Y8G("ngForOf",i.dataStatus)}}let j=(()=>{var r;class s{constructor(n){this.api=n,this.user={name:"",email:"",contact:"",mobile:"",joiningDate:""},this.cards=[{title:"Roles",count:0,gradient:"linear-gradient(90deg,#2dd4bf,#16a34a)"},{title:"Permission",count:0,gradient:"linear-gradient(90deg,#fb7185,#f97316)"},{title:"Menus",count:0,gradient:"linear-gradient(90deg,#6366f1,#06b6d4)"},{title:"SubMenus",count:0,gradient:"linear-gradient(90deg,#f59e0b,#f97316)"},{title:"State",count:0,gradient:"linear-gradient(90deg,#a78bfa,#c084fc)"},{title:"Modules",count:0,gradient:"linear-gradient(90deg,#06b6d4,#60a5fa)"},{title:"Range",count:0,gradient:"linear-gradient(90deg,#fb7185,#ef4444)"},{title:"Battalions",count:0,gradient:"linear-gradient(90deg,#fda4af,#fecaca)"},{title:"Topic",count:0,gradient:"linear-gradient(90deg,#60a5fa,#93c5fd)"},{title:"SubTopic",count:0,gradient:"linear-gradient(90deg,#0ea5a4,#075985)"},{title:"Questions",count:0,gradient:"linear-gradient(90deg,#c084fc,#bfdbfe)"}],this.isLoading=!1,this.dataStatus=[]}ngOnInit(){this.loadUserProfile(),this.loadTopicsAndSubtopics()}loadTopicsAndSubtopics(){this.api.getActiveTopics().subscribe({next:n=>{if(n&&"SUCCESS"===n.status&&n.data){const e=["Reserve Office","Strength & Vacancy","TradesMen, Ministrial, Supporting Staff"];this.dataStatus=n.data.filter(o=>e.includes(o.topicName)).map(o=>({name:o.topicName,progress:o.subName||"No subnames"}))}},error:n=>{console.error("Failed to load topics",n)}})}loadOverview(){this.isLoading=!0,this.api.getDashboardOverview().subscribe({next:n=>{if(this.isLoading=!1,n&&"SUCCESS"===n.status&&n.data){const e=n.data;if(this.cards=this.cards.map(o=>{switch(o.title){case"Roles":return{...o,count:void 0!==e.roles?e.roles:o.count};case"Permission":return{...o,count:void 0!==e.permissions?e.permissions:o.count};case"Menus":return{...o,count:void 0!==e.menus?e.menus:o.count};case"SubMenus":return{...o,count:void 0!==e.subMenus?e.subMenus:o.count};case"State":return{...o,count:void 0!==e.states?e.states:o.count};case"Modules":return{...o,count:void 0!==e.modules?e.modules:o.count};case"Range":return{...o,count:void 0!==e.ranges?e.ranges:o.count};case"Battalions":return{...o,count:void 0!==e.battalions?e.battalions:o.count};case"Topic":return{...o,count:void 0!==e.topics?e.topics:o.count};case"SubTopic":return{...o,count:void 0!==e.subTopics?e.subTopics:o.count};case"Questions":return{...o,count:void 0!==e.questions?e.questions:o.count};default:return o}}),void 0!==e.recentPerformanceCount){const o=Math.max(0,Number(e.recentPerformanceCount));this.dataStatus=Array.from({length:o}).map((c,l)=>({name:`Recent Perf ${l+1}`,progress:"0 out of 9"}))}}},error:n=>{this.isLoading=!1,console.error("Failed to load dashboard overview",n)}})}loadUserProfile(){this.api.getUserSelf().subscribe({next:n=>{if(n&&"SUCCESS"===n.status&&n.data){this.users=n.data;const e=n.data;this.user.name=`${e.firstName||""}${e.lastName?" "+e.lastName:""}`.trim(),this.user.email=e.email||"",this.user.mobile=e.mobileNo||e.mobile||"",this.user.contact=e.contactNo||"",this.roleId=e.roleId||"",this.user.joiningDate=e.joiningDate?new Date(e.joiningDate).toLocaleDateString():""}1==this.roleId&&(this.loadOverview(),this.loadPerformanceStatus())},error:n=>{console.error("Failed to load user profile",n)}})}loadPerformanceStatus(){this.api.getPerformanceOverview().subscribe({next:n=>{if(n&&"SUCCESS"===n.status&&n.data){const e=n.data;if(Array.isArray(e.battalionStats)&&e.battalionStats.length>0)return void(this.dataStatus=e.battalionStats.map(o=>({name:o.battalionName||`Battalion ${o.battalionId}`,progress:`${o.modulesWithData} of ${o.totalActiveModules}`})));if(void 0!==e.recentPerformanceCount){const o=Math.max(0,Number(e.recentPerformanceCount));this.dataStatus=Array.from({length:o}).map((c,l)=>({name:`Recent Perf ${l+1}`,progress:"0 out of 9"}))}}},error:n=>{console.error("Failed to load performance overview",n)}})}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-home"]],decls:33,vars:7,consts:[[1,"home-wrap"],[1,"main-area"],[1,"profile-row"],[1,"welcome"],[1,"user-meta"],[1,"meta-left"],[1,"meta-right"],[1,"avatar"],["src","/assets/images/bihar-police-logo.svg","alt","avatar"],[1,"username"],["class","cards-grid",4,"ngIf"],["class","side-area",4,"ngIf"],[1,"cards-grid"],["class","info-card",3,"ngStyle",4,"ngFor","ngForOf"],[1,"info-card",3,"ngStyle"],[1,"card-title"],[1,"card-count"],[1,"side-area"],[1,"side-header",2,"position","sticky","top","0","background","transparent","padding-bottom","8px"],[1,"status-list"],["class","status-item",4,"ngFor","ngForOf"],[1,"status-item"],[1,"loc"],[1,"progress"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t.EFF(5,"Welcome"),t.k0s(),t.j41(6,"h2"),t.EFF(7,"Welcome To Bihar Special Armed Police Field Report"),t.k0s(),t.j41(8,"div",4)(9,"div",5)(10,"div")(11,"strong"),t.EFF(12,"User Id :"),t.k0s(),t.EFF(13),t.k0s(),t.j41(14,"div")(15,"strong"),t.EFF(16,"Contact No :"),t.k0s(),t.EFF(17),t.k0s()(),t.j41(18,"div",6)(19,"div")(20,"strong"),t.EFF(21,"Mobile No :"),t.k0s(),t.EFF(22),t.k0s(),t.j41(23,"div")(24,"strong"),t.EFF(25,"Joining Date :"),t.k0s(),t.EFF(26),t.k0s()()()(),t.j41(27,"div",7),t.nrm(28,"img",8),t.j41(29,"div",9),t.EFF(30),t.k0s()()(),t.DNE(31,tt,2,1,"div",10),t.k0s(),t.DNE(32,nt,6,1,"aside",11),t.k0s()),2&e&&(t.R7$(13),t.SpI(" ",o.user.email),t.R7$(4),t.SpI(" ",o.user.contact),t.R7$(5),t.SpI(" ",o.user.mobile),t.R7$(4),t.SpI(" ",o.user.joiningDate),t.R7$(4),t.JRh(o.user.name),t.R7$(),t.Y8G("ngIf",1==o.roleId),t.R7$(),t.Y8G("ngIf",1==o.roleId))},dependencies:[p.MD,p.Sq,p.bT,p.B3],styles:['.home-wrap[_ngcontent-%COMP%]{display:flex;gap:24px;padding:18px 28px}.main-area[_ngcontent-%COMP%]{flex:1 1 auto;background:transparent}.profile-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;margin-bottom:18px;border-bottom:3px solid rgba(0,0,0,.12)}.welcome[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;text-align:center}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:6px 0;line-height:1.08;font-weight:700;font-family:Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(1){color:#0b5ed7;font-size:22px}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(2){color:#16a34a;font-size:18px;font-weight:600}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(3){color:#ef4444;font-size:20px;font-weight:700}.user-meta[_ngcontent-%COMP%]{color:#475569;font-size:13px;margin-top:6px;display:flex;gap:36px;justify-content:center}.user-meta[_ngcontent-%COMP%]   .meta-left[_ngcontent-%COMP%], .user-meta[_ngcontent-%COMP%]   .meta-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start}.avatar[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;align-items:center;justify-content:center}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;background:#fff;padding:8px;border:4px solid rgba(2,6,23,.03)}.username[_ngcontent-%COMP%]{margin-top:6px;font-weight:600;color:#0f172a}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:20px}.info-card[_ngcontent-%COMP%]{min-height:72px;border-radius:12px;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:18px 20px;box-shadow:0 12px 28px #0206170f;text-align:left;transition:transform .18s ease,box-shadow .18s ease;overflow:hidden}.card-title[_ngcontent-%COMP%]{font-weight:600;text-transform:none;text-align:left}.card-count[_ngcontent-%COMP%]{background:#0000002e;color:#fff;padding:10px 14px;border-radius:10px;font-weight:800;margin-left:12px;min-width:48px;text-align:center}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 20px 40px #0206171f}.info-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,#0000000a,#00000014);opacity:1;pointer-events:none}.cards-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}.quote[_ngcontent-%COMP%]{margin-top:18px;color:#60a5fa;font-style:italic;text-align:center}.side-area[_ngcontent-%COMP%]{width:300px;background:#fff;border-radius:8px;padding:12px;box-shadow:0 8px 20px #0206170f;height:620px;display:flex;flex-direction:column}.side-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#0f172a}.side-sub[_ngcontent-%COMP%]{color:#94a3b8;margin:6px 0 12px}.status-list[_ngcontent-%COMP%]{margin-top:8px;flex:1 1 auto;overflow-y:auto;padding-right:6px;text-align:left}.status-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#ef4444;font-size:13px;padding:8px 6px;align-items:center}.status-item[_ngcontent-%COMP%]   .loc[_ngcontent-%COMP%]{flex:1 1 auto}.status-item[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-left:8px;color:#ef4444}@media (max-width: 960px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.side-area[_ngcontent-%COMP%]{display:none}}@media (max-width: 520px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}))}return r(),s})();var F=u(1413),y=u(8359);class ot extends y.yU{constructor(s,i){super()}schedule(s,i=0){return this}}const D={setInterval(r,s,...i){const{delegate:n}=D;return n?.setInterval?n.setInterval(r,s,...i):setInterval(r,s,...i)},clearInterval(r){const{delegate:s}=D;return(s?.clearInterval||clearInterval)(r)},delegate:void 0};var it=u(7908);const w={now:()=>(w.delegate||Date).now(),delegate:void 0};class O{constructor(s,i=O.now){this.schedulerActionCtor=s,this.now=i}schedule(s,i=0,n){return new this.schedulerActionCtor(this,s).schedule(n,i)}}O.now=w.now;const st=new class at extends O{constructor(s,i=O.now){super(s,i),this.actions=[],this._active=!1}flush(s){const{actions:i}=this;if(this._active)return void i.push(s);let n;this._active=!0;do{if(n=s.execute(s.state,s.delay))break}while(s=i.shift());if(this._active=!1,n){for(;s=i.shift();)s.unsubscribe();throw n}}}(class rt extends ot{constructor(s,i){super(s,i),this.scheduler=s,this.work=i,this.pending=!1}schedule(s,i=0){var n;if(this.closed)return this;this.state=s;const e=this.id,o=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(o,e,i)),this.pending=!0,this.delay=i,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,i),this}requestAsyncId(s,i,n=0){return D.setInterval(s.flush.bind(s,this),n)}recycleAsyncId(s,i,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return i;null!=i&&D.clearInterval(i)}execute(s,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(s,i);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,i){let e,n=!1;try{this.work(s)}catch(o){n=!0,e=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),e}unsubscribe(){if(!this.closed){const{id:s,scheduler:i}=this,{actions:n}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,it.o)(n,this),null!=s&&(this.id=this.recycleAsyncId(i,s,null)),this.delay=null,super.unsubscribe()}}});var N=u(9974),B=u(4360);function T(r,s=st){return(0,N.N)((i,n)=>{let e=null,o=null,c=null;const l=()=>{if(e){e.unsubscribe(),e=null;const P=o;o=null,n.next(P)}};function m(){const P=c+r,x=s.now();if(x<P)return e=this.schedule(void 0,P-x),void n.add(e);l()}i.subscribe((0,B._)(n,P=>{o=P,c=s.now(),e||(e=s.schedule(m,r),n.add(e))},()=>{l(),n.complete()},void 0,()=>{o=e=null}))})}var ct=u(3669);function R(r,s=ct.D){return r=r??lt,(0,N.N)((i,n)=>{let e,o=!0;i.subscribe((0,B._)(n,c=>{const l=s(c);(o||!r(e,l))&&(o=!1,e=l,n.next(c))}))})}function lt(r,s){return r===s}function dt(r,s){1&r&&(t.j41(0,"div",29),t.nrm(1,"div",30),t.j41(2,"p"),t.EFF(3,"Loading users..."),t.k0s()())}function _t(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",37),t.EFF(9),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.k0s(),t.j41(16,"td"),t.EFF(17),t.k0s(),t.j41(18,"td")(19,"span",38),t.EFF(20),t.k0s()(),t.j41(21,"td")(22,"div",39)(23,"button",40),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.editUser(e))}),t.EFF(24,"Edit"),t.k0s(),t.j41(25,"button",41),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.toggleUserStatus(e))}),t.EFF(26),t.k0s()()()()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(n.getFullName(i)),t.R7$(2),t.JRh(i.email),t.R7$(3),t.JRh(n.getRoleName(i.roleId)),t.R7$(2),t.JRh(i.mobileNo),t.R7$(2),t.JRh(n.getStateName(i.stateId)),t.R7$(2),t.JRh(n.getRangeName(i.rangeId)),t.R7$(2),t.JRh((null==i.battalion?null:i.battalion.battalionName)||n.getBattalionName(i.battalionId)),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function ut(r,s){1&r&&(t.j41(0,"tr")(1,"td",42),t.EFF(2,"No users found"),t.k0s()())}function pt(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",31)(1,"table",32)(2,"thead")(3,"tr")(4,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("id"))}),t.EFF(5," Id "),t.j41(6,"span",34),t.EFF(7),t.k0s()(),t.j41(8,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("name"))}),t.EFF(9," Name "),t.j41(10,"span",34),t.EFF(11),t.k0s()(),t.j41(12,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("email"))}),t.EFF(13," Email "),t.j41(14,"span",34),t.EFF(15),t.k0s()(),t.j41(16,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("role"))}),t.EFF(17," Role "),t.j41(18,"span",34),t.EFF(19),t.k0s()(),t.j41(20,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("phone"))}),t.EFF(21," Phone "),t.j41(22,"span",34),t.EFF(23),t.k0s()(),t.j41(24,"th"),t.EFF(25,"State"),t.k0s(),t.j41(26,"th"),t.EFF(27,"Zone"),t.k0s(),t.j41(28,"th"),t.EFF(29,"Battalion"),t.k0s(),t.j41(30,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("active"))}),t.EFF(31," Active "),t.j41(32,"span",34),t.EFF(33),t.k0s()(),t.j41(34,"th"),t.EFF(35,"Actions"),t.k0s()()(),t.j41(36,"tbody"),t.DNE(37,_t,27,16,"tr",35)(38,ut,3,0,"tr",36),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(6),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","name"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","email"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","role"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","phone"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(9),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedUsers)("ngForTrackBy",i.trackByUserId),t.R7$(),t.Y8G("ngIf",0===i.paginatedUsers.length)}}function gt(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.AVh("active",i===n.currentPage)("ellipsis",-1===i),t.R7$(),t.SpI(" ",-1===i?"...":i," ")}}function mt(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",43)(1,"div",44),t.EFF(2),t.k0s(),t.j41(3,"div",45)(4,"button",46),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.previousPage())}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,gt,2,5,"button",47),t.j41(7,"button",46),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.nextPage())}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(2),t.E5c(" Showing ",i.showingStart," to ",i.showingEnd," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages)}}function ht(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," First name is required "),t.k0s())}function ft(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," First name must contain only letters and spaces "),t.k0s())}function bt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Last name is required "),t.k0s())}function Mt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Last name must contain only letters and spaces "),t.k0s())}function Ct(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Email is required "),t.k0s())}function Pt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Please enter a valid email address "),t.k0s())}function xt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Mobile number is required "),t.k0s())}function vt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Mobile number must be 10 digits "),t.k0s())}function Et(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Contact number must be 7 to 13 digits "),t.k0s())}function Ot(r,s){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.roleName)}}function kt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Role is required "),t.k0s())}function Ft(r,s){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.stateName)}}function Dt(r,s){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.rangeName)}}function Tt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Password is required "),t.k0s())}function Rt(r,s){1&r&&(t.j41(0,"div",96),t.EFF(1," Password must be min 8 chars, include uppercase, lowercase and a digit "),t.k0s())}function St(r,s){if(1&r&&(t.j41(0,"option",97),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.battalionName)}}function It(r,s){1&r&&t.nrm(0,"span",30)}function jt(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",49),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",50),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",51)(3,"div",52)(4,"h4",53),t.EFF(5),t.k0s(),t.j41(6,"button",54),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",55)(10,"form",56,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateUser():e.addUser())}),t.j41(12,"div",57)(13,"div",58)(14,"label",59),t.EFF(15,"First Name"),t.k0s(),t.j41(16,"input",60,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.firstName,e)||(o.currentUser.firstName=e),a.Njj(e)}),t.k0s(),t.DNE(18,ht,2,0,"div",61)(19,ft,2,0,"div",61),t.k0s(),t.j41(20,"div",58)(21,"label",62),t.EFF(22,"Last Name"),t.k0s(),t.j41(23,"input",63,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.lastName,e)||(o.currentUser.lastName=e),a.Njj(e)}),t.k0s(),t.DNE(25,bt,2,0,"div",61)(26,Mt,2,0,"div",61),t.k0s()(),t.j41(27,"div",58)(28,"label",64),t.EFF(29,"Email"),t.k0s(),t.j41(30,"input",65,3),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.email,e)||(o.currentUser.email=e),a.Njj(e)}),t.k0s(),t.DNE(32,Ct,2,0,"div",61)(33,Pt,2,0,"div",61),t.k0s(),t.j41(34,"div",58)(35,"label",66),t.EFF(36,"Mobile Number"),t.k0s(),t.j41(37,"input",67,4),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.mobileNo,e)||(o.currentUser.mobileNo=e),a.Njj(e)}),t.k0s(),t.DNE(39,xt,2,0,"div",61)(40,vt,2,0,"div",61),t.k0s(),t.j41(41,"div",58)(42,"label",68),t.EFF(43,"Contact Number"),t.k0s(),t.j41(44,"input",69),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.contactNo,e)||(o.currentUser.contactNo=e),a.Njj(e)}),t.k0s(),t.DNE(45,Et,2,0,"div",61),t.k0s(),t.j41(46,"div",58)(47,"label",70),t.EFF(48,"Role"),t.k0s(),t.j41(49,"select",71,5),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.roleId,e)||(o.currentUser.roleId=e),a.Njj(e)}),t.j41(51,"option",72),t.EFF(52,"Select Role"),t.k0s(),t.DNE(53,Ot,2,2,"option",73),t.k0s(),t.DNE(54,kt,2,0,"div",61),t.k0s(),t.j41(55,"div",57)(56,"div",58)(57,"label",74),t.EFF(58,"State"),t.k0s(),t.j41(59,"select",75),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.stateId,e)||(o.currentUser.stateId=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.onStateChange(e.currentUser.stateId))}),t.j41(60,"option",72),t.EFF(61,"Select State"),t.k0s(),t.DNE(62,Ft,2,2,"option",73),t.k0s()(),t.j41(63,"div",58)(64,"label",76),t.EFF(65,"Range"),t.k0s(),t.j41(66,"select",77),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.rangeId,e)||(o.currentUser.rangeId=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.onRangeChange(e.currentUser.rangeId??0))}),t.j41(67,"option",72),t.EFF(68,"Select Range"),t.k0s(),t.DNE(69,Dt,2,2,"option",73),t.k0s()()(),t.j41(70,"div",58)(71,"label",78),t.EFF(72,"Password"),t.k0s(),t.j41(73,"input",79,6),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.password,e)||(o.currentUser.password=e),a.Njj(e)}),t.k0s(),t.DNE(75,Tt,2,0,"div",61)(76,Rt,2,0,"div",61),t.k0s(),t.j41(77,"div",58)(78,"label",80),t.EFF(79,"Joining Date"),t.k0s(),t.j41(80,"input",81),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.joiningDate,e)||(o.currentUser.joiningDate=e),a.Njj(e)}),t.k0s()(),t.j41(81,"div",58)(82,"label",82),t.EFF(83,"End Date"),t.k0s(),t.j41(84,"input",83),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.endDate,e)||(o.currentUser.endDate=e),a.Njj(e)}),t.k0s()(),t.j41(85,"div",58)(86,"label",84),t.EFF(87,"User Image"),t.k0s(),t.j41(88,"input",85),t.bIt("change",function(e){a.eBV(i);const o=t.XpG();return a.Njj(o.onUserImageSelected(e))}),t.k0s()(),t.j41(89,"div",58)(90,"label",86),t.EFF(91,"Battalion"),t.k0s(),t.j41(92,"select",87),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.battalionId,e)||(o.currentUser.battalionId=e),a.Njj(e)}),t.j41(93,"option",72),t.EFF(94,"Select Battalion"),t.k0s(),t.DNE(95,St,2,2,"option",73),t.k0s()(),t.j41(96,"div",58)(97,"div",88)(98,"label",89)(99,"input",90),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentUser.active,e)||(o.currentUser.active=e),a.Njj(e)}),t.k0s(),t.j41(100,"span",91),t.EFF(101,"Active"),t.k0s()()()(),t.j41(102,"div",92)(103,"button",93),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(104," Close "),t.k0s(),t.j41(105,"button",94),t.DNE(106,It,1,0,"span",95),t.EFF(107),t.k0s()()()()()()()}if(2&r){const i=t.sdS(17),n=t.sdS(24),e=t.sdS(31),o=t.sdS(38),c=t.sdS(50),l=t.sdS(74),m=t.XpG();t.R7$(5),t.JRh(m.isEditMode?"Edit User":"Add User"),t.R7$(11),t.AVh("error",i.touched&&((null==i.errors?null:i.errors.required)||(null==i.errors?null:i.errors.pattern))),t.R50("ngModel",m.currentUser.firstName),t.R7$(2),t.Y8G("ngIf",i.touched&&(null==i.errors?null:i.errors.required)),t.R7$(),t.Y8G("ngIf",i.touched&&(null==i.errors?null:i.errors.pattern)),t.R7$(4),t.AVh("error",n.touched&&((null==n.errors?null:n.errors.required)||(null==n.errors?null:n.errors.pattern))),t.R50("ngModel",m.currentUser.lastName),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.pattern)),t.R7$(4),t.AVh("error",e.touched&&((null==e.errors?null:e.errors.required)||(null==e.errors?null:e.errors.email))),t.R50("ngModel",m.currentUser.email),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.email)),t.R7$(4),t.AVh("error",o.touched&&((null==o.errors?null:o.errors.required)||(null==o.errors?null:o.errors.pattern))),t.R50("ngModel",m.currentUser.mobileNo),t.R7$(2),t.Y8G("ngIf",o.touched&&(null==o.errors?null:o.errors.required)),t.R7$(),t.Y8G("ngIf",o.touched&&(null==o.errors?null:o.errors.pattern)),t.R7$(4),t.R50("ngModel",m.currentUser.contactNo),t.R7$(),t.Y8G("ngIf",m.currentUser.contactNo&&!m.currentUser.contactNo.match("^[0-9]{7,13}$")),t.R7$(4),t.AVh("error",c.touched&&(null==c.errors?null:c.errors.required)),t.R50("ngModel",m.currentUser.roleId),t.R7$(4),t.Y8G("ngForOf",m.roles),t.R7$(),t.Y8G("ngIf",c.touched&&(null==c.errors?null:c.errors.required)),t.R7$(5),t.R50("ngModel",m.currentUser.stateId),t.R7$(3),t.Y8G("ngForOf",m.states),t.R7$(4),t.R50("ngModel",m.currentUser.rangeId),t.R7$(3),t.Y8G("ngForOf",m.ranges),t.R7$(4),t.AVh("error",l.touched&&((null==l.errors?null:l.errors.required)||(null==l.errors?null:l.errors.pattern))),t.R50("ngModel",m.currentUser.password),t.Y8G("required",!m.isEditMode),t.R7$(2),t.Y8G("ngIf",l.touched&&(null==l.errors?null:l.errors.required)),t.R7$(),t.Y8G("ngIf",l.touched&&(null==l.errors?null:l.errors.pattern)),t.R7$(4),t.R50("ngModel",m.currentUser.joiningDate),t.R7$(4),t.R50("ngModel",m.currentUser.endDate),t.R7$(8),t.R50("ngModel",m.currentUser.battalionId),t.R7$(3),t.Y8G("ngForOf",m.battalions),t.R7$(4),t.R50("ngModel",m.currentUser.active),t.R7$(7),t.Y8G("ngIf",m.isLoading),t.R7$(),t.SpI(" ",m.isEditMode?"Update":"Save"," ")}}let yt=(()=>{var r;class s{constructor(n){this.apiService=n,this.users=[],this.filteredUsers=[],this.paginatedUsers=[],this.showModal=!1,this.currentUser=this.createEmptyUser(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.roles=[],this.states=[],this.districts=[],this.ranges=[],this.battalions=[],this.searchSubject=new F.B,this.Math=Math}ngOnInit(){this.setupSearchDebouncing(),this.loadUsers(),this.loadDropdownData()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearchDebouncing(){this.searchSubscription=this.searchSubject.pipe(T(500),R()).subscribe(n=>{this.performSearch(n)})}onSearchInput(){this.searchSubject.next(this.searchTerm)}performSearch(n){this.currentPage=1,this.loadUsers()}onSearch(){this.searchSubject.next(this.searchTerm)}clearSearch(){this.searchTerm="",this.currentPage=1,this.loadUsers()}loadUsers(){this.isLoading=!0,this.apiService.getUsers(this.currentPage,this.itemsPerPage,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.users=n.data||[],this.totalItems=n.pagination?.total||0,this.totalPages=n.pagination?.totalPages||0,this.updateFilteredData())},error:n=>{this.isLoading=!1,console.error("Error loading users:",n)}})}loadDropdownData(){this.apiService.getActiveRoles().subscribe({next:n=>{"SUCCESS"===n.status&&(this.roles=n.data||[])},error:n=>{console.error("Error loading roles:",n)}}),this.apiService.getActiveStates().subscribe({next:n=>{"SUCCESS"===n.status&&(this.states=n.data||[])},error:n=>{console.error("Error loading states:",n)}}),this.apiService.getRanges(1,100).subscribe({next:n=>{"SUCCESS"===n.status&&(this.ranges=n.data||[])},error:n=>{console.error("Error loading ranges:",n)}})}loadBattalions(n){this.apiService.getBattalionsByRange(n).subscribe({next:e=>{this.battalions=e.data||[]},error:e=>{console.error("Error loading battalions by range:",e),this.battalions=[]}})}createEmptyUser(){return{id:0,firstName:"",lastName:"",email:"",mobileNo:"",contactNo:"",userImage:"",stateId:void 0,rangeId:void 0,districtId:void 0,roleId:0,password:"",verified:!1,isFirst:!0,joiningDate:"",endDate:"",numberSubdivision:0,numberCircle:0,numberPs:0,numberOp:0,active:!0}}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadUsers()}updateFilteredData(){this.filteredUsers=[...this.users],this.updatePaginatedData()}updatePaginatedData(){this.paginatedUsers=[...this.users]}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadUsers())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadUsers())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadUsers())}getVisiblePages(){const n=[];if(this.totalPages<=5)for(let o=1;o<=this.totalPages;o++)n.push(o);else{const o=Math.floor(2.5);let c=Math.max(1,this.currentPage-o),l=Math.min(this.totalPages,this.currentPage+o);this.currentPage<=o?l=5:this.currentPage>this.totalPages-o&&(c=this.totalPages-5+1),c>1&&(n.push(1),c>2&&n.push(-1));for(let m=c;m<=l;m++)n.push(m);l<this.totalPages&&(l<this.totalPages-1&&n.push(-1),n.push(this.totalPages))}return n}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadUsers()}getSortByField(){return{id:"id",name:"firstName",email:"email",role:"roleId",phone:"mobileNo",department:"districtId",active:"active"}[this.sortColumn]||"firstName"}showAddUserModal(){this.isEditMode=!1,this.currentUser=this.createEmptyUser(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentUser=this.createEmptyUser(),this.isEditMode=!1,this.districts=[]}editUser(n){this.isEditMode=!0,this.currentUser={...n},this.showModal=!0}toggleUserStatus(n){this.apiService.toggleUserStatus(n.id,!n.active).subscribe({next:e=>{if("SUCCESS"===e.status){const o=this.users.findIndex(c=>c.id===n.id);-1!==o&&(this.users[o].active=!n.active),this.updateFilteredData()}},error:e=>{console.error("Error toggling user status:",e)}})}onRangeChange(n){this.currentUser.rangeId=n,this.loadBattalions(n)}onStateChange(n){n?this.apiService.getRanges(1,100,"","","",n).subscribe({next:e=>{this.ranges=e.data||[]},error:e=>{console.error("Error loading ranges for state:",e),this.ranges=[]}}):this.ranges=[]}onUserImageSelected(n){const e=n.target.files&&n.target.files[0];if(!e)return;if(!["image/jpeg","image/png","image/jpg"].includes(e.type))return void console.error("Invalid file type for user image");const c=new FileReader;c.onload=()=>{this.currentUser.userImage=c.result},c.readAsDataURL(e)}addUser(){this.isLoading||(this.isLoading=!0,this.apiService.createUser(this.currentUser).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadUsers())},error:n=>{this.isLoading=!1,console.error("Error creating user:",n)}}))}updateUser(){this.isLoading||(this.isLoading=!0,this.apiService.updateUser(this.currentUser.id,this.currentUser).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.currentUser.password&&""!==this.currentUser.password.trim()?this.changePassword(this.currentUser.id,this.currentUser.password):(this.closeModal(),this.loadUsers()))},error:n=>{this.isLoading=!1,console.error("Error updating user:",n)}}))}changePassword(n,e){!e||e.length<6?alert("Password must be at least 6 characters long"):(this.isLoading=!0,this.apiService.changeUserPassword(n,e).subscribe({next:o=>{this.isLoading=!1,"SUCCESS"===o.status?(alert("Password updated successfully"),this.closeModal(),this.loadUsers()):alert(o.message||"Password update failed")},error:o=>{this.isLoading=!1,console.error("Error changing password:",o),alert(o.error?.message||"Failed to change password")}}))}get showingStart(){return(this.currentPage-1)*this.itemsPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.totalItems)}getFullName(n){return`${n.firstName} ${n.lastName}`.trim()}getRoleName(n){const e=this.roles.find(o=>o.id===n);return e?e.roleName:"Unknown"}getStateName(n){if(!n)return"-";const e=this.states.find(o=>o.id===n);return e?e.stateName:"Unknown"}getDistrictName(n){if(!n)return"-";const e=this.districts.find(o=>o.id===n);return e?e.districtName:"Unknown"}getRangeName(n){if(!n)return"-";const e=this.ranges.find(o=>o.id===n);return e?e.rangeName:"Unknown"}getBattalionName(n){if(!n)return"-";const e=this.battalions.find(o=>o.id===n);return e?e.battalionName:"Unknown"}trackByUserId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-users"]],standalone:!1,decls:36,vars:6,consts:[["userForm","ngForm"],["firstName","ngModel"],["lastName","ngModel"],["userEmail","ngModel"],["mobileNo","ngModel"],["userRole","ngModel"],["password","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search users...",3,"ngModelChange","input","keyup.enter","ngModel"],[1,"clear-search-btn","p-1",3,"click"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"role-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","10",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","ellipsis","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","firstName",1,"required"],["type","text","id","firstName","name","firstName","required","","pattern","^[A-Za-z\\s]+$",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","lastName",1,"required"],["type","text","id","lastName","name","lastName","required","","pattern","^[A-Za-z\\s]+$",1,"form-control",3,"ngModelChange","ngModel"],["for","userEmail",1,"required"],["type","email","id","userEmail","name","userEmail","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["for","mobileNo",1,"required"],["type","tel","id","mobileNo","name","mobileNo","required","","pattern","[0-9]{10}","maxlength","10",1,"form-control",3,"ngModelChange","ngModel"],["for","contactNo"],["type","tel","id","contactNo","name","contactNo","pattern","[0-9]{7,13}",1,"form-control",3,"ngModelChange","ngModel"],["for","userRole",1,"required"],["id","userRole","name","userRole","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","state"],["id","state","name","state",1,"form-control",3,"ngModelChange","change","ngModel"],["for","range"],["id","range","name","range",1,"form-control",3,"ngModelChange","change","ngModel"],["for","password",1,"required"],["type","password","id","password","name","password","pattern","(?=.{8,})(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).*",1,"form-control",3,"ngModelChange","ngModel","required"],["for","joiningDate",1,"required"],["type","date","id","joiningDate","name","joiningDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate","name","endDate","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["for","userImage"],["type","file","id","userImage","name","userImage","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"change"],["for","battalion"],["id","battalion","name","battalion",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","userActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn"],["class","spinner",4,"ngIf"],[1,"error-message"],[3,"value"]],template:function(e,o){1&e&&(t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10),t.EFF(4,"\u{1f465}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Users"),t.k0s()(),t.j41(7,"button",11),t.bIt("click",function(){return o.showAddUserModal()}),t.EFF(8,"Add User"),t.k0s()(),t.j41(9,"div",12)(10,"div",13)(11,"label",14),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",15),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",16),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",17),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",18),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",19),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",20),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",21)(27,"label",22),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",23),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearchInput()})("keyup.enter",function(){return o.onSearch()}),t.k0s(),t.j41(30,"button",24),t.bIt("click",function(){return o.clearSearch()}),t.EFF(31,"Clear"),t.k0s()()(),t.DNE(32,dt,4,0,"div",25)(33,pt,39,21,"div",26)(34,mt,9,6,"div",27),t.k0s(),t.DNE(35,jt,108,45,"div",28)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(3),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading&&o.users.length>0),t.R7$(),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.tU,d.R_,d.Dg,d.vS,d.cV],styles:[".users-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b;font-size:1.75rem;font-weight:700;margin:0}.add-user-btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.add-user-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8}.users-table-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;color:#374151;font-weight:600;padding:1rem;text-align:left;border-bottom:1px solid #e5e7eb}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f5f9;color:#1e293b}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.inactive[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border:none;border-radius:4px;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .2s ease}.action-btn.edit[_ngcontent-%COMP%]{background:#fbbf24;color:#fff}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#f59e0b}.action-btn.delete[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#dc2626}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.users-table[_ngcontent-%COMP%]{min-width:800px}@media (max-width: 992px){.users-container[_ngcontent-%COMP%]{padding:1.5rem}.users-table[_ngcontent-%COMP%]{min-width:700px}}@media (max-width: 768px){.users-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}.add-user-btn[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem}.users-table-card[_ngcontent-%COMP%]{overflow-x:auto;margin:0 -1rem;border-radius:0}.users-table[_ngcontent-%COMP%]{min-width:600px;font-size:14px}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.action-btn[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}.status-badge[_ngcontent-%COMP%]{font-size:.7rem;padding:.2rem .5rem}}@media (max-width: 576px){.users-container[_ngcontent-%COMP%]{padding:.5rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.users-table[_ngcontent-%COMP%]{min-width:500px;font-size:12px}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem}.users-table-card[_ngcontent-%COMP%]{margin:0 -.5rem}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;margin:0 auto}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}.close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:25px 30px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{max-width:100%}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}}"]}))}return r(),s})(),U=(()=>{var r;class s{constructor(){this.settings={notifications:!0,darkMode:!1,language:"en",autoSave:!0}}updateSetting(n,e){this.settings[n]=e}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)},this.\u0275cmp=t.VBU({type:s,selectors:[["app-settings"]],decls:46,vars:4,consts:[["notificationsInput",""],["darkModeInput",""],["languageSelect",""],["autoSaveInput",""],[1,"settings-container"],[1,"page-header"],[1,"settings-grid"],[1,"settings-card"],[1,"setting-item"],[1,"setting-label"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"setting-select",3,"change","value"],["value","en"],["value","es"],["value","fr"]],template:function(e,o){if(1&e){const c=t.RV6();t.rj2(0,"div",4)(1,"div",5)(2,"h1"),t.EFF(3,"Settings"),t.eux(),t.rj2(4,"p"),t.EFF(5,"Manage your application preferences and configurations."),t.eux()(),t.rj2(6,"div",6)(7,"div",7)(8,"h3"),t.EFF(9,"Notifications"),t.eux(),t.rj2(10,"div",8)(11,"label",9)(12,"input",10,0),t.VwU("change",function(){a.eBV(c);const m=t.sdS(13);return a.Njj(o.updateSetting("notifications",m.checked))}),t.eux(),t.Hgh(14,"span",11),t.EFF(15," Enable push notifications "),t.eux()()(),t.rj2(16,"div",7)(17,"h3"),t.EFF(18,"Appearance"),t.eux(),t.rj2(19,"div",8)(20,"label",9)(21,"input",10,1),t.VwU("change",function(){a.eBV(c);const m=t.sdS(22);return a.Njj(o.updateSetting("darkMode",m.checked))}),t.eux(),t.Hgh(23,"span",11),t.EFF(24," Dark mode "),t.eux()()(),t.rj2(25,"div",7)(26,"h3"),t.EFF(27,"Language"),t.eux(),t.rj2(28,"div",8)(29,"select",12,2),t.VwU("change",function(){a.eBV(c);const m=t.sdS(30);return a.Njj(o.updateSetting("language",m.value))}),t.rj2(31,"option",13),t.EFF(32,"English"),t.eux(),t.rj2(33,"option",14),t.EFF(34,"Spanish"),t.eux(),t.rj2(35,"option",15),t.EFF(36,"French"),t.eux()()()(),t.rj2(37,"div",7)(38,"h3"),t.EFF(39,"Auto Save"),t.eux(),t.rj2(40,"div",8)(41,"label",9)(42,"input",10,3),t.VwU("change",function(){a.eBV(c);const m=t.sdS(43);return a.Njj(o.updateSetting("autoSave",m.checked))}),t.eux(),t.Hgh(44,"span",11),t.EFF(45," Automatically save changes "),t.eux()()()()()}2&e&&(t.R7$(12),t.Avn("checked",o.settings.notifications),t.R7$(9),t.Avn("checked",o.settings.darkMode),t.R7$(8),t.Avn("value",o.settings.language),t.R7$(13),t.Avn("checked",o.settings.autoSave))},dependencies:[p.MD],styles:['.settings-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b;font-size:1.75rem;font-weight:700;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem}.settings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.settings-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 1px 3px #0000001a}.settings-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;font-size:1.125rem;font-weight:600;margin-bottom:1rem}.setting-item[_ngcontent-%COMP%]{margin-bottom:1rem}.setting-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;color:#374151;font-weight:500}.setting-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.checkmark[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #d1d5db;border-radius:4px;margin-right:.75rem;position:relative;transition:all .2s ease}.setting-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb}.setting-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:700}.setting-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .3s ease}.setting-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:1rem}.settings-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}))}return r(),s})(),$=(()=>{var r;class s{constructor(n,e){this.authService=n,this.router=e,this.user=null}ngOnInit(){this.loadUserProfile()}loadUserProfile(){if(this.authService.user$.subscribe(n=>{this.user=n}),!this.user){const n=localStorage.getItem("email")||localStorage.getItem("userEmail"),e=localStorage.getItem("firstName"),o=localStorage.getItem("lastName"),c=localStorage.getItem("roleName");this.user={id:0,firstName:e||"",lastName:o||"",email:n||"",role:{id:0,roleName:c||""},permissions:[]}}}getUserDisplayName(){if(this.user?.firstName)return this.user.firstName;const n=localStorage.getItem("firstName");if(n)return n;const e=this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail");return e?e.split("@")[0]:"User"}getUserInitial(){const n=this.user?.firstName||localStorage.getItem("firstName");if(n)return n.substring(0,2).toUpperCase();const e=this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail");return e?e.substring(0,2).toUpperCase():"US"}getUserEmail(){return this.user?.email||localStorage.getItem("email")||localStorage.getItem("userEmail")||""}getUserRole(){return this.user?.role?.roleName||localStorage.getItem("roleName")||""}getUserJoinDate(){if(this.user?.created_date)return new Date(this.user.created_date).toLocaleString();const n=localStorage.getItem("joinDate");return n?new Date(n).toLocaleString():"Date not Available"}getUserAvatar(){return"https://ui-avatars.com/api/?name="+encodeURIComponent(this.getUserDisplayName())+"&background=6366f1&color=fff&size=80"}onSave(){console.log("Profile updated:",this.user)}goback(){this.router.navigate(["/dashboard"])}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(f.u),t.rXU(M.Ix))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-profile"]],decls:31,vars:5,consts:[[1,"profile-container"],[1,"page-header"],[1,"profile-content"],[1,"profile-card"],[1,"profile-avatar"],[1,"avatar-placeholder"],[1,"profile-form"],[1,"form-row"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","Enter your full name",3,"value"],["for","email"],["type","email","id","email","name","email","placeholder","Enter your email",3,"value"],["for","role"],["type","text","id","role","readonly","",1,"readonly",3,"value"],["for","joinDate"],["type","text","id","joinDate","readonly","",1,"readonly",3,"value"],[1,"form-actions"],["type","button",1,"save-btn",3,"click"]],template:function(e,o){1&e&&(t.rj2(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Profile"),t.eux()(),t.rj2(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),t.EFF(8),t.eux()(),t.rj2(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),t.EFF(13,"Full Name"),t.eux(),t.Hgh(14,"input",10),t.eux(),t.rj2(15,"div",8)(16,"label",11),t.EFF(17,"Email Address"),t.eux(),t.Hgh(18,"input",12),t.eux()(),t.rj2(19,"div",7)(20,"div",8)(21,"label",13),t.EFF(22,"Role"),t.eux(),t.Hgh(23,"input",14),t.eux(),t.rj2(24,"div",8)(25,"label",15),t.EFF(26,"Member Since"),t.eux(),t.Hgh(27,"input",16),t.eux()(),t.rj2(28,"div",17)(29,"button",18),t.VwU("click",function(){return o.goback()}),t.EFF(30," Back to Dashboard "),t.eux()()()()()()),2&e&&(t.R7$(8),t.SpI(" ",o.getUserInitial()," "),t.R7$(6),t.Avn("value",o.getUserDisplayName()),t.R7$(4),t.Avn("value",o.getUserEmail()),t.R7$(5),t.Avn("value",o.getUserRole()),t.R7$(4),t.Avn("value",o.getUserJoinDate()))},dependencies:[p.MD,d.YN],styles:[".profile-container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b;font-size:1.75rem;font-weight:700;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 1px 3px #0000001a}.profile-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem}.avatar-placeholder[_ngcontent-%COMP%]{width:100px;height:100px;background:#2563eb;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin-bottom:1rem}.change-avatar-btn[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:none;padding:.5rem 1rem;border-radius:6px;font-size:.875rem;cursor:pointer;transition:background-color .2s ease}.change-avatar-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.profile-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#374151;font-weight:500;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}.form-group[_ngcontent-%COMP%]   input.readonly[_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.save-btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.save-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8}.cancel-btn[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"]}))}return r(),s})();function wt(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){a.eBV(i);const e=t.XpG().$implicit,o=t.XpG();return a.Njj(o.deactivateRole(e))}),t.EFF(1," Deactivate "),t.k0s()}if(2&r){const i=t.XpG().$implicit;t.AVh("activate",!i.active)}}function Nt(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",37),t.bIt("click",function(){a.eBV(i);const e=t.XpG().$implicit,o=t.XpG();return a.Njj(o.activateRole(e))}),t.EFF(1," Activate "),t.k0s()}}function Bt(r,s){1&r&&(t.j41(0,"div",59),t.EFF(1,"Role name is required"),t.k0s())}function Ut(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",38),t.bIt("click",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.closeRoleModal())}),t.j41(1,"div",39),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",40)(3,"div",41)(4,"h4",42),t.EFF(5),t.k0s(),t.j41(6,"button",43),t.bIt("click",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.closeRoleModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",44)(10,"form",45,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.isRoleEditMode?e.updateRole():e.addRole())}),t.j41(12,"div",46)(13,"label",47),t.EFF(14,"Role Name "),t.j41(15,"span",48),t.EFF(16,"*"),t.k0s()(),t.j41(17,"input",49,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(2);return t.DH7(o.currentRole.roleName,e)||(o.currentRole.roleName=e),a.Njj(e)}),t.k0s(),t.DNE(19,Bt,2,0,"div",50),t.k0s(),t.j41(20,"div",46)(21,"label",51),t.EFF(22,"Description"),t.k0s(),t.j41(23,"input",52),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(2);return t.DH7(o.currentRole.description,e)||(o.currentRole.description=e),a.Njj(e)}),t.k0s()(),t.j41(24,"div",46)(25,"label",53)(26,"input",54),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(2);return t.DH7(o.currentRole.active,e)||(o.currentRole.active=e),a.Njj(e)}),t.k0s(),t.j41(27,"span",55),t.EFF(28,"Active"),t.k0s()()(),t.j41(29,"div",56)(30,"button",57),t.bIt("click",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.closeRoleModal())}),t.EFF(31,"Close"),t.k0s(),t.j41(32,"button",58),t.EFF(33),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(18),e=t.XpG(2);t.R7$(5),t.JRh(e.isRoleEditMode?"Edit Role":"Add Role"),t.R7$(12),t.R50("ngModel",e.currentRole.roleName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",e.currentRole.description),t.R7$(3),t.R50("ngModel",e.currentRole.active),t.R7$(6),t.Y8G("disabled",i.invalid),t.R7$(),t.JRh(e.isRoleEditMode?"Update":"Save")}}function $t(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",29),t.EFF(7),t.k0s()(),t.j41(8,"td")(9,"div",30)(10,"button",31),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.showEditRoleModal(e))}),t.EFF(11,"Edit"),t.k0s(),t.j41(12,"button",32),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.navigateToRolePermissions(e.id))}),t.EFF(13,"Permissions"),t.k0s(),t.DNE(14,wt,2,2,"button",33)(15,Nt,2,0,"button",34),t.k0s(),t.DNE(16,Ut,34,7,"div",35),t.k0s()()}if(2&r){const i=s.$implicit,n=t.XpG();t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.roleName),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(7),t.Y8G("ngIf",i.active),t.R7$(),t.Y8G("ngIf",!i.active),t.R7$(),t.Y8G("ngIf",n.showRoleModal)}}function At(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",60),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}let Lt=(()=>{var r;class s{constructor(n,e){this.apiService=n,this.router=e,this.roles=[],this.filteredRoles=[],this.paginatedRoles=[],this.currentRole=this.createEmptyRole(),this.showRoleModal=!1,this.isRoleEditMode=!1,this.searchTerm="",this.pageSize=10,this.currentPage=1,this.totalRoles=0,this.originalTotalRoles=0,this.sortColumn="",this.sortDirection="asc"}ngOnInit(){this.loadRoles()}loadRoles(){this.apiService.getRoles(1,100).subscribe({next:n=>{this.roles=n.data||[],this.filteredRoles=[...this.roles],this.totalRoles=this.filteredRoles.length,this.updatePaginatedRoles()},error:n=>{this.roles=[],this.filteredRoles=[],this.totalRoles=0,this.updatePaginatedRoles()}})}createEmptyRole(){return{id:0,roleName:"",description:"",active:!0}}showAddRoleModal(){this.isRoleEditMode=!1,this.currentRole=this.createEmptyRole(),this.showRoleModal=!0}showEditRoleModal(n){this.isRoleEditMode=!0,this.currentRole={...n},this.showRoleModal=!0}closeRoleModal(){this.showRoleModal=!1,this.currentRole=this.createEmptyRole(),this.isRoleEditMode=!1}addRole(){this.apiService.createRole(this.currentRole).subscribe({next:n=>{"SUCCESS"===n.status&&(this.closeRoleModal(),this.loadRoles())}})}updateRole(){this.apiService.updateRole(this.currentRole.id,this.currentRole).subscribe({next:n=>{"SUCCESS"===n.status&&(this.closeRoleModal(),this.loadRoles())}})}deleteRole(n){confirm("Are you sure you want to delete this role?")&&this.apiService.deleteRole(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadRoles()}})}activateRole(n){this.apiService.activateRole(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadRoles()}})}deactivateRole(n){this.apiService.deactivateRole(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadRoles()}})}onSearch(){if(this.searchTerm.trim()){const n=this.searchTerm.toLowerCase();this.filteredRoles=this.roles.filter(e=>e.id.toString().includes(n)||e.roleName.toLowerCase().includes(n)||(e.active?"yes":"no").includes(n))}else this.filteredRoles=[...this.roles];this.totalRoles=this.filteredRoles.length,this.currentPage=1,this.updatePaginatedRoles()}onPageSizeChange(){this.currentPage=1,this.updatePaginatedRoles()}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.filteredRoles.sort((e,o)=>{let c,l;switch(n){case"id":c=e.id,l=o.id;break;case"roleName":c=e.roleName.toLowerCase(),l=o.roleName.toLowerCase();break;case"active":c=e.active,l=o.active;break;default:return 0}return c<l?"asc"===this.sortDirection?-1:1:c>l?"asc"===this.sortDirection?1:-1:0}),this.updatePaginatedRoles()}updatePaginatedRoles(){const n=(this.currentPage-1)*this.pageSize;this.paginatedRoles=this.filteredRoles.slice(n,n+this.pageSize)}goToPage(n){n>=1&&n<=this.getTotalPages()&&(this.currentPage=n,this.updatePaginatedRoles())}getTotalPages(){return Math.ceil(this.totalRoles/this.pageSize)}getVisiblePages(){const n=this.getTotalPages(),e=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(n,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1));for(let m=c;m<=l;m++)e.push(m);return e}getStartRecord(){return 0===this.totalRoles?0:(this.currentPage-1)*this.pageSize+1}getEndRecord(){return Math.min(this.currentPage*this.pageSize,this.totalRoles)}navigateToRolePermissions(n){this.router.navigate(["/dashboard/role-permissions"],{queryParams:{roleId:n}})}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G),t.rXU(M.Ix))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-role"]],standalone:!1,decls:59,vars:18,consts:[["roleForm","ngForm"],["roleNameInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search roles...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"permissions-btn",3,"click"],["class","deactivate-btn",3,"activate","click",4,"ngIf"],["class","activate-btn",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"deactivate-btn",3,"click"],[1,"activate-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-2"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","roleName"],[1,"required"],["type","text","id","roleName","name","roleName","required","","placeholder","Enter role name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","description"],["type","text","id","description","name","description","placeholder","Enter description",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],[1,"error-message"],[1,"page-btn",3,"click"]],template:function(e,o){1&e&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Roles"),t.k0s()(),t.j41(7,"button",6),t.bIt("click",function(){return o.showAddRoleModal()}),t.EFF(8,"Add Role"),t.k0s()(),t.j41(9,"div",7)(10,"div",8)(11,"label",9),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",10),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",11),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",12),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",13),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",14),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",15),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",16)(27,"label",17),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",18),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",22),t.EFF(37),t.k0s()(),t.j41(38,"th",21),t.bIt("click",function(){return o.sortTable("roleName")}),t.EFF(39," Role Name "),t.j41(40,"span",22),t.EFF(41),t.k0s()(),t.j41(42,"th",21),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(43," Active "),t.j41(44,"span",22),t.EFF(45),t.k0s()(),t.j41(46,"th"),t.EFF(47,"Edit"),t.k0s()()(),t.j41(48,"tbody"),t.DNE(49,$t,17,10,"tr",23),t.k0s()()(),t.j41(50,"div",24)(51,"div",25),t.EFF(52),t.k0s(),t.j41(53,"div",26)(54,"button",27),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(55," Previous "),t.k0s(),t.DNE(56,At,2,3,"button",28),t.j41(57,"button",27),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(58," Next "),t.k0s()()()()),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","roleName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedRoles),t.R7$(3),t.E5c(" Showing ",o.getStartRecord()," to ",o.getEndRecord()," of ",o.totalRoles," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.getTotalPages()))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:['.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;background:#1e1e1e26;backdrop-filter:blur(.5px);-webkit-backdrop-filter:blur(4px);z-index:2000;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-dialog[_ngcontent-%COMP%]{z-index:2100;position:relative;margin:0 auto;max-width:500px;width:100%;box-shadow:0 8px 32px #0000002e}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff3;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);z-index:1000}.modal-dialog[_ngcontent-%COMP%]{margin:100px auto;max-width:500px}.modal-content[_ngcontent-%COMP%]{background:#fff}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}.permissions-btn[_ngcontent-%COMP%]{position:relative;overflow:hidden}.permissions-btn[_ngcontent-%COMP%]:before{content:"\\1f510";margin-right:6px;font-size:10px}.permissions-btn[_ngcontent-%COMP%]:hover:before{animation:_ngcontent-%COMP%_bounce .6s}.activate-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);padding:5px;border-color:#20c997;color:#fff;border-radius:5px}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-3px)}60%{transform:translateY(-2px)}}']}))}return r(),s})();function Gt(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"span",32),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"div",33)(14,"button",34),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editPermission(e))}),t.EFF(15,"Edit"),t.k0s(),t.j41(16,"button",35),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.togglePermissionStatus(e))}),t.EFF(17),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.permissionName),t.R7$(2),t.JRh(i.permissionCode),t.R7$(2),t.JRh(i.permissionUrl),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function Vt(r,s){1&r&&(t.j41(0,"tr")(1,"td",36),t.EFF(2,"No permissions found"),t.k0s()())}function Wt(r,s){1&r&&(t.j41(0,"tr")(1,"td",36),t.EFF(2,"Loading permissions..."),t.k0s()())}function Kt(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",29),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.Y8G("disabled",-1===i||n.isLoading),t.R7$(),t.SpI(" ",-1===i?"...":i," ")}}function Yt(r,s){1&r&&(t.j41(0,"div",62),t.EFF(1," Permission name is required "),t.k0s())}function zt(r,s){1&r&&(t.j41(0,"div",62),t.EFF(1," Permission code is required "),t.k0s())}function Xt(r,s){1&r&&t.nrm(0,"span",63)}function qt(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updatePermission():e.addPermission())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"Name "),t.j41(15,"span",47),t.EFF(16,"*"),t.k0s()(),t.j41(17,"input",48,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentPermission.permissionName,e)||(o.currentPermission.permissionName=e),a.Njj(e)}),t.k0s(),t.DNE(19,Yt,2,0,"div",49),t.k0s(),t.j41(20,"div",45)(21,"label",50),t.EFF(22,"Code "),t.j41(23,"span",47),t.EFF(24,"*"),t.k0s()(),t.j41(25,"input",51,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentPermission.permissionCode,e)||(o.currentPermission.permissionCode=e),a.Njj(e)}),t.k0s(),t.DNE(27,zt,2,0,"div",49),t.k0s(),t.j41(28,"div",45)(29,"label",52),t.EFF(30,"URL"),t.k0s(),t.j41(31,"input",53),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentPermission.permissionUrl,e)||(o.currentPermission.permissionUrl=e),a.Njj(e)}),t.k0s()(),t.j41(32,"div",45)(33,"div",54)(34,"label",55)(35,"input",56),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentPermission.active,e)||(o.currentPermission.active=e),a.Njj(e)}),t.k0s(),t.j41(36,"span",57),t.EFF(37,"Active"),t.k0s()()()(),t.j41(38,"div",58)(39,"button",59),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(40," Close "),t.k0s(),t.j41(41,"button",60),t.DNE(42,Xt,1,0,"span",61),t.EFF(43),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(18),e=t.sdS(26),o=t.XpG();t.R7$(5),t.JRh(o.isEditMode?"Edit Permission":"Add Permission"),t.R7$(12),t.R50("ngModel",o.currentPermission.permissionName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(6),t.R50("ngModel",o.currentPermission.permissionCode),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.R50("ngModel",o.currentPermission.permissionUrl),t.R7$(4),t.R50("ngModel",o.currentPermission.active),t.R7$(6),t.Y8G("disabled",i.invalid||o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.SpI(" ",o.isEditMode?"Update":"Save"," ")}}let Qt=(()=>{var r;class s{constructor(n){this.apiService=n,this.permissions=[],this.searchTerm="",this.currentPage=1,this.pageSize=10,this.totalPages=1,this.totalItems=0,this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentPermission={id:0,permissionName:"",permissionCode:"",permissionUrl:"",active:!0},this.sortColumn="",this.sortDirection="asc"}ngOnInit(){this.loadPermissions()}loadPermissions(){this.isLoading=!0,this.apiService.getPermissions(this.currentPage,this.pageSize,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.permissions=n.data||[],this.totalItems=n.pagination?.total||0,this.totalPages=n.pagination?.totalPages||0)},error:n=>{this.isLoading=!1,console.error("Error loading permissions:",n)}})}onSearch(){this.currentPage=1,this.loadPermissions()}onPageSizeChange(){this.currentPage=1,this.loadPermissions()}get paginatedPermissions(){return this.permissions}get showingStart(){return(this.currentPage-1)*this.pageSize+1}get showingEnd(){return Math.min(this.currentPage*this.pageSize,this.totalItems)}showAddPermissionModal(){this.currentPermission={id:0,permissionName:"",permissionCode:"",permissionUrl:"",active:!0},this.isEditMode=!1,this.showModal=!0}editPermission(n){this.currentPermission={...n},this.isEditMode=!0,this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.currentPermission={id:0,permissionName:"",permissionCode:"",permissionUrl:"",active:!0}}togglePermissionStatus(n){this.apiService.togglePermissionStatus(n.id,!n.active).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadPermissions()},error:e=>{console.error("Error toggling permission status:",e)}})}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadPermissions()}getSortByField(){return{id:"id",name:"permissionName",code:"permissionCode",url:"permissionUrl",active:"active"}[this.sortColumn]||"permissionName"}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadPermissions())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadPermissions())}goToPage(n){this.currentPage=n,this.loadPermissions()}getVisiblePages(){const n=this.totalPages,e=this.currentPage,c=[],l=[];for(let m=Math.max(2,e-2);m<=Math.min(n-1,e+2);m++)c.push(m);return e-2>2?l.push(1,-1):l.push(1),l.push(...c),e+2<n-1?l.push(-1,n):l.push(n),l.filter((m,P,x)=>x.indexOf(m)===P&&m>0)}addPermission(){this.isLoading||(this.isLoading=!0,this.apiService.createPermission(this.currentPermission).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadPermissions())},error:n=>{this.isLoading=!1,console.error("Error creating permission:",n)}}))}updatePermission(){this.isLoading||(this.isLoading=!0,this.apiService.updatePermission(this.currentPermission.id,this.currentPermission).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadPermissions())},error:n=>{this.isLoading=!1,console.error("Error updating permission:",n)}}))}trackByPermissionId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-permissions"]],standalone:!1,decls:70,vars:28,consts:[["permissionForm","ngForm"],["permissionNameInput","ngModel"],["permissionCodeInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search permissions...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","6",1,"no-data"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-3"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","permissionName"],[1,"required"],["type","text","id","permissionName","name","permissionName","required","","placeholder","Enter permission name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","permissionCode"],["type","text","id","permissionCode","name","permissionCode","required","","placeholder","Enter permission code",1,"form-control",3,"ngModelChange","ngModel"],["for","permissionUrl"],["type","text","id","permissionUrl","name","permissionUrl","placeholder","Enter permission URL",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","permissionActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(e,o){1&e&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f510}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Permissions"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return o.showAddPermissionModal()}),t.EFF(8,"Add Permission"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",20)(31,"table",21)(32,"thead")(33,"tr")(34,"th",22),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",23),t.EFF(37),t.k0s()(),t.j41(38,"th",22),t.bIt("click",function(){return o.sortTable("name")}),t.EFF(39," Permission Name "),t.j41(40,"span",23),t.EFF(41),t.k0s()(),t.j41(42,"th",22),t.bIt("click",function(){return o.sortTable("code")}),t.EFF(43," Permission Code "),t.j41(44,"span",23),t.EFF(45),t.k0s()(),t.j41(46,"th",22),t.bIt("click",function(){return o.sortTable("url")}),t.EFF(47," Permission URL "),t.j41(48,"span",23),t.EFF(49),t.k0s()(),t.j41(50,"th",22),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(51," Active "),t.j41(52,"span",23),t.EFF(53),t.k0s()(),t.j41(54,"th"),t.EFF(55,"Edit"),t.k0s()()(),t.j41(56,"tbody"),t.DNE(57,Gt,18,12,"tr",24)(58,Vt,3,0,"tr",25)(59,Wt,3,0,"tr",25),t.k0s()()(),t.j41(60,"div",26)(61,"div",27),t.EFF(62),t.k0s(),t.j41(63,"div",28)(64,"button",29),t.bIt("click",function(){return o.previousPage()}),t.EFF(65," Previous "),t.k0s(),t.DNE(66,Kt,2,4,"button",30),t.j41(67,"button",29),t.bIt("click",function(){return o.nextPage()}),t.EFF(68," Next "),t.k0s()()()(),t.DNE(69,qt,44,10,"div",31)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","name"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","code"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","url"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedPermissions)("ngForTrackBy",o.trackByPermissionId),t.R7$(),t.Y8G("ngIf",0===o.paginatedPermissions.length&&!o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(3),t.E5c(" Showing ",o.showingStart," to ",o.showingEnd," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage||o.isLoading),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages||o.isLoading),t.R7$(2),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin:100px auto;max-width:500px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:6px;width:500px;max-width:700px}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),s})();function Ht(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",33),t.EFF(9),t.k0s()(),t.j41(10,"td")(11,"span",34),t.EFF(12),t.k0s()(),t.j41(13,"td")(14,"div",35)(15,"button",36),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editMenu(e))}),t.EFF(16,"Edit"),t.k0s(),t.j41(17,"button",37),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.toggleMenuStatus(e))}),t.EFF(18),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.menuName),t.R7$(2),t.JRh(i.menuUrl),t.R7$(3),t.JRh(i.priority),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function Jt(r,s){1&r&&(t.j41(0,"tr")(1,"td",38),t.EFF(2,"No menus found"),t.k0s()())}function Zt(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.Y8G("disabled",-1===i),t.R7$(),t.SpI(" ",-1===i?"...":i," ")}}function te(r,s){1&r&&(t.j41(0,"div",63),t.EFF(1," Menu name is required "),t.k0s())}function ee(r,s){1&r&&(t.j41(0,"div",63),t.EFF(1," Menu URL is required "),t.k0s())}function ne(r,s){1&r&&(t.j41(0,"div",63),t.EFF(1," Priority is required "),t.k0s())}function oe(r,s){1&r&&(t.j41(0,"div",63),t.EFF(1," Priority must be at least 1 "),t.k0s())}function ie(r,s){1&r&&t.nrm(0,"span",64)}function re(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",39),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",40),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",41)(3,"div",42)(4,"h4",43),t.EFF(5),t.k0s(),t.j41(6,"button",44),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",45)(10,"form",46,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateMenu():e.addMenu())}),t.j41(12,"div",47)(13,"label",48),t.EFF(14,"Menu Name"),t.k0s(),t.j41(15,"input",49,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentMenu.menuName,e)||(o.currentMenu.menuName=e),a.Njj(e)}),t.k0s(),t.DNE(17,te,2,0,"div",50),t.k0s(),t.j41(18,"div",47)(19,"label",51),t.EFF(20,"Menu URL"),t.k0s(),t.j41(21,"input",52,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentMenu.menuUrl,e)||(o.currentMenu.menuUrl=e),a.Njj(e)}),t.k0s(),t.DNE(23,ee,2,0,"div",50),t.k0s(),t.j41(24,"div",47)(25,"label",53),t.EFF(26,"Priority"),t.k0s(),t.j41(27,"input",54,3),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentMenu.priority,e)||(o.currentMenu.priority=e),a.Njj(e)}),t.k0s(),t.DNE(29,ne,2,0,"div",50)(30,oe,2,0,"div",50),t.k0s(),t.j41(31,"div",47)(32,"div",55)(33,"label",56)(34,"input",57),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentMenu.active,e)||(o.currentMenu.active=e),a.Njj(e)}),t.k0s(),t.j41(35,"span",58),t.EFF(36,"Active"),t.k0s()()()(),t.j41(37,"div",59)(38,"button",60),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(39," Close "),t.k0s(),t.j41(40,"button",61),t.DNE(41,ie,1,0,"span",62),t.EFF(42),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(16),e=t.sdS(22),o=t.sdS(28),c=t.XpG();t.R7$(5),t.JRh(c.isEditMode?"Edit Menu":"Add Menu"),t.R7$(10),t.AVh("error",n.touched&&(null==n.errors?null:n.errors.required)),t.R50("ngModel",c.currentMenu.menuName),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(4),t.AVh("error",e.touched&&(null==e.errors?null:e.errors.required)),t.R50("ngModel",c.currentMenu.menuUrl),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(4),t.AVh("error",o.touched&&((null==o.errors?null:o.errors.required)||(null==o.errors?null:o.errors.min))),t.R50("ngModel",c.currentMenu.priority),t.R7$(2),t.Y8G("ngIf",o.touched&&(null==o.errors?null:o.errors.required)),t.R7$(),t.Y8G("ngIf",o.touched&&(null==o.errors?null:o.errors.min)),t.R7$(4),t.R50("ngModel",c.currentMenu.active),t.R7$(6),t.Y8G("disabled",i.invalid||c.isLoading),t.R7$(),t.Y8G("ngIf",c.isLoading),t.R7$(),t.SpI(" ",c.isEditMode?"Update":"Save"," ")}}let ae=(()=>{var r;class s{constructor(n){this.menuService=n,this.menus=[],this.filteredMenus=[],this.paginatedMenus=[],this.showModal=!1,this.currentMenu=this.createEmptyMenu(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.Math=Math}ngOnInit(){this.loadMenus()}loadMenus(){this.menuService.getMenus(this.currentPage,this.itemsPerPage,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:n=>{"SUCCESS"===n.status&&(this.menus=n.data||[],this.totalItems=n.pagination?.total||0,this.totalPages=n.pagination?.totalPages||0,this.updateFilteredData())},error:n=>{console.error("Error loading menus:",n)}})}createEmptyMenu(){return{id:0,menuName:"",menuUrl:"",priority:1,active:!0}}onSearch(){this.currentPage=1,this.loadMenus()}updateFilteredData(){this.filteredMenus=[...this.menus],this.updatePaginatedData()}updatePaginatedData(){this.paginatedMenus=[...this.menus]}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadMenus()}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadMenus())}getVisiblePages(){const n=[];if(this.totalPages<=5)for(let o=1;o<=this.totalPages;o++)n.push(o);else{const o=Math.floor(2.5);let c=Math.max(1,this.currentPage-o),l=Math.min(this.totalPages,this.currentPage+o);this.currentPage<=o?l=5:this.currentPage>this.totalPages-o&&(c=this.totalPages-5+1),c>1&&(n.push(1),c>2&&n.push(-1));for(let m=c;m<=l;m++)n.push(m);l<this.totalPages&&(l<this.totalPages-1&&n.push(-1),n.push(this.totalPages))}return n}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadMenus()}getSortByField(){return{id:"id",name:"menuName",url:"menuUrl",priority:"priority",active:"active"}[this.sortColumn]||"priority"}showAddMenuModal(){this.isEditMode=!1,this.currentMenu=this.createEmptyMenu(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentMenu=this.createEmptyMenu(),this.isEditMode=!1}editMenu(n){this.isEditMode=!0,this.currentMenu={...n},this.showModal=!0}toggleMenuStatus(n){this.menuService.toggleMenuStatus(n.id,!n.active).subscribe({next:e=>{if("SUCCESS"===e.status){const o=this.menus.findIndex(c=>c.id===n.id);-1!==o&&(this.menus[o].active=!n.active),this.updateFilteredData()}},error:e=>{console.error("Error toggling menu status:",e)}})}addMenu(){this.isLoading||(this.isLoading=!0,this.menuService.createMenu(this.currentMenu).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadMenus())},error:n=>{this.isLoading=!1,console.error("Error creating menu:",n)}}))}updateMenu(){this.isLoading||(this.isLoading=!0,this.menuService.updateMenu(this.currentMenu.id,this.currentMenu).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadMenus())},error:n=>{this.isLoading=!1,console.error("Error updating menu:",n)}}))}trackByMenuId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-menus"]],standalone:!1,decls:69,vars:27,consts:[["menuForm","ngForm"],["menuName","ngModel"],["menuUrl","ngModel"],["menuPriority","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search menus...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","6",1,"no-data"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","menuName",1,"required"],["type","text","id","menuName","name","menuName","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","menuUrl",1,"required"],["type","text","id","menuUrl","name","menuUrl","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","menuPriority",1,"required"],["type","number","id","menuPriority","name","menuPriority","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","menuActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(e,o){1&e&&(t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Menus"),t.k0s()(),t.j41(7,"button",8),t.bIt("click",function(){return o.showAddMenuModal()}),t.EFF(8,"Add Menu"),t.k0s()(),t.j41(9,"div",9)(10,"div",10)(11,"label",11),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",12),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",13),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",14),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",15),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",16),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",17),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",18)(27,"label",19),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",20),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",21)(31,"table",22)(32,"thead")(33,"tr")(34,"th",23),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",24),t.EFF(37),t.k0s()(),t.j41(38,"th",23),t.bIt("click",function(){return o.sortTable("menuName")}),t.EFF(39," Menu Name "),t.j41(40,"span",24),t.EFF(41),t.k0s()(),t.j41(42,"th",23),t.bIt("click",function(){return o.sortTable("menuUrl")}),t.EFF(43," Menu URL "),t.j41(44,"span",24),t.EFF(45),t.k0s()(),t.j41(46,"th",23),t.bIt("click",function(){return o.sortTable("priority")}),t.EFF(47," Priority "),t.j41(48,"span",24),t.EFF(49),t.k0s()(),t.j41(50,"th",23),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(51," Active "),t.j41(52,"span",24),t.EFF(53),t.k0s()(),t.j41(54,"th"),t.EFF(55,"Edit"),t.k0s()()(),t.j41(56,"tbody"),t.DNE(57,Ht,19,12,"tr",25)(58,Jt,3,0,"tr",26),t.k0s()()(),t.j41(59,"div",27)(60,"div",28),t.EFF(61),t.k0s(),t.j41(62,"div",29)(63,"button",30),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(64," Previous "),t.k0s(),t.DNE(65,Zt,2,4,"button",31),t.j41(66,"button",30),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(67," Next "),t.k0s()()(),t.DNE(68,re,43,18,"div",32),t.k0s()),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuUrl"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedMenus)("ngForTrackBy",o.trackByMenuId),t.R7$(),t.Y8G("ngIf",0===o.paginatedMenus.length),t.R7$(3),t.E5c(" Showing ",(o.currentPage-1)*o.itemsPerPage+1," to ",o.Math.min(o.currentPage*o.itemsPerPage,o.totalItems)," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages),t.R7$(2),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".url-cell[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;max-width:250px;word-break:break-all}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}"]}))}return r(),s})();function se(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",39),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"span",40),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"span",41),t.EFF(14),t.k0s()(),t.j41(15,"td")(16,"div",42)(17,"button",43),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editSubmenu(e))}),t.EFF(18,"Edit"),t.k0s(),t.j41(19,"button",44),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.toggleSubmenuStatus(e))}),t.EFF(20),t.k0s()()()()}if(2&r){const i=s.$implicit,n=t.XpG();t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.parentMenu||n.getMenuName(i.menuId)),t.R7$(2),t.JRh(i.menuName||i.subMenuName),t.R7$(2),t.JRh(i.menuUrl||i.subMenuUrl),t.R7$(3),t.JRh(i.priority),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function ce(r,s){1&r&&(t.j41(0,"tr")(1,"td",45),t.EFF(2,"No submenus found"),t.k0s()())}function le(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",46),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.onPageChange(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function de(r,s){if(1&r&&(t.j41(0,"option",59),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.menuName)}}function _e(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Menu selection is required "),t.k0s())}function ue(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu name is required "),t.k0s())}function pe(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu URL is required "),t.k0s())}function ge(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Priority is required "),t.k0s())}function me(r,s){1&r&&t.nrm(0,"span",77)}function he(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",47),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",48),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",49)(3,"div",50)(4,"h4",51),t.EFF(5,"Add Sub Menu"),t.k0s(),t.j41(6,"button",52),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",53)(10,"form",54,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.addSubmenu())}),t.j41(12,"div",55)(13,"label",56),t.EFF(14,"Menu "),t.j41(15,"span",57),t.EFF(16,"*"),t.k0s()(),t.j41(17,"select",58,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.menuId,e)||(o.currentSubmenu.menuId=e),a.Njj(e)}),t.j41(19,"option",59),t.EFF(20,"Select Menu"),t.k0s(),t.DNE(21,de,2,2,"option",60),t.k0s(),t.DNE(22,_e,2,0,"div",61),t.k0s(),t.j41(23,"div",55)(24,"label",62),t.EFF(25,"Sub Menu Name "),t.j41(26,"span",57),t.EFF(27,"*"),t.k0s()(),t.j41(28,"input",63,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.subMenuName,e)||(o.currentSubmenu.subMenuName=e),a.Njj(e)}),t.k0s(),t.DNE(30,ue,2,0,"div",61),t.k0s(),t.j41(31,"div",55)(32,"label",64),t.EFF(33,"Sub Menu URL "),t.j41(34,"span",57),t.EFF(35,"*"),t.k0s()(),t.j41(36,"input",65,3),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.subMenuUrl,e)||(o.currentSubmenu.subMenuUrl=e),a.Njj(e)}),t.k0s(),t.DNE(38,pe,2,0,"div",61),t.k0s(),t.j41(39,"div",55)(40,"label",66),t.EFF(41,"Priority "),t.j41(42,"span",57),t.EFF(43,"*"),t.k0s()(),t.j41(44,"input",67,4),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.priority,e)||(o.currentSubmenu.priority=e),a.Njj(e)}),t.k0s(),t.DNE(46,ge,2,0,"div",61),t.k0s(),t.j41(47,"div",55)(48,"div",68)(49,"label",69)(50,"input",70),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.active,e)||(o.currentSubmenu.active=e),a.Njj(e)}),t.k0s(),t.j41(51,"span",71),t.EFF(52,"Active"),t.k0s()()()(),t.j41(53,"div",72)(54,"button",73),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(55," Close "),t.k0s(),t.j41(56,"button",74),t.DNE(57,me,1,0,"span",75),t.EFF(58," Save "),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(18),e=t.sdS(29),o=t.sdS(37),c=t.sdS(45),l=t.XpG();t.R7$(17),t.R50("ngModel",l.currentSubmenu.menuId),t.R7$(2),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",l.menus),t.R7$(),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuUrl),t.R7$(2),t.Y8G("ngIf",o.invalid&&o.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.priority),t.R7$(2),t.Y8G("ngIf",c.invalid&&c.touched),t.R7$(4),t.R50("ngModel",l.currentSubmenu.active),t.R7$(6),t.Y8G("disabled",i.invalid||l.isLoading),t.R7$(),t.Y8G("ngIf",l.isLoading)}}function fe(r,s){if(1&r&&(t.j41(0,"option",59),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.menuName)}}function be(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Menu selection is required "),t.k0s())}function Me(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu name is required "),t.k0s())}function Ce(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Sub menu URL is required "),t.k0s())}function Pe(r,s){1&r&&(t.j41(0,"div",76),t.EFF(1," Priority is required "),t.k0s())}function xe(r,s){1&r&&t.nrm(0,"span",77)}function ve(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",47),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",48),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",49)(3,"div",50)(4,"h4",51),t.EFF(5,"Edit Sub Menu"),t.k0s(),t.j41(6,"button",52),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",53)(10,"form",54,5),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.updateSubmenu())}),t.j41(12,"div",55)(13,"label",78),t.EFF(14,"Menu "),t.j41(15,"span",57),t.EFF(16,"*"),t.k0s()(),t.j41(17,"select",79,6),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.menuId,e)||(o.currentSubmenu.menuId=e),a.Njj(e)}),t.j41(19,"option",59),t.EFF(20,"Select Menu"),t.k0s(),t.DNE(21,fe,2,2,"option",60),t.k0s(),t.DNE(22,be,2,0,"div",61),t.k0s(),t.j41(23,"div",55)(24,"label",80),t.EFF(25,"Sub Menu Name "),t.j41(26,"span",57),t.EFF(27,"*"),t.k0s()(),t.j41(28,"input",81,7),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.subMenuName,e)||(o.currentSubmenu.subMenuName=e),a.Njj(e)}),t.k0s(),t.DNE(30,Me,2,0,"div",61),t.k0s(),t.j41(31,"div",55)(32,"label",82),t.EFF(33,"Sub Menu URL "),t.j41(34,"span",57),t.EFF(35,"*"),t.k0s()(),t.j41(36,"input",83,8),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.subMenuUrl,e)||(o.currentSubmenu.subMenuUrl=e),a.Njj(e)}),t.k0s(),t.DNE(38,Ce,2,0,"div",61),t.k0s(),t.j41(39,"div",55)(40,"label",84),t.EFF(41,"Priority "),t.j41(42,"span",57),t.EFF(43,"*"),t.k0s()(),t.j41(44,"input",85,9),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.priority,e)||(o.currentSubmenu.priority=e),a.Njj(e)}),t.k0s(),t.DNE(46,Pe,2,0,"div",61),t.k0s(),t.j41(47,"div",55)(48,"div",68)(49,"label",69)(50,"input",86),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubmenu.active,e)||(o.currentSubmenu.active=e),a.Njj(e)}),t.k0s(),t.j41(51,"span",71),t.EFF(52,"Active"),t.k0s()()()(),t.j41(53,"div",72)(54,"button",73),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(55," Close "),t.k0s(),t.j41(56,"button",74),t.DNE(57,xe,1,0,"span",75),t.EFF(58," Update "),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(18),e=t.sdS(29),o=t.sdS(37),c=t.sdS(45),l=t.XpG();t.R7$(17),t.R50("ngModel",l.currentSubmenu.menuId),t.R7$(2),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",l.menus),t.R7$(),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.subMenuUrl),t.R7$(2),t.Y8G("ngIf",o.invalid&&o.touched),t.R7$(6),t.R50("ngModel",l.currentSubmenu.priority),t.R7$(2),t.Y8G("ngIf",c.invalid&&c.touched),t.R7$(4),t.R50("ngModel",l.currentSubmenu.active),t.R7$(6),t.Y8G("disabled",i.invalid||l.isLoading),t.R7$(),t.Y8G("ngIf",l.isLoading)}}let Ee=(()=>{var r;class s{constructor(n){this.apiService=n,this.menus=[],this.submenus=[],this.filteredData=[],this.paginatedData=[],this.currentPage=1,this.pageSize=10,this.totalPages=0,this.totalItems=0,this.itemsPerPage=10,this.searchTerm="",this.sortColumn="",this.sortDirection="asc",this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentSubmenu=this.createEmptySubmenu(),this.Math=Math}ngOnInit(){this.loadSubMenus()}loadSubMenus(){this.isLoading=!0,this.apiService.getSubMenus(this.currentPage,this.pageSize,this.searchTerm,this.sortColumn,this.sortDirection).subscribe({next:n=>{this.isLoading=!1,this.submenus=n.data||[];const e=new Map;for(const c of this.submenus)c.menuId&&c.parentMenu&&(e.has(c.menuId)||e.set(c.menuId,c.parentMenu));if(this.menus=Array.from(e.entries()).map(([c,l])=>({id:c,menuName:l})),n.pagination)this.totalItems=n.pagination.total||0,this.currentPage=n.pagination.page||this.currentPage,this.itemsPerPage=n.pagination.limit||this.pageSize,this.totalPages=n.pagination.totalPages||Math.ceil(this.totalItems/this.itemsPerPage);else if(n.data&&n.data.pagination){const c=n.data.pagination;this.totalItems=c.total||0,this.currentPage=c.page||this.currentPage,this.itemsPerPage=c.limit||this.pageSize,this.totalPages=c.totalPages||Math.ceil(this.totalItems/this.itemsPerPage)}else this.totalItems=this.submenus.length,this.itemsPerPage=this.pageSize,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage);this.paginatedData=this.submenus.slice(0,this.itemsPerPage)},error:n=>{this.isLoading=!1,this.submenus=[],this.menus=[],this.paginatedData=[],this.totalItems=0,this.totalPages=0}})}createEmptySubmenu(){return{id:0,menuId:0,subMenuName:"",subMenuUrl:"",priority:1,active:!0}}getMenuName(n){const e=this.menus.find(o=>o.id===n);return e?e.menuName:"Unknown Menu"}onSearch(){this.currentPage=1,this.applyFilters()}applyFilters(){this.currentPage=1,this.loadSubMenus()}onPageSizeChange(){this.currentPage=1,this.itemsPerPage=this.pageSize,this.loadSubMenus()}updatePagination(){this.totalPages=Math.ceil(this.filteredData.length/this.pageSize);const n=(this.currentPage-1)*this.pageSize;this.paginatedData=this.filteredData.slice(n,n+this.pageSize)}onPageChange(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadSubMenus())}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.currentPage=1,this.loadSubMenus()}showAddSubmenuModal(){this.isEditMode=!1,this.currentSubmenu=this.createEmptySubmenu(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentSubmenu=this.createEmptySubmenu(),this.isEditMode=!1}editSubmenu(n){this.isEditMode=!0,console.log("Original submenu data:",n),this.currentSubmenu={id:n.subMenuId||n.id,menuId:n.menuId,subMenuName:n.menuName||n.subMenuName,subMenuUrl:n.menuUrl||n.subMenuUrl,priority:n.priority,active:n.active,subMenuId:n.subMenuId,parentMenu:n.parentMenu},console.log("Mapped currentSubmenu:",this.currentSubmenu),this.showModal=!0}addSubmenu(){this.isLoading=!0;const n={menuId:this.currentSubmenu.menuId,menuName:this.currentSubmenu.subMenuName,menuUrl:this.currentSubmenu.subMenuUrl,priority:this.currentSubmenu.priority,active:this.currentSubmenu.active};console.log("Sending create data:",n),this.apiService.createSubMenu(n).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadSubMenus())},error:e=>{this.isLoading=!1,console.error("Create error:",e)}})}updateSubmenu(){this.isLoading=!0;const n={menuId:this.currentSubmenu.menuId,menuName:this.currentSubmenu.subMenuName,menuUrl:this.currentSubmenu.subMenuUrl,priority:this.currentSubmenu.priority,active:this.currentSubmenu.active};console.log("Sending update data:",n),this.apiService.updateSubMenu(this.currentSubmenu.id,n).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadSubMenus())},error:e=>{this.isLoading=!1,console.error("Update error:",e)}})}toggleSubmenuStatus(n){this.apiService.toggleSubMenuStatus(n.id,!n.active).subscribe({next:e=>{"SUCCESS"===e.status&&(n.active=!n.active)},error:e=>{}})}getPageNumbers(){const n=[];for(let e=1;e<=this.totalPages;e++)n.push(e);return n}getVisiblePages(){const e=[],o=[],c=Math.max(2,this.currentPage-2),l=Math.min(this.totalPages-1,this.currentPage+2);for(let m=c;m<=l;m++)e.push(m);return this.currentPage-2>2?o.push(1,-1):o.push(1),o.push(...e),this.currentPage+2<this.totalPages-1?o.push(-1,this.totalPages):o.push(this.totalPages),o.filter((m,P,x)=>x.indexOf(m)===P&&m<=this.totalPages)}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-submenus"]],standalone:!1,decls:74,vars:30,consts:[["submenuForm","ngForm"],["menuIdInput","ngModel"],["submenuNameInput","ngModel"],["submenuUrlInput","ngModel"],["priorityInput","ngModel"],["editSubmenuForm","ngForm"],["editMenuIdInput","ngModel"],["editSubmenuNameInput","ngModel"],["editSubmenuUrlInput","ngModel"],["editPriorityInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search submenus...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"url-cell"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","7",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","menuId"],[1,"required"],["id","menuId","name","menuId","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["for","submenuName"],["type","text","id","submenuName","name","submenuName","required","","placeholder","Enter sub menu name",1,"form-control",3,"ngModelChange","ngModel"],["for","submenuUrl"],["type","text","id","submenuUrl","name","submenuUrl","required","","placeholder","Enter sub menu URL",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","required","","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","submenuActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"],["for","editMenuId"],["id","editMenuId","name","editMenuId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editSubmenuName"],["type","text","id","editSubmenuName","name","editSubmenuName","required","","placeholder","Enter sub menu name",1,"form-control",3,"ngModelChange","ngModel"],["for","editSubmenuUrl"],["type","text","id","editSubmenuUrl","name","editSubmenuUrl","required","","placeholder","Enter sub menu URL",1,"form-control",3,"ngModelChange","ngModel"],["for","editPriority"],["type","number","id","editPriority","name","editPriority","required","","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","name","editSubmenuActive",3,"ngModelChange","ngModel"]],template:function(e,o){1&e&&(t.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Sub Menus"),t.k0s()(),t.j41(7,"button",14),t.bIt("click",function(){return o.showAddSubmenuModal()}),t.EFF(8,"Add Sub Menu"),t.k0s()(),t.j41(9,"div",15)(10,"div",16)(11,"label",17),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",18),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",19),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",20),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",21),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",22),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",23),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",24)(27,"label",25),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",26),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",27)(31,"table",28)(32,"thead")(33,"tr")(34,"th",29),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," ID "),t.j41(36,"span",30),t.EFF(37),t.k0s()(),t.j41(38,"th",29),t.bIt("click",function(){return o.sortTable("parentMenu")}),t.EFF(39," Menu Name "),t.j41(40,"span",30),t.EFF(41),t.k0s()(),t.j41(42,"th",29),t.bIt("click",function(){return o.sortTable("subMenuName")}),t.EFF(43," SubMenu Name "),t.j41(44,"span",30),t.EFF(45),t.k0s()(),t.j41(46,"th",29),t.bIt("click",function(){return o.sortTable("menuUrl")}),t.EFF(47,"SubMenu Url "),t.j41(48,"span",30),t.EFF(49),t.k0s()(),t.j41(50,"th",29),t.bIt("click",function(){return o.sortTable("priority")}),t.EFF(51," Priority "),t.j41(52,"span",30),t.EFF(53),t.k0s()(),t.j41(54,"th",29),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(55," Status "),t.j41(56,"span",30),t.EFF(57),t.k0s()(),t.j41(58,"th"),t.EFF(59,"Edit"),t.k0s()()(),t.j41(60,"tbody"),t.DNE(61,se,21,13,"tr",31)(62,ce,3,0,"tr",32),t.k0s()()(),t.j41(63,"div",33)(64,"div",34),t.EFF(65),t.k0s(),t.j41(66,"div",35)(67,"button",36),t.bIt("click",function(){return o.onPageChange(o.currentPage-1)}),t.EFF(68," Previous "),t.k0s(),t.DNE(69,le,2,3,"button",37),t.j41(70,"button",36),t.bIt("click",function(){return o.onPageChange(o.currentPage+1)}),t.EFF(71," Next "),t.k0s()()()(),t.DNE(72,he,59,13,"div",38)(73,ve,59,13,"div",38)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","parentMenu"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","menuUrl"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedData),t.R7$(),t.Y8G("ngIf",0===o.paginatedData.length),t.R7$(3),t.E5c(" Showing ",(o.currentPage-1)*o.itemsPerPage+1," to ",o.Math.min(o.currentPage*o.itemsPerPage,o.totalItems)," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages),t.R7$(2),t.Y8G("ngIf",o.showModal&&!o.isEditMode),t.R7$(),t.Y8G("ngIf",o.showModal&&o.isEditMode))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".url-cell[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem;max-width:250px;word-break:break-all}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}"]}))}return r(),s})();function Oe(r,s){1&r&&(t.j41(0,"div",25),t.nrm(1,"div",26),t.k0s())}function ke(r,s){1&r&&(t.j41(0,"div",27),t.nrm(1,"div",28),t.j41(2,"p"),t.EFF(3,"Loading states..."),t.k0s()())}function Fe(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",35),t.EFF(9),t.k0s()(),t.j41(10,"td")(11,"div",36)(12,"button",37),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.editState(e))}),t.EFF(13,"Edit"),t.k0s(),t.j41(14,"button",38),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.toggleStateStatus(e))}),t.EFF(15),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.stateName),t.R7$(2),t.JRh(i.stateDescription||"No description"),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function De(r,s){1&r&&(t.j41(0,"tr")(1,"td",39),t.EFF(2," No states found "),t.k0s()())}function Te(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th",31),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("id"))}),t.EFF(5," Id "),t.j41(6,"span",32),t.EFF(7),t.k0s()(),t.j41(8,"th",31),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("name"))}),t.EFF(9," State Name "),t.j41(10,"span",32),t.EFF(11),t.k0s()(),t.j41(12,"th",31),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("description"))}),t.EFF(13," Description "),t.j41(14,"span",32),t.EFF(15),t.k0s()(),t.j41(16,"th",31),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("active"))}),t.EFF(17," Active "),t.j41(18,"span",32),t.EFF(19),t.k0s()(),t.j41(20,"th"),t.EFF(21,"Actions"),t.k0s()()(),t.j41(22,"tbody"),t.DNE(23,Fe,16,11,"tr",33)(24,De,3,0,"tr",34),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(6),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","name"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","description"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedStates)("ngForTrackBy",i.trackByStateId),t.R7$(),t.Y8G("ngIf",0===i.states.length&&!i.isLoading)}}function Re(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.AVh("active",i===n.currentPage),t.Y8G("disabled",-1===i),t.R7$(),t.SpI(" ",-1===i?"...":i," ")}}function Se(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",40)(1,"div",41),t.EFF(2),t.k0s(),t.j41(3,"div",42)(4,"button",43),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.previousPage())}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,Re,2,4,"button",44),t.j41(7,"button",43),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.nextPage())}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(2),t.E5c(" Showing ",i.showingStart," to ",i.showingEnd," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages)}}function Ie(r,s){1&r&&(t.j41(0,"div",68),t.EFF(1," State name is required "),t.k0s())}function je(r,s){1&r&&t.nrm(0,"span",28)}function ye(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",46),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",47)(3,"div",48)(4,"h4",49),t.EFF(5),t.k0s(),t.j41(6,"button",50),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",51)(10,"form",52,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateState():e.addState())}),t.j41(12,"div",53)(13,"label",54),t.EFF(14,"State Name "),t.j41(15,"span",55),t.EFF(16,"*"),t.k0s()(),t.j41(17,"input",56,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentState.stateName,e)||(o.currentState.stateName=e),a.Njj(e)}),t.k0s(),t.DNE(19,Ie,2,0,"div",57),t.k0s(),t.j41(20,"div",53)(21,"label",58),t.EFF(22,"Description"),t.k0s(),t.j41(23,"textarea",59,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentState.stateDescription,e)||(o.currentState.stateDescription=e),a.Njj(e)}),t.k0s()(),t.j41(25,"div",53)(26,"div",60)(27,"label",61)(28,"input",62),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentState.active,e)||(o.currentState.active=e),a.Njj(e)}),t.k0s(),t.j41(29,"span",63),t.EFF(30,"Active"),t.k0s()()()(),t.j41(31,"div",64)(32,"button",65),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(33," Close "),t.k0s(),t.j41(34,"button",66),t.DNE(35,je,1,0,"span",67),t.EFF(36),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(18),e=t.XpG();t.R7$(5),t.JRh(e.isEditMode?"Edit State":"Add State"),t.R7$(12),t.R50("ngModel",e.currentState.stateName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",e.currentState.stateDescription),t.R7$(5),t.R50("ngModel",e.currentState.active),t.R7$(6),t.Y8G("disabled",i.invalid||e.isLoading),t.R7$(),t.Y8G("ngIf",e.isLoading),t.R7$(),t.SpI(" ",e.isEditMode?"Update":"Save"," ")}}let we=(()=>{var r;class s{constructor(n){this.apiService=n,this.states=[],this.filteredStates=[],this.searchText="",this.currentPage=1,this.entriesPerPage=10,this.totalPages=1,this.totalItems=0,this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentState={id:0,stateName:"",stateDescription:"",active:!0},this.sortColumn="",this.sortDirection="asc",this.searchSubject=new F.B}ngOnInit(){this.setupSearchDebouncing(),this.loadStates()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearchDebouncing(){this.searchSubscription=this.searchSubject.pipe(T(500),R()).subscribe(n=>{this.performSearch(n)})}onSearchInput(){this.searchSubject.next(this.searchText)}performSearch(n){this.currentPage=1,this.loadStates()}onSearch(){this.searchSubject.next(this.searchText)}clearSearch(){this.searchText="",this.currentPage=1,this.loadStates()}loadStates(){this.isLoading=!0,this.apiService.getStates(this.currentPage,this.entriesPerPage,this.searchText,this.getSortByField(),this.sortDirection).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.states=n.data||[],this.filteredStates=[...this.states],this.totalItems=n.pagination?.total||0,this.totalPages=n.pagination?.totalPages||0)},error:n=>{this.isLoading=!1,console.error("Error loading states:",n)}})}onEntriesPerPageChange(){this.currentPage=1,this.loadStates()}get paginatedStates(){return this.filteredStates}get showingStart(){return(this.currentPage-1)*this.entriesPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.entriesPerPage,this.totalItems)}showAddStateModal(){this.currentState={id:0,stateName:"",stateDescription:"",active:!0},this.isEditMode=!1,this.showModal=!0}editState(n){this.currentState={...n},this.isEditMode=!0,this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.currentState={id:0,stateName:"",stateDescription:"",active:!0}}addState(){this.isLoading||(this.isLoading=!0,this.apiService.createState(this.currentState).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadStates())},error:n=>{this.isLoading=!1,console.error("Error creating state:",n)}}))}updateState(){this.isLoading||(this.isLoading=!0,this.apiService.updateState(this.currentState.id,this.currentState).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.closeModal(),this.loadStates())},error:n=>{this.isLoading=!1,console.error("Error updating state:",n)}}))}toggleStateStatus(n){this.apiService.toggleStateStatus(n.id,!n.active).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadStates()},error:e=>{console.error("Error toggling state status:",e)}})}deleteState(n){confirm(`Are you sure you want to delete ${n.stateName}?`)&&this.apiService.deleteState(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadStates()},error:e=>{console.error("Error deleting state:",e)}})}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadStates()}getSortByField(){return{id:"id",name:"stateName",description:"stateDescription",active:"active"}[this.sortColumn]||"stateName"}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadStates())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadStates())}goToPage(n){this.currentPage=n,this.loadStates()}getVisiblePages(){const n=this.totalPages,e=this.currentPage,c=[],l=[];for(let m=Math.max(2,e-2);m<=Math.min(n-1,e+2);m++)c.push(m);return e-2>2?l.push(1,-1):l.push(1),l.push(...c),e+2<n-1?l.push(-1,n):l.push(n),l.filter((m,P,x)=>x.indexOf(m)===P&&m>0)}getTotalPages(){return this.totalPages}trackByStateId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-state-management"]],standalone:!1,decls:35,vars:7,consts:[["stateForm","ngForm"],["stateName","ngModel"],["stateDescription","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search states...",3,"ngModelChange","input","ngModel"],["class","search-loading",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"search-loading"],[1,"spinner-small"],[1,"loading-container"],[1,"spinner"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","5",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","stateName"],[1,"required"],["type","text","id","stateName","name","stateName","required","","placeholder","Enter state name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","stateDescription"],["id","stateDescription","name","stateDescription","rows","3","placeholder","Enter state description",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","stateActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"]],template:function(e,o){1&e&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f5fa}\ufe0f"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of States"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return o.showAddStateModal()}),t.EFF(8,"Add State"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(o.entriesPerPage,l)||(o.entriesPerPage=l),l}),t.bIt("change",function(){return o.onEntriesPerPageChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(o.searchText,l)||(o.searchText=l),l}),t.bIt("input",function(){return o.onSearchInput()}),t.k0s(),t.DNE(30,Oe,2,0,"div",20),t.k0s()(),t.DNE(31,ke,4,0,"div",21)(32,Te,25,15,"div",22)(33,Se,9,6,"div",23),t.k0s(),t.DNE(34,ye,37,8,"div",24)),2&e&&(t.R7$(13),t.R50("ngModel",o.entriesPerPage),t.R7$(16),t.R50("ngModel",o.searchText),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading&&0===o.states.length),t.R7$(),t.Y8G("ngIf",!o.isLoading||o.states.length>0),t.R7$(),t.Y8G("ngIf",o.states.length>0),t.R7$(),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:["[_ngcontent-%COMP%]:root{--primary-color: #4361ee;--secondary-color: #3f37c9;--success-color: #4cc9f0;--light-color: #f8f9fa;--dark-color: #212529;--gradient: linear-gradient(135deg, #4361ee, #3a0ca3);--shadow: 0 4px 6px rgba(0, 0, 0, .1);--radius: 10px}.dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.page-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#0dcaf0);color:#fff;padding:25px 30px;display:flex;justify-content:space-between;align-items:center;border-radius:8px;box-shadow:0 2px 10px #0000001a}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.page-title-icon[_ngcontent-%COMP%]{font-size:28px;background:#ffffff40;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center}.page-title-text[_ngcontent-%COMP%]{font-size:24px;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px}.btn-primary-custom[_ngcontent-%COMP%]{background:#0d6efd;border:none;color:#fff;padding:10px 20px;border-radius:30px;font-weight:500;transition:all .3s;display:flex;align-items:center;gap:8px}.btn-primary-custom[_ngcontent-%COMP%]:hover{background:#0b5ed7;transform:translateY(-2px);box-shadow:0 4px 8px #0d6efd4d}.content-section[_ngcontent-%COMP%]{padding:30px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#f8f9fa;border-bottom:1px solid #e9ecef}.entries-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.search-box[_ngcontent-%COMP%]{position:relative;width:250px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px;border-radius:30px;border:1px solid #ddd}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#6c757d}.table[_ngcontent-%COMP%]{margin:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#2d458d;border-bottom:2px solid #dee2e6;font-weight:600;color:#0a0a0a;padding:15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;vertical-align:middle}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500}.status-active[_ngcontent-%COMP%]{background:#e7f7ef;color:#1ea97c}.status-inactive[_ngcontent-%COMP%]{background:#fef0f0;color:#f05d5d}.action-buttons-cell[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-edit[_ngcontent-%COMP%]{background:#e9ecef;border:none;color:#6c757d;padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s}.btn-edit[_ngcontent-%COMP%]:hover{background:#4361ee;color:#fff}.btn-deactivate[_ngcontent-%COMP%]{background:#f8d7da;border:none;color:#721c24;padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s}.btn-deactivate[_ngcontent-%COMP%]:hover{background:#f1b0b7}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;border:none;color:#fff;padding:6px 12px;border-radius:4px;font-size:13px;transition:all .3s}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.table-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#f8f9fa;border-top:1px solid #e9ecef}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.page-info[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.modal-header[_ngcontent-%COMP%]{background:var(--gradient);color:#fff}.modal-title[_ngcontent-%COMP%]{font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ddd;padding:10px 15px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #4361ee33;border-color:var(--primary-color)}.btn-submit[_ngcontent-%COMP%]{background:var(--gradient);border:none;border-radius:30px;padding:10px 25px;font-weight:500;transition:all .3s;color:#fff}.btn-submit[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #4361ee4d;color:#fff}.btn-submit[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6c757d}.no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;margin-bottom:15px;color:#dee2e6}@media (max-width: 768px){.table-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.search-box[_ngcontent-%COMP%]{width:100%}.action-buttons-cell[_ngcontent-%COMP%]{flex-direction:column}.table-footer[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.pagination-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin:100px auto;max-width:500px}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:6px}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),s})();function Ne(r,s){1&r&&(t.j41(0,"div",25),t.EFF(1," Loading Zone... "),t.k0s())}function Be(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td")(16,"span",32),t.EFF(17),t.k0s()(),t.j41(18,"td")(19,"div",33)(20,"button",34),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.editRange(e))}),t.EFF(21,"Edit"),t.k0s(),t.j41(22,"button",35),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.toggleRangeStatus(e))}),t.EFF(23),t.k0s()()()()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(n.getStateName(i)),t.R7$(2),t.JRh(i.rangeName),t.R7$(2),t.JRh(i.rangeHead),t.R7$(2),t.JRh(i.rangeContactNo),t.R7$(2),t.JRh(i.rangeMobileNo),t.R7$(2),t.JRh(i.rangeEmail),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.Y8G("disabled",n.isLoading),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function Ue(r,s){1&r&&(t.j41(0,"tr")(1,"td",36),t.EFF(2,"No Zone found"),t.k0s()())}function $e(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",26)(1,"table",27)(2,"thead")(3,"tr")(4,"th",28),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("id"))}),t.EFF(5," Id "),t.j41(6,"span",29),t.EFF(7),t.k0s()(),t.j41(8,"th",28),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("stateName"))}),t.EFF(9," State Name "),t.j41(10,"span",29),t.EFF(11),t.k0s()(),t.j41(12,"th",28),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("rangeName"))}),t.EFF(13," Zone Name "),t.j41(14,"span",29),t.EFF(15),t.k0s()(),t.j41(16,"th",28),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("rangeHead"))}),t.EFF(17," Zone Head "),t.j41(18,"span",29),t.EFF(19),t.k0s()(),t.j41(20,"th"),t.EFF(21,"Contact No"),t.k0s(),t.j41(22,"th"),t.EFF(23,"Mobile No"),t.k0s(),t.j41(24,"th"),t.EFF(25,"Email"),t.k0s(),t.j41(26,"th",28),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("active"))}),t.EFF(27," Active "),t.j41(28,"span",29),t.EFF(29),t.k0s()(),t.j41(30,"th"),t.EFF(31,"Actions"),t.k0s()()(),t.j41(32,"tbody"),t.DNE(33,Be,24,16,"tr",30)(34,Ue,3,0,"tr",31),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(6),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","stateName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","rangeName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","rangeHead"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(9),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedRanges)("ngForTrackBy",i.trackByRangeId),t.R7$(),t.Y8G("ngIf",0===i.paginatedRanges.length&&!i.isLoading)}}function Ae(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(-1!==e&&o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.AVh("active",i===n.currentPage)("ellipsis",-1===i),t.Y8G("disabled",-1===i),t.R7$(),t.SpI(" ",-1===i?"...":i," ")}}function Le(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",37)(1,"div",38),t.EFF(2),t.k0s(),t.j41(3,"div",39)(4,"button",40),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.goToPage(e.currentPage-1))}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,Ae,2,6,"button",41),t.j41(7,"button",40),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.goToPage(e.currentPage+1))}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(2),t.E5c(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.totalItems)," of ",i.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.totalPages)}}function Ge(r,s){1&r&&(t.j41(0,"div",72),t.EFF(1," Zone name is required "),t.k0s())}function Ve(r,s){1&r&&(t.j41(0,"div",72),t.EFF(1," Zone head is required "),t.k0s())}function We(r,s){1&r&&t.nrm(0,"span",73)}function Ke(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",42),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",43),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",44)(3,"div",45)(4,"h4",46),t.EFF(5),t.k0s(),t.j41(6,"button",47),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",48)(10,"form",49,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateRange():e.addRange())}),t.j41(12,"div",50)(13,"label",51),t.EFF(14,"Zone Name"),t.k0s(),t.j41(15,"input",52,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.rangeName,e)||(o.currentRange.rangeName=e),a.Njj(e)}),t.k0s(),t.DNE(17,Ge,2,0,"div",53),t.k0s(),t.j41(18,"div",50)(19,"label",54),t.EFF(20,"Zone Head"),t.k0s(),t.j41(21,"input",55,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.rangeHead,e)||(o.currentRange.rangeHead=e),a.Njj(e)}),t.k0s(),t.DNE(23,Ve,2,0,"div",53),t.k0s(),t.j41(24,"div",50)(25,"label",56),t.EFF(26,"Email"),t.k0s(),t.j41(27,"input",57),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.rangeEmail,e)||(o.currentRange.rangeEmail=e),a.Njj(e)}),t.k0s()(),t.j41(28,"div",50)(29,"label",58),t.EFF(30,"Contact Number"),t.k0s(),t.j41(31,"input",59),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.rangeContactNo,e)||(o.currentRange.rangeContactNo=e),a.Njj(e)}),t.k0s()(),t.j41(32,"div",50)(33,"label",60),t.EFF(34,"Mobile Number"),t.k0s(),t.j41(35,"input",61),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.rangeMobileNo,e)||(o.currentRange.rangeMobileNo=e),a.Njj(e)}),t.k0s()(),t.j41(36,"div",50)(37,"label",62),t.EFF(38,"Description"),t.k0s(),t.j41(39,"textarea",63),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.rangeDescription,e)||(o.currentRange.rangeDescription=e),a.Njj(e)}),t.k0s()(),t.j41(40,"div",50)(41,"div",64)(42,"label",65)(43,"input",66),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentRange.active,e)||(o.currentRange.active=e),a.Njj(e)}),t.k0s(),t.j41(44,"span",67),t.EFF(45,"Active"),t.k0s()()()(),t.j41(46,"div",68)(47,"button",69),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(48," Close "),t.k0s(),t.j41(49,"button",70),t.DNE(50,We,1,0,"span",71),t.EFF(51),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(16),e=t.sdS(22),o=t.XpG();t.R7$(5),t.JRh(o.isEditMode?"Edit Zone":"Add Zone"),t.R7$(),t.Y8G("disabled",o.isLoading),t.R7$(9),t.AVh("error",n.touched&&(null==n.errors?null:n.errors.required)),t.R50("ngModel",o.currentRange.rangeName),t.Y8G("disabled",o.isLoading),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(4),t.AVh("error",e.touched&&(null==e.errors?null:e.errors.required)),t.R50("ngModel",o.currentRange.rangeHead),t.Y8G("disabled",o.isLoading),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(4),t.R50("ngModel",o.currentRange.rangeEmail),t.Y8G("disabled",o.isLoading),t.R7$(4),t.R50("ngModel",o.currentRange.rangeContactNo),t.Y8G("disabled",o.isLoading),t.R7$(4),t.R50("ngModel",o.currentRange.rangeMobileNo),t.Y8G("disabled",o.isLoading),t.R7$(4),t.R50("ngModel",o.currentRange.rangeDescription),t.Y8G("disabled",o.isLoading),t.R7$(4),t.R50("ngModel",o.currentRange.active),t.Y8G("disabled",o.isLoading),t.R7$(4),t.Y8G("disabled",o.isLoading),t.R7$(2),t.Y8G("disabled",i.invalid||o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.SpI(" ",o.isEditMode?"Update":"Save"," ")}}let Ye=(()=>{var r;class s{constructor(n){this.apiService=n,this.ranges=[],this.filteredRanges=[],this.paginatedRanges=[],this.showModal=!1,this.currentRange=this.createEmptyRange(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.Math=Math}ngOnInit(){this.loadRanges()}loadRanges(){this.isLoading=!0,this.apiService.getRanges(this.currentPage,this.itemsPerPage,this.searchTerm,this.getSortByField(),this.sortDirection).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.ranges=n.data||[],this.totalItems=n.pagination?.total||0,this.totalPages=n.pagination?.totalPages||0,this.updateFilteredData())},error:n=>{this.isLoading=!1,console.error("Error loading ranges:",n)}})}createEmptyRange(){return{id:0,stateId:4,rangeName:"",rangeHead:"",rangeContactNo:"",rangeMobileNo:"",rangeEmail:"",rangeDescription:"",rangeImage:"",rangePersonImage:"",active:!0,state:{id:0,stateName:""}}}getStateName(n){return n.state?.stateName||""}onSearch(){this.currentPage=1,this.loadRanges()}updateFilteredData(){this.filteredRanges=[...this.ranges],this.updatePaginatedData()}updatePaginatedData(){this.paginatedRanges=[...this.ranges]}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadRanges()}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadRanges())}getVisiblePages(){const n=[];if(this.totalPages<=5)for(let o=1;o<=this.totalPages;o++)n.push(o);else{const o=Math.floor(2.5);let c=Math.max(1,this.currentPage-o),l=Math.min(this.totalPages,this.currentPage+o);this.currentPage<=o?l=5:this.currentPage>this.totalPages-o&&(c=this.totalPages-5+1),c>1&&(n.push(1),c>2&&n.push(-1));for(let m=c;m<=l;m++)n.push(m);l<this.totalPages&&(l<this.totalPages-1&&n.push(-1),n.push(this.totalPages))}return n}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadRanges()}getSortByField(){return{id:"id",stateName:"stateName",rangeName:"rangeName",rangeHead:"rangeHead",active:"active"}[this.sortColumn]||"id"}showAddRangeModal(){this.isEditMode=!1,this.currentRange=this.createEmptyRange(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentRange=this.createEmptyRange(),this.isEditMode=!1}editRange(n){this.isEditMode=!0,this.currentRange={...n},this.showModal=!0}toggleRangeStatus(n){confirm("Are you sure you want to change the status of this range?")&&(this.isLoading=!0,(n.active?this.apiService.deactivateRange(n.id):this.apiService.activateRange(n.id)).subscribe({next:o=>{this.isLoading=!1,"SUCCESS"===o.status&&this.loadRanges()},error:o=>{this.isLoading=!1,console.error("Error toggling range status:",o)}}))}addRange(){if(this.isLoading)return;this.isLoading=!0;const n={stateId:4,rangeName:this.currentRange.rangeName,rangeHead:this.currentRange.rangeHead,rangeContactNo:this.currentRange.rangeContactNo,rangeMobileNo:this.currentRange.rangeMobileNo,rangeEmail:this.currentRange.rangeEmail,rangeDescription:this.currentRange.rangeDescription,rangeImage:this.currentRange.rangeImage||"",rangePersonImage:this.currentRange.rangePersonImage||""};console.log("Creating range with data:",n),this.apiService.createRange(n).subscribe({next:e=>{this.isLoading=!1,console.log("Create response:",e),"SUCCESS"===e.status&&(this.closeModal(),this.loadRanges())},error:e=>{this.isLoading=!1,console.error("Error creating range:",e)}})}updateRange(){if(this.isLoading)return;if(!this.currentRange.id)return void console.error("Cannot update range: ID is missing");this.isLoading=!0;const n={stateId:this.currentRange.stateId,rangeName:this.currentRange.rangeName,rangeHead:this.currentRange.rangeHead,rangeContactNo:this.currentRange.rangeContactNo,rangeMobileNo:this.currentRange.rangeMobileNo,rangeEmail:this.currentRange.rangeEmail,rangeDescription:this.currentRange.rangeDescription,rangeImage:this.currentRange.rangeImage||"",rangePersonImage:this.currentRange.rangePersonImage||""};console.log("Updating range with data:",{id:this.currentRange.id,data:n}),this.apiService.updateRange(this.currentRange.id,n).subscribe({next:e=>{this.isLoading=!1,console.log("Update response:",e),"SUCCESS"===e.status&&(this.closeModal(),this.loadRanges())},error:e=>{this.isLoading=!1,console.error("Error updating range:",e)}})}trackByRangeId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-range"]],standalone:!1,decls:36,vars:6,consts:[["rangeForm","ngForm"],["rangeName","ngModel"],["rangeHead","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search Zone...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn","p-1",3,"click"],["class","loading-indicator",4,"ngIf"],["class","table-container",4,"ngIf"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-indicator"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click","disabled"],["colspan","9",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","ellipsis","disabled","click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-2"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click","disabled"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","rangeName",1,"required"],["type","text","id","rangeName","name","rangeName","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["for","rangeHead",1,"required"],["type","text","id","rangeHead","name","rangeHead","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeEmail"],["type","email","id","rangeEmail","name","rangeEmail",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeContactNo"],["type","text","id","rangeContactNo","name","rangeContactNo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeMobileNo"],["type","text","id","rangeMobileNo","name","rangeMobileNo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","rangeDescription"],["id","rangeDescription","name","rangeDescription","rows","3",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","rangeActive",3,"ngModelChange","ngModel","disabled"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click","disabled"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(e,o){1&e&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f3e0}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Zone"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return o.showAddRangeModal()}),t.EFF(8,"Add Zone"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("keyup.enter",function(){return o.onSearch()}),t.k0s(),t.j41(30,"button",20),t.bIt("click",function(){return o.onSearch()}),t.EFF(31,"Search"),t.k0s()()(),t.DNE(32,Ne,2,0,"div",21)(33,$e,35,18,"div",22)(34,Le,9,6,"div",23),t.k0s(),t.DNE(35,Ke,52,26,"div",24)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(3),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading),t.R7$(),t.Y8G("ngIf",o.totalPages>0&&!o.isLoading),t.R7$(),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".email-cell[_ngcontent-%COMP%]{max-width:200px;word-break:break-all;font-size:.85rem}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{margin:50px auto;max-width:700px;width:90%}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),s})();function ze(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"strong"),t.EFF(5),t.k0s()(),t.j41(6,"td")(7,"span",31),t.EFF(8),t.k0s()(),t.j41(9,"td")(10,"div",32)(11,"button",33),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editDistrict(e))}),t.EFF(12,"Edit"),t.k0s(),t.j41(13,"button",34),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.toggleDistrictStatus(e))}),t.EFF(14),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(3),t.JRh(i.districtName),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function Xe(r,s){1&r&&(t.j41(0,"tr")(1,"td",35),t.EFF(2,"No districts found"),t.k0s()())}function qe(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function Qe(r,s){1&r&&(t.j41(0,"div",57),t.EFF(1," District name is required "),t.k0s())}function He(r,s){1&r&&t.nrm(0,"span",58)}function Je(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateDistrict():e.addDistrict())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"District Name"),t.k0s(),t.j41(15,"input",47,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.districtName,e)||(o.currentDistrict.districtName=e),a.Njj(e)}),t.k0s(),t.DNE(17,Qe,2,0,"div",48),t.k0s(),t.j41(18,"div",45)(19,"div",49)(20,"label",50)(21,"input",51),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.active,e)||(o.currentDistrict.active=e),a.Njj(e)}),t.k0s(),t.j41(22,"span",52),t.EFF(23,"Active"),t.k0s()()()(),t.j41(24,"div",53)(25,"button",54),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(26," Close "),t.k0s(),t.j41(27,"button",55),t.DNE(28,He,1,0,"span",56),t.EFF(29),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(16),e=t.XpG();t.R7$(5),t.JRh(e.isEditMode?"Edit District":"Add District"),t.R7$(10),t.AVh("error",n.touched&&(null==n.errors?null:n.errors.required)),t.R50("ngModel",e.currentDistrict.districtName),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(4),t.R50("ngModel",e.currentDistrict.active),t.R7$(6),t.Y8G("disabled",i.invalid||e.isLoading),t.R7$(),t.Y8G("ngIf",e.isLoading),t.R7$(),t.SpI(" ",e.isEditMode?"Update":"Save"," ")}}let Ze=(()=>{var r;class s{constructor(n){this.apiService=n,this.districts=[],this.filteredDistricts=[],this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.searchSubject=new F.B,this.Math=Math}ngOnInit(){this.setupSearchDebouncing(),this.loadDistricts()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearchDebouncing(){this.searchSubscription=this.searchSubject.pipe(T(500),R()).subscribe(n=>{this.performSearch(n)})}onSearchInput(){this.searchSubject.next(this.searchTerm)}performSearch(n){this.currentPage=1,this.loadDistricts()}clearSearch(){this.searchTerm="",this.currentPage=1,this.loadDistricts()}loadDistricts(){this.isLoading=!0,this.apiService.getDistricts(this.currentPage,this.itemsPerPage,this.searchTerm,this.sortColumn,this.sortDirection).subscribe({next:n=>{this.isLoading=!1,"SUCCESS"===n.status&&(this.districts=n.data||[],this.filteredDistricts=[...this.districts],this.totalItems=n.pagination?.total||0,this.totalPages=n.pagination?.totalPages||0)},error:n=>{this.isLoading=!1,console.error("Error loading districts:",n)}})}createEmptyDistrict(){return{id:0,districtName:"",active:!0}}onSearch(){this.searchSubject.next(this.searchTerm)}updateFilteredData(){}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadDistricts()}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadDistricts())}getVisiblePages(){const n=[];if(this.totalPages<=5)for(let o=1;o<=this.totalPages;o++)n.push(o);else{const o=Math.floor(2.5);let c=Math.max(1,this.currentPage-o),l=Math.min(this.totalPages,this.currentPage+o);this.currentPage<=o?l=5:this.currentPage>this.totalPages-o&&(c=this.totalPages-5+1),c>1&&(n.push(1),c>2&&n.push(-1));for(let m=c;m<=l;m++)n.push(m);l<this.totalPages&&(l<this.totalPages-1&&n.push(-1),n.push(this.totalPages))}return n}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadDistricts()}showAddDistrictModal(){this.isEditMode=!1,this.currentDistrict=this.createEmptyDistrict(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1}editDistrict(n){this.isEditMode=!0,this.currentDistrict={...n},this.showModal=!0}toggleDistrictStatus(n){}addDistrict(){this.isLoading||(this.isLoading=!0,this.apiService.createDistrict({districtName:this.currentDistrict.districtName,active:this.currentDistrict.active}).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.closeModal(),this.loadDistricts())},error:e=>{this.isLoading=!1,console.error("Error creating district:",e)}}))}updateDistrict(){if(this.isLoading)return;if(!this.currentDistrict.id)return void console.error("Cannot update district: ID is missing");this.isLoading=!0;const n={districtName:this.currentDistrict.districtName,active:this.currentDistrict.active};console.log("Updating district:",{id:this.currentDistrict.id,data:n}),this.apiService.updateDistrict(this.currentDistrict.id,n).subscribe({next:e=>{this.isLoading=!1,console.log("Update response:",e),"SUCCESS"===e.status?(e.data&&(console.log("Sent data:",n),console.log("Response data:",e.data),n.active!==e.data.active&&console.warn("Server returned different active status than sent!")),this.closeModal(),this.loadDistricts()):console.error("Update failed with status:",e.status)},error:e=>{this.isLoading=!1,console.error("Error updating district:",e),console.error("Error details:",{message:e.message,status:e.status,url:e.url})}})}deleteDistrict(n){confirm("Are you sure you want to delete this district? This action cannot be undone.")&&(this.isLoading=!0,this.apiService.deleteDistrict(n).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&this.loadDistricts()},error:e=>{this.isLoading=!1,console.error("Error deleting district:",e)}}))}getNextId(){return this.districts.length>0?Math.max(...this.districts.map(n=>n.id))+1:1}trackByDistrictId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-district-list"]],standalone:!1,decls:61,vars:21,consts:[["districtForm","ngForm"],["districtName","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search districts...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","4",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","districtName",1,"required"],["type","text","id","districtName","name","districtName","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","districtActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(e,o){1&e&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t.EFF(4,"\u{1f5fa}\ufe0f"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Districts"),t.k0s()(),t.j41(7,"button",6),t.bIt("click",function(){return o.showAddDistrictModal()}),t.EFF(8,"Add District"),t.k0s()(),t.j41(9,"div",7)(10,"div",8)(11,"label",9),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",10),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",11),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",12),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",13),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",14),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",15),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",16)(27,"label",17),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",18),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," ID "),t.j41(36,"span",22),t.EFF(37),t.k0s()(),t.j41(38,"th",21),t.bIt("click",function(){return o.sortTable("districtName")}),t.EFF(39," District Name "),t.j41(40,"span",22),t.EFF(41),t.k0s()(),t.j41(42,"th",21),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(43," Active "),t.j41(44,"span",22),t.EFF(45),t.k0s()(),t.j41(46,"th"),t.EFF(47,"Actions"),t.k0s()()(),t.j41(48,"tbody"),t.DNE(49,ze,15,10,"tr",23)(50,Xe,3,0,"tr",24),t.k0s()()(),t.j41(51,"div",25)(52,"div",26),t.EFF(53),t.k0s(),t.j41(54,"div",27)(55,"button",28),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(56," Previous "),t.k0s(),t.DNE(57,qe,2,3,"button",29),t.j41(58,"button",28),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(59," Next "),t.k0s()()()(),t.DNE(60,Je,30,9,"div",30)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","districtName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.districts)("ngForTrackBy",o.trackByDistrictId),t.R7$(),t.Y8G("ngIf",0===o.districts.length),t.R7$(3),t.E5c(" Showing ",(o.currentPage-1)*o.itemsPerPage+1," to ",o.Math.min(o.currentPage*o.itemsPerPage,o.totalItems)," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages),t.R7$(2),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".area-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background-color:#e3f2fd;border:1px solid #bbdefb;border-radius:4px;font-size:.875em;font-weight:500;color:#1976d2}.description-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.data-table[_ngcontent-%COMP%]{width:100%;min-width:900px;table-layout:auto}@media (min-width: 1200px){.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:5%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:12%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:10%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:12%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8){width:8%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9){width:8%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10){width:5%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(11){width:8%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(12){width:12%}}@media (min-width: 768px) and (max-width: 1199px){.data-table[_ngcontent-%COMP%]{min-width:800px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){max-width:100px}}@media (max-width: 767px){.data-table[_ngcontent-%COMP%]{min-width:700px;font-size:12px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8), .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){display:none}.area-badge[_ngcontent-%COMP%]{font-size:.75em;padding:2px 6px}.description-cell[_ngcontent-%COMP%]{max-width:80px}}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;object-fit:cover;border:2px solid #e0e0e0}.no-image[_ngcontent-%COMP%]{color:#9e9e9e;font-style:italic;font-size:.875em;padding:.875rem 1.75rem;border-radius:10px;color:#fff;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease}.header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px);box-shadow:0 6px 20px #fff3}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1050;padding:20px}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:600px;max-height:90vh}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 10px 30px #0000004d;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}@media (max-width: 768px){.modal[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{max-width:95vw}.modal-header[_ngcontent-%COMP%]{padding:15px 20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:18px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:18px}}@media (max-width: 576px){.modal[_ngcontent-%COMP%]{padding:5px}.modal-header[_ngcontent-%COMP%]{padding:12px 15px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:16px}}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}"]}))}return r(),s})(),tn=(()=>{var r;class s{constructor(){}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)},this.\u0275cmp=t.VBU({type:s,selectors:[["app-user"]],standalone:!1,decls:5,vars:0,consts:[[1,"user-container"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"User Management"),t.k0s(),t.j41(3,"p"),t.EFF(4,"User management functionality will be implemented here."),t.k0s()())},styles:[".user-container[_ngcontent-%COMP%]{padding:20px}.user-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}.close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{width:95%;max-width:95vw}.modal-header[_ngcontent-%COMP%]{padding:15px 20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]{padding:15px 20px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;flex-direction:column-reverse;gap:8px}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.modal-header[_ngcontent-%COMP%]{padding:12px 15px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:12px 15px}}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}"]}))}return r(),s})();var S=u(2409);function en(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",31),t.EFF(7),t.k0s()(),t.j41(8,"td")(9,"span",32),t.EFF(10),t.k0s()(),t.j41(11,"td")(12,"div",33)(13,"button",34),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editModule(e))}),t.EFF(14,"Edit"),t.k0s(),t.j41(15,"button",35),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.toggleModuleStatus(e))}),t.EFF(16),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.moduleName),t.R7$(3),t.JRh(i.priority),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function nn(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function on(r,s){1&r&&(t.j41(0,"div",55),t.EFF(1," Module name is required "),t.k0s())}function rn(r,s){1&r&&(t.j41(0,"div",55),t.EFF(1," Priority is required and must be a positive number "),t.k0s())}function an(r,s){1&r&&t.nrm(0,"span",56)}function sn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.saveModule())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"Name"),t.k0s(),t.j41(15,"input",47,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentModule.moduleName,e)||(o.currentModule.moduleName=e),a.Njj(e)}),t.k0s(),t.DNE(17,on,2,0,"div",48),t.k0s(),t.j41(18,"div",45)(19,"label",49),t.EFF(20,"Priority"),t.k0s(),t.j41(21,"input",50,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentModule.priority,e)||(o.currentModule.priority=e),a.Njj(e)}),t.k0s(),t.DNE(23,rn,2,0,"div",48),t.k0s(),t.j41(24,"div",51)(25,"button",52),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(26," Close "),t.k0s(),t.j41(27,"button",53),t.DNE(28,an,1,0,"span",54),t.EFF(29),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(16),e=t.sdS(22),o=t.XpG();t.R7$(5),t.JRh(o.isEditMode?"Edit Module":"Add Module"),t.R7$(10),t.R50("ngModel",o.currentModule.moduleName),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",o.currentModule.priority),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(4),t.Y8G("disabled",i.invalid||o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.SpI(" ",o.isEditMode?"Update":"Save"," ")}}let cn=(()=>{var r;class s{constructor(n,e){this.apiService=n,this.notificationService=e,this.modules=[],this.filteredModules=[],this.paginatedModules=[],this.searchTerm="",this.pageSize=10,this.currentPage=1,this.totalModules=0,this.totalPages=0,this.serverSidePagination=!0,this.hasNextPage=!1,this.hasPrevPage=!1,this.sortColumn="",this.sortDirection="asc",this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.loadingError="",this.currentModule={id:0,moduleName:"",priority:1,active:!0}}ngOnInit(){this.loadModules()}loadModules(){this.isLoading=!0,this.loadingError="";const n=this.sortColumn||"priority",e=this.sortDirection.toUpperCase();this.apiService.getModules(this.currentPage,this.pageSize,this.searchTerm,n,e).subscribe({next:o=>{"SUCCESS"===o.status&&o.data?(this.modules=o.data,this.paginatedModules=[...this.modules],o.pagination?(this.totalModules=o.pagination.total,this.totalPages=o.pagination.totalPages,this.currentPage=o.pagination.page,this.hasNextPage=o.pagination.hasNextPage||!1,this.hasPrevPage=o.pagination.hasPrevPage||!1):(this.totalModules=this.modules.length,this.totalPages=1,this.hasNextPage=!1,this.hasPrevPage=!1)):Array.isArray(o)?(this.modules=o,this.paginatedModules=[...this.modules],this.totalModules=this.modules.length,this.totalPages=1):(this.modules=o.data||[],this.paginatedModules=[...this.modules],this.totalModules=0,this.totalPages=1),this.isLoading=!1},error:o=>{console.error("Error loading modules:",o),this.loadingError="Failed to load modules. Please try again.",this.notificationService.error("Failed to load modules. Using offline data."),this.isLoading=!1,this.initializeData()}})}refreshModules(){this.loadModules()}initializeData(){this.modules=[{id:4,moduleName:"Crime Statistics",priority:1,active:!0},{id:5,moduleName:"General Administration",priority:4,active:!0},{id:6,moduleName:"Prosecution and Trial",priority:2,active:!0},{id:7,moduleName:"Crime Prevention Measures",priority:3,active:!0},{id:8,moduleName:"Police Line Functioning",priority:5,active:!0},{id:9,moduleName:"Office Management",priority:6,active:!0},{id:10,moduleName:"Budget Control",priority:7,active:!0}],this.totalModules=this.modules.length,this.totalPages=Math.ceil(this.totalModules/this.pageSize),this.paginatedModules=[...this.modules]}onSearch(){this.currentPage=1,this.loadModules()}onPageSizeChange(){this.currentPage=1,this.loadModules()}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.loadModules()}goToPage(n){n>=1&&n<=this.getTotalPages()&&(this.currentPage=n,this.loadModules())}nextPage(){this.hasNextPage&&this.goToPage(this.currentPage+1)}prevPage(){this.hasPrevPage&&this.goToPage(this.currentPage-1)}getTotalPages(){return this.totalPages}getVisiblePages(){const n=this.getTotalPages(),e=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(n,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1));for(let m=c;m<=l;m++)e.push(m);return e}getStartRecord(){return 0===this.totalModules?0:(this.currentPage-1)*this.pageSize+1}getEndRecord(){return Math.min(this.currentPage*this.pageSize,this.totalModules)}showAddModuleModal(){this.isEditMode=!1,this.currentModule={id:0,moduleName:"",priority:1,active:!0},this.showModal=!0}editModule(n){this.isEditMode=!0,this.currentModule={...n},this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentModule={id:0,moduleName:"",priority:1,active:!0}}saveModule(){if(!this.currentModule.moduleName.trim()||!this.currentModule.priority)return void this.notificationService.error("Please fill in all required fields.");this.isLoading=!0;const n={moduleName:this.currentModule.moduleName.trim(),priority:this.currentModule.priority,active:this.currentModule.active};this.isEditMode?this.apiService.updateModule(this.currentModule.id,n).subscribe({next:e=>{"SUCCESS"===e.status?(this.loadModules(),this.closeModal(),this.notificationService.success(`Module "${this.currentModule.moduleName}" has been updated successfully!`)):(this.isLoading=!1,this.notificationService.error(e.message||"Error updating module"))},error:e=>{console.error("Error updating module:",e),this.isLoading=!1,this.notificationService.error("Error updating module. Please try again.")}}):this.apiService.addModule(n).subscribe({next:e=>{"SUCCESS"===e.status?(this.loadModules(),this.closeModal(),this.notificationService.success(`Module "${this.currentModule.moduleName}" has been added successfully!`)):(this.isLoading=!1,this.notificationService.error(e.message||"Error adding module"))},error:e=>{console.error("Error adding module:",e),this.isLoading=!1,this.notificationService.error("Error adding module. Please try again.")}})}toggleModuleStatus(n){const e=n.active?"deactivate":"activate";confirm(`Are you sure you want to ${e} the module "${n.moduleName}"?`)&&(this.isLoading=!0,this.apiService.toggleModuleStatus(n.id,{active:!n.active}).subscribe({next:l=>{"SUCCESS"===l.status?(n.active=!n.active,console.log(`Module ${n.moduleName} ${e}d`),this.notificationService.success(`Module "${n.moduleName}" has been ${e}d successfully!`)):this.notificationService.error(l.message||`Error ${e}ing module`),this.isLoading=!1},error:l=>{console.error(`Error ${e}ing module:`,l),this.isLoading=!1,this.notificationService.error(`Error ${e}ing module. Please try again.`)}}))}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G),t.rXU(S.J))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-modules"]],standalone:!1,decls:64,vars:22,consts:[["moduleForm","ngForm"],["moduleNameInput","ngModel"],["priorityInput","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search modules...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","moduleName"],["type","text","id","moduleName","name","moduleName","required","","placeholder","Enter module name",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","priority"],["type","number","id","priority","name","priority","required","","min","1","placeholder","Enter priority number",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"close-btn-footer",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(e,o){1&e&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f4e6}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Modules"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return o.showAddModuleModal()}),t.EFF(8,"Add Module"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",20)(31,"table",21)(32,"thead")(33,"tr")(34,"th",22),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," Id "),t.j41(36,"span",23),t.EFF(37),t.k0s()(),t.j41(38,"th",22),t.bIt("click",function(){return o.sortTable("moduleName")}),t.EFF(39," Module Name "),t.j41(40,"span",23),t.EFF(41),t.k0s()(),t.j41(42,"th",22),t.bIt("click",function(){return o.sortTable("priority")}),t.EFF(43," Priority "),t.j41(44,"span",23),t.EFF(45),t.k0s()(),t.j41(46,"th",22),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(47," Active "),t.j41(48,"span",23),t.EFF(49),t.k0s()(),t.j41(50,"th"),t.EFF(51,"Edit"),t.k0s()()(),t.j41(52,"tbody"),t.DNE(53,en,17,11,"tr",24),t.k0s()()(),t.j41(54,"div",25)(55,"div",26),t.EFF(56),t.k0s(),t.j41(57,"div",27)(58,"button",28),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(59," Previous "),t.k0s(),t.DNE(60,nn,2,3,"button",29),t.j41(61,"button",28),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(62," Next "),t.k0s()()(),t.DNE(63,sn,30,8,"div",30),t.k0s()),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","moduleName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedModules),t.R7$(3),t.E5c(" Showing ",o.getStartRecord()," to ",o.getEndRecord()," of ",o.totalModules," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.getTotalPages()),t.R7$(2),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#007bff;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.controls[_ngcontent-%COMP%]{margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;box-shadow:0 2px 4px #28a74533}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #28a7454d}.table-controls[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px 8px 0 0;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.modules-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.modules-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative;border-right:1px solid rgba(255,255,255,.2)}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:10%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:40%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:15%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:20%}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none}.modules-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#ffffff1a}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;opacity:.5;transition:opacity .3s}.sort-icon.active[_ngcontent-%COMP%]{opacity:1}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;color:#333}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496);color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #17a2b84d}.deactivate-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dc3545,#c82333);color:#fff}.deactivate-btn.activate[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997)}.deactivate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #dc35454d}.deactivate-btn.activate[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #28a7454d}.pagination-container[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;margin-top:-1px}.pagination[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#007bff;color:#fff;border-color:#007bff}.page-btn.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#ddd}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.modules-container[_ngcontent-%COMP%]{padding:10px}.table-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.modules-table[_ngcontent-%COMP%]{font-size:12px}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:15px 20px}}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px}.table-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden;margin-bottom:20px}.modules-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:20%;box-sizing:border-box;word-wrap:break-word}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;font-weight:600;padding:15px 12px;text-align:left;border-bottom:2px solid #e9ecef;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;color:#999}.sort-icon.active[_ngcontent-%COMP%]{color:#007bff}.modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #e9ecef;vertical-align:middle}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]{background-color:#fff}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]{background-color:#f9f9f9}.modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]:hover, .modules-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]:hover{background-color:#f1f3f4}.priority-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;min-width:25px;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .3s;text-decoration:none;display:inline-block}.edit-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.deactivate-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.deactivate-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:30px}.pagination-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;flex-wrap:wrap;gap:15px}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:5px}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background-color:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e9ecef}.page-btn.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#dee2e6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:20px}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .3s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#fff3}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#495057}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px;transition:border-color .3s,box-shadow .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;background-color:#f8f9fa;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #e9ecef}.close-btn-footer[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.close-btn-footer[_ngcontent-%COMP%]:hover{background-color:#5a6268}.save-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s;display:flex;align-items:center;gap:8px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.save-btn[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.table-controls[_ngcontent-%COMP%]{justify-content:space-between}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px}.pagination-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.modal-dialog[_ngcontent-%COMP%]{margin:10px}}@media (max-width: 576px){.modules-container[_ngcontent-%COMP%]{padding:15px}.title-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.modules-table[_ngcontent-%COMP%]{font-size:12px}.modules-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modules-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:120px}}"]}))}return r(),s})();function ln(r,s){1&r&&(t.j41(0,"div",28),t.nrm(1,"div",29),t.j41(2,"p"),t.EFF(3,"Loading topics..."),t.k0s()())}function dn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",30)(1,"p"),t.EFF(2),t.k0s(),t.j41(3,"button",31),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.loadTopics())}),t.EFF(4,"Retry"),t.k0s()()}if(2&r){const i=t.XpG();t.R7$(2),t.JRh(i.loadingError)}}function _n(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"span",37),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"span",38),t.EFF(14),t.k0s()(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td")(18,"span",38),t.EFF(19),t.k0s()(),t.j41(20,"td")(21,"span",38),t.EFF(22),t.k0s()(),t.j41(23,"td")(24,"div",39)(25,"button",40),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.editTopic(e))}),t.EFF(26," Edit "),t.k0s(),t.j41(27,"button",41),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.toggleTopicStatus(e))}),t.EFF(28),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.moduleName||"N/A"),t.R7$(2),t.JRh(i.topicName),t.R7$(2),t.JRh(i.subName||"N/A"),t.R7$(3),t.JRh(i.priority),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(2),t.JRh(i.formType||"N/A"),t.R7$(2),t.AVh("active",i.isShowPrevious)("inactive",!i.isShowPrevious),t.R7$(),t.SpI(" ",i.isShowPrevious?"YES":"NO"," "),t.R7$(2),t.AVh("active",i.isShowCummulative)("inactive",!i.isShowCummulative),t.R7$(),t.SpI(" ",i.isShowCummulative?"YES":"NO"," "),t.R7$(5),t.Y8G("title",i.active?"Deactivate Topic":"Activate Topic"),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function un(r,s){1&r&&(t.j41(0,"tr")(1,"td",42),t.EFF(2,"No topics found matching your search criteria."),t.k0s()())}function pn(r,s){if(1&r){const i=t.RV6();t.j41(0,"table",32)(1,"thead")(2,"tr")(3,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("id"))}),t.EFF(4," Id "),t.j41(5,"span",34),t.EFF(6),t.k0s()(),t.j41(7,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("moduleName"))}),t.EFF(8," Module Name "),t.j41(9,"span",34),t.EFF(10),t.k0s()(),t.j41(11,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("topicName"))}),t.EFF(12," Topic Name "),t.j41(13,"span",34),t.EFF(14),t.k0s()(),t.j41(15,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("subName"))}),t.EFF(16," Topic Sub Name "),t.j41(17,"span",34),t.EFF(18),t.k0s()(),t.j41(19,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("priority"))}),t.EFF(20," Priority "),t.j41(21,"span",34),t.EFF(22),t.k0s()(),t.j41(23,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("active"))}),t.EFF(24," Active "),t.j41(25,"span",34),t.EFF(26),t.k0s()(),t.j41(27,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("formType"))}),t.EFF(28," Form Type "),t.j41(29,"span",34),t.EFF(30),t.k0s()(),t.j41(31,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("isShowPrevious"))}),t.EFF(32," Previous "),t.j41(33,"span",34),t.EFF(34),t.k0s()(),t.j41(35,"th",33),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.sortTable("isShowCummulative"))}),t.EFF(36," Cumulative "),t.j41(37,"span",34),t.EFF(38),t.k0s()(),t.j41(39,"th"),t.EFF(40,"Edit"),t.k0s()()(),t.j41(41,"tbody"),t.DNE(42,_n,29,23,"tr",35)(43,un,3,0,"tr",36),t.k0s()()}if(2&r){const i=t.XpG();t.R7$(5),t.AVh("active","id"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","moduleName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","topicName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","subName"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","formType"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","isShowPrevious"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","isShowCummulative"===i.sortColumn),t.R7$(),t.SpI(" ","asc"===i.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",i.paginatedTopics),t.R7$(),t.Y8G("ngIf",0===i.paginatedTopics.length&&!i.isLoading)}}function gn(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function mn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",43)(1,"div",44),t.EFF(2),t.k0s(),t.j41(3,"div",45)(4,"button",46),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.prevPage())}),t.EFF(5," Previous "),t.k0s(),t.DNE(6,gn,2,3,"button",47),t.j41(7,"button",46),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.nextPage())}),t.EFF(8," Next "),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(2),t.E5c(" Showing ",i.getStartRecord()," to ",i.getEndRecord()," of ",i.totalTopics," entries "),t.R7$(2),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getVisiblePages()),t.R7$(),t.Y8G("disabled",i.currentPage===i.getTotalPages())}}function hn(r,s){if(1&r&&(t.j41(0,"option",90),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.moduleName," ")}}function fn(r,s){1&r&&(t.j41(0,"div",91),t.EFF(1," Module selection is required "),t.k0s())}function bn(r,s){1&r&&(t.j41(0,"div",91),t.EFF(1," Topic name is required "),t.k0s())}function Mn(r,s){1&r&&(t.j41(0,"div",91),t.EFF(1," Priority is required and must be a positive number "),t.k0s())}function Cn(r,s){1&r&&(t.j41(0,"div",91),t.EFF(1," Form type selection is required "),t.k0s())}function Pn(r,s){if(1&r&&(t.j41(0,"option",90),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.SpI(" ",i.label," ")}}function xn(r,s){if(1&r&&(t.j41(0,"option",90),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.SpI(" ",i.label," ")}}function vn(r,s){1&r&&t.nrm(0,"span",29)}function En(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",49),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",50),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",51)(3,"div",52)(4,"h4",53),t.EFF(5),t.k0s(),t.j41(6,"button",54),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",55)(10,"form",56,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.saveTopic())}),t.j41(12,"div",57)(13,"div",58)(14,"label",59),t.EFF(15,"Module"),t.k0s(),t.j41(16,"select",60,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.moduleId,e)||(o.currentTopic.moduleId=e),a.Njj(e)}),t.j41(18,"option",61),t.EFF(19,"Select Module"),t.k0s(),t.DNE(20,hn,2,2,"option",62),t.k0s(),t.DNE(21,fn,2,0,"div",63),t.k0s(),t.j41(22,"div",58)(23,"label",64),t.EFF(24,"Name"),t.k0s(),t.j41(25,"input",65,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.topicName,e)||(o.currentTopic.topicName=e),a.Njj(e)}),t.k0s(),t.DNE(27,bn,2,0,"div",63),t.k0s()(),t.j41(28,"div",57)(29,"div",58)(30,"label",66),t.EFF(31,"Sub Name"),t.k0s(),t.j41(32,"input",67),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.subName,e)||(o.currentTopic.subName=e),a.Njj(e)}),t.k0s()(),t.j41(33,"div",58)(34,"label",68),t.EFF(35,"Priority"),t.k0s(),t.j41(36,"input",69,3),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.priority,e)||(o.currentTopic.priority=e),a.Njj(e)}),t.k0s(),t.DNE(38,Mn,2,0,"div",63),t.k0s()(),t.j41(39,"div",57)(40,"div",58)(41,"label",70),t.EFF(42,"Form Type"),t.k0s(),t.j41(43,"select",71,4),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.formType,e)||(o.currentTopic.formType=e),a.Njj(e)}),t.j41(45,"option",61),t.EFF(46,"Select Form Type"),t.k0s(),t.j41(47,"option",72),t.EFF(48,"NORMAL"),t.k0s(),t.j41(49,"option",73),t.EFF(50,"QUESTION / SUBTOPIC"),t.k0s(),t.j41(51,"option",74),t.EFF(52,"SUBTOPIC / QUESTION"),t.k0s()(),t.DNE(53,Cn,2,0,"div",63),t.k0s()(),t.j41(54,"div",75)(55,"div",76)(56,"label",77)(57,"input",78),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.isShowPrevious,e)||(o.currentTopic.isShowPrevious=e),a.Njj(e)}),t.k0s(),t.nrm(58,"span",79),t.EFF(59," Show/Hide Previous "),t.k0s()(),t.j41(60,"div",76)(61,"label",77)(62,"input",80),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.isShowCummulative,e)||(o.currentTopic.isShowCummulative=e),a.Njj(e)}),t.k0s(),t.nrm(63,"span",79),t.EFF(64," Show/Hide Cumulative "),t.k0s()()(),t.j41(65,"div",75)(66,"div",76)(67,"label",77)(68,"input",81),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.isStartJan,e)||(o.currentTopic.isStartJan=e),a.Njj(e)}),t.k0s(),t.nrm(69,"span",79),t.EFF(70," Is Starting From First Month Of Cumulative Year "),t.k0s()()(),t.j41(71,"div",57)(72,"div",58)(73,"label",82),t.EFF(74,"Starting Month"),t.k0s(),t.j41(75,"select",83),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.startMonth,e)||(o.currentTopic.startMonth=e),a.Njj(e)}),t.j41(76,"option",61),t.EFF(77,"Select Start Month"),t.k0s(),t.DNE(78,Pn,2,2,"option",62),t.k0s()(),t.j41(79,"div",58)(80,"label",84),t.EFF(81,"Ending Month"),t.k0s(),t.j41(82,"select",85),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentTopic.endMonth,e)||(o.currentTopic.endMonth=e),a.Njj(e)}),t.j41(83,"option",61),t.EFF(84,"Select End Month"),t.k0s(),t.DNE(85,xn,2,2,"option",62),t.k0s()()(),t.j41(86,"div",86)(87,"button",87),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(88," Close "),t.k0s(),t.j41(89,"button",88),t.DNE(90,vn,1,0,"span",89),t.EFF(91),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(17),e=t.sdS(26),o=t.sdS(37),c=t.sdS(44),l=t.XpG();t.R7$(5),t.JRh(l.isEditMode?"Edit Topic":"Add Topic"),t.R7$(11),t.R50("ngModel",l.currentTopic.moduleId),t.R7$(4),t.Y8G("ngForOf",l.availableModules),t.R7$(),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",l.currentTopic.topicName),t.R7$(2),t.Y8G("ngIf",e.invalid&&e.touched),t.R7$(5),t.R50("ngModel",l.currentTopic.subName),t.R7$(4),t.R50("ngModel",l.currentTopic.priority),t.R7$(2),t.Y8G("ngIf",o.invalid&&o.touched),t.R7$(5),t.R50("ngModel",l.currentTopic.formType),t.R7$(10),t.Y8G("ngIf",c.invalid&&c.touched),t.R7$(4),t.R50("ngModel",l.currentTopic.isShowPrevious),t.R7$(5),t.R50("ngModel",l.currentTopic.isShowCummulative),t.R7$(6),t.R50("ngModel",l.currentTopic.isStartJan),t.R7$(7),t.R50("ngModel",l.currentTopic.startMonth),t.R7$(3),t.Y8G("ngForOf",l.months),t.R7$(4),t.R50("ngModel",l.currentTopic.endMonth),t.R7$(3),t.Y8G("ngForOf",l.months),t.R7$(4),t.Y8G("disabled",i.invalid||l.isLoading),t.R7$(),t.Y8G("ngIf",l.isLoading),t.R7$(),t.SpI(" ",l.isEditMode?"Update":"Save"," ")}}let On=(()=>{var r;class s{constructor(n,e){this.apiService=n,this.notificationService=e,this.topics=[],this.paginatedTopics=[],this.searchTerm="",this.pageSize=10,this.currentPage=1,this.totalTopics=0,this.totalPages=0,this.serverSidePagination=!0,this.hasNextPage=!1,this.hasPrevPage=!1,this.sortColumn="",this.sortDirection="asc",this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.loadingError="",this.currentTopic={id:0,moduleId:0,topicName:"",subName:"",priority:1,active:!0,formType:"",isShowCummulative:!1,isShowPrevious:!1,isStartJan:!1,startMonth:1,endMonth:12},this.availableModules=[],this.months=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]}ngOnInit(){this.loadTopics(),this.loadAvailableModules()}loadTopics(){this.isLoading=!0,this.loadingError="";const n=Math.max(1,this.currentPage),e=Math.min(100,Math.max(5,this.pageSize)),o=this.mapSortColumn(this.sortColumn||"priority");this.apiService.getTopics(n,e,this.searchTerm,o,this.sortDirection.toUpperCase()).subscribe({next:c=>{this.isLoading=!1,"SUCCESS"===c.status&&c.data&&(this.topics=c.data,this.paginatedTopics=c.data,this.totalTopics=c.pagination?.total||0,this.totalPages=c.pagination?.totalPages||0,this.hasNextPage=c.pagination?.hasNextPage||!1,this.hasPrevPage=c.pagination?.hasPrevPage||!1)},error:c=>{this.isLoading=!1,this.loadingError="Failed to load topics. Please try again.",this.notificationService.error("Failed to load topics"),console.error("Error loading topics:",c)}})}mapSortColumn(n){return{id:"id",moduleName:"moduleName",topicName:"topicName",subName:"subName",priority:"priority",active:"active",formType:"formType",isShowPrevious:"isShowPrevious",isShowCummulative:"isShowCummulative"}[n]||"priority"}loadAvailableModules(){this.apiService.getModuleDropdown().subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.availableModules=n.data)},error:n=>{console.error("Error fetching modules:",n),this.notificationService.error("Failed to load modules")}})}onSearch(){this.currentPage=1,this.loadTopics()}onPageSizeChange(){this.currentPage=1,this.loadTopics()}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.currentPage=1,this.loadTopics()}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadTopics())}nextPage(){this.hasNextPage&&(this.currentPage++,this.loadTopics())}prevPage(){this.hasPrevPage&&(this.currentPage--,this.loadTopics())}getTotalPages(){return this.totalPages}getVisiblePages(){const n=this.getTotalPages(),e=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(n,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1));for(let m=c;m<=l;m++)e.push(m);return e}getStartRecord(){return 0===this.totalTopics?0:(this.currentPage-1)*this.pageSize+1}getEndRecord(){return Math.min(this.currentPage*this.pageSize,this.totalTopics)}showAddTopicModal(){this.isEditMode=!1,this.currentTopic={id:0,moduleId:0,topicName:"",subName:"",priority:1,active:!0,formType:"",isShowCummulative:!1,isShowPrevious:!1,isStartJan:!1,startMonth:1,endMonth:12},this.showModal=!0}editTopic(n){this.isEditMode=!0,this.currentTopic={...n},this.showModal=!0}closeModal(){this.showModal=!1,this.isEditMode=!1,this.isLoading=!1,this.currentTopic={id:0,moduleId:0,topicName:"",subName:"",priority:1,active:!0,formType:"",isShowCummulative:!1,isShowPrevious:!1,isStartJan:!1,startMonth:1,endMonth:12}}saveTopic(){if(!this.currentTopic.topicName.trim()||!this.currentTopic.moduleId||!this.currentTopic.formType)return void this.notificationService.error("Please fill all required fields");this.isLoading=!0;const n={moduleId:this.currentTopic.moduleId,topicName:this.currentTopic.topicName,subName:this.currentTopic.subName||"",priority:this.currentTopic.priority,formType:this.currentTopic.formType,isShowCummulative:this.currentTopic.isShowCummulative,isShowPrevious:this.currentTopic.isShowPrevious,isStartJan:this.currentTopic.isStartJan,startMonth:this.currentTopic.startMonth,endMonth:this.currentTopic.endMonth,active:this.currentTopic.active};this.isEditMode?this.apiService.updateTopic(this.currentTopic.id,n).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.notificationService.success(`Topic "${this.currentTopic.topicName}" updated successfully!`),this.closeModal(),this.loadTopics())},error:e=>{this.isLoading=!1,this.notificationService.error("Failed to update topic"),console.error("Error updating topic:",e)}}):this.apiService.addTopic(n).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&(this.notificationService.success(`Topic "${this.currentTopic.topicName}" created successfully!`),this.closeModal(),this.loadTopics())},error:e=>{this.isLoading=!1,this.notificationService.error("Failed to create topic"),console.error("Error creating topic:",e)}})}toggleTopicStatus(n){const e=n.active?"deactivate":"activate";confirm(`Are you sure you want to ${e} the topic "${n.topicName}"?`)&&(n.active?this.apiService.deactivateTopic(n.id):this.apiService.activateTopic(n.id)).subscribe({next:l=>{"SUCCESS"===l.status&&(this.notificationService.success(`Topic "${n.topicName}" ${e}d successfully!`),this.loadTopics())},error:l=>{this.notificationService.error(`Failed to ${e} topic`),console.error(`Error ${e}ing topic:`,l)}})}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G),t.rXU(S.J))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-topics"]],standalone:!1,decls:36,vars:7,consts:[["topicForm","ngForm"],["moduleSelect","ngModel"],["topicNameInput","ngModel"],["priorityInput","ngModel"],["formTypeSelect","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search topics...",3,"ngModelChange","input","ngModel"],[1,"table-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","data-table",4,"ngIf"],["class","pagination-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[1,"retry-btn",3,"click"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],["title","Edit Topic",1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click","title"],["colspan","10",1,"no-data"],[1,"pagination-section"],[1,"pagination-info"],[1,"pagination-controls"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","moduleSelect"],["id","moduleSelect","name","moduleId","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["for","topicName"],["type","text","id","topicName","name","topicName","required","","placeholder","Enter topic name",1,"form-control",3,"ngModelChange","ngModel"],["for","subName"],["type","text","id","subName","name","subName","placeholder","Enter topic sub name",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","required","","min","1","placeholder","Enter priority number",1,"form-control",3,"ngModelChange","ngModel"],["for","formTypeSelect"],["id","formTypeSelect","name","formType","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","NORMAL"],["value","Q/ST"],["value","ST/Q"],[1,"form-row","checkbox-row"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","isShowPrevious",3,"ngModelChange","ngModel"],[1,"checkmark"],["type","checkbox","name","isShowCummulative",3,"ngModelChange","ngModel"],["type","checkbox","name","isStartJan",3,"ngModelChange","ngModel"],["for","startMonth"],["id","startMonth","name","startMonth",1,"form-control",3,"ngModelChange","ngModel"],["for","endMonth"],["id","endMonth","name","endMonth",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"close-btn-footer",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[3,"value"],[1,"error-message"]],template:function(e,o){1&e&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),t.EFF(4,"\u{1f4c4}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Topics"),t.k0s()(),t.j41(7,"button",9),t.bIt("click",function(){return o.showAddTopicModal()}),t.EFF(8,"Add Topic"),t.k0s()(),t.j41(9,"div",10)(10,"div",11)(11,"label",12),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",13),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",14),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",15),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",16),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",17),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",18),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",19)(27,"label",20),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",21),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",22),t.DNE(31,ln,4,0,"div",23)(32,dn,5,1,"div",24)(33,pn,44,29,"table",25),t.k0s(),t.DNE(34,mn,9,6,"div",26)(35,En,92,21,"div",27),t.k0s()),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(2),t.Y8G("ngIf",o.isLoading&&0===o.topics.length),t.R7$(),t.Y8G("ngIf",o.loadingError&&0===o.topics.length),t.R7$(),t.Y8G("ngIf",!o.isLoading||o.topics.length>0),t.R7$(),t.Y8G("ngIf",o.totalTopics>0),t.R7$(),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#007bff;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.controls[_ngcontent-%COMP%]{margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;box-shadow:0 2px 4px #28a74533}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #28a7454d}.table-controls[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px 8px 0 0;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.topics-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative;border-right:1px solid rgba(255,255,255,.2)}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none}.topics-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#ffffff1a}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;opacity:.5;transition:opacity .3s}.sort-icon.active[_ngcontent-%COMP%]{opacity:1}.table-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px;flex-wrap:wrap}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 8px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px}.table-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden;margin-bottom:20px}.topics-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px;table-layout:fixed}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #e9ecef;word-wrap:break-word;box-sizing:border-box}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:5%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:12%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:12%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:10%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:8%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10), .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10){width:14%}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;font-weight:600;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none;border-bottom:2px solid #e9ecef}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;color:#999}.sort-icon.active[_ngcontent-%COMP%]{color:#007bff}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]{background-color:#fff}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]{background-color:#f9f9f9}.topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]:hover, .topics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.odd[_ngcontent-%COMP%]:hover{background-color:#f1f3f4}.priority-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;min-width:25px;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .3s;text-decoration:none;display:inline-block}.edit-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.deactivate-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.deactivate-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:30px}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:#666}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.error-state[_ngcontent-%COMP%]{text-align:center;padding:50px;color:#dc3545}.retry-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;margin-top:10px}.retry-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.pagination-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;flex-wrap:wrap;gap:15px}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:5px}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background-color:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e9ecef}.page-btn.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#dee2e6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;overflow-y:auto;padding:20px;box-sizing:border-box}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:800px;max-height:90vh;margin:0;position:relative;display:flex;flex-direction:column}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;overflow:hidden;display:flex;flex-direction:column;max-height:100%}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .3s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#fff3}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#495057}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px;transition:border-color .3s,box-shadow .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}.checkbox-row[_ngcontent-%COMP%]{align-items:center}.checkbox-group[_ngcontent-%COMP%]{flex:none;margin-right:20px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-weight:400;margin-bottom:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px;width:auto}.checkmark[_ngcontent-%COMP%]{margin-left:8px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;background-color:#f8f9fa;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #e9ecef}.close-btn-footer[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.close-btn-footer[_ngcontent-%COMP%]:hover{background-color:#5a6268}.save-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s;display:flex;align-items:center;gap:8px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.save-btn[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1200px){.topics-table[_ngcontent-%COMP%]{font-size:11px}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}}@media (max-width: 768px){.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.table-controls[_ngcontent-%COMP%]{justify-content:space-between}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px}.pagination-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.modal-dialog[_ngcontent-%COMP%]{margin:0;max-width:calc(100% - 20px);max-height:calc(100% - 40px)}.modal-overlay[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.checkbox-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.checkbox-group[_ngcontent-%COMP%]{margin-right:0;margin-bottom:10px}}@media (max-width: 576px){.topics-container[_ngcontent-%COMP%]{padding:15px}.title-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:10px}.topics-table[_ngcontent-%COMP%]{font-size:10px}.topics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .topics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:120px}.modal-overlay[_ngcontent-%COMP%]{padding:5px;align-items:center}.modal-body[_ngcontent-%COMP%]{padding:15px}.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 10px);max-height:calc(100% - 20px)}}"]}))}return r(),s})();function kn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",30),t.EFF(1),t.j41(2,"button",31),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.errorMessage="")}),t.EFF(3,"\xd7"),t.k0s()()}if(2&r){const i=t.XpG();t.R7$(),t.SpI(" ",i.errorMessage," ")}}function Fn(r,s){1&r&&(t.j41(0,"div",32),t.nrm(1,"div",33),t.j41(2,"span"),t.EFF(3,"Loading subtopics..."),t.k0s()())}function Dn(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"span",35),t.EFF(9),t.k0s()(),t.j41(10,"td")(11,"span",36),t.EFF(12),t.k0s()(),t.j41(13,"td")(14,"div",37)(15,"button",38),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.editSubTopic(e))}),t.EFF(16,"Edit"),t.k0s(),t.j41(17,"button",39),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(o.toggleSubTopicStatus(e))}),t.EFF(18),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(i.topicName||"N/A"),t.R7$(2),t.JRh(i.subTopicName),t.R7$(3),t.JRh(i.priority||"N/A"),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function Tn(r,s){1&r&&(t.j41(0,"tr")(1,"td",40),t.EFF(2,"No subtopics found"),t.k0s()())}function Rn(r,s){if(1&r&&(t.j41(0,"tbody"),t.DNE(1,Dn,19,12,"tr",34)(2,Tn,3,0,"tr",23),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.Y8G("ngForOf",i.paginatedSubTopics),t.R7$(),t.Y8G("ngIf",0===i.paginatedSubTopics.length)}}function Sn(r,s){1&r&&(t.j41(0,"tbody")(1,"tr")(2,"td",40),t.EFF(3,"Loading..."),t.k0s()()())}function In(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function jn(r,s){if(1&r&&(t.j41(0,"option",65),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.topicName," ")}}function yn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",42),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",43),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",44)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",45),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(6,"\xd7"),t.k0s()(),t.j41(7,"div",46)(8,"form",47,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.saveSubTopic())}),t.j41(10,"div",48)(11,"label",49),t.EFF(12,"Topic "),t.j41(13,"span",50),t.EFF(14,"*"),t.k0s()(),t.j41(15,"select",51),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubTopic.topicId,e)||(o.currentSubTopic.topicId=e),a.Njj(e)}),t.j41(16,"option",52),t.EFF(17),t.k0s(),t.DNE(18,jn,2,2,"option",53),t.k0s()(),t.j41(19,"div",48)(20,"label",54),t.EFF(21,"SubTopic Name "),t.j41(22,"span",50),t.EFF(23,"*"),t.k0s()(),t.j41(24,"input",55),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubTopic.subTopicName,e)||(o.currentSubTopic.subTopicName=e),a.Njj(e)}),t.k0s()(),t.j41(25,"div",48)(26,"label",56),t.EFF(27,"Priority "),t.j41(28,"span",50),t.EFF(29,"*"),t.k0s()(),t.j41(30,"input",57),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubTopic.priority,e)||(o.currentSubTopic.priority=e),a.Njj(e)}),t.k0s()(),t.j41(31,"div",58)(32,"label",59)(33,"input",60),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentSubTopic.active,e)||(o.currentSubTopic.active=e),a.Njj(e)}),t.k0s(),t.nrm(34,"span",61),t.EFF(35," Active "),t.k0s()(),t.j41(36,"div",62)(37,"button",63),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(38,"Close"),t.k0s(),t.j41(39,"button",64),t.EFF(40,"Save"),t.k0s()()()()()()}if(2&r){const i=t.sdS(9),n=t.XpG();t.R7$(4),t.JRh(n.isEditMode?"Edit SubTopic":"Add SubTopic"),t.R7$(11),t.R50("ngModel",n.currentSubTopic.topicId),t.Y8G("disabled",n.isTopicsLoading),t.R7$(2),t.JRh(n.isTopicsLoading?"Loading topics...":"Select Topic"),t.R7$(),t.Y8G("ngForOf",n.availableTopics),t.R7$(6),t.R50("ngModel",n.currentSubTopic.subTopicName),t.R7$(6),t.R50("ngModel",n.currentSubTopic.priority),t.R7$(3),t.R50("ngModel",n.currentSubTopic.active),t.R7$(6),t.Y8G("disabled",!i.form.valid)}}let wn=(()=>{var r;class s{constructor(n){this.apiService=n,this.subTopics=[],this.filteredSubTopics=[],this.paginatedSubTopics=[],this.availableTopics=[],this.showModal=!1,this.isEditMode=!1,this.currentSubTopic=this.getEmptySubTopic(),this.searchTerm="",this.sortColumn="subTopicName",this.sortDirection="asc",this.currentPage=1,this.itemsPerPage=10,this.totalPages=1,this.serverPagination={total:0,page:1,limit:10,totalPages:1},this.isLoading=!1,this.isTopicsLoading=!1,this.errorMessage=""}ngOnInit(){this.loadSubTopics(),this.loadTopics()}loadSubTopics(){this.isLoading=!0,this.errorMessage="",this.apiService.getSubTopics(this.currentPage,this.itemsPerPage,this.searchTerm||void 0,this.sortColumn,this.sortDirection.toUpperCase()).subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.subTopics=n.data,this.filteredSubTopics=[...this.subTopics],this.paginatedSubTopics=[...this.subTopics],n.pagination&&(this.serverPagination=n.pagination,this.totalPages=n.pagination.totalPages)),this.isLoading=!1},error:n=>{console.error("Error loading subtopics:",n),this.errorMessage="Failed to load subtopics. Please try again.",this.isLoading=!1}})}loadTopics(){this.isTopicsLoading=!0,this.apiService.getActiveTopics().subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.availableTopics=n.data),this.isTopicsLoading=!1},error:n=>{console.error("Error loading topics:",n),this.isTopicsLoading=!1}})}openAddModal(){this.isEditMode=!1,this.currentSubTopic=this.getEmptySubTopic(),this.showModal=!0}editSubTopic(n){this.isEditMode=!0,this.currentSubTopic={...n},this.showModal=!0}closeModal(){this.showModal=!1,this.currentSubTopic=this.getEmptySubTopic(),this.isEditMode=!1}saveSubTopic(){const n={subTopicName:this.currentSubTopic.subTopicName,topicId:this.currentSubTopic.topicId,priority:this.currentSubTopic.priority||1,active:void 0===this.currentSubTopic.active||this.currentSubTopic.active};this.isEditMode&&this.currentSubTopic.id?this.apiService.updateSubTopic(this.currentSubTopic.id,n).subscribe({next:e=>{"SUCCESS"===e.status&&(this.loadSubTopics(),this.closeModal())},error:e=>{console.error("Error updating subtopic:",e),this.errorMessage="Failed to update subtopic. Please try again."}}):this.apiService.addSubTopic(n).subscribe({next:e=>{"SUCCESS"===e.status&&(this.loadSubTopics(),this.closeModal())},error:e=>{console.error("Error creating subtopic:",e),this.errorMessage="Failed to create subtopic. Please try again."}})}toggleSubTopicStatus(n){n.active?this.apiService.deactivateSubTopic(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadSubTopics()},error:e=>{console.error("Error deactivating subtopic:",e),this.errorMessage="Failed to deactivate subtopic. Please try again."}}):this.apiService.activateSubTopic(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadSubTopics()},error:e=>{console.error("Error activating subtopic:",e),this.errorMessage="Failed to activate subtopic. Please try again."}})}deleteSubTopic(n){confirm("Are you sure you want to delete this subtopic?")&&this.apiService.deleteSubTopic(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadSubTopics()},error:e=>{console.error("Error deleting subtopic:",e),this.errorMessage="Failed to delete subtopic. Please try again."}})}filterSubTopics(){this.currentPage=1,this.loadSubTopics()}sortBy(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.currentPage=1,this.loadSubTopics()}updatePagination(){console.log("Updating pagination - itemsPerPage:",this.itemsPerPage),this.currentPage=1,this.loadSubTopics()}goToPage(n){console.log("Going to page:",n,"Total pages:",this.serverPagination.totalPages),n>=1&&n<=(this.serverPagination.totalPages||1)&&(this.currentPage=n,this.loadSubTopics())}getPageNumbers(){const n=[],o=Math.floor(2.5),c=this.serverPagination.totalPages||1;let l=Math.max(1,this.currentPage-o),m=Math.min(c,l+5-1);m-l<4&&(l=Math.max(1,m-5+1));for(let P=l;P<=m;P++)n.push(P);return n}getStartIndex(){return 0===this.serverPagination.total?0:(this.currentPage-1)*this.itemsPerPage+1}getEndIndex(){return Math.min(this.currentPage*this.itemsPerPage,this.serverPagination.total)}getEmptySubTopic(){return{id:0,subTopicName:"",topicId:0,priority:1,active:!0}}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-subtopics"]],standalone:!1,decls:68,vars:28,consts:[["subTopicForm","ngForm"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search subtopics...",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"error-message"],[1,"close-error",3,"click"],[1,"loading-indicator"],[1,"spinner"],[4,"ngFor","ngForOf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","6",1,"text-center"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","topic"],[1,"required"],["id","topic","name","topic","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","subTopicName"],["type","text","id","subTopicName","name","subTopicName","required","","placeholder","Enter subtopic name",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","required","","min","1","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],[3,"value"]],template:function(e,o){1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.EFF(4,"\u{1f4cb}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of SubTopics"),t.k0s()(),t.j41(7,"button",5),t.bIt("click",function(){return o.openAddModal()}),t.EFF(8,"Add SubTopic"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"label",8),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",9),t.mxI("ngModelChange",function(l){return t.DH7(o.itemsPerPage,l)||(o.itemsPerPage=l),l}),t.bIt("ngModelChange",function(){return o.updatePagination()}),t.j41(14,"option",10),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",11),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",12),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",13),t.EFF(21,"50"),t.k0s()(),t.j41(22,"span"),t.EFF(23,"entries"),t.k0s()(),t.j41(24,"div",14)(25,"label",15),t.EFF(26,"Search:"),t.k0s(),t.j41(27,"input",16),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.filterSubTopics()}),t.k0s()()(),t.DNE(28,kn,4,1,"div",17)(29,Fn,4,0,"div",18),t.j41(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),t.bIt("click",function(){return o.sortBy("id")}),t.EFF(35," Id "),t.j41(36,"span",22),t.EFF(37),t.k0s()(),t.j41(38,"th",21),t.bIt("click",function(){return o.sortBy("topicName")}),t.EFF(39," Topic Name "),t.j41(40,"span",22),t.EFF(41),t.k0s()(),t.j41(42,"th",21),t.bIt("click",function(){return o.sortBy("subTopicName")}),t.EFF(43," SubTopic Name "),t.j41(44,"span",22),t.EFF(45),t.k0s()(),t.j41(46,"th",21),t.bIt("click",function(){return o.sortBy("priority")}),t.EFF(47," Priority "),t.j41(48,"span",22),t.EFF(49),t.k0s()(),t.j41(50,"th",21),t.bIt("click",function(){return o.sortBy("active")}),t.EFF(51," Active "),t.j41(52,"span",22),t.EFF(53),t.k0s()(),t.j41(54,"th"),t.EFF(55,"Actions"),t.k0s()()(),t.DNE(56,Rn,3,2,"tbody",23)(57,Sn,4,0,"tbody",23),t.k0s()(),t.j41(58,"div",24)(59,"div",25),t.EFF(60),t.k0s(),t.j41(61,"div",26)(62,"button",27),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(63," Previous "),t.k0s(),t.DNE(64,In,2,3,"button",28),t.j41(65,"button",27),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(66," Next "),t.k0s()()()(),t.DNE(67,yn,41,9,"div",29)),2&e&&(t.R7$(13),t.R50("ngModel",o.itemsPerPage),t.R7$(14),t.R50("ngModel",o.searchTerm),t.R7$(),t.Y8G("ngIf",o.errorMessage),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","topicName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","subTopicName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","priority"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.Y8G("ngIf",!o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(3),t.E5c(" Showing ",o.getStartIndex()," to ",o.getEndIndex()," of ",o.serverPagination.total," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getPageNumbers()),t.R7$(),t.Y8G("disabled",o.currentPage===(o.serverPagination.totalPages||1)),t.R7$(2),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:[".title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#007bff;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.controls[_ngcontent-%COMP%]{margin-bottom:20px}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;box-shadow:0 2px 4px #28a74533}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #28a7454d}.table-controls[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px 8px 0 0;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.show-entries[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.show-entries[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.subtopics-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.subtopics-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;position:relative;border-right:1px solid rgba(255,255,255,.2)}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:5%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:20%}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none}.subtopics-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#ffffff1a}.sort-icon[_ngcontent-%COMP%]{margin-left:5px;opacity:.5;transition:opacity .3s}.sort-icon.active[_ngcontent-%COMP%]{opacity:1}.subtopics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s}.subtopics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.subtopics-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.subtopics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;color:#333}.priority-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;min-width:25px;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .3s;text-decoration:none;display:inline-block}.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496);color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #17a2b84d}.deactivate-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dc3545,#c82333);color:#fff}.deactivate-btn.activate[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997)}.deactivate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #dc35454d}.deactivate-btn.activate[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #28a7454d}.pagination-container[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:0 0 8px 8px;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;margin-top:-1px}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;background:#fff;color:#333;cursor:pointer;border-radius:4px;font-size:14px;transition:all .3s}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#007bff;color:#fff;border-color:#007bff}.page-btn.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.page-btn[_ngcontent-%COMP%]:disabled{background:#f8f9fa;color:#6c757d;cursor:not-allowed;border-color:#ddd}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{padding:20px 25px 15px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.subtopics-container[_ngcontent-%COMP%]{padding:10px}.table-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.subtopics-table[_ngcontent-%COMP%]{font-size:12px}.subtopics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .subtopics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.edit-btn[_ngcontent-%COMP%], .deactivate-btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:15px 20px}}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #f3f3f3;border-top:2px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:15px;border-radius:8px;border:1px solid #f5c6cb;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between}.close-error[_ngcontent-%COMP%]{background:none;border:none;color:#721c24;font-size:18px;cursor:pointer;padding:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.close-error[_ngcontent-%COMP%]:hover{background:#721c241a;border-radius:50%}.text-center[_ngcontent-%COMP%]{text-align:center}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-1px)}"]}))}return r(),s})();function Nn(r,s){1&r&&(t.j41(0,"tr")(1,"td",19),t.EFF(2,"Loading questions..."),t.k0s()())}function Bn(r,s){if(1&r&&(t.j41(0,"pre",29),t.EFF(1),t.k0s()),2&r){const i=t.XpG().$implicit,n=t.XpG();t.R7$(),t.JRh(n.formatFormula(i.formula))}}function Un(r,s){1&r&&(t.j41(0,"span",30),t.EFF(1,"-"),t.k0s())}function $n(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr",20)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td",21),t.DNE(12,Bn,2,1,"pre",22)(13,Un,2,0,"span",23),t.k0s(),t.j41(14,"td")(15,"span",24),t.EFF(16),t.k0s()(),t.j41(17,"td")(18,"span",25),t.EFF(19),t.k0s()(),t.j41(20,"td")(21,"div",26)(22,"button",27),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editQuestion(e))}),t.EFF(23,"Edit"),t.k0s(),t.j41(24,"button",28),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.toggleQuestionStatus(e))}),t.EFF(25),t.k0s()()()()}if(2&r){const i=s.$implicit,n=t.XpG();t.Y8G("hidden",n.loading),t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(n.getTopicName(i)),t.R7$(2),t.JRh(n.getSubTopicName(i)),t.R7$(2),t.JRh(i.question),t.R7$(2),t.JRh(i.defaultVal||"NONE"),t.R7$(2),t.Y8G("ngIf",i.formula&&""!==i.formula),t.R7$(),t.Y8G("ngIf",!i.formula||""===i.formula),t.R7$(3),t.JRh(i.priority||0),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function An(r,s){1&r&&(t.j41(0,"tr")(1,"td",31),t.EFF(2,"No questions found matching your search criteria."),t.k0s()())}function Ln(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG(2);return a.Njj(-1!==e?o.goToPage(e):null)}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG(2);t.AVh("active",i===n.currentPage)("ellipsis",-1===i),t.Y8G("disabled",-1===i),t.BMQ("aria-label",-1===i?"More pages":"Page "+i)("aria-current",i===n.currentPage?"page":null),t.R7$(),t.SpI(" ",-1===i?"...":i," ")}}function Gn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",32)(1,"div",33),t.EFF(2),t.k0s(),t.j41(3,"nav",34)(4,"div",35)(5,"button",36),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.goToPage(e.currentPage-1))}),t.EFF(6," Previous "),t.k0s(),t.DNE(7,Ln,2,8,"button",37),t.j41(8,"button",38),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.goToPage(e.currentPage+1))}),t.EFF(9," Next "),t.k0s()()()()}if(2&r){const i=t.XpG();t.R7$(2),t.E5c(" Showing ",i.getStartEntry()," to ",i.getEndEntry()," of ",i.totalRecords," entries "),t.R7$(3),t.Y8G("disabled",1===i.currentPage),t.R7$(2),t.Y8G("ngForOf",i.getPageNumbers()),t.R7$(),t.Y8G("disabled",i.currentPage===i.getTotalPages())}}function Vn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.topicName)}}function Wn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.subTopicName)}}function Kn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.JRh(i.label)}}function Yn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.JRh(i.label)}}function zn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.question)}}function Xn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45)(1,"label",75),t.EFF(2,"Choose Default Question"),t.k0s(),t.j41(3,"select",82),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(2);return t.DH7(o.formData.defaultQue,e)||(o.formData.defaultQue=e),a.Njj(e)}),t.j41(4,"option",49),t.EFF(5,"Select Question"),t.k0s(),t.DNE(6,zn,2,2,"option",50),t.k0s()()}if(2&r){const i=t.XpG(2);t.R7$(3),t.R50("ngModel",i.formData.defaultQue),t.R7$(3),t.Y8G("ngForOf",i.availableQuestions)}}function qn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.subTopicName)}}function Qn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45)(1,"label",83),t.EFF(2,"Choose Default SubTopic"),t.k0s(),t.j41(3,"select",84),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(2);return t.DH7(o.formData.defaultSub,e)||(o.formData.defaultSub=e),a.Njj(e)}),t.j41(4,"option",49),t.EFF(5,"Select SubTopic"),t.k0s(),t.DNE(6,qn,2,2,"option",50),t.k0s()()}if(2&r){const i=t.XpG(2);t.R7$(3),t.R50("ngModel",i.formData.defaultSub),t.R7$(3),t.Y8G("ngForOf",i.filteredSubTopics)}}function Hn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.Lme(" ",i.id," - ",i.question," ")}}function Jn(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45)(1,"label",86),t.EFF(2,"Choose Question"),t.k0s(),t.j41(3,"select",87),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(3);return t.DH7(o.formulaBuilderState.selectedQuestion,e)||(o.formulaBuilderState.selectedQuestion=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG(3);return a.Njj(e.onQuestionSelect())}),t.j41(4,"option",49),t.EFF(5,"Select Question"),t.k0s(),t.DNE(6,Hn,2,3,"option",50),t.k0s()()}if(2&r){const i=t.XpG(3);t.R7$(3),t.R50("ngModel",i.formulaBuilderState.selectedQuestion),t.R7$(3),t.Y8G("ngForOf",i.availableQuestions)}}function Zn(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.subTopicName," ")}}function to(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45)(1,"label",88),t.EFF(2,"Choose Sub Topic (Optional)"),t.k0s(),t.j41(3,"div",89)(4,"select",90),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(3);return t.DH7(o.formulaBuilderState.selectedSubTopic,e)||(o.formulaBuilderState.selectedSubTopic=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG(3);return a.Njj(e.onSubTopicSelect())}),t.j41(5,"option",49),t.EFF(6,"Select SubTopic"),t.k0s(),t.DNE(7,Zn,2,2,"option",50),t.k0s(),t.j41(8,"button",91),t.bIt("click",function(){a.eBV(i);const e=t.XpG(3);return a.Njj(e.skipSubTopic())}),t.EFF(9," Skip "),t.k0s()()()}if(2&r){const i=t.XpG(3);t.R7$(4),t.R50("ngModel",i.formulaBuilderState.selectedSubTopic),t.R7$(3),t.Y8G("ngForOf",i.filteredSubTopics)}}function eo(r,s){if(1&r&&(t.j41(0,"option",81),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.Lme(" ",i.label," (",i.value,") ")}}function no(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45)(1,"label",92),t.EFF(2,"Choose Operation"),t.k0s(),t.j41(3,"select",93),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(3);return t.DH7(o.formulaBuilderState.selectedOperation,e)||(o.formulaBuilderState.selectedOperation=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG(3);return a.Njj(e.onOperationSelect())}),t.j41(4,"option",49),t.EFF(5,"Select Operation"),t.k0s(),t.DNE(6,eo,2,3,"option",50),t.k0s()()}if(2&r){const i=t.XpG(3);t.R7$(3),t.R50("ngModel",i.formulaBuilderState.selectedOperation),t.R7$(3),t.Y8G("ngForOf",i.mathOperations)}}function oo(r,s){if(1&r&&(t.j41(0,"div",85),t.DNE(1,Jn,7,2,"div",61)(2,to,10,2,"div",61)(3,no,7,2,"div",61),t.k0s()),2&r){const i=t.XpG(2);t.R7$(),t.Y8G("ngIf",i.formulaBuilderState.showQuestionDiv),t.R7$(),t.Y8G("ngIf",i.formulaBuilderState.showSubTopicDiv),t.R7$(),t.Y8G("ngIf",i.formulaBuilderState.showOperationDiv)}}function io(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",40),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",41),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",42)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",43),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(6,"\xd7"),t.k0s()(),t.j41(7,"div",44)(8,"form",null,0)(10,"div",45)(11,"label",46),t.EFF(12,"Topic "),t.j41(13,"span",47),t.EFF(14,"*"),t.k0s()(),t.j41(15,"select",48),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.topicId,e)||(o.formData.topicId=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.onTopicChange())}),t.j41(16,"option",49),t.EFF(17),t.k0s(),t.DNE(18,Vn,2,2,"option",50),t.k0s()(),t.j41(19,"div",45)(20,"label",51),t.EFF(21,"SubTopic"),t.k0s(),t.j41(22,"select",52),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.subTopicId,e)||(o.formData.subTopicId=e),a.Njj(e)}),t.j41(23,"option",49),t.EFF(24),t.k0s(),t.DNE(25,Wn,2,2,"option",50),t.k0s()(),t.j41(26,"div",45)(27,"label",53),t.EFF(28,"Question "),t.j41(29,"span",47),t.EFF(30,"*"),t.k0s()(),t.j41(31,"textarea",54),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.question,e)||(o.formData.question=e),a.Njj(e)}),t.k0s()(),t.j41(32,"div",45)(33,"label",55),t.EFF(34,"Priority"),t.k0s(),t.j41(35,"input",56),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.priority,e)||(o.formData.priority=e),a.Njj(e)}),t.k0s()(),t.j41(36,"div",45)(37,"label",57),t.EFF(38,"Question Type "),t.j41(39,"span",47),t.EFF(40,"*"),t.k0s()(),t.j41(41,"select",58),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.type,e)||(o.formData.type=e),a.Njj(e)}),t.DNE(42,Kn,2,2,"option",50),t.k0s()(),t.j41(43,"div",45)(44,"label",59),t.EFF(45,"Default Value "),t.j41(46,"span",47),t.EFF(47,"*"),t.k0s()(),t.j41(48,"select",60),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.defaultVal,e)||(o.formData.defaultVal=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.onDefaultValueChange())}),t.DNE(49,Yn,2,2,"option",50),t.k0s()(),t.DNE(50,Xn,7,2,"div",61)(51,Qn,7,2,"div",61),t.j41(52,"div",45)(53,"div",62)(54,"label",63)(55,"input",64),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.isPrevious,e)||(o.formData.isPrevious=e),a.Njj(e)}),t.k0s(),t.j41(56,"span",65),t.EFF(57,"Show Previous"),t.k0s()()()(),t.j41(58,"div",45)(59,"div",62)(60,"label",63)(61,"input",66),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.isCumulative,e)||(o.formData.isCumulative=e),a.Njj(e)}),t.k0s(),t.j41(62,"span",65),t.EFF(63,"Show Cumulative"),t.k0s()()()(),t.j41(64,"div",45)(65,"label",67),t.EFF(66,"Question Formula"),t.k0s(),t.j41(67,"div",68)(68,"textarea",69),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.formula,e)||(o.formData.formula=e),a.Njj(e)}),t.k0s(),t.j41(69,"div",70)(70,"button",71),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.startFormulaBuilder())}),t.EFF(71," Build Formula "),t.k0s(),t.j41(72,"button",72),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.resetFormula())}),t.EFF(73," Reset "),t.k0s(),t.j41(74,"button",73),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.finishFormula())}),t.EFF(75," Finish "),t.k0s()()()(),t.DNE(76,oo,4,3,"div",74),t.j41(77,"div",45)(78,"label",75),t.EFF(79,"Default Question ID"),t.k0s(),t.j41(80,"input",76),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.defaultQue,e)||(o.formData.defaultQue=e),a.Njj(e)}),t.k0s()(),t.j41(81,"div",45)(82,"div",62)(83,"label",63)(84,"input",77),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.formData.active,e)||(o.formData.active=e),a.Njj(e)}),t.k0s(),t.j41(85,"span",65),t.EFF(86,"Active"),t.k0s()()()()()(),t.j41(87,"div",78)(88,"button",79),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.resetForm())}),t.EFF(89,"Reset Formula"),t.k0s(),t.j41(90,"button",79),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(91,"Close"),t.k0s(),t.j41(92,"button",80),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.saveQuestion())}),t.EFF(93),t.k0s()()()()}if(2&r){const i=t.XpG();t.R7$(4),t.JRh(i.isEditing?"Edit Question":"Add Question"),t.R7$(11),t.R50("ngModel",i.formData.topicId),t.Y8G("disabled",i.loadingTopics),t.R7$(2),t.JRh(i.loadingTopics?"Loading topics...":"Select Topic"),t.R7$(),t.Y8G("ngForOf",i.topics),t.R7$(4),t.R50("ngModel",i.formData.subTopicId),t.Y8G("disabled",!i.formData.topicId||i.loadingSubTopics),t.R7$(2),t.JRh(i.loadingSubTopics?"Loading sub-topics...":"Select SubTopic"),t.R7$(),t.Y8G("ngForOf",i.filteredSubTopics),t.R7$(6),t.R50("ngModel",i.formData.question),t.R7$(4),t.R50("ngModel",i.formData.priority),t.R7$(6),t.R50("ngModel",i.formData.type),t.R7$(),t.Y8G("ngForOf",i.questionTypes),t.R7$(6),t.R50("ngModel",i.formData.defaultVal),t.R7$(),t.Y8G("ngForOf",i.defaultValueTypes),t.R7$(),t.Y8G("ngIf",i.showDefaultQuestion),t.R7$(),t.Y8G("ngIf",i.showDefaultSubTopic),t.R7$(4),t.R50("ngModel",i.formData.isPrevious),t.R7$(6),t.R50("ngModel",i.formData.isCumulative),t.R7$(7),t.R50("ngModel",i.formData.formula),t.R7$(8),t.Y8G("ngIf",i.formulaBuilderState.showQuestionDiv||i.formulaBuilderState.showSubTopicDiv||i.formulaBuilderState.showOperationDiv),t.R7$(4),t.R50("ngModel",i.formData.defaultQue),t.R7$(4),t.R50("ngModel",i.formData.active),t.R7$(8),t.Y8G("disabled",!i.formData.question||!i.formData.topicId),t.R7$(),t.SpI(" ",i.isEditing?"Update":"Save"," ")}}let ro=(()=>{var r;class s{constructor(n){this.apiService=n,this.questions=[],this.filteredQuestions=[],this.paginatedQuestions=[],this.currentPage=1,this.entriesPerPage=10,this.totalPages=0,this.totalRecords=0,this.showModal=!1,this.isEditing=!1,this.loading=!1,this.loadingTopics=!1,this.loadingSubTopics=!1,this.formData={topicId:"",subTopicId:"",question:"",priority:"",type:"NUMBER",defaultVal:"NONE",isPrevious:!1,isCumulative:!1,formula:"",defaultQue:"",defaultSub:"",active:!0},this.topics=[],this.subTopics=[],this.filteredSubTopics=[],this.availableQuestions=[],this.formulaBuilderState={step:"question",showQuestionDiv:!1,showSubTopicDiv:!1,showOperationDiv:!1,selectedQuestion:"",selectedSubTopic:"",selectedOperation:""},this.questionTypes=[{value:"TEXT",label:"Text"},{value:"DATE",label:"Date"},{value:"NUMBER",label:"Number"},{value:"PRICE",label:"Price"},{value:"MULTIPLE_CHOICE",label:"Multiple Choice"},{value:"WORD_DOCUMENT",label:"Word Document"},{value:"PDF_DOCUMENT",label:"PDF Document"}],this.defaultValueTypes=[{value:"NONE",label:"NONE"},{value:"PREVIOUS",label:"PREVIOUS"},{value:"QUESTION",label:"QUESTION"},{value:"PS",label:"PS"},{value:"SUB",label:"Subdivision"},{value:"CIRCLE",label:"Circle"},{value:"PSOP",label:"PS/OP"}],this.mathOperations=[{value:"+",label:"Plus"},{value:"-",label:"Minus"},{value:"*",label:"Multiply"},{value:"/",label:"Division"},{value:"=",label:"Equal"},{value:"==",label:"Equal To"}],this.showDefaultQuestion=!1,this.showDefaultSubTopic=!1}ngOnInit(){this.loadActiveTopics(),this.loadQuestions()}loadActiveTopics(){this.loadingTopics=!0,this.apiService.getActiveTopics().subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.topics=n.data),this.loadingTopics=!1},error:n=>{console.error("Error loading topics:",n),this.loadingTopics=!1}})}loadSubTopicsByTopic(n){n?(this.loadingSubTopics=!0,this.apiService.getSubTopicsByTopicForForm(n).subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.filteredSubTopics=e.data),this.loadingSubTopics=!1},error:e=>{console.error("Error loading sub-topics:",e),this.loadingSubTopics=!1}})):this.filteredSubTopics=[]}loadQuestions(){this.loading=!0,this.apiService.getQuestions(this.currentPage,this.entriesPerPage).subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.questions=n.data,n.pagination&&(this.totalRecords=n.pagination.total,this.totalPages=n.pagination.totalPages)),this.loading=!1},error:n=>{console.error("Error loading questions:",n),this.loading=!1}})}onEntriesPerPageChange(){this.currentPage=1,this.loadQuestions()}goToPage(n){this.currentPage=n,this.loadQuestions()}getTotalPages(){return this.totalPages}getPageNumbers(){const n=[],e=this.totalPages,o=this.currentPage;if(e<=7)for(let c=1;c<=e;c++)n.push(c);else if(o<=4){for(let c=1;c<=5;c++)n.push(c);e>6&&(n.push(-1),n.push(e))}else if(o>=e-3){n.push(1),e>6&&n.push(-1);for(let c=e-4;c<=e;c++)n.push(c)}else{n.push(1),n.push(-1);for(let c=o-1;c<=o+1;c++)n.push(c);n.push(-1),n.push(e)}return n}getStartEntry(){return 0===this.totalRecords?0:(this.currentPage-1)*this.entriesPerPage+1}getEndEntry(){const n=this.currentPage*this.entriesPerPage;return n>this.totalRecords?this.totalRecords:n}openAddModal(){this.isEditing=!1,this.resetFormData(),this.showModal=!0}closeModal(){this.showModal=!1,this.resetFormData()}resetFormData(){this.formData={topicId:"",subTopicId:"",question:"",priority:"",type:"NUMBER",defaultVal:"NONE",isPrevious:!1,isCumulative:!1,formula:"",defaultQue:"",defaultSub:"",active:!0},this.filteredSubTopics=[],this.availableQuestions=[],this.resetFormulaBuilder(),this.showDefaultQuestion=!1,this.showDefaultSubTopic=!1}onTopicChange(){this.formData.subTopicId="",this.formData.formula="",this.resetFormulaBuilder(),this.formData.topicId?(this.loadSubTopicsByTopic(this.formData.topicId),this.loadQuestionsByTopic(this.formData.topicId)):(this.filteredSubTopics=[],this.availableQuestions=[])}onDefaultValueChange(){this.showDefaultQuestion="QUESTION"===this.formData.defaultVal,this.showDefaultSubTopic="QUESTION"===this.formData.defaultVal,"QUESTION"!==this.formData.defaultVal&&(this.formData.defaultQue="",this.formData.defaultSub="")}loadQuestionsByTopic(n){this.apiService.getQuestionsByTopic(n).subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.availableQuestions=e.data)},error:e=>{console.error("Error loading questions:",e)}})}startFormulaBuilder(){this.formulaBuilderState.showQuestionDiv=!0,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!1,this.formulaBuilderState.step="question"}resetFormulaBuilder(){this.formulaBuilderState={step:"question",showQuestionDiv:!1,showSubTopicDiv:!1,showOperationDiv:!1,selectedQuestion:"",selectedSubTopic:"",selectedOperation:""}}onQuestionSelect(){this.formulaBuilderState.selectedQuestion&&(this.formData.formula+=this.formulaBuilderState.selectedQuestion,this.formulaBuilderState.showQuestionDiv=!1,this.formulaBuilderState.showSubTopicDiv=!0,this.formulaBuilderState.showOperationDiv=!1,this.formulaBuilderState.step="subtopic")}onSubTopicSelect(){this.formulaBuilderState.selectedSubTopic&&(this.formData.formula+="_"+this.formulaBuilderState.selectedSubTopic),this.formulaBuilderState.showQuestionDiv=!1,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!0,this.formulaBuilderState.step="operation"}skipSubTopic(){this.formulaBuilderState.showQuestionDiv=!1,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!0,this.formulaBuilderState.step="operation"}onOperationSelect(){this.formulaBuilderState.selectedOperation&&(this.formData.formula+=this.formulaBuilderState.selectedOperation,this.formulaBuilderState.selectedQuestion="",this.formulaBuilderState.selectedSubTopic="",this.formulaBuilderState.selectedOperation="",this.formulaBuilderState.showQuestionDiv=!0,this.formulaBuilderState.showSubTopicDiv=!1,this.formulaBuilderState.showOperationDiv=!1,this.formulaBuilderState.step="question")}resetFormula(){this.formData.formula="",this.resetFormulaBuilder()}finishFormula(){this.resetFormulaBuilder()}saveQuestion(){if(!this.formData.question||!this.formData.topicId)return void alert("Please fill all required fields");const n={question:this.formData.question,topicId:parseInt(this.formData.topicId),subTopicId:this.formData.subTopicId?parseInt(this.formData.subTopicId):void 0,priority:this.formData.priority?parseInt(this.formData.priority):void 0,type:this.formData.type,defaultVal:this.formData.defaultVal,isPrevious:this.formData.isPrevious,isCumulative:this.formData.isCumulative,formula:this.formData.formula,defaultQue:this.formData.defaultQue?parseInt(this.formData.defaultQue):void 0,active:this.formData.active};this.isEditing?this.apiService.updateQuestion(this.formData.id,n).subscribe({next:e=>{"SUCCESS"===e.status&&(this.loadQuestions(),this.closeModal())},error:e=>{console.error("Error updating question:",e),alert("Error updating question")}}):this.apiService.addQuestion(n).subscribe({next:e=>{"SUCCESS"===e.status&&(this.loadQuestions(),this.closeModal())},error:e=>{console.error("Error creating question:",e),alert("Error creating question")}})}toggleQuestionStatus(n){(n.active?this.apiService.deactivateQuestion(n.id):this.apiService.activateQuestion(n.id)).subscribe({next:o=>{"SUCCESS"===o.status&&(n.active=!n.active)},error:o=>{console.error("Error toggling question status:",o),alert("Error updating question status")}})}editQuestion(n){this.isEditing=!0,this.formData={id:n.id,topicId:n.topicId,subTopicId:n.subTopicId,question:n.question,priority:n.priority,type:n.type,defaultVal:n.defaultVal,isPrevious:n.isPrevious,isCumulative:n.isCumulative,formula:n.formula,defaultQue:n.defaultQue,active:n.active},this.formData.topicId&&(this.loadSubTopicsByTopic(this.formData.topicId),this.loadQuestionsByTopic(this.formData.topicId)),this.onDefaultValueChange(),this.showModal=!0}deleteQuestion(n){confirm("Are you sure you want to delete this question?")&&this.apiService.deleteQuestion(n.id).subscribe({next:e=>{"SUCCESS"===e.status&&this.loadQuestions()},error:e=>{console.error("Error deleting question:",e),alert("Error deleting question")}})}getTopicName(n){if(n.topic&&n.topic.topicName)return n.topic.topicName;const e=this.topics.find(o=>o.id===n.topicId);return e?e.topicName:""}getSubTopicName(n){if(n.subTopic&&n.subTopic.subTopicName)return n.subTopic.subTopicName;if(n.subTopicId){const e=this.filteredSubTopics.find(o=>o.id===n.subTopicId);return e?e.subTopicName:""}return""}resetForm(){this.formData.formula=""}trackByQuestionId(n,e){return e.id}formatFormula(n){if(!n)return"";let o="";for(let c=0;c<n.length;c+=20)o+=n.substr(c,20),c+20<n.length&&(o+="\n");return o}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-questions"]],standalone:!1,decls:52,vars:7,consts:[["questionForm","ngForm"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],[3,"ngModelChange","change","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"table-container"],[1,"data-table"],[4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["colspan","9",1,"loading"],[3,"hidden"],[1,"formula-cell"],["class","formula-text",4,"ngIf"],["class","no-formula",4,"ngIf"],[1,"priority-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],[1,"formula-text"],[1,"no-formula"],["colspan","9",1,"no-data"],[1,"pagination-container"],[1,"pagination-info"],["aria-label","Table pagination"],[1,"pagination"],["aria-label","Previous page",1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","ellipsis","disabled","click",4,"ngFor","ngForOf"],["aria-label","Next page",1,"page-btn",3,"click","disabled"],[1,"page-btn",3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","topicSelect"],[1,"required"],["id","topicSelect","name","topicId","required","",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","subTopicSelect"],["id","subTopicSelect","name","subTopicId",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","questionName"],["id","questionName","name","question","required","","placeholder","Enter question text","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","priority"],["type","number","id","priority","name","priority","min","1","placeholder","Enter priority",1,"form-control",3,"ngModelChange","ngModel"],["for","type"],["id","type","name","type","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","defaultVal"],["id","defaultVal","name","defaultVal","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["class","form-group",4,"ngIf"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","isPrevious",3,"ngModelChange","ngModel"],[1,"checkmark"],["type","checkbox","name","isCumulative",3,"ngModelChange","ngModel"],["for","formula"],[1,"formula-container"],["id","formula","name","formula","rows","2","placeholder","Formula will be built automatically","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"formula-buttons"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],["class","formula-builder",4,"ngIf"],["for","defaultQue"],["type","number","id","defaultQue","name","defaultQue","placeholder","Enter default question ID",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","name","active",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click","disabled"],[3,"value"],["id","defaultQue","name","defaultQue",1,"form-control",3,"ngModelChange","ngModel"],["for","defaultSub"],["id","defaultSub","name","defaultSub",1,"form-control",3,"ngModelChange","ngModel"],[1,"formula-builder"],["for","chooseQuestion"],["id","chooseQuestion","name","selectedQuestion",1,"form-control",3,"ngModelChange","change","ngModel"],["for","chooseSubTopic"],[1,"subtopic-selection"],["id","chooseSubTopic","name","selectedSubTopic",1,"form-control",3,"ngModelChange","change","ngModel"],["type","button",1,"btn","btn-outline-success","btn-sm",3,"click"],["for","chooseOperation"],["id","chooseOperation","name","selectedOperation",1,"form-control",3,"ngModelChange","change","ngModel"]],template:function(e,o){1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.EFF(4,"\u2753"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Questions"),t.k0s()(),t.j41(7,"button",5),t.bIt("click",function(){return o.openAddModal()}),t.EFF(8,"Add Question"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"span"),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",8),t.mxI("ngModelChange",function(l){return t.DH7(o.entriesPerPage,l)||(o.entriesPerPage=l),l}),t.bIt("change",function(){return o.onEntriesPerPageChange()}),t.j41(14,"option",9),t.EFF(15,"10"),t.k0s(),t.j41(16,"option",10),t.EFF(17,"25"),t.k0s(),t.j41(18,"option",11),t.EFF(19,"50"),t.k0s(),t.j41(20,"option",12),t.EFF(21,"100"),t.k0s()(),t.j41(22,"span"),t.EFF(23,"entries"),t.k0s()()(),t.j41(24,"div",13)(25,"table",14)(26,"thead")(27,"tr")(28,"th"),t.EFF(29,"Id"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Topic Name"),t.k0s(),t.j41(32,"th"),t.EFF(33,"SubTopic Name"),t.k0s(),t.j41(34,"th"),t.EFF(35,"Question Name"),t.k0s(),t.j41(36,"th"),t.EFF(37,"Default Value"),t.k0s(),t.j41(38,"th"),t.EFF(39,"Formula"),t.k0s(),t.j41(40,"th"),t.EFF(41,"Priority"),t.k0s(),t.j41(42,"th"),t.EFF(43,"Active"),t.k0s(),t.j41(44,"th"),t.EFF(45,"Edit"),t.k0s()()(),t.j41(46,"tbody"),t.DNE(47,Nn,3,0,"tr",15)(48,$n,26,17,"tr",16)(49,An,3,0,"tr",15),t.k0s()()(),t.DNE(50,Gn,10,6,"div",17),t.k0s(),t.DNE(51,io,94,25,"div",18)),2&e&&(t.R7$(13),t.R50("ngModel",o.entriesPerPage),t.R7$(34),t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngForOf",o.questions)("ngForTrackBy",o.trackByQuestionId),t.R7$(),t.Y8G("ngIf",0===o.questions.length&&!o.loading),t.R7$(),t.Y8G("ngIf",o.totalRecords>0),t.R7$(),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Q0,d.Zm,d.wz,d.BC,d.cb,d.YS,d.VZ,d.vS,d.cV],styles:['.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.data-table[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]{width:100%;table-layout:fixed;min-width:1200px;border-collapse:collapse}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:4%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:13%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:17%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:19%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:8%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:17%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:5%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:4%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:12%}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:8px 5px;vertical-align:middle;border-right:1px solid #dee2e6;font-size:12px;line-height:1.3;max-width:0}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 6px;text-align:left;font-weight:600;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-right:1px solid rgba(255,255,255,.2);font-size:13px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){white-space:normal;max-height:50px;overflow:hidden;line-height:1.2;word-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){padding:6px 4px;vertical-align:top}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6)   pre[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:12px;line-height:1.3;margin:0;padding:2px;white-space:pre-wrap;word-break:break-all;max-height:65px;overflow:hidden;background:transparent;border:none}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6).css-only{white-space:pre-line;max-height:60px;overflow:hidden;line-height:1.2;word-break:break-all;font-size:10px;font-family:Courier New,monospace}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6):after{content:"";position:absolute;bottom:0;left:0;right:0;height:15px;background:linear-gradient(transparent,#fff);pointer-events:none}.formula-text[_ngcontent-%COMP%]{display:block;word-break:break-all;overflow-wrap:anywhere;white-space:pre-wrap;font-family:Courier New,monospace;font-size:9px;line-height:1.1;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);-webkit-text-size-adjust:100%}.formula-break-30[_ngcontent-%COMP%], .formula-break-25[_ngcontent-%COMP%], .formula-break-20[_ngcontent-%COMP%]{word-break:break-all;overflow-wrap:anywhere;-webkit-hyphens:none;hyphens:none}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6)   .formula-content[_ngcontent-%COMP%]{display:block;word-spacing:-.1em;letter-spacing:0;word-break:break-all;overflow-wrap:anywhere;white-space:pre-wrap}.formula-char-break[_ngcontent-%COMP%]{display:inline-block;width:100%;word-break:break-all!important;overflow-wrap:break-word!important;-webkit-hyphens:none!important;hyphens:none!important;white-space:normal!important;font-feature-settings:"kern" 0;text-rendering:optimizeSpeed}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6):after{content:"";display:block;width:100%;height:0;overflow:hidden}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){font-variant-ligatures:none;text-align:left;text-justify:none}.form-row[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.checkbox-row[_ngcontent-%COMP%]{align-items:center}.checkbox-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:none;margin-right:20px}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;font-style:italic;padding:20px}.loading[_ngcontent-%COMP%]{text-align:center;color:#007bff;font-style:italic;padding:20px}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;margin-left:5px}.formula-container[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:4px;padding:15px;background-color:#f8f9fa}.formula-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:10px}.formula-builder[_ngcontent-%COMP%]{background-color:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;padding:15px;margin-top:15px}.formula-builder[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px}.formula-builder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#856404}.subtopic-selection[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.subtopic-selection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:400;text-align:center;vertical-align:middle;transition:all .15s ease-in-out;display:inline-block}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-outline-success[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #28a745;color:#28a745;padding:6px 12px;border-radius:4px;cursor:pointer;transition:all .15s ease-in-out}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#28a745;color:#fff}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.formula-preview[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:4px;padding:10px;margin-bottom:15px;font-family:Courier New,monospace;font-size:14px;min-height:40px;display:flex;align-items:center}.formula-help[_ngcontent-%COMP%]{background:#d1ecf1;border:1px solid #bee5eb;border-radius:4px;padding:10px;margin-top:10px;font-size:12px;color:#0c5460}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-weight:400;margin:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px}.checkmark[_ngcontent-%COMP%]{color:#495057}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px 25px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:20px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}.close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:20px 25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400!important;margin-bottom:0!important}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkmark[_ngcontent-%COMP%]{font-weight:500}.modal-footer[_ngcontent-%COMP%]{padding:15px 25px 20px;border-top:1px solid #e9ecef;display:flex;justify-content:flex-end;gap:10px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #6c757d;background:#fff;color:#6c757d;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:linear-gradient(45deg,#007bff,#0056b3);color:#fff;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #007bff4d}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 1199px){.questions-table[_ngcontent-%COMP%]{min-width:1000px}}@media (max-width: 991px){.questions-table[_ngcontent-%COMP%]{min-width:700px;font-size:13px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px}}@media (max-width: 768px){.questions-table[_ngcontent-%COMP%]{min-width:700px;font-size:11px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px;font-size:11px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){display:none}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:6%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:18%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:25%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:30%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){width:8%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){width:6%}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){width:7%}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.formula-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.subtopic-selection[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.modal-content[_ngcontent-%COMP%]{width:95%;max-width:95vw;margin:10px}.modal-header[_ngcontent-%COMP%]{padding:15px 20px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]{padding:15px 20px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;flex-direction:column-reverse;gap:8px}.modal-footer[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.questions-table[_ngcontent-%COMP%]{min-width:500px;font-size:10px}.questions-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 1px;font-size:10px}.modal-header[_ngcontent-%COMP%]{padding:12px 15px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:12px 15px}}.questions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.questions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff0d}.questions-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;align-items:stretch;width:100%}.questions-table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:10px;padding:3px 4px;margin:0;width:100%;text-align:center;min-height:22px;display:flex;align-items:center;justify-content:center;border-radius:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.questions-table[_ngcontent-%COMP%]   .btn.edit-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;font-size:9px}.questions-table[_ngcontent-%COMP%]   .btn.deactivate-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:9px}.questions-table[_ngcontent-%COMP%]   .btn.activate[_ngcontent-%COMP%]{background:#28a745;color:#fff;font-size:9px}.questions-table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1.02);z-index:5}.questions-table[_ngcontent-%COMP%]   .priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:1px 4px;border-radius:8px;font-size:10px;font-weight:500;background:#007bff;color:#fff;text-align:center;min-width:20px}.questions-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:10px;padding:1px 4px}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){text-align:center;padding:8px 4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7)   .priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 6px;border-radius:10px;font-size:11px;font-weight:500;background:#007bff;color:#fff;min-width:20px;text-align:center}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8){text-align:center;padding:8px 4px;white-space:nowrap}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8)   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;min-width:35px;text-align:center}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8)   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8)   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){padding:3px 1px;overflow:visible;white-space:nowrap}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9)   .action-buttons[_ngcontent-%COMP%]{min-width:100%;width:100%}.questions-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6)[title]{cursor:help}']}))}return r(),s})();var E=u(6977);function ao(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.battalionName," ")}}function so(r,s){1&r&&(t.j41(0,"div",49),t.EFF(1," Please select at least one battalion "),t.k0s())}function co(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.moduleName," ")}}function lo(r,s){1&r&&(t.j41(0,"div",49),t.EFF(1," Please select a module "),t.k0s())}function _o(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.Lme(" ",i.topicName,"",i.subName?" ("+i.subName+")":""," ")}}function uo(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.subTopicName," ")}}function po(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.question," ")}}function go(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.SpI(" ",i.label," ")}}function mo(r,s){1&r&&(t.j41(0,"div",49),t.EFF(1," Please select a month "),t.k0s())}function ho(r,s){if(1&r&&(t.j41(0,"option",48),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i),t.R7$(),t.SpI(" ",i," ")}}function fo(r,s){1&r&&(t.j41(0,"div",49),t.EFF(1," Please select a year "),t.k0s())}function bo(r,s){if(1&r&&(t.j41(0,"div",16)(1,"div",17)(2,"label",50),t.EFF(3,"Month "),t.j41(4,"span",19),t.EFF(5,"*"),t.k0s()(),t.j41(6,"select",51)(7,"option",26),t.EFF(8,"Select Month"),t.k0s(),t.DNE(9,go,2,2,"option",21),t.k0s(),t.DNE(10,mo,2,0,"div",23),t.k0s(),t.j41(11,"div",17)(12,"label",50),t.EFF(13,"Year "),t.j41(14,"span",19),t.EFF(15,"*"),t.k0s()(),t.j41(16,"select",52),t.DNE(17,ho,2,2,"option",21),t.k0s(),t.DNE(18,fo,2,0,"div",23),t.k0s()()),2&r){const i=t.XpG();t.R7$(6),t.AVh("is-invalid",i.isFieldInvalid("month")),t.R7$(3),t.Y8G("ngForOf",i.months),t.R7$(),t.Y8G("ngIf",i.isFieldInvalid("month")),t.R7$(6),t.AVh("is-invalid",i.isFieldInvalid("year")),t.R7$(),t.Y8G("ngForOf",i.years),t.R7$(),t.Y8G("ngIf",i.isFieldInvalid("year"))}}function Mo(r,s){1&r&&(t.j41(0,"div",49),t.EFF(1," Please select from date "),t.k0s())}function Co(r,s){1&r&&(t.j41(0,"div",49),t.EFF(1," Please select to date "),t.k0s())}function Po(r,s){if(1&r&&(t.j41(0,"div",16)(1,"div",17)(2,"label",50),t.EFF(3,"From Date "),t.j41(4,"span",19),t.EFF(5,"*"),t.k0s()(),t.nrm(6,"input",53),t.DNE(7,Mo,2,0,"div",23),t.k0s(),t.j41(8,"div",17)(9,"label",50),t.EFF(10,"To Date "),t.j41(11,"span",19),t.EFF(12,"*"),t.k0s()(),t.nrm(13,"input",54),t.DNE(14,Co,2,0,"div",23),t.k0s()()),2&r){const i=t.XpG();t.R7$(6),t.AVh("is-invalid",i.isFieldInvalid("fromDate")),t.R7$(),t.Y8G("ngIf",i.isFieldInvalid("fromDate")),t.R7$(6),t.AVh("is-invalid",i.isFieldInvalid("toDate")),t.R7$(),t.Y8G("ngIf",i.isFieldInvalid("toDate"))}}function xo(r,s){1&r&&(t.j41(0,"span"),t.EFF(1,"Generate Report"),t.k0s())}function vo(r,s){1&r&&(t.j41(0,"span"),t.nrm(1,"span",55),t.EFF(2," Generating... "),t.k0s())}function Eo(r,s){if(1&r&&(t.j41(0,"div",36)(1,"div",2)(2,"div",60)(3,"h6"),t.nrm(4,"i",61),t.EFF(5,"Report Summary"),t.k0s(),t.j41(6,"div",1)(7,"div",62)(8,"strong"),t.EFF(9,"Total Records:"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"div",62)(12,"strong"),t.EFF(13,"Total Battalions:"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"div",62)(16,"strong"),t.EFF(17,"Total Modules:"),t.k0s(),t.EFF(18),t.k0s(),t.j41(19,"div",62)(20,"strong"),t.EFF(21,"Total Questions:"),t.k0s(),t.EFF(22),t.k0s()(),t.j41(23,"div",63)(24,"div",62)(25,"strong"),t.EFF(26,"Submission Rate:"),t.k0s(),t.EFF(27),t.k0s(),t.j41(28,"div",62)(29,"strong"),t.EFF(30,"Approval Rate:"),t.k0s(),t.EFF(31),t.k0s(),t.j41(32,"div",62)(33,"strong"),t.EFF(34,"Total Submitted:"),t.k0s(),t.EFF(35),t.k0s(),t.j41(36,"div",62)(37,"strong"),t.EFF(38,"Total Draft:"),t.k0s(),t.EFF(39),t.k0s()()()()()),2&r){const i=t.XpG(2);t.R7$(10),t.SpI(" ",(null==i.reportData.summary||null==i.reportData.summary.overview?null:i.reportData.summary.overview.totalRecords)||0," "),t.R7$(4),t.SpI(" ",(null==i.reportData.summary.overview?null:i.reportData.summary.overview.totalBattalions)||0," "),t.R7$(4),t.SpI(" ",(null==i.reportData.summary.overview?null:i.reportData.summary.overview.totalModules)||0," "),t.R7$(4),t.SpI(" ",(null==i.reportData.summary.overview?null:i.reportData.summary.overview.totalQuestions)||0," "),t.R7$(5),t.SpI(" ",(null==i.reportData.summary.completionStatistics?null:i.reportData.summary.completionStatistics.submissionRate)||"0.00","% "),t.R7$(4),t.SpI(" ",(null==i.reportData.summary.completionStatistics?null:i.reportData.summary.completionStatistics.approvalRate)||"0.00","% "),t.R7$(4),t.SpI(" ",(null==i.reportData.summary.completionStatistics?null:i.reportData.summary.completionStatistics.totalSubmitted)||0," "),t.R7$(4),t.SpI(" ",(null==i.reportData.summary.completionStatistics?null:i.reportData.summary.completionStatistics.totalDraft)||0," ")}}function Oo(r,s){if(1&r&&(t.j41(0,"span",73),t.EFF(1),t.k0s()),2&r){const i=t.XpG(3);t.R7$(),t.Lme(" Page ",i.getCurrentPage()," of ",i.getTotalPages()," ")}}function ko(r,s){if(1&r&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td")(14,"span",74),t.EFF(15),t.k0s()(),t.j41(16,"td"),t.EFF(17),t.k0s()()),2&r){const i=s.$implicit,n=s.index,e=t.XpG(3);t.R7$(2),t.JRh(i.rowNumber||n+1),t.R7$(2),t.JRh(i.battalionName),t.R7$(2),t.JRh(i.moduleName),t.R7$(2),t.JRh(i.topicName),t.R7$(2),t.JRh(i.subTopicName),t.R7$(2),t.JRh(i.question),t.R7$(3),t.JRh(i.displayValue||i.value),t.R7$(2),t.JRh(e.formatMonthYear(i.month))}}function Fo(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",75)(1,"div",76)(2,"div")(3,"small",58),t.EFF(4),t.k0s()(),t.j41(5,"nav")(6,"ul",77)(7,"li",78)(8,"a",79),t.bIt("click",function(e){return a.eBV(i),t.XpG(3).onPreviousPage(),a.Njj(e.preventDefault())}),t.EFF(9," Previous "),t.k0s()(),t.j41(10,"li",80)(11,"span",81),t.EFF(12),t.k0s()(),t.j41(13,"li",78)(14,"a",79),t.bIt("click",function(e){return a.eBV(i),t.XpG(3).onNextPage(),a.Njj(e.preventDefault())}),t.EFF(15," Next "),t.k0s()()()()()()}if(2&r){const i=t.XpG(3);t.R7$(4),t.Lme(" Showing ",i.getNumberOfElements()," of ",i.getTotalElements()," records "),t.R7$(3),t.AVh("disabled",i.isPreviousDisabled()),t.R7$(5),t.SpI(" ",i.getCurrentPage()," "),t.R7$(),t.AVh("disabled",i.isNextDisabled())}}function Do(r,s){if(1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"h5",10),t.nrm(7,"i",64),t.EFF(8,"Report Data "),t.k0s()(),t.j41(9,"div",11)(10,"div",65)(11,"span",66),t.EFF(12),t.k0s(),t.DNE(13,Oo,2,2,"span",67),t.k0s()()()(),t.j41(14,"div",14)(15,"div",68)(16,"table",69)(17,"thead",70)(18,"tr")(19,"th"),t.EFF(20,"#"),t.k0s(),t.j41(21,"th"),t.EFF(22,"Battalion"),t.k0s(),t.j41(23,"th"),t.EFF(24,"Module"),t.k0s(),t.j41(25,"th"),t.EFF(26,"Topic"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Subtopic"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Question"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Value"),t.k0s(),t.j41(33,"th"),t.EFF(34,"Month/Year"),t.k0s()()(),t.j41(35,"tbody"),t.DNE(36,ko,18,8,"tr",71),t.k0s()()(),t.DNE(37,Fo,16,7,"div",72),t.k0s()()()()),2&r){const i=t.XpG(2);t.R7$(12),t.SpI(" ",i.getTotalElements()," total records "),t.R7$(),t.Y8G("ngIf",i.reportData.pagination),t.R7$(23),t.Y8G("ngForOf",i.reportData.data),t.R7$(),t.Y8G("ngIf",i.hasPagination())}}function To(r,s){if(1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"h4",10),t.nrm(7,"i",56),t.EFF(8,"Report Results "),t.j41(9,"span",57),t.EFF(10),t.k0s()()(),t.j41(11,"div",11)(12,"span",58),t.EFF(13),t.k0s()()()(),t.j41(14,"div",14),t.DNE(15,Eo,40,8,"div",59)(16,Do,38,4,"div",47),t.k0s()()()()),2&r){const i=t.XpG();t.R7$(10),t.JRh(null==i.reportData.metadata?null:i.reportData.metadata.reportType),t.R7$(3),t.SpI(" Generated: ",null==i.reportData.metadata?null:i.reportData.metadata.generatedAt," "),t.R7$(2),t.Y8G("ngIf",i.reportData.summary),t.R7$(),t.Y8G("ngIf",i.reportData.data&&i.reportData.data.length>0)}}function Ro(r,s){if(1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"div",6)(3,"div",7)(4,"h5",10),t.nrm(5,"i",82),t.EFF(6,"Performance Metrics "),t.k0s()(),t.j41(7,"div",14)(8,"div",1)(9,"div",27)(10,"div",83)(11,"div",84)(12,"h6",85),t.EFF(13,"Query Performance"),t.k0s(),t.j41(14,"h4",86),t.EFF(15),t.k0s(),t.j41(16,"p",87),t.EFF(17,"Total Query Time"),t.k0s(),t.j41(18,"small",58),t.EFF(19),t.k0s()()()(),t.j41(20,"div",27)(21,"div",83)(22,"div",84)(23,"h6",85),t.EFF(24,"Processing Time"),t.k0s(),t.j41(25,"h4",88),t.EFF(26),t.k0s(),t.j41(27,"p",87),t.EFF(28,"Total Processing"),t.k0s(),t.j41(29,"small",58),t.EFF(30),t.k0s()()()(),t.j41(31,"div",27)(32,"div",83)(33,"div",84)(34,"h6",85),t.EFF(35,"Cache Status"),t.k0s(),t.j41(36,"h4",89),t.EFF(37),t.k0s(),t.j41(38,"p",87),t.EFF(39,"Cache Performance"),t.k0s(),t.j41(40,"small",58),t.EFF(41),t.k0s()()()()()()()()()),2&r){const i=t.XpG();t.R7$(15),t.JRh(null==i.reportData||null==i.reportData.performance||null==i.reportData.performance.queryMetrics?null:i.reportData.performance.queryMetrics.totalQueryTime),t.R7$(4),t.SpI(" ",null==i.reportData||null==i.reportData.performance||null==i.reportData.performance.queryMetrics?null:i.reportData.performance.queryMetrics.recordsScanned," records scanned "),t.R7$(7),t.JRh(null==i.reportData||null==i.reportData.performance||null==i.reportData.performance.processingMetrics?null:i.reportData.performance.processingMetrics.totalProcessingTime),t.R7$(4),t.SpI(" ",null==i.reportData||null==i.reportData.performance||null==i.reportData.performance.queryMetrics?null:i.reportData.performance.queryMetrics.recordsReturned," records returned "),t.R7$(7),t.SpI(" ",null!=i.reportData&&null!=i.reportData.performance&&null!=i.reportData.performance.cacheMetrics&&i.reportData.performance.cacheMetrics.cacheHit?"HIT":"MISS"," "),t.R7$(4),t.SpI(" ",null!=i.reportData&&null!=i.reportData.performance&&null!=i.reportData.performance.cacheMetrics&&i.reportData.performance.cacheMetrics.cacheChecked?"Checked":"Not Checked"," ")}}let A=(()=>{var r;class s{constructor(n,e,o){this.fb=n,this.apiService=e,this.notificationService=o,this.isLoading=!1,this.isGenerating=!1,this.battalions=[],this.modules=[],this.topics=[],this.subTopics=[],this.questions=[],this.filteredTopics=[],this.filteredSubTopics=[],this.filteredQuestions=[],this.reportData=null,this.lastReportId=null,this.metadata=null,this.templates=[],this.destroy$=new F.B,this.months=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],this.years=[],this.initializeForm(),this.generateYears()}ngOnInit(){this.loadInitialData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.reportForm=this.fb.group({reportType:["SUMMARY",d.k0.required],battalionIds:[[],d.k0.required],moduleId:["",d.k0.required],topicId:[""],subTopicId:[""],questionId:[""],month:[""],year:[(new Date).getFullYear()],fromDate:[""],toDate:[""],trendPeriod:["MONTHLY"],viewType:["BOTH"],chartType:["BAR"],page:[0],pageSize:[50]}),this.reportForm.get("reportType")?.valueChanges.pipe((0,E.Q)(this.destroy$)).subscribe(n=>{this.updateValidators(n)})}updateValidators(n){this.reportForm.get("month")?.clearValidators(),this.reportForm.get("year")?.clearValidators(),this.reportForm.get("fromDate")?.clearValidators(),this.reportForm.get("toDate")?.clearValidators(),this.reportForm.get("trendPeriod")?.clearValidators(),this.isSingleMonthReportType(n)?(this.reportForm.get("month")?.setValidators([d.k0.required]),this.reportForm.get("year")?.setValidators([d.k0.required])):this.isDateRangeReportType(n)&&(this.reportForm.get("fromDate")?.setValidators([d.k0.required]),this.reportForm.get("toDate")?.setValidators([d.k0.required])),"TREND"===n&&this.reportForm.get("trendPeriod")?.setValidators([d.k0.required]),this.reportForm.get("month")?.updateValueAndValidity(),this.reportForm.get("year")?.updateValueAndValidity(),this.reportForm.get("fromDate")?.updateValueAndValidity(),this.reportForm.get("toDate")?.updateValueAndValidity(),this.reportForm.get("trendPeriod")?.updateValueAndValidity()}isSingleMonthReportType(n){return["SUMMARY","PERFORMANCE","COMPLIANCE"].includes(n)}isDateRangeReportType(n){return["DETAILED","COMPARISON","TREND"].includes(n)}isSingleMonthReport(){return this.isSingleMonthReportType(this.reportForm.get("reportType")?.value)}isDateRangeReport(){return this.isDateRangeReportType(this.reportForm.get("reportType")?.value)}showDateRange(){return this.isSingleMonthReport()||this.isDateRangeReport()}showChartConfig(){const n=this.reportForm.get("reportType")?.value;return["SUMMARY","COMPARISON","TREND"].includes(n)}generateYears(){const n=(new Date).getFullYear();for(let e=n;e>=n-10;e--)this.years.push(e)}loadInitialData(){this.isLoading=!0,this.loadBattalions(),this.loadModules()}loadBattalions(){this.apiService.getActiveBattalions().pipe((0,E.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status&&(this.battalions=n.data||[])},error:n=>{console.error("Error loading battalions:",n),this.notificationService.error("Failed to load battalions")}})}loadModules(){this.apiService.getActiveModules().pipe((0,E.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status&&(this.modules=n.data||[])},error:n=>{console.error("Error loading modules:",n),this.notificationService.error("Failed to load modules")},complete:()=>{this.isLoading=!1}})}onModuleChange(){const n=this.reportForm.get("moduleId")?.value;n?this.apiService.getTopicsByModule(n).pipe((0,E.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status&&(this.filteredTopics=e.data||[],this.topics=this.filteredTopics)},error:e=>{console.error("Error loading topics:",e),this.notificationService.error("Failed to load topics")}}):(this.filteredTopics=[],this.filteredSubTopics=[],this.filteredQuestions=[]),this.reportForm.patchValue({topicId:"",subTopicId:"",questionId:""})}onTopicChange(){const n=this.reportForm.get("topicId")?.value;n?(this.apiService.getSubTopicsByTopicForForm(n).pipe((0,E.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status&&(this.filteredSubTopics=e.data||[],this.subTopics=this.filteredSubTopics)},error:e=>{console.error("Error loading subtopics:",e),this.notificationService.error("Failed to load subtopics")}}),this.apiService.getQuestionsByTopic(n).pipe((0,E.Q)(this.destroy$)).subscribe({next:e=>{"SUCCESS"===e.status&&(this.filteredQuestions=e.data||[],this.questions=this.filteredQuestions)},error:e=>{console.error("Error loading questions:",e),this.notificationService.error("Failed to load questions")}})):(this.filteredSubTopics=[],this.filteredQuestions=[]),this.reportForm.patchValue({subTopicId:"",questionId:""})}onSubTopicChange(){const n=this.reportForm.get("subTopicId")?.value,e=this.reportForm.get("topicId")?.value;n&&e&&this.apiService.getQuestionsBySubTopic(n).pipe((0,E.Q)(this.destroy$)).subscribe({next:o=>{"SUCCESS"===o.status&&(this.filteredQuestions=o.data||[],this.questions=this.filteredQuestions)},error:o=>{console.error("Error loading filtered questions:",o),this.notificationService.error("Failed to load filtered questions")}}),this.reportForm.patchValue({questionId:""})}buildReportData(){const n=this.reportForm.value,e=n.reportType,o={battalionIds:n.battalionIds||[],moduleId:n.moduleId,page:n.page||0,size:n.pageSize||50};return n.topicId&&(o.topicIds=[n.topicId]),n.subTopicId&&(o.subTopicIds=[n.subTopicId]),n.questionId&&(o.questionIds=[n.questionId]),this.isSingleMonthReportType(e)?n.month&&n.year&&(o.monthYear=this.formatMonthYearForAPI(n.month,n.year)):this.isDateRangeReportType(e)&&(n.fromDate&&(o.fromDate=new Date(n.fromDate).toISOString()),n.toDate&&(o.toDate=new Date(n.toDate).toISOString())),"SUMMARY"===e?o.viewType=n.viewType||"BOTH":"TREND"===e&&(o.trendPeriod=n.trendPeriod||"MONTHLY"),{reportType:e,filters:o}}onGenerateReport(){if(this.reportForm.valid){this.isGenerating=!0;const n=this.buildReportData();console.log("reportData",n),this.apiService.generateReport(n).pipe((0,E.Q)(this.destroy$)).subscribe({next:c=>{if("SUCCESS"===c.status){const l=c.data;this.reportData={summary:{overview:{totalRecords:l.metadata?.recordCount||l.data?.length||0,totalBattalions:new Set(l.data.map(m=>m.battalionName)).size,totalModules:new Set(l.data.map(m=>m.moduleName)).size,totalQuestions:l.data?.length||0},completionStatistics:{submissionRate:"100.00",approvalRate:"100.00",totalSubmitted:l.data?.length||0,totalDraft:0},alerts:[],recommendations:[]},chartData:{title:"Report Chart",labels:l.data.map(m=>m.question),values:l.data.map(m=>parseFloat(m.value))},data:l.data,reportId:l?.metadata?.reportId||l?.reportId||"UNKNOWN_REPORT_ID"},this.lastReportId=l?.metadata?.reportId||l?.reportId,console.log("\u2705 Report generated successfully"),console.log("Report ID:",this.lastReportId),console.log("Report Data:",this.reportData),this.notificationService.success("Report generated successfully"),setTimeout(()=>{document.querySelector(".card:last-child")?.scrollIntoView({behavior:"smooth"})},100)}else this.notificationService.error(c.message||"Failed to generate report")},error:c=>{console.error("\u274c Error generating report:",c),this.notificationService.error("Failed to generate report")},complete:()=>{this.isGenerating=!1}})}else this.notificationService.error("Please fill in all required fields"),this.markFormGroupTouched()}onExportReport(n){this.lastReportId?(this.isGenerating=!0,this.apiService.exportReport(this.lastReportId,n).pipe((0,E.Q)(this.destroy$)).subscribe({next:e=>{const o=e.headers.get("Content-Disposition");let c=`report_${this.lastReportId}.${this.getFileExtension(n)}`;if(o){const x=o.match(/filename="(.+)"/);x&&(c=x[1])}const l=new Blob([e.body],{type:this.getMimeType(n)}),m=window.URL.createObjectURL(l),P=document.createElement("a");P.href=m,P.download=c,P.click(),window.URL.revokeObjectURL(m),this.notificationService.success(`${n} file downloaded successfully`)},error:e=>{console.error("Export error:",e),this.notificationService.error(`Failed to export ${n} report`)},complete:()=>this.isGenerating=!1})):this.notificationService.error("Please generate a report first")}getFileExtension(n){switch(n){case"EXCEL":return"xlsx";case"CSV":return"csv";case"PDF":return"pdf";case"JSON":return"json";default:return"dat"}}getMimeType(n){switch(n){case"EXCEL":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"CSV":return"text/csv";case"PDF":return"application/pdf";case"JSON":return"application/json";default:return"application/octet-stream"}}onGetMetadata(){this.isLoading=!0,this.apiService.getReportMetadata().pipe((0,E.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status?(this.metadata=n.data,this.notificationService.success("Metadata retrieved successfully"),new window.bootstrap.Modal(document.getElementById("metadataModal")).show()):this.notificationService.error(n.message||"Failed to get metadata")},error:n=>{console.error("Error getting metadata:",n),this.notificationService.error("Failed to get metadata")},complete:()=>{this.isLoading=!1}})}onGetTemplates(){this.isLoading=!0,this.apiService.getReportTemplates().pipe((0,E.Q)(this.destroy$)).subscribe({next:n=>{"SUCCESS"===n.status?(this.templates=n.data||[],this.notificationService.success("Templates retrieved successfully"),new window.bootstrap.Modal(document.getElementById("templatesModal")).show()):this.notificationService.error(n.message||"Failed to get templates")},error:n=>{console.error("Error getting templates:",n),this.notificationService.error("Failed to get templates")},complete:()=>{this.isLoading=!1}})}onResetForm(){this.reportForm.reset(),this.reportForm.patchValue({reportType:"SUMMARY",year:(new Date).getFullYear(),viewType:"BOTH",chartType:"BAR",page:0,pageSize:50,trendPeriod:"MONTHLY"}),this.filteredTopics=[],this.filteredSubTopics=[],this.filteredQuestions=[],this.reportData=null,this.lastReportId=null}onPageChange(n){null!=n&&n>=0&&(this.reportForm.patchValue({page:n}),this.onGenerateReport())}markFormGroupTouched(){Object.keys(this.reportForm.controls).forEach(n=>{this.reportForm.get(n)?.markAsTouched()})}isFieldInvalid(n){const e=this.reportForm.get(n);return!(!e||!e.invalid||!e.dirty&&!e.touched)}getMinDate(){const n=new Date;return n.setFullYear(n.getFullYear()-5),n.toISOString().split("T")[0]}getMaxDate(){return(new Date).toISOString().split("T")[0]}get reportTypeValue(){return this.reportForm.get("reportType")?.value||"SUMMARY"}get battalionIdsValue(){return this.reportForm.get("battalionIds")?.value||[]}get moduleIdValue(){return this.reportForm.get("moduleId")?.value}validateDateRange(){const n=this.reportForm.get("fromDate")?.value,e=this.reportForm.get("toDate")?.value;return!n||!e||new Date(n)<=new Date(e)}getFieldErrorMessage(n){const e=this.reportForm.get(n);return e?.errors&&e.errors.required?`${this.getFieldDisplayName(n)} is required`:""}getFieldDisplayName(n){return{reportType:"Report Type",battalionIds:"Battalion(s)",moduleId:"Module",month:"Month",year:"Year",fromDate:"From Date",toDate:"To Date",trendPeriod:"Trend Period"}[n]||n}hasPagination(){return!!(this.reportData?.pagination&&this.reportData.pagination.totalPages>1)}getCurrentPage(){return(this.reportData?.pagination?.currentPage||0)+1}getTotalPages(){return this.reportData?.pagination?.totalPages||1}getNumberOfElements(){return this.reportData?.pagination?.numberOfElements||0}getTotalElements(){return this.reportData?.pagination?.totalElements||this.reportData?.data?.length||0}isPreviousDisabled(){return!this.reportData?.pagination?.hasPrevious}isNextDisabled(){return!this.reportData?.pagination?.hasNext}onPreviousPage(){const n=this.reportData?.pagination?.previousPage;null!=n&&this.onPageChange(n)}onNextPage(){const n=this.reportData?.pagination?.nextPage;null!=n&&this.onPageChange(n)}hasGeneratedReport(){return!(!this.lastReportId||!this.reportData)}formatMonthYear(n){if(!n)return"";if(n.includes(" "))return n;if(n.includes("-")){const e=n.split("-");if(2===e.length){const o=e[0].trim(),c=e[1].trim();if(isNaN(Number(o)))return`${o} ${c}`;const l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],m=parseInt(o,10)-1;if(m>=0&&m<12)return`${l[m]} ${c}`}}return n}formatMonthYearForAPI(n,e){if(!n||!e)return"";const c=parseInt(n,10)-1;return c>=0&&c<12?`${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][c]} ${e}`:`${n}-${e}`}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(d.ok),t.rXU(b.G),t.rXU(S.J))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-report"]],decls:90,vars:23,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-center"],[1,"mb-sm-0","font-size-18"],[1,"page-title-right"],[1,"card"],[1,"card-header"],[1,"row","align-items-center"],[1,"col"],[1,"card-title","mb-0"],[1,"col-auto"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fas","fa-redo","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","battalionIds",1,"form-label"],[1,"text-danger"],["id","battalionIds","formControlName","battalionIds","multiple","","size","4",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text"],["class","invalid-feedback",4,"ngIf"],["for","moduleId",1,"form-label"],["id","moduleId","formControlName","moduleId",1,"form-select",3,"change"],["value",""],[1,"col-md-4"],["for","topicId",1,"form-label"],["id","topicId","formControlName","topicId",1,"form-select",3,"change","disabled"],["for","subTopicId",1,"form-label"],["id","subTopicId","formControlName","subTopicId",1,"form-select",3,"change","disabled"],[1,"col-md-12"],["for","questionId",1,"form-label"],["id","questionId","formControlName","questionId",1,"form-select",3,"disabled"],["class","row mb-3",4,"ngIf"],[1,"row","mb-4"],[1,"d-flex","justify-content-center","gap-3","flex-wrap"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-chart-bar","me-2"],[4,"ngIf"],["type","button","id","exportDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-success","dropdown-toggle",3,"disabled"],[1,"fas","fa-download","me-2"],["aria-labelledby","exportDropdown",1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"click"],[1,"fas","fa-file-excel","me-2"],[1,"fas","fa-file-pdf","me-2"],["class","row",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],[1,"form-label"],["formControlName","month",1,"form-select"],["formControlName","year",1,"form-select"],["type","date","formControlName","fromDate",1,"form-select"],["type","date","formControlName","toDate",1,"form-select"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-chart-line","me-2"],[1,"badge","bg-primary","ms-2"],[1,"text-muted"],["class","row mb-4",4,"ngIf"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"col-md-3"],[1,"row","mt-2"],[1,"fas","fa-table","me-2"],[1,"d-flex","gap-2"],[1,"badge","bg-secondary"],["class","badge bg-info",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],["class","row mt-3",4,"ngIf"],[1,"badge","bg-info"],[1,"badge","bg-primary"],[1,"row","mt-3"],[1,"col-12","d-flex","justify-content-between","align-items-center"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["href","#",1,"page-link",3,"click"],[1,"page-item","active"],[1,"page-link"],[1,"fas","fa-tachometer-alt","me-2"],[1,"card","bg-light"],[1,"card-body","text-center"],[1,"card-title"],[1,"text-primary"],[1,"text-muted","mb-0"],[1,"text-success"],[1,"text-info"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t.EFF(5,"Report Generation"),t.k0s(),t.nrm(6,"div",5),t.k0s()()(),t.j41(7,"div",1)(8,"div",2)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h4",10),t.EFF(14,"Generate Performance Reports"),t.k0s()(),t.j41(15,"div",11)(16,"button",12),t.bIt("click",function(){return o.onResetForm()}),t.nrm(17,"i",13),t.EFF(18,"Reset Form "),t.k0s()()()(),t.j41(19,"div",14)(20,"form",15),t.bIt("ngSubmit",function(){return o.onGenerateReport()}),t.j41(21,"div",16)(22,"div",17)(23,"label",18),t.EFF(24,"Battalion(s) "),t.j41(25,"span",19),t.EFF(26,"*"),t.k0s()(),t.j41(27,"select",20),t.DNE(28,ao,2,2,"option",21),t.k0s(),t.j41(29,"div",22),t.EFF(30,"Hold Ctrl/Cmd to select multiple battalions"),t.k0s(),t.DNE(31,so,2,0,"div",23),t.k0s(),t.j41(32,"div",17)(33,"label",24),t.EFF(34,"Module "),t.j41(35,"span",19),t.EFF(36,"*"),t.k0s()(),t.j41(37,"select",25),t.bIt("change",function(){return o.onModuleChange()}),t.j41(38,"option",26),t.EFF(39,"Select Module"),t.k0s(),t.DNE(40,co,2,2,"option",21),t.k0s(),t.DNE(41,lo,2,0,"div",23),t.k0s()(),t.j41(42,"div",16)(43,"div",27)(44,"label",28),t.EFF(45,"Topic"),t.k0s(),t.j41(46,"select",29),t.bIt("change",function(){return o.onTopicChange()}),t.j41(47,"option",26),t.EFF(48,"Select Topic"),t.k0s(),t.DNE(49,_o,2,3,"option",21),t.k0s()(),t.j41(50,"div",27)(51,"label",30),t.EFF(52,"Sub Topic"),t.k0s(),t.j41(53,"select",31),t.bIt("change",function(){return o.onSubTopicChange()}),t.j41(54,"option",26),t.EFF(55,"Select SubTopic"),t.k0s(),t.DNE(56,uo,2,2,"option",21),t.k0s()()(),t.j41(57,"div",16)(58,"div",32)(59,"label",33),t.EFF(60,"Questions"),t.k0s(),t.j41(61,"select",34)(62,"option",26),t.EFF(63,"Select Question"),t.k0s(),t.DNE(64,po,2,2,"option",21),t.k0s()()(),t.DNE(65,bo,19,8,"div",35)(66,Po,15,6,"div",35),t.nrm(67,"div",36),t.j41(68,"div",1)(69,"div",2)(70,"div",37)(71,"button",38),t.nrm(72,"i",39),t.DNE(73,xo,2,0,"span",40)(74,vo,3,0,"span",40),t.k0s(),t.j41(75,"div")(76,"button",41),t.nrm(77,"i",42),t.EFF(78,"Export Report "),t.k0s(),t.j41(79,"ul",43)(80,"li")(81,"a",44),t.bIt("click",function(l){return o.onExportReport("EXCEL"),l.preventDefault()}),t.nrm(82,"i",45),t.EFF(83,"Export as Excel "),t.k0s()(),t.j41(84,"li")(85,"a",44),t.bIt("click",function(l){return o.onExportReport("PDF"),l.preventDefault()}),t.nrm(86,"i",46),t.EFF(87,"Export as PDF "),t.k0s()()()()()()()()()()()(),t.DNE(88,To,17,4,"div",47)(89,Ro,42,6,"div",47),t.k0s()),2&e&&(t.R7$(20),t.Y8G("formGroup",o.reportForm),t.R7$(7),t.AVh("is-invalid",o.isFieldInvalid("battalionIds")),t.R7$(),t.Y8G("ngForOf",o.battalions),t.R7$(3),t.Y8G("ngIf",o.isFieldInvalid("battalionIds")),t.R7$(6),t.AVh("is-invalid",o.isFieldInvalid("moduleId")),t.R7$(3),t.Y8G("ngForOf",o.modules),t.R7$(),t.Y8G("ngIf",o.isFieldInvalid("moduleId")),t.R7$(5),t.Y8G("disabled",0===o.filteredTopics.length),t.R7$(3),t.Y8G("ngForOf",o.filteredTopics),t.R7$(4),t.Y8G("disabled",0===o.filteredSubTopics.length),t.R7$(3),t.Y8G("ngForOf",o.filteredSubTopics),t.R7$(5),t.Y8G("disabled",0===o.filteredQuestions.length),t.R7$(3),t.Y8G("ngForOf",o.filteredQuestions),t.R7$(),t.Y8G("ngIf",o.isSingleMonthReport()),t.R7$(),t.Y8G("ngIf",o.isDateRangeReport()),t.R7$(5),t.Y8G("disabled",o.isGenerating||o.reportForm.invalid),t.R7$(2),t.Y8G("ngIf",!o.isGenerating),t.R7$(),t.Y8G("ngIf",o.isGenerating),t.R7$(2),t.Y8G("disabled",o.isGenerating||o.reportForm.invalid||!o.hasGeneratedReport()),t.R7$(12),t.Y8G("ngIf",o.reportData),t.R7$(),t.Y8G("ngIf",null==o.reportData?null:o.reportData.performance))},dependencies:[p.MD,p.Sq,p.bT,d.YN,d.qT,d.xH,d.y7,d.me,d.wz,d.W0,d.BC,d.cb,d.X1,d.j4,d.JD],styles:[".container-fluid[_ngcontent-%COMP%]{padding:1.5rem}.page-title-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem;border-radius:8px;margin-bottom:1.5rem}.page-title-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0}.breadcrumb[_ngcontent-%COMP%]{background:none;margin:0}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fffc;text-decoration:none}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #00000012;border-radius:12px;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0!important;padding:1rem 1.5rem}.card-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:6px;padding:.6rem .75rem;transition:all .2s ease-in-out}.form-select[multiple][_ngcontent-%COMP%]{height:auto;min-height:120px;padding:.5rem}.form-select[multiple][_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;margin-bottom:2px}.form-select[multiple][_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:checked{background-color:#667eea;color:#fff}.form-text[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;margin-top:.25rem}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.form-select.is-invalid[_ngcontent-%COMP%], .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#dc3545;margin-top:.25rem}.form-check[_ngcontent-%COMP%]{padding-left:1.25rem}.form-check-input[type=radio][_ngcontent-%COMP%]{margin-top:.25rem}.btn[_ngcontent-%COMP%]{border-radius:6px;padding:.6rem 1.2rem;font-weight:500;transition:all .2s ease-in-out}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a67d8,#6b46c1);transform:translateY(-1px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78,#38a169);border:none}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#38a169,#2d7d32);transform:translateY(-1px)}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4299e1,#3182ce);border:none}.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ed8936,#dd6b20);border:none}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a0aec0,#718096);border:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .65rem;border-radius:4px}.badge.bg-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ed8936!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#e53e3e!important}.badge.bg-primary[_ngcontent-%COMP%]{background-color:#667eea!important}.badge.bg-secondary[_ngcontent-%COMP%]{background-color:#a0aec0!important}.badge.bg-info[_ngcontent-%COMP%]{background-color:#4299e1!important}.alert[_ngcontent-%COMP%]{border:none;border-radius:8px;padding:1rem 1.25rem}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ebf8ff,#e6fffa);color:#2b6cb0;border-left:4px solid #4299e1}.table[_ngcontent-%COMP%]{margin-bottom:0}.table-responsive[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;border-bottom:2px solid #dee2e6;font-weight:600;text-transform:uppercase;font-size:.75rem;letter-spacing:.5px;padding:1rem .75rem}.table-dark[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a5568,#2d3748)}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#00000006}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#667eea1a}.chart-container[_ngcontent-%COMP%]{position:relative;margin:1rem 0}#reportChart[_ngcontent-%COMP%]{max-height:400px}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 10px 25px #00000026}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0}.modal-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:.5rem}.dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #00000012;border-radius:8px}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;transition:all .2s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#667eea}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1.2rem}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.d-flex.gap-3[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important}.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}}@media (max-width: 576px){.form-check[_ngcontent-%COMP%]{margin-bottom:.5rem}.card-header[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.page-title-right[_ngcontent-%COMP%]{margin-top:1rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.btn[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.btn[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.text-danger[_ngcontent-%COMP%]{color:#e53e3e!important}.text-success[_ngcontent-%COMP%]{color:#48bb78!important}.text-info[_ngcontent-%COMP%]{color:#4299e1!important}.text-muted[_ngcontent-%COMP%]{color:#718096!important}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40;outline:none}.form-select[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;opacity:.6;cursor:not-allowed}h5[_ngcontent-%COMP%]{color:#495057;font-weight:600;border-bottom:2px solid #e3ebf0;padding-bottom:.5rem;margin-bottom:1rem}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#667eea;border-color:#667eea}.form-check-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-weight:500;border-radius:6px;transition:all .3s ease;min-width:140px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#5a6fd8,#6a4190);transform:translateY(-2px);box-shadow:0 4px 12px #667eea4d}.btn-outline-primary[_ngcontent-%COMP%]{border:2px solid #667eea;color:#667eea;background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff;transform:translateY(-2px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);border:none}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1ea583);transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#e74c3c);border:none}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#c82333,#d62c1a);transform:translateY(-2px);box-shadow:0 4px 12px #dc35454d}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);border:none;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#5a6268,#495057);transform:translateY(-1px)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.d-flex.justify-content-center[_ngcontent-%COMP%]{gap:1rem}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ffffffe6;z-index:1050;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{min-width:120px;margin-bottom:.5rem}.d-flex.justify-content-center[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}@media (max-width: 576px){.page-title-box[_ngcontent-%COMP%]{text-align:center}.page-title-right[_ngcontent-%COMP%]{margin-top:1rem}.card-header[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{text-align:center}.card-header[_ngcontent-%COMP%]   .col-auto[_ngcontent-%COMP%]{margin-top:1rem}}.form-select.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.form-select.ng-valid.ng-touched[_ngcontent-%COMP%], .form-control.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#28a745}.breadcrumb[_ngcontent-%COMP%]{background:none;padding:0;margin:0}.breadcrumb-item[_ngcontent-%COMP%]{font-size:.9rem}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#6c757d}.form-select[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.btn[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.btn[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{vertical-align:middle}"]}))}return r(),s})();var k=u(1985);let So=(()=>{var r;class s{constructor(){this.isConnected=!1,console.warn("[UNUSED 2025-11-12] WebSocketService initialized but sockets are disabled.")}onNewMessage(){return new k.c(n=>(console.warn("[UNUSED 2025-11-12] onNewMessage called but WebSockets are disabled."),n.complete(),()=>{}))}onCommunicationUpdate(){return new k.c(n=>(n.complete(),()=>{}))}onMessageStatusUpdate(){return new k.c(n=>(n.complete(),()=>{}))}sendMessage(n){console.warn("[UNUSED 2025-11-12] sendMessage called but WebSockets are disabled.")}markAsRead(n){console.warn("[UNUSED 2025-11-12] markAsRead called but WebSockets are disabled.")}notifyBattalion(n,e,o){console.warn("[UNUSED 2025-11-12] notifyBattalion called but WebSockets are disabled.")}startTyping(n){}stopTyping(n){}onNewCommunication(){return new k.c(n=>(n.complete(),()=>{}))}onUserTyping(){return new k.c(n=>(n.complete(),()=>{}))}disconnect(){console.warn("[UNUSED 2025-11-12] disconnect called but WebSockets are disabled.")}getConnectionStatus(){return!1}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)},this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return r(),s})();var Io=u(6319);function jo(r,s){if(1&r&&(t.j41(0,"span",40),t.EFF(1),t.k0s()),2&r){const i=t.XpG().$implicit,n=t.XpG();t.Y8G("title",n.getMultipleBattalionNames(i.selectedBattalions)),t.R7$(),t.SpI(" Multiple (",i.selectedBattalions.length,") ")}}function yo(r,s){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const i=t.XpG().$implicit,n=t.XpG();t.R7$(),t.SpI(" ",i.battalionName||n.getBattalionName(i.battalionId)," ")}}function wo(r,s){1&r&&(t.j41(0,"span",41),t.EFF(1," \u{1f4ce} Attached "),t.k0s())}function No(r,s){1&r&&(t.j41(0,"span",42),t.EFF(1," No Document "),t.k0s())}function Bo(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td")(7,"strong"),t.EFF(8),t.k0s()(),t.j41(9,"td"),t.DNE(10,jo,2,2,"span",32)(11,yo,2,1,"span",25),t.k0s(),t.j41(12,"td",33),t.EFF(13),t.k0s(),t.j41(14,"td"),t.DNE(15,wo,2,0,"span",34)(16,No,2,0,"span",35),t.k0s(),t.j41(17,"td")(18,"span",36),t.EFF(19),t.k0s()(),t.j41(20,"td")(21,"div",37)(22,"button",38),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.viewCommunicationDetails(e))}),t.EFF(23,"View"),t.k0s(),t.j41(24,"button",39),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editCommunication(e))}),t.EFF(25,"Edit"),t.k0s()()()()}if(2&r){const i=s.$implicit;t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(t.i5U(5,14,i.createdDate,"dd/MM/yyyy")),t.R7$(4),t.JRh(i.subject),t.R7$(2),t.Y8G("ngIf",i.selectedBattalions&&i.selectedBattalions.length>1),t.R7$(),t.Y8G("ngIf",!i.selectedBattalions||i.selectedBattalions.length<=1),t.R7$(),t.Y8G("title",i.message),t.R7$(),t.SpI(" ",i.message," "),t.R7$(2),t.Y8G("ngIf",i.document),t.R7$(),t.Y8G("ngIf",!i.document),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," ")}}function Uo(r,s){1&r&&(t.j41(0,"tr")(1,"td",43),t.EFF(2,"No communications found"),t.k0s()())}function $o(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function Ao(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",78)(1,"label",74)(2,"input",75),t.bIt("change",function(){const e=a.eBV(i).$implicit,o=t.XpG(3);return a.Njj(o.toggleBattalionSelection(e.id))}),t.k0s(),t.EFF(3),t.k0s()()}if(2&r){const i=s.$implicit;t.R7$(2),t.Y8G("checked",i.selected),t.R7$(),t.SpI(" ",i.name," ")}}function Lo(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",72)(1,"div",73)(2,"label",74)(3,"input",75),t.bIt("change",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.toggleSelectAll())}),t.k0s(),t.j41(4,"strong"),t.EFF(5,"Select All Battalions"),t.k0s()()(),t.nrm(6,"div",76),t.DNE(7,Ao,4,2,"div",77),t.k0s()}if(2&r){const i=t.XpG(2);t.R7$(3),t.Y8G("checked",i.allBattalionsSelected),t.R7$(4),t.Y8G("ngForOf",i.battalions)("ngForTrackBy",i.trackByBattalionId)}}function Go(r,s){1&r&&(t.j41(0,"div",79),t.EFF(1," Please select at least one battalion "),t.k0s())}function Vo(r,s){1&r&&(t.j41(0,"div",79),t.EFF(1," Subject is required "),t.k0s())}function Wo(r,s){1&r&&(t.j41(0,"div",79),t.EFF(1," Message is required "),t.k0s())}function Ko(r,s){1&r&&t.nrm(0,"span",80)}function Yo(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",46),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",47)(3,"div",48)(4,"h4",49),t.EFF(5),t.k0s(),t.j41(6,"button",50),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",51)(10,"form",52,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateCommunication():e.addCommunication())}),t.j41(12,"div",53)(13,"label",54),t.EFF(14,"Select Battalions"),t.k0s(),t.j41(15,"div",55),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.toggleBattalionDropdown())}),t.j41(16,"div",56)(17,"span",57),t.EFF(18),t.k0s(),t.j41(19,"span",58),t.EFF(20),t.k0s()()(),t.DNE(21,Lo,8,3,"div",59)(22,Go,2,0,"div",60),t.k0s(),t.j41(23,"div",53)(24,"label",61),t.EFF(25,"Subject"),t.k0s(),t.j41(26,"input",62,1),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentCommunication.subject,e)||(o.currentCommunication.subject=e),a.Njj(e)}),t.k0s(),t.DNE(28,Vo,2,0,"div",60),t.k0s(),t.j41(29,"div",53)(30,"label",63),t.EFF(31,"Message"),t.k0s(),t.j41(32,"textarea",64,2),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentCommunication.message,e)||(o.currentCommunication.message=e),a.Njj(e)}),t.k0s(),t.DNE(34,Wo,2,0,"div",60),t.k0s(),t.j41(35,"div",53)(36,"label",65),t.EFF(37,"Attachments"),t.k0s(),t.j41(38,"input",66),t.bIt("change",function(e){a.eBV(i);const o=t.XpG();return a.Njj(o.onDocumentSelected(e))}),t.k0s(),t.j41(39,"small",67),t.EFF(40," You can select multiple files. Allowed formats: PDF, DOC, DOCX, JPG, JPEG, PNG, TXT "),t.k0s()(),t.j41(41,"div",68)(42,"button",69),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(43," Close "),t.k0s(),t.j41(44,"button",70),t.DNE(45,Ko,1,0,"span",71),t.EFF(46),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.sdS(27),e=t.sdS(33),o=t.XpG();t.R7$(5),t.JRh(o.isEditMode?"Edit Communication":"Add Communication"),t.R7$(13),t.SpI(" ",o.getSelectedBattalionNames()," "),t.R7$(2),t.JRh(o.isBattalionDropdownOpen?"\u25b2":"\u25bc"),t.R7$(),t.Y8G("ngIf",o.isBattalionDropdownOpen),t.R7$(),t.Y8G("ngIf",0===o.selectedBattalionIds.length&&i.submitted),t.R7$(4),t.R50("ngModel",o.currentCommunication.subject),t.R7$(2),t.Y8G("ngIf",n.touched&&(null==n.errors?null:n.errors.required)),t.R7$(4),t.R50("ngModel",o.currentCommunication.message),t.R7$(2),t.Y8G("ngIf",e.touched&&(null==e.errors?null:e.errors.required)),t.R7$(10),t.Y8G("disabled",i.invalid||o.isLoading||0===o.selectedBattalionIds.length),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.SpI(" ",o.isEditMode?"Update":"Save"," ")}}function zo(r,s){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const i=t.XpG(3);t.R7$(),t.SpI(" ",i.getMultipleBattalionNames(i.selectedCommunication.selectedBattalions)," ")}}function Xo(r,s){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const i=t.XpG(3);t.R7$(),t.SpI(" ",i.selectedCommunication.battalionName||i.getBattalionName(i.selectedCommunication.battalionId)," ")}}function qo(r,s){1&r&&(t.j41(0,"span",98),t.EFF(1,"\u{1f4ce}"),t.k0s())}function Qo(r,s){1&r&&(t.j41(0,"span"),t.EFF(1,"-"),t.k0s())}function Ho(r,s){if(1&r&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.DNE(11,qo,2,0,"span",97)(12,Qo,2,0,"span",25),t.k0s()()),2&r){const i=s.$implicit,n=s.index;t.R7$(2),t.JRh(n+1),t.R7$(2),t.JRh(t.i5U(5,6,i.replyDate,"dd/MM/yyyy")),t.R7$(3),t.JRh(i.replyBy),t.R7$(2),t.JRh(i.replyMessage),t.R7$(2),t.Y8G("ngIf",i.document),t.R7$(),t.Y8G("ngIf",!i.document)}}function Jo(r,s){if(1&r&&(t.j41(0,"div",96)(1,"h5"),t.EFF(2,"Replies"),t.k0s(),t.j41(3,"div",20)(4,"table",21)(5,"thead")(6,"tr")(7,"th"),t.EFF(8,"Sr. No."),t.k0s(),t.j41(9,"th"),t.EFF(10,"Reply Date"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Reply By"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Reply Messages"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Document"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,Ho,13,9,"tr",24),t.k0s()()(),t.j41(19,"div",27),t.EFF(20),t.k0s()()),2&r){const i=t.XpG(3);t.R7$(18),t.Y8G("ngForOf",i.selectedCommunication.replies)("ngForTrackBy",i.trackByReplyId),t.R7$(2),t.Lme(" Showing 1 to ",i.selectedCommunication.replies.length," of ",i.selectedCommunication.replies.length," entries ")}}function Zo(r,s){1&r&&t.nrm(0,"span",80)}function ti(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",51)(1,"div",86)(2,"div",87)(3,"strong"),t.EFF(4,"Subject:"),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"div",87)(7,"strong"),t.EFF(8,"Message:"),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"div",87)(11,"strong"),t.EFF(12,"Battalions:"),t.k0s(),t.DNE(13,zo,2,1,"span",25)(14,Xo,2,1,"span",25),t.k0s(),t.j41(15,"div",87)(16,"strong"),t.EFF(17,"Created Date:"),t.k0s(),t.EFF(18),t.nI1(19,"date"),t.k0s()(),t.DNE(20,Jo,21,4,"div",88),t.j41(21,"div",89)(22,"h5"),t.EFF(23,"Send Reply"),t.k0s(),t.j41(24,"div",53)(25,"label",90),t.EFF(26,"Message:"),t.k0s(),t.j41(27,"textarea",91),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG(2);return t.DH7(o.replyMessage,e)||(o.replyMessage=e),a.Njj(e)}),t.k0s()(),t.j41(28,"div",53)(29,"label",92),t.EFF(30,"Attachments:"),t.k0s(),t.j41(31,"input",93),t.bIt("change",function(e){a.eBV(i);const o=t.XpG(2);return a.Njj(o.onFileChange(e))}),t.k0s()(),t.j41(32,"div",94)(33,"button",95),t.bIt("click",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.sendReply())}),t.DNE(34,Zo,1,0,"span",71),t.EFF(35," Send "),t.k0s()()()()}if(2&r){const i=t.XpG(2);t.R7$(5),t.SpI(" ",i.selectedCommunication.subject," "),t.R7$(4),t.SpI(" ",i.selectedCommunication.message," "),t.R7$(4),t.Y8G("ngIf",i.selectedCommunication.selectedBattalions&&i.selectedCommunication.selectedBattalions.length>1),t.R7$(),t.Y8G("ngIf",!i.selectedCommunication.selectedBattalions||i.selectedCommunication.selectedBattalions.length<=1),t.R7$(4),t.SpI(" ",t.i5U(19,9,i.selectedCommunication.createdDate,"dd/MM/yyyy")," "),t.R7$(2),t.Y8G("ngIf",i.selectedCommunication.replies&&i.selectedCommunication.replies.length>0),t.R7$(7),t.R50("ngModel",i.replyMessage),t.R7$(6),t.Y8G("disabled",!i.replyMessage.trim()||i.isLoading),t.R7$(),t.Y8G("ngIf",i.isLoading)}}function ei(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",45),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeDetailView())}),t.j41(1,"div",81),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",47)(3,"div",48)(4,"div",82)(5,"button",83),t.EFF(6,"Show Status"),t.k0s(),t.j41(7,"button",84),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeDetailView())}),t.EFF(8,"Back"),t.k0s()()(),t.DNE(9,ti,36,12,"div",85),t.k0s()()()}if(2&r){const i=t.XpG();t.R7$(9),t.Y8G("ngIf",i.selectedCommunication)}}let ni=(()=>{var r;class s{constructor(n,e,o,c){this.apiService=n,this.authService=e,this.webSocketService=o,this.performanceService=c,this.communications=[],this.filteredCommunications=[],this.paginatedCommunications=[],this.battalions=[],this.currentUser=null,this.selectedCommunication=null,this.showModal=!1,this.showDetailView=!1,this.showStatusView=!1,this.currentCommunication=this.createEmptyCommunication(),this.isEditMode=!1,this.isLoading=!1,this.replyMessage="",this.replyAttachments=[],this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.selectedBattalionIds=[],this.allBattalionsSelected=!1,this.isBattalionDropdownOpen=!1,this.isConnected=!1,this.typingUsers={},this.subscriptions=new y.yU,this.Math=Math}ngOnInit(){this.loadCurrentUser(),this.loadBattalions(),this.loadCommunications(),this.initializeWebSocketListeners()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.webSocketService.disconnect()}initializeWebSocketListeners(){this.isConnected=this.webSocketService.getConnectionStatus(),this.subscriptions.add(this.webSocketService.onNewMessage().subscribe(n=>{this.handleIncomingMessage(n)})),this.subscriptions.add(this.webSocketService.onCommunicationUpdate().subscribe(n=>{this.handleCommunicationUpdate(n)})),this.subscriptions.add(this.webSocketService.onMessageStatusUpdate().subscribe(n=>{this.handleMessageStatusUpdate(n)})),this.subscriptions.add(this.webSocketService.onNewCommunication().subscribe(n=>{this.handleNewCommunication(n)})),this.subscriptions.add(this.webSocketService.onUserTyping().subscribe(n=>{this.handleUserTyping(n)}))}handleIncomingMessage(n){console.log("\u{1f4e8} New real-time message received:",n);const e=this.communications.find(o=>o.id===n.communicationId);if(e){e.replies||(e.replies=[]);const o={id:n.replyId||Date.now(),replyDate:new Date(n.timestamp),replyBy:n.fromUserName||"Unknown User",replyMessage:n.message,message:n.message,userId:n.fromUser,battalionId:n.battalionId,fromUserName:n.fromUserName,read:!1};e.replies.push(o),e.unreadCount=(e.unreadCount||0)+1,this.selectedCommunication&&this.selectedCommunication.id===n.communicationId&&(this.selectedCommunication.replies=[...e.replies],this.selectedCommunication.unreadCount=e.unreadCount,this.markMessageAsRead(o)),this.showNotification(`New reply from ${n.fromUserName} in ${this.getBattalionName(n.battalionId)}`),this.applyFilters()}}handleCommunicationUpdate(n){console.log("\u{1f504} Communication update:",n),"NEW_REPLY"===n.type&&(this.loadCommunications(),(!this.selectedCommunication||this.selectedCommunication.id!==n.communicationId)&&this.showNotification(`New reply received from ${n.fromUserName}`))}handleMessageStatusUpdate(n){console.log("\u{1f440} Message status update:",n);const e=this.communications.find(o=>o.id===n.communicationId);if(e&&e.replies){const o=e.replies.find(c=>c.id===n.messageId);o&&(o.read=!0)}}handleNewCommunication(n){console.log("\u{1f4e2} New communication:",n),this.loadCommunications(),this.showNotification(`New communication: ${n.subject}`)}handleUserTyping(n){this.typingUsers[n.communicationId]||(this.typingUsers[n.communicationId]=[]),n.isTyping?this.typingUsers[n.communicationId].includes(n.userName)||this.typingUsers[n.communicationId].push(n.userName):this.typingUsers[n.communicationId]=this.typingUsers[n.communicationId].filter(e=>e!==n.userName)}getTypingText(n){const e=this.typingUsers[n];return e&&0!==e.length?1===e.length?`${e[0]} is typing...`:2===e.length?`${e[0]} and ${e[1]} are typing...`:`${e[0]} and ${e.length-1} others are typing...`:""}showNotification(n){console.log("\u{1f4ac} Notification:",n),"Notification"in window&&"granted"===Notification.permission&&new Notification("New Message",{body:n,icon:"/assets/notification-icon.png"})}loadCurrentUser(){this.currentUser=this.authService.getCurrentUser(),this.currentUser||this.subscriptions.add(this.authService.user$.subscribe(n=>{this.currentUser=n}))}loadBattalions(){this.subscriptions.add(this.apiService.getActiveBattalions().subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.battalions=n.data.map(e=>({id:e.id,name:e.battalionName,battalionName:e.battalionName,selected:!1})))},error:n=>{console.error("Error loading battalions:",n)}}))}getMultipleBattalionNames(n){return this.battalions.filter(o=>n.includes(o.id)).map(o=>o.name).join(", ")}getBattalionNames(n){return this.battalions.filter(e=>n.includes(e.id)).map(e=>e.name)}getBattalionDisplay(n){return n.selectedBattalionNames&&n.selectedBattalionNames.length>0?n.selectedBattalionNames.join(", "):n.selectedBattalions&&n.selectedBattalions.length>1?this.getMultipleBattalionNames(n.selectedBattalions):this.getBattalionName(n.selectedBattalions?.[0]||n.battalionId)}getBattalionName(n){if(!n)return"Unknown Battalion";const e=this.battalions.find(o=>o.id===n);return e?e.name:"Unknown Battalion"}getStatusBadgeClass(n){return n.unreadCount&&n.unreadCount>0?"status-unread":n.active?"status-active":"status-inactive"}getStatusText(n){return n.unreadCount&&n.unreadCount>0?`Unread (${n.unreadCount})`:n.active?"Active":"Inactive"}toggleBattalionDropdown(){this.isBattalionDropdownOpen=!this.isBattalionDropdownOpen}toggleBattalionSelection(n){const e=this.battalions.find(o=>o.id===n);e&&(e.selected=!e.selected,this.selectedBattalionIds=this.battalions.filter(o=>o.selected).map(o=>o.id),this.updateSelectAllState(),this.isEditMode&&this.currentCommunication&&(this.currentCommunication.selectedBattalions=[...this.selectedBattalionIds],this.currentCommunication.selectedBattalionNames=this.getBattalionNames(this.selectedBattalionIds)))}toggleSelectAll(){this.allBattalionsSelected=!this.allBattalionsSelected,this.battalions.forEach(n=>{n.selected=this.allBattalionsSelected}),this.selectedBattalionIds=this.allBattalionsSelected?this.battalions.map(n=>n.id):[],this.isEditMode&&this.currentCommunication&&(this.currentCommunication.selectedBattalions=[...this.selectedBattalionIds],this.currentCommunication.selectedBattalionNames=this.getBattalionNames(this.selectedBattalionIds))}updateSelectAllState(){this.allBattalionsSelected=this.battalions.length>0&&this.battalions.every(n=>n.selected)}getSelectedBattalionNames(){return this.allBattalionsSelected||this.selectedBattalionIds.length===this.battalions.length?"All Battalions":0===this.selectedBattalionIds.length?"Select battalions...":this.battalions.filter(e=>this.selectedBattalionIds.includes(e.id)).map(e=>e.name).join(", ")}loadCommunications(){this.isLoading=!0,console.log("\u{1f50d} DEBUG: Loading user-specific communications..."),console.log("\u{1f50d} DEBUG: Current user battalion:",this.currentUser?.battalionId),this.subscriptions.add(this.apiService.getUserCommunications(this.currentPage,this.itemsPerPage,this.searchTerm).subscribe({next:n=>{this.isLoading=!1,console.log("\u{1f50d} DEBUG: User communications response:",n),"SUCCESS"===n.status&&n.data?(this.communications=this.transformCommunications(n.data),this.applyFilters(),console.log(`\u2705 Loaded ${this.communications.length} communications for battalion ${this.currentUser?.battalionId}`),this.communications.forEach(e=>{console.log(`\u{1f4c4} Communication ${e.id}:`,{subject:e.subject,selectedBattalions:e.selectedBattalions,battalionId:e.battalionId})}),n.pagination?(this.totalItems=n.pagination.total,this.totalPages=n.pagination.totalPages):(this.totalItems=this.communications.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage))):(console.warn("\u26a0\ufe0f Using mock data - API response issue"),this.loadMockCommunications())},error:n=>{this.isLoading=!1,console.error("\u274c Error loading user communications:",n),this.loadMockCommunications()}}))}transformCommunications(n){return n.map(e=>({id:e.id,createdDate:new Date(e.createdDate||e.created_date||e.createdAt),subject:e.name||e.subject,battalionId:e.battalionId,battalionName:e.battalionName||this.getBattalionName(e.battalionId),message:e.message,document:e.document,active:void 0===e.active||e.active,replies:e.messages?this.transformReplies(e.messages):e.replies||[],name:e.name,createdBy:e.createdBy,selectedBattalions:e.selectedBattalions||[e.battalionId],selectedBattalionNames:e.selectedBattalionNames||this.getBattalionNames(e.selectedBattalions||[e.battalionId]),unreadCount:e.unreadCount||0,status:e.status||"active"}))}transformReplies(n){return n.map(e=>({id:e.id,replyDate:new Date(e.createdAt||e.replyDate),replyBy:e.user?`${e.user.firstName} ${e.user.lastName}`:"Unknown User",replyMessage:e.message,message:e.message,document:e.attachments&&e.attachments.length>0?"attached":void 0,userId:e.userId,battalionId:e.battalionId,fromUserName:e.fromUserName||(e.user?`${e.user.firstName} ${e.user.lastName}`:"Unknown User"),read:e.read||!1}))}loadMockCommunications(){this.communications=[{id:1,createdDate:new Date("2024-01-15"),subject:"Training Schedule Update",battalionId:1,battalionName:"Alpha Battalion",message:"Updated training schedule for next month...",active:!0,selectedBattalions:[1],selectedBattalionNames:["Alpha Battalion"],unreadCount:2,status:"active"},{id:2,createdDate:new Date("2024-01-10"),subject:"Equipment Maintenance",battalionId:2,battalionName:"Bravo Battalion",message:"Quarterly equipment maintenance notice...",active:!0,selectedBattalions:[2,3],selectedBattalionNames:["Bravo Battalion","Charlie Battalion"],unreadCount:0,status:"active"}],this.applyFilters()}createEmptyCommunication(){return{id:0,createdDate:new Date,subject:"",battalionId:0,message:"",document:"",active:!0,name:"",createdBy:this.currentUser?.id,selectedBattalions:[],selectedBattalionNames:[],unreadCount:0,status:"active"}}onSearch(){this.currentPage=1,this.loadCommunications()}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadCommunications()}applyFilters(){if(this.searchTerm.trim()){const n=this.searchTerm.toLowerCase().trim();this.filteredCommunications=this.communications.filter(e=>e.subject.toLowerCase().includes(n)||e.battalionName&&e.battalionName.toLowerCase().includes(n)||e.message.toLowerCase().includes(n))}else this.filteredCommunications=[...this.communications];this.updatePaginatedData()}updatePaginatedData(){this.totalItems=this.filteredCommunications.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage);const n=(this.currentPage-1)*this.itemsPerPage,e=Math.min(n+this.itemsPerPage,this.totalItems);this.paginatedCommunications=this.filteredCommunications.slice(n,e)}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.updatePaginatedData())}getVisiblePages(){const n=[];let o=Math.max(1,this.currentPage-Math.floor(2.5)),c=Math.min(this.totalPages,o+5-1);c-o+1<5&&(o=Math.max(1,c-5+1));for(let l=o;l<=c;l++)n.push(l);return n}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.filteredCommunications.sort((e,o)=>{let c=e[n],l=o[n];return c instanceof Date&&l instanceof Date&&(c=c.getTime(),l=l.getTime()),null==c&&(c=""),null==l&&(l=""),"string"==typeof c&&(c=c.toLowerCase(),l=l.toLowerCase()),c<l?"asc"===this.sortDirection?-1:1:c>l?"asc"===this.sortDirection?1:-1:0}),this.updatePaginatedData()}showAddCommunicationModal(){this.isEditMode=!1,this.currentCommunication=this.createEmptyCommunication(),this.showModal=!0,this.isBattalionDropdownOpen=!1}closeModal(){this.showModal=!1,this.currentCommunication=this.createEmptyCommunication(),this.isEditMode=!1,this.battalions.forEach(n=>n.selected=!1),this.selectedBattalionIds=[],this.allBattalionsSelected=!1,this.isBattalionDropdownOpen=!1}editCommunication(n){this.isEditMode=!0,this.currentCommunication={...n},n.selectedBattalions&&n.selectedBattalions.length>0&&(this.selectedBattalionIds=[...n.selectedBattalions],this.battalions.forEach(e=>{e.selected=this.selectedBattalionIds.includes(e.id)}),this.updateSelectAllState()),this.showModal=!0,this.isBattalionDropdownOpen=!1}showCommunicationStatus(n){this.selectedCommunication=n,this.showStatusView=!0}closeStatusView(){this.showStatusView=!1,this.selectedCommunication=null}toggleCommunicationStatus(n){this.subscriptions.add(this.apiService.updateCommunication(n.id,{active:!n.active,updatedBy:this.currentUser?.id}).subscribe({next:o=>{if("SUCCESS"===o.status){const c=this.communications.findIndex(l=>l.id===n.id);-1!==c&&(this.communications[c].active=!n.active),this.applyFilters()}},error:o=>{console.error("Error toggling communication status:",o);const c=this.communications.findIndex(l=>l.id===n.id);-1!==c&&(this.communications[c].active=!n.active,this.applyFilters())}}))}addCommunication(){if(!this.currentCommunication.subject||!this.currentCommunication.message||0===this.selectedBattalionIds.length)return void alert("Please fill all required fields");this.isLoading=!0;const n=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],e=this.getBattalionNames(n);this.subscriptions.add(this.apiService.createCommunication({name:this.currentCommunication.subject,subject:this.currentCommunication.subject,message:this.currentCommunication.message,battalionId:n[0],selectedBattalions:n,document:this.currentCommunication.document,selectedBattalionNames:e,userIds:n,active:this.currentCommunication.active,createdBy:this.currentUser?.id}).subscribe({next:c=>{if(this.isLoading=!1,"SUCCESS"===c.status&&c.data){const l=this.transformCommunications([c.data])[0];this.communications.unshift(l),this.applyFilters(),this.closeModal(),n.forEach(m=>{this.webSocketService.notifyBattalion(m.toString(),"new_communication",{communicationId:l.id,subject:l.subject,message:"New communication created",fromUserName:this.currentUser?.firstName+" "+this.currentUser?.lastName})})}else this.handleApiError("Failed to create communication")},error:c=>{this.isLoading=!1,console.error("Error creating communication:",c),this.handleApiError("Error creating communication. Please try again."),this.addCommunicationLocally()}}))}addCommunicationLocally(){const n=this.getNextId(),e=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],o=this.getBattalionNames(e);this.currentCommunication.id=n,this.currentCommunication.active=this.currentCommunication.active||!1,this.currentCommunication.battalionName=this.getBattalionName(e[0]),this.currentCommunication.selectedBattalions=e,this.currentCommunication.selectedBattalionNames=o,this.communications.unshift({...this.currentCommunication}),this.applyFilters(),this.isLoading=!1,this.closeModal()}updateCommunication(){if(!this.currentCommunication.subject||!this.currentCommunication.message||0===this.selectedBattalionIds.length)return void alert("Please fill all required fields");this.isLoading=!0;const n=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],e=this.getBattalionNames(n);this.subscriptions.add(this.apiService.updateCommunication(this.currentCommunication.id,{name:this.currentCommunication.subject,subject:this.currentCommunication.subject,message:this.currentCommunication.message,battalionId:n[0],selectedBattalions:n,selectedBattalionNames:e,userIds:n,active:this.currentCommunication.active,updatedBy:this.currentUser?.id}).subscribe({next:c=>{if(this.isLoading=!1,"SUCCESS"===c.status&&c.data){const l=this.transformCommunications([c.data])[0],m=this.communications.findIndex(P=>P.id===this.currentCommunication.id);-1!==m&&(this.communications[m]=l),this.applyFilters(),this.closeModal()}else this.handleApiError("Failed to update communication")},error:c=>{this.isLoading=!1,console.error("Error updating communication:",c),this.handleApiError("Error updating communication. Please try again."),this.updateCommunicationLocally()}}))}updateCommunicationLocally(){const n=this.communications.findIndex(e=>e.id===this.currentCommunication.id);if(-1!==n){const e=this.selectedBattalionIds.length>0?this.selectedBattalionIds:[this.currentCommunication.battalionId],o=this.getBattalionNames(e);this.communications[n]={...this.currentCommunication},this.communications[n].battalionName=this.getBattalionName(this.currentCommunication.battalionId),this.communications[n].selectedBattalions=e,this.communications[n].selectedBattalionNames=o}this.applyFilters(),this.isLoading=!1,this.closeModal()}getNextId(){return this.communications.length>0?Math.max(...this.communications.map(n=>n.id))+1:1}viewCommunicationDetails(n){this.isLoading=!0,this.subscriptions.add(this.apiService.getCommunicationById(n.id).subscribe({next:e=>{this.isLoading=!1,"SUCCESS"===e.status&&e.data?(this.selectedCommunication=this.transformCommunications([e.data])[0],this.showDetailView=!0,this.markAllRepliesAsRead(this.selectedCommunication)):(this.selectedCommunication=n,this.showDetailView=!0,this.markAllRepliesAsRead(this.selectedCommunication))},error:e=>{this.isLoading=!1,console.error("Error loading communication details:",e),this.selectedCommunication=n,this.showDetailView=!0,this.markAllRepliesAsRead(this.selectedCommunication)}}))}closeDetailView(){this.showDetailView=!1,this.replyMessage="",this.replyAttachments=[],this.selectedCommunication&&this.webSocketService.stopTyping({communicationId:this.selectedCommunication.id,battalionId:this.currentUser.battalionId}),this.selectedCommunication=null}onFileChange(n){this.replyAttachments=Array.from(n.target.files)}sendReply(){if(!this.replyMessage.trim()||!this.selectedCommunication)return void alert("Please enter a reply message");this.isLoading=!0;const n={communicationId:this.selectedCommunication.id,message:this.replyMessage,battalionId:this.currentUser.battalionId};try{console.log("\u{1f6f0}\ufe0f Sending websocket message:",n),this.webSocketService.sendMessage(n)}catch(c){console.error("WebSocket send failed, continuing to API call:",c)}const e=this.replyMessage;this.replyMessage="";const o={message:e,battalionId:this.currentUser.battalionId,userIds:[]};console.log("HTTP POST payload for reply:",o),this.subscriptions.add(this.apiService.sendReply(this.selectedCommunication.id,o).subscribe({next:c=>{this.isLoading=!1,"SUCCESS"===c.status&&c.data?(console.log("Reply persisted successfully."),this.webSocketService.stopTyping({communicationId:this.selectedCommunication.id,battalionId:this.currentUser.battalionId})):this.handleApiError("Failed to send reply")},error:c=>{this.isLoading=!1,console.error("Error sending reply:",c),this.handleApiError("Error sending reply. Please try again.")}}))}onReplyInputChange(){this.selectedCommunication&&this.webSocketService.startTyping({communicationId:this.selectedCommunication.id,battalionId:this.currentUser.battalionId})}markMessageAsRead(n){!n.read&&this.selectedCommunication&&(n.read=!0,this.selectedCommunication.unreadCount&&this.selectedCommunication.unreadCount>0&&this.selectedCommunication.unreadCount--,this.webSocketService.markAsRead({communicationId:this.selectedCommunication.id,messageId:n.id}))}markAllRepliesAsRead(n){n.replies&&(n.replies.forEach(e=>{e.read||(e.read=!0,this.markMessageAsRead(e))}),n.unreadCount=0)}addReplyLocally(n,e){if(!this.selectedCommunication)return;const o={id:e?.id||this.getNextReplyId(),replyDate:new Date,replyBy:`${this.currentUser?.firstName||"Current"} ${this.currentUser?.lastName||"User"}`,replyMessage:n,message:n,document:this.replyAttachments.length>0?"attached":void 0,userId:this.currentUser?.id,battalionId:this.currentUser?.battalionId,fromUserName:`${this.currentUser?.firstName||"Current"} ${this.currentUser?.lastName||"User"}`,read:!0};this.selectedCommunication.replies||(this.selectedCommunication.replies=[]),this.selectedCommunication.replies.push(o);const c=this.communications.findIndex(l=>l.id===this.selectedCommunication.id);-1!==c&&(this.communications[c]={...this.selectedCommunication}),this.replyAttachments=[],this.isLoading=!1}getNextReplyId(){let n=0;return this.communications.forEach(e=>{e.replies&&e.replies.forEach(o=>{o.id>n&&(n=o.id)})}),n+1}onDocumentSelected(n){const e=n.target.files;if(e&&e.length>0){const o=e[0];this.currentCommunication.document=o,this.uploadDocument(o)}else this.currentCommunication.document=void 0}uploadDocument(n){(new FormData).append("file",n),this.performanceService.uploadDocument(n).subscribe({next:o=>{if("SUCCESS"===o.status){const c=o.fileUrl;console.log("Uploaded file URL:",c),this.currentCommunication.document=c}},error:o=>{console.error("File upload failed:",o)}})}handleApiError(n){alert(n)}trackByCommunicationId(n,e){return e.id}trackByReplyId(n,e){return e.id}trackByBattalionId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G),t.rXU(f.u),t.rXU(So),t.rXU(Io.a))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-communications"]],standalone:!1,decls:74,vars:28,consts:[["communicationForm","ngForm"],["subject","ngModel"],["message","ngModel"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search communications...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","multiple-battalions",3,"title",4,"ngIf"],[1,"message-cell",3,"title"],["class","document-link",4,"ngIf"],["class","no-document",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"view-btn",3,"click"],[1,"edit-btn",3,"click"],[1,"multiple-battalions",3,"title"],[1,"document-link"],[1,"no-document"],["colspan","8",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],[1,"required"],[1,"dropdown-trigger",3,"click"],[1,"dropdown-display"],[1,"selected-text"],[1,"dropdown-arrow"],["class","dropdown-content",4,"ngIf"],["class","error-message",4,"ngIf"],["for","subject",1,"required"],["type","text","id","subject","name","subject","required","","placeholder","Enter subject",1,"form-control",3,"ngModelChange","ngModel"],["for","message",1,"required"],["id","message","name","message","required","","rows","4","placeholder","Enter your message",1,"form-control",3,"ngModelChange","ngModel"],["for","attachments"],["type","file","id","attachments","name","document","accept",".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt",1,"form-control",3,"change"],[1,"form-text","text-muted"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"dropdown-content"],[1,"dropdown-item","select-all-item"],[1,"checkbox-label"],["type","checkbox",1,"mr-2",3,"change","checked"],[1,"dropdown-divider"],["class","dropdown-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"dropdown-item"],[1,"error-message"],[1,"spinner"],[1,"modal-dialog","detail-modal",3,"click"],[1,"detail-header"],[1,"status-btn"],[1,"back-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"communication-details"],[1,"detail-row"],["class","replies-section",4,"ngIf"],[1,"send-reply-section"],["for","replyMessage"],["id","replyMessage","rows","4","placeholder","Enter your reply message",1,"form-control",3,"ngModelChange","ngModel"],["for","replyAttachments"],["type","file","id","replyAttachments","multiple","",1,"form-control",3,"change"],[1,"reply-actions"],[1,"send-btn",3,"click","disabled"],[1,"replies-section"],["class","document-icon",4,"ngIf"],[1,"document-icon"]],template:function(e,o){1&e&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),t.EFF(4,"\u{1f4ac}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Communications"),t.k0s()(),t.j41(7,"button",7),t.bIt("click",function(){return o.showAddCommunicationModal()}),t.EFF(8,"Add Communication"),t.k0s()(),t.j41(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",11),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",12),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",13),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",14),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",15),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",16),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",17)(27,"label",18),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",19),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",20)(31,"table",21)(32,"thead")(33,"tr")(34,"th",22),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(35," Serial No. "),t.j41(36,"span",23),t.EFF(37),t.k0s()(),t.j41(38,"th",22),t.bIt("click",function(){return o.sortTable("createdDate")}),t.EFF(39," Sending Date "),t.j41(40,"span",23),t.EFF(41),t.k0s()(),t.j41(42,"th",22),t.bIt("click",function(){return o.sortTable("subject")}),t.EFF(43," Subject "),t.j41(44,"span",23),t.EFF(45),t.k0s()(),t.j41(46,"th",22),t.bIt("click",function(){return o.sortTable("battalionName")}),t.EFF(47," Battalion "),t.j41(48,"span",23),t.EFF(49),t.k0s()(),t.j41(50,"th"),t.EFF(51,"Message"),t.k0s(),t.j41(52,"th"),t.EFF(53,"Document"),t.k0s(),t.j41(54,"th",22),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(55," Active "),t.j41(56,"span",23),t.EFF(57),t.k0s()(),t.j41(58,"th"),t.EFF(59,"Actions"),t.k0s()()(),t.j41(60,"tbody"),t.DNE(61,Bo,26,17,"tr",24)(62,Uo,3,0,"tr",25),t.k0s()()(),t.j41(63,"div",26)(64,"div",27),t.EFF(65),t.k0s(),t.j41(66,"div",28)(67,"button",29),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(68," Previous "),t.k0s(),t.DNE(69,$o,2,3,"button",30),t.j41(70,"button",29),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(71," Next "),t.k0s()()()(),t.DNE(72,Yo,47,12,"div",31)(73,ei,10,1,"div",31)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(7),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","createdDate"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","subject"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","battalionName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(7),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedCommunications)("ngForTrackBy",o.trackByCommunicationId),t.R7$(),t.Y8G("ngIf",0===o.paginatedCommunications.length),t.R7$(3),t.E5c(" Showing ",(o.currentPage-1)*o.itemsPerPage+1," to ",o.Math.min(o.currentPage*o.itemsPerPage,o.totalItems)," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages),t.R7$(2),t.Y8G("ngIf",o.showModal),t.R7$(),t.Y8G("ngIf",o.showDetailView))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV,p.vh],styles:['.table-panel[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 6px #0000001a;margin-top:15px}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table[_ngcontent-%COMP%]{margin-bottom:0;min-width:800px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;text-align:center;padding:12px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;vertical-align:middle}@media (max-width: 768px){.table-panel[_ngcontent-%COMP%]{padding:10px;margin:0 -10px;border-radius:0}.table[_ngcontent-%COMP%]{min-width:600px;font-size:14px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}}@media (max-width: 576px){.table[_ngcontent-%COMP%]{min-width:500px;font-size:12px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1050;left:0;top:0;width:100%;height:100%;overflow:auto;background:#0009;padding:10px}.modal-dialog[_ngcontent-%COMP%]{margin:40px auto;max-width:800px}.modal-content[_ngcontent-%COMP%]{border-radius:12 px;max-width:500vw;margin:10px auto;background:#fff;box-shadow:0 10px 30px #0000004d}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100%;background:#0009;overflow-y:auto;padding:20px}.modal-dialog[_ngcontent-%COMP%]{margin:60px auto;max-width:700px}.modal-content[_ngcontent-%COMP%]{border-radius:10px;background:#fff}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:20px;border-bottom:none;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{font-weight:600;color:#fff;margin:0;font-size:20px;text-shadow:0 1px 2px rgba(0,0,0,.1)}.btn-close[_ngcontent-%COMP%]{background:#fff3;border:none;font-size:20px;cursor:pointer;color:#fff;padding:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.form-group[_ngcontent-%COMP%]{padding:20px}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border-radius:6px}textarea.form-control[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.modal-footer[_ngcontent-%COMP%]{padding:12px 20px;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:10px}.btn[_ngcontent-%COMP%]{border-radius:6px;min-width:90px}#fileList[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.85rem;padding:6px 10px;border-radius:6px}.detail-modal[_ngcontent-%COMP%]{max-width:1000px;width:95%}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.status-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px}.status-btn[_ngcontent-%COMP%]:hover, .back-btn[_ngcontent-%COMP%]:hover{background:#138496}.communication-details[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px}.detail-row[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.5}.detail-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;margin-right:8px}.replies-section[_ngcontent-%COMP%]{margin:20px 0;padding:0 20px}.send-reply-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-top:20px}.send-reply-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:15px;color:#333;font-weight:600}.reply-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:15px}.send-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;min-width:80px;display:flex;align-items:center;justify-content:center;gap:5px}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.send-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.view-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;margin-right:5px}.view-btn[_ngcontent-%COMP%]:hover{background:#218838}.document-icon[_ngcontent-%COMP%]{color:#007bff;font-size:16px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dropdown-trigger[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:8px 12px;background:#fff;cursor:pointer;margin-bottom:10px;position:relative}.dropdown-trigger[_ngcontent-%COMP%]:hover{border-color:#aaa}.dropdown-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.selected-text[_ngcontent-%COMP%]{color:#333;font-size:14px;flex:1}.dropdown-arrow[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-left:8px}.dropdown-content[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #ddd;border-radius:4px;padding:20px;max-height:200px;overflow-y:auto;z-index:1000;width:100%;box-shadow:0 2px 8px #0000001a;margin-top:2px;left:0}.dropdown-item[_ngcontent-%COMP%]{padding:8px 20px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.select-all-item[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:2px solid #ddd;font-weight:600}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#ddd;margin:4px 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;margin:0;width:100%;font-size:14px}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px}.form-group[_ngcontent-%COMP%]{position:relative}.multiple-battalions[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 6px;border-radius:12px;font-size:12px;cursor:help}.required[_ngcontent-%COMP%]:after{content:" *";color:#dc3545}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}.edit-btn[_ngcontent-%COMP%]{background:#ffc107;color:#212529;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px}.edit-btn[_ngcontent-%COMP%]:hover{background:#e0a800}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.document-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer}.no-document[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}.message-cell[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.no-data[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:20px!important}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.save-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;min-width:80px;display:flex;align-items:center;justify-content:center;gap:5px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.save-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.cancel-btn[_ngcontent-%COMP%]:hover{background:#545b62}']}))}return r(),s})();var L=u(1155);function oi(r,s){if(1&r){const i=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td")(8,"strong"),t.EFF(9),t.k0s()(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.k0s(),t.j41(16,"td"),t.EFF(17),t.k0s(),t.j41(18,"td"),t.EFF(19),t.k0s(),t.j41(20,"td")(21,"span",31),t.EFF(22),t.k0s()(),t.j41(23,"td")(24,"div",32)(25,"button",33),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.editDistrict(e))}),t.EFF(26,"Edit"),t.k0s(),t.j41(27,"button",34),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.toggleDistrictStatus(e))}),t.EFF(28),t.k0s()()()()}if(2&r){const i=s.$implicit,n=t.XpG();t.R7$(2),t.JRh(i.id),t.R7$(2),t.JRh(n.getRangeName(i.rangeId)),t.R7$(2),t.JRh(n.getDistrictName(i.districtId)),t.R7$(3),t.JRh(i.battalionName),t.R7$(2),t.JRh(i.battalionArea),t.R7$(2),t.JRh(i.battalionHead),t.R7$(2),t.JRh(i.battalionMobileNo),t.R7$(2),t.JRh(i.battalionContactNo),t.R7$(2),t.JRh(i.battalionEmail),t.R7$(2),t.AVh("active",i.active)("inactive",!i.active),t.R7$(),t.SpI(" ",i.active?"YES":"NO"," "),t.R7$(5),t.AVh("activate",!i.active),t.R7$(),t.SpI(" ",i.active?"Deactivate":"Activate"," ")}}function ii(r,s){1&r&&(t.j41(0,"tr")(1,"td",35),t.EFF(2,"No districts found"),t.k0s()())}function ri(r,s){if(1&r){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){const e=a.eBV(i).$implicit,o=t.XpG();return a.Njj(o.goToPage(e))}),t.EFF(1),t.k0s()}if(2&r){const i=s.$implicit,n=t.XpG();t.AVh("active",i===n.currentPage),t.R7$(),t.SpI(" ",i," ")}}function ai(r,s){if(1&r&&(t.j41(0,"option",73),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.rangeName)}}function si(r,s){if(1&r&&(t.j41(0,"option",73),t.EFF(1),t.k0s()),2&r){const i=s.$implicit;t.Y8G("value",i.id),t.R7$(),t.JRh(i.districtName)}}function ci(r,s){1&r&&t.nrm(0,"span",74)}function li(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(1,"div",38),t.bIt("click",function(e){return a.eBV(i),a.Njj(e.stopPropagation())}),t.j41(2,"div",39)(3,"div",40)(4,"h4",41),t.EFF(5),t.k0s(),t.j41(6,"button",42),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.j41(7,"span"),t.EFF(8,"\xd7"),t.k0s()()(),t.j41(9,"div",43)(10,"form",44,0),t.bIt("ngSubmit",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.isEditMode?e.updateDistrict():e.addDistrict())}),t.j41(12,"div",45)(13,"label",46),t.EFF(14,"Zone "),t.j41(15,"span",47),t.EFF(16,"*"),t.k0s()(),t.j41(17,"select",48),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.rangeId,e)||(o.currentDistrict.rangeId=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.onRangeChange())}),t.j41(18,"option",49),t.EFF(19,"Select Zone"),t.k0s(),t.DNE(20,ai,2,2,"option",50),t.k0s()(),t.j41(21,"div",45)(22,"label",51),t.EFF(23,"District "),t.j41(24,"span",47),t.EFF(25,"*"),t.k0s()(),t.j41(26,"select",52),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.districtId,e)||(o.currentDistrict.districtId=e),a.Njj(e)}),t.j41(27,"option",49),t.EFF(28,"Select District"),t.k0s(),t.DNE(29,si,2,2,"option",50),t.k0s()(),t.j41(30,"div",45)(31,"label",53),t.EFF(32,"Battalion Name"),t.k0s(),t.j41(33,"input",54),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.battalionName,e)||(o.currentDistrict.battalionName=e),a.Njj(e)}),t.k0s()(),t.j41(34,"div",45)(35,"label",55),t.EFF(36,"Battalion Head"),t.k0s(),t.j41(37,"input",56),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.battalionHead,e)||(o.currentDistrict.battalionHead=e),a.Njj(e)}),t.k0s()(),t.j41(38,"div",45)(39,"label",57),t.EFF(40,"Battalion Mobile Number"),t.k0s(),t.j41(41,"input",58),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.battalionMobileNo,e)||(o.currentDistrict.battalionMobileNo=e),a.Njj(e)}),t.k0s()(),t.j41(42,"div",45)(43,"label",59),t.EFF(44,"Battalion Contact Number"),t.k0s(),t.j41(45,"input",60),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.battalionContactNo,e)||(o.currentDistrict.battalionContactNo=e),a.Njj(e)}),t.k0s()(),t.j41(46,"div",45)(47,"label",61),t.EFF(48,"Battalion User ID (Email)"),t.k0s(),t.j41(49,"input",62),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.battalionEmail,e)||(o.currentDistrict.battalionEmail=e),a.Njj(e)}),t.k0s()(),t.j41(50,"div",45)(51,"label",63),t.EFF(52,"Battalion Specialisation"),t.k0s(),t.j41(53,"input",64),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.battalionArea,e)||(o.currentDistrict.battalionArea=e),a.Njj(e)}),t.k0s()(),t.j41(54,"div",45)(55,"div",65)(56,"label",66)(57,"input",67),t.mxI("ngModelChange",function(e){a.eBV(i);const o=t.XpG();return t.DH7(o.currentDistrict.active,e)||(o.currentDistrict.active=e),a.Njj(e)}),t.k0s(),t.j41(58,"span",68),t.EFF(59,"Active"),t.k0s()()()(),t.j41(60,"div",69)(61,"button",70),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.closeModal())}),t.EFF(62," Close "),t.k0s(),t.j41(63,"button",71),t.DNE(64,ci,1,0,"span",72),t.EFF(65),t.k0s()()()()()()()}if(2&r){const i=t.sdS(11),n=t.XpG();t.R7$(5),t.JRh(n.isEditMode?"Edit Battalion":"Add Battalion"),t.R7$(12),t.R50("ngModel",n.currentDistrict.rangeId),t.R7$(3),t.Y8G("ngForOf",n.ranges),t.R7$(6),t.R50("ngModel",n.currentDistrict.districtId),t.R7$(3),t.Y8G("ngForOf",n.adminDistricts),t.R7$(4),t.R50("ngModel",n.currentDistrict.battalionName),t.R7$(4),t.R50("ngModel",n.currentDistrict.battalionHead),t.R7$(4),t.R50("ngModel",n.currentDistrict.battalionMobileNo),t.R7$(4),t.R50("ngModel",n.currentDistrict.battalionContactNo),t.R7$(4),t.R50("ngModel",n.currentDistrict.battalionEmail),t.R7$(4),t.R50("ngModel",n.currentDistrict.battalionArea),t.R7$(4),t.R50("ngModel",n.currentDistrict.active),t.R7$(6),t.Y8G("disabled",i.invalid||n.isLoading),t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(),t.SpI(" ",n.isEditMode?"Update":"Save"," ")}}function _i(r,s){if(1&r&&(t.j41(0,"div",7)(1,"span",8)(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&r){const i=t.XpG();t.R7$(3),t.JRh(i.roleName),t.R7$(),t.SpI(" (ID: ",i.roleId,") ")}}function ui(r,s){1&r&&(t.j41(0,"div",9)(1,"p"),t.EFF(2,"No role selected. Please select a role from the roles page."),t.k0s()())}function pi(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",30)(1,"div",31)(2,"span",22),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5),t.k0s()(),t.j41(6,"div",33)(7,"label",34)(8,"input",35),t.mxI("ngModelChange",function(e){const o=a.eBV(i).$implicit;return t.DH7(o.permissions.selected,e)||(o.permissions.selected=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.onPermissionChange())}),t.k0s(),t.nrm(9,"span",36),t.k0s()()()}if(2&r){const i=s.$implicit;t.R7$(3),t.JRh(i.name),t.R7$(2),t.JRh(i.description),t.R7$(3),t.R50("ngModel",i.permissions.selected)}}function gi(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",30)(1,"div",31)(2,"span",22),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5),t.k0s()(),t.j41(6,"div",33)(7,"label",34)(8,"input",35),t.mxI("ngModelChange",function(e){const o=a.eBV(i).$implicit;return t.DH7(o.permissions.selected,e)||(o.permissions.selected=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.onPermissionChange())}),t.k0s(),t.nrm(9,"span",36),t.k0s()()()}if(2&r){const i=s.$implicit;t.R7$(3),t.JRh(i.name),t.R7$(2),t.SpI("Parent: ",i.parentMenu),t.R7$(3),t.R50("ngModel",i.permissions.selected)}}function mi(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",30)(1,"div",31)(2,"span",22),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5),t.k0s()(),t.j41(6,"div",33)(7,"label",34)(8,"input",35),t.mxI("ngModelChange",function(e){const o=a.eBV(i).$implicit;return t.DH7(o.permissions.selected,e)||(o.permissions.selected=e),a.Njj(e)}),t.bIt("change",function(){a.eBV(i);const e=t.XpG(2);return a.Njj(e.onPermissionChange())}),t.k0s(),t.nrm(9,"span",36),t.k0s()()()}if(2&r){const i=s.$implicit;t.R7$(3),t.JRh(i.path),t.R7$(2),t.Lme("",i.method," - ",i.description),t.R7$(3),t.R50("ngModel",i.permissions.selected)}}function hi(r,s){if(1&r){const i=t.RV6();t.j41(0,"div",10)(1,"div",11)(2,"button",12),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.selectAllPermissions())}),t.EFF(3,"Select All"),t.k0s(),t.j41(4,"button",13),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.deselectAllPermissions())}),t.EFF(5,"Deselect All"),t.k0s(),t.j41(6,"button",14),t.bIt("click",function(){a.eBV(i);const e=t.XpG();return a.Njj(e.savePermissions())}),t.EFF(7,"Save Permissions"),t.k0s()(),t.j41(8,"div",15)(9,"div",16)(10,"h3"),t.EFF(11,"\u{1f4cb} Menu Permissions"),t.k0s(),t.j41(12,"div",17)(13,"label",18)(14,"input",19),t.bIt("change",function(e){a.eBV(i);const o=t.XpG();return a.Njj(o.toggleAllMenus(e))}),t.k0s(),t.EFF(15," Select All Menus "),t.k0s()()(),t.j41(16,"div",20)(17,"div",21)(18,"div",22),t.EFF(19,"Menu Name"),t.k0s(),t.j41(20,"div",23)(21,"span"),t.EFF(22,"Select"),t.k0s()()(),t.DNE(23,pi,10,3,"div",24),t.k0s()(),t.j41(24,"div",15)(25,"div",16)(26,"h3"),t.EFF(27,"\u{1f4c2} Submenu Permissions"),t.k0s(),t.j41(28,"div",17)(29,"label",18)(30,"input",19),t.bIt("change",function(e){a.eBV(i);const o=t.XpG();return a.Njj(o.toggleAllSubmenus(e))}),t.k0s(),t.EFF(31," Select All Submenus "),t.k0s()()(),t.j41(32,"div",20)(33,"div",21)(34,"div",22),t.EFF(35,"Submenu Name"),t.k0s(),t.j41(36,"div",23)(37,"span"),t.EFF(38,"Select"),t.k0s()()(),t.DNE(39,gi,10,3,"div",24),t.k0s()(),t.j41(40,"div",15)(41,"div",16)(42,"h3"),t.EFF(43,"\u{1f517} URL Permissions"),t.k0s(),t.j41(44,"div",17)(45,"label",18)(46,"input",19),t.bIt("change",function(e){a.eBV(i);const o=t.XpG();return a.Njj(o.toggleAllUrls(e))}),t.k0s(),t.EFF(47," Select All URLs "),t.k0s()()(),t.j41(48,"div",20)(49,"div",21)(50,"div",22),t.EFF(51,"URL Path"),t.k0s(),t.j41(52,"div",23)(53,"span"),t.EFF(54,"Select"),t.k0s()()(),t.DNE(55,mi,10,4,"div",24),t.k0s()(),t.j41(56,"div",25)(57,"h4"),t.EFF(58,"Permission Summary"),t.k0s(),t.j41(59,"div",26)(60,"div",27)(61,"span",28),t.EFF(62),t.k0s(),t.j41(63,"span",29),t.EFF(64,"Total Permissions Selected"),t.k0s()(),t.j41(65,"div",27)(66,"span",28),t.EFF(67),t.k0s(),t.j41(68,"span",29),t.EFF(69,"Menu Permissions"),t.k0s()(),t.j41(70,"div",27)(71,"span",28),t.EFF(72),t.k0s(),t.j41(73,"span",29),t.EFF(74,"Submenu Permissions"),t.k0s()(),t.j41(75,"div",27)(76,"span",28),t.EFF(77),t.k0s(),t.j41(78,"span",29),t.EFF(79,"URL Permissions"),t.k0s()()()()()}if(2&r){const i=t.XpG();t.R7$(14),t.Y8G("checked",i.areAllMenusSelected()),t.R7$(9),t.Y8G("ngForOf",i.menus),t.R7$(7),t.Y8G("checked",i.areAllSubmenusSelected()),t.R7$(9),t.Y8G("ngForOf",i.submenus),t.R7$(7),t.Y8G("checked",i.areAllUrlsSelected()),t.R7$(9),t.Y8G("ngForOf",i.urls),t.R7$(7),t.JRh(i.getSelectedPermissionsCount()),t.R7$(5),t.JRh(i.getMenuPermissionsCount()),t.R7$(5),t.JRh(i.getSubmenuPermissionsCount()),t.R7$(5),t.JRh(i.getUrlPermissionsCount())}}const bi=[{path:"",component:I,children:[{path:"",redirectTo:"homePage",pathMatch:"full"},{path:"homePage",component:j},{path:"user",component:yt},{path:"settings",component:U},{path:"profile",component:$},{path:"role",component:Lt},{path:"permissions",component:Qt},{path:"menus",component:ae},{path:"submenus",component:Ee},{path:"state",component:we},{path:"range",component:Ye},{path:"district",component:Ze},{path:"userManage",component:tn},{path:"modules",component:cn},{path:"topics",component:On},{path:"subtopics",component:wn},{path:"questions",component:ro},{path:"report",component:A},{path:"communications",component:ni},{path:"performance",component:L.W},{path:"battalion",component:(()=>{var r;class s{constructor(n){this.apiService=n,this.ranges=[],this.adminDistricts=[],this.battalions=[],this.filteredBattalions=[],this.paginatedBattalions=[],this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1,this.isLoading=!1,this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.pageSize=10,this.totalItems=0,this.totalPages=0,this.sortColumn="",this.sortDirection="asc",this.Math=Math}get paginatedDistricts(){return this.paginatedBattalions}get districtsForSelectedRange(){return this.currentDistrict&&null!=this.currentDistrict.rangeId?this.adminDistricts.filter(n=>n.rangeId===this.currentDistrict.rangeId):[]}onRangeChange(){this.currentDistrict.districtId=void 0}getRangeName(n){if(null==n)return"";const e=this.ranges.find(o=>o.id===n);return e?e.rangeName:""}getDistrictName(n){if(null==n)return"";const e=this.adminDistricts.find(o=>o.id===n);return e?e.districtName:""}ngOnInit(){this.loadData()}loadData(){this.loadRanges(),this.loadDistricts(),this.loadBattalions()}loadRanges(){this.apiService.GetRangeDropdown().subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.ranges=n.data)},error:n=>{console.error("Error loading ranges:",n),this.ranges=[]}})}loadDistricts(){this.apiService.getDistrictDropdown().subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.adminDistricts=n.data)},error:n=>{console.error("Error loading districts:",n),this.adminDistricts=[]}})}loadBattalions(){this.isLoading=!0,this.apiService.getBattalions(this.currentPage,this.itemsPerPage,"asc"===this.sortDirection?"ASC":"DESC").subscribe({next:n=>{"SUCCESS"===n.status&&n.data&&(this.battalions=n.data,n.pagination&&(this.currentPage=n.pagination.currentPage||this.currentPage,this.totalPages=n.pagination.totalPages||this.totalPages,this.totalItems=n.pagination.totalItems||this.totalItems,this.itemsPerPage=n.pagination.itemsPerPage||this.itemsPerPage),this.updateFilteredData()),this.isLoading=!1},error:n=>{console.error("Error loading battalions:",n),this.battalions=[],this.updateFilteredData(),this.isLoading=!1}})}createEmptyDistrict(){return{id:0,rangeId:void 0,districtId:void 0,battalionName:"",battalionHead:"",battalionMobileNo:"",battalionContactNo:"",battalionEmail:"",battalionArea:"",active:!0}}onSearch(){this.currentPage=1,this.updateFilteredData()}updateFilteredData(){if(this.searchTerm&&this.searchTerm.trim()){const n=this.searchTerm.toLowerCase();this.filteredBattalions=this.battalions.filter(e=>e.battalionName.toLowerCase().includes(n)||(e.range?.rangeName||"").toLowerCase().includes(n)||(e.battalionHead||"").toLowerCase().includes(n)||(e.battalionEmail||"").toLowerCase().includes(n)||(e.battalionArea||"").toLowerCase().includes(n)),this.paginatedBattalions=this.filteredBattalions}else this.filteredBattalions=this.battalions,this.paginatedBattalions=this.battalions}updatePaginatedData(){const n=(this.currentPage-1)*this.itemsPerPage;this.paginatedBattalions=this.filteredBattalions.slice(n,n+this.itemsPerPage)}onPageSizeChange(){this.itemsPerPage=this.pageSize,this.currentPage=1,this.loadBattalions()}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.loadBattalions())}getVisiblePages(){const n=[];if(this.totalPages<=5)for(let o=1;o<=this.totalPages;o++)n.push(o);else{const o=Math.floor(2.5);let c=Math.max(1,this.currentPage-o),l=Math.min(this.totalPages,this.currentPage+o);this.currentPage<=o?l=5:this.currentPage>this.totalPages-o&&(c=this.totalPages-5+1),c>1&&(n.push(1),c>2&&n.push(-1));for(let m=c;m<=l;m++)n.push(m);l<this.totalPages&&(l<this.totalPages-1&&n.push(-1),n.push(this.totalPages))}return n}sortTable(n){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc"),this.filteredBattalions.sort((e,o)=>{let c=e[n],l=o[n];return null==c&&(c=""),null==l&&(l=""),"string"==typeof c&&(c=c.toLowerCase(),l=l.toLowerCase()),c<l?"asc"===this.sortDirection?-1:1:c>l?"asc"===this.sortDirection?1:-1:0}),this.updatePaginatedData(),this.loadBattalions()}showAddDistrictModal(){this.isEditMode=!1,this.currentDistrict=this.createEmptyDistrict(),this.showModal=!0}closeModal(){this.showModal=!1,this.currentDistrict=this.createEmptyDistrict(),this.isEditMode=!1}editDistrict(n){this.isEditMode=!0,this.currentDistrict={...n},this.showModal=!0}toggleDistrictStatus(n){this.apiService.toggleBattalionStatus(n.id).subscribe({next:e=>{if("SUCCESS"===e.status&&e.data){const o=this.battalions.findIndex(c=>c.id===n.id);-1!==o&&(this.battalions[o]=e.data,this.updateFilteredData())}},error:e=>{console.error("Error toggling battalion status:",e),alert("Failed to toggle battalion status. Please try again.")}})}addDistrict(){this.isLoading=!0,this.apiService.createBattalion({rangeId:this.currentDistrict.rangeId,districtId:this.currentDistrict.districtId,battalionName:this.currentDistrict.battalionName,battalionHead:this.currentDistrict.battalionHead,battalionContactNo:this.currentDistrict.battalionContactNo,battalionMobileNo:this.currentDistrict.battalionMobileNo,battalionEmail:this.currentDistrict.battalionEmail,battalionArea:this.currentDistrict.battalionArea,active:this.currentDistrict.active}).subscribe({next:e=>{"SUCCESS"===e.status&&e.data&&(this.battalions.unshift(e.data),this.updateFilteredData(),this.closeModal()),this.isLoading=!1},error:e=>{console.error("Error creating battalion:",e),this.isLoading=!1,alert("Failed to create battalion. Please try again.")}})}updateDistrict(){this.isLoading=!0,this.apiService.updateBattalion(this.currentDistrict.id,{rangeId:this.currentDistrict.rangeId,districtId:this.currentDistrict.districtId,battalionName:this.currentDistrict.battalionName,battalionHead:this.currentDistrict.battalionHead,battalionContactNo:this.currentDistrict.battalionContactNo,battalionMobileNo:this.currentDistrict.battalionMobileNo,battalionEmail:this.currentDistrict.battalionEmail,battalionArea:this.currentDistrict.battalionArea,active:this.currentDistrict.active}).subscribe({next:e=>{if("SUCCESS"===e.status&&e.data){const o=this.battalions.findIndex(c=>c.id===this.currentDistrict.id);-1!==o&&(this.battalions[o]=e.data),this.updateFilteredData(),this.closeModal()}this.isLoading=!1},error:e=>{console.error("Error updating battalion:",e),this.isLoading=!1,alert("Failed to update battalion. Please try again.")}})}trackByDistrictId(n,e){return e.id}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-battalion"]],standalone:!1,decls:84,vars:33,consts:[["districtForm","ngForm"],[1,"data-container"],[1,"header"],[1,"title-section"],[1,"icon"],[1,"add-btn",3,"click"],[1,"table-controls"],[1,"show-entries"],["for","entries"],["id","entries",3,"ngModelChange","change","ngModel"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search-box"],["for","search"],["type","text","id","search","placeholder","Search districts...",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"table-wrapper"],[1,"data-table"],[1,"sortable",3,"click"],[1,"sort-icon"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"status-badge"],[1,"action-buttons"],[1,"edit-btn",3,"click"],[1,"deactivate-btn",3,"click"],["colspan","11",1,"no-data"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header","p-2"],[1,"modal-title","p-1"],["type","button",1,"close-btn","m-2",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"form-group"],["for","rangeSelect",1,"required"],[1,"required"],["id","rangeSelect","name","rangeId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","districtSelect"],["id","districtSelect","name","districtId","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","battalionName",1,"required"],["type","text","id","battalionName","name","battalionName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionHead",1,"required"],["type","text","id","battalionHead","name","battalionHead","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionMobileNo"],["type","tel","id","battalionMobileNo","name","battalionMobileNo",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionContactNo"],["type","tel","id","battalionContactNo","name","battalionContactNo",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionEmail"],["type","email","id","battalionEmail","name","battalionEmail",1,"form-control",3,"ngModelChange","ngModel"],["for","battalionArea"],["type","text","id","battalionArea","name","battalionArea",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","districtActive",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"modal-footer"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],["class","spinner",4,"ngIf"],[3,"value"],[1,"spinner"]],template:function(e,o){1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.EFF(4,"\u{1f5fa}\ufe0f"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"List Of Battalions"),t.k0s()(),t.j41(7,"button",5),t.bIt("click",function(){return o.showAddDistrictModal()}),t.EFF(8,"Add Battalion"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"label",8),t.EFF(12,"Show"),t.k0s(),t.j41(13,"select",9),t.mxI("ngModelChange",function(l){return t.DH7(o.pageSize,l)||(o.pageSize=l),l}),t.bIt("change",function(){return o.onPageSizeChange()}),t.j41(14,"option",10),t.EFF(15,"5"),t.k0s(),t.j41(16,"option",11),t.EFF(17,"10"),t.k0s(),t.j41(18,"option",12),t.EFF(19,"25"),t.k0s(),t.j41(20,"option",13),t.EFF(21,"50"),t.k0s(),t.j41(22,"option",14),t.EFF(23,"100"),t.k0s()(),t.j41(24,"span"),t.EFF(25,"entries"),t.k0s()(),t.j41(26,"div",15)(27,"label",16),t.EFF(28,"Search:"),t.k0s(),t.j41(29,"input",17),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("input",function(){return o.onSearch()}),t.k0s()()(),t.j41(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead")(34,"tr")(35,"th",21),t.bIt("click",function(){return o.sortTable("id")}),t.EFF(36," ID "),t.j41(37,"span",22),t.EFF(38),t.k0s()(),t.j41(39,"th",21),t.bIt("click",function(){return o.sortTable("rangeName")}),t.EFF(40," Zone "),t.j41(41,"span",22),t.EFF(42),t.k0s()(),t.j41(43,"th",21),t.bIt("click",function(){return o.sortTable("districtName")}),t.EFF(44," District Name "),t.j41(45,"span",22),t.EFF(46),t.k0s()(),t.j41(47,"th",21),t.bIt("click",function(){return o.sortTable("battalionName")}),t.EFF(48," Battalion Name "),t.j41(49,"span",22),t.EFF(50),t.k0s()(),t.j41(51,"th",21),t.bIt("click",function(){return o.sortTable("area")}),t.EFF(52," Battalion Specialisation "),t.j41(53,"span",22),t.EFF(54),t.k0s()(),t.j41(55,"th",21),t.bIt("click",function(){return o.sortTable("districtHead")}),t.EFF(56," Battalion Head "),t.j41(57,"span",22),t.EFF(58),t.k0s()(),t.j41(59,"th"),t.EFF(60,"Mobile"),t.k0s(),t.j41(61,"th"),t.EFF(62,"Contact"),t.k0s(),t.j41(63,"th"),t.EFF(64,"Email"),t.k0s(),t.j41(65,"th",21),t.bIt("click",function(){return o.sortTable("active")}),t.EFF(66," Active "),t.j41(67,"span",22),t.EFF(68),t.k0s()(),t.j41(69,"th"),t.EFF(70,"Actions"),t.k0s()()(),t.j41(71,"tbody"),t.DNE(72,oi,29,17,"tr",23)(73,ii,3,0,"tr",24),t.k0s()()()(),t.j41(74,"div",25)(75,"div",26),t.EFF(76),t.k0s(),t.j41(77,"div",27)(78,"button",28),t.bIt("click",function(){return o.goToPage(o.currentPage-1)}),t.EFF(79," Previous "),t.k0s(),t.DNE(80,ri,2,3,"button",29),t.j41(81,"button",28),t.bIt("click",function(){return o.goToPage(o.currentPage+1)}),t.EFF(82," Next "),t.k0s()()()(),t.DNE(83,li,66,15,"div",30)),2&e&&(t.R7$(13),t.R50("ngModel",o.pageSize),t.R7$(16),t.R50("ngModel",o.searchTerm),t.R7$(8),t.AVh("active","id"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","rangeName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","districtName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","battalionName"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","area"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(3),t.AVh("active","districtHead"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(9),t.AVh("active","active"===o.sortColumn),t.R7$(),t.SpI(" ","asc"===o.sortDirection?"\u2191":"\u2193"," "),t.R7$(4),t.Y8G("ngForOf",o.paginatedBattalions)("ngForTrackBy",o.trackByDistrictId),t.R7$(),t.Y8G("ngIf",0===o.paginatedDistricts.length),t.R7$(3),t.E5c(" Showing ",(o.currentPage-1)*o.itemsPerPage+1," to ",o.Math.min(o.currentPage*o.itemsPerPage,o.totalItems)," of ",o.totalItems," entries "),t.R7$(2),t.Y8G("disabled",1===o.currentPage),t.R7$(2),t.Y8G("ngForOf",o.getVisiblePages()),t.R7$(),t.Y8G("disabled",o.currentPage===o.totalPages),t.R7$(2),t.Y8G("ngIf",o.showModal))},dependencies:[p.Sq,p.bT,d.qT,d.xH,d.y7,d.me,d.Zm,d.wz,d.BC,d.cb,d.YS,d.vS,d.cV],styles:[".area-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background-color:#e3f2fd;border:1px solid #bbdefb;border-radius:4px;font-size:.875em;font-weight:500;color:#1976d2}.description-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.data-table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9){white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px;vertical-align:middle}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10){white-space:nowrap;text-align:center;vertical-align:middle;width:80px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(11), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(11){min-width:120px}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;object-fit:cover;border:2px solid #e0e0e0}.no-image[_ngcontent-%COMP%]{color:#9e9e9e;font-style:italic;font-size:.875em;padding:.875rem 1.75rem;border-radius:10px;color:#fff;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease}.header-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px);box-shadow:0 6px 20px #fff3}.permissions-container[_ngcontent-%COMP%]{padding:20px}.permissions-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#00000073;padding:16px;z-index:9999}.modal-dialog[_ngcontent-%COMP%]{margin:0;max-width:640px;width:100%}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-height:90vh;overflow:auto;box-shadow:0 10px 30px #00000026}@media (max-width: 768px){.modal-dialog[_ngcontent-%COMP%]{max-width:560px}}@media (max-width: 420px){.modal-dialog[_ngcontent-%COMP%]{max-width:100%}.modal-content[_ngcontent-%COMP%]{padding:12px;border-radius:6px}}.page-title-subheading[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#6c757d}.app-page-title[_ngcontent-%COMP%]{padding:20px 15px;border-bottom:1px solid #e0e0e0}.page-title-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#f60}.page-title-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.page-title-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.table-panel[_ngcontent-%COMP%]{overflow-x:auto}.btn[_ngcontent-%COMP%]{margin:5px}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 12px;line-height:1.2;vertical-align:middle;font-weight:700;text-align:left;background-color:#0a62c8;color:#fff;position:sticky;top:0;z-index:2}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort-icon[_ngcontent-%COMP%]{margin-left:8px;font-size:.95em}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:.8rem;font-weight:700;color:#fff;background:#b0e5b8;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-badge.inactive[_ngcontent-%COMP%]{background:#f5bdbd}"]}))}return r(),s})()},{path:"role-permissions",component:(()=>{var r;class s{constructor(n,e){this.route=n,this.apiService=e,this.roleId=null,this.roleName="",this.menus=[],this.submenus=[],this.urls=[]}ngOnInit(){this.route.queryParams.subscribe(n=>{n.roleId&&(this.roleId=+n.roleId,console.log("Role ID received:",this.roleId),this.loadRoleDetails(),this.loadPermissionsData())})}loadRoleDetails(){this.roleId&&this.apiService.getRoles(1,100).subscribe({next:n=>{const e=n.data?.find(o=>o.id===this.roleId);e&&(this.roleName=e.roleName,console.log("Role details loaded:",e))},error:n=>{console.error("Error loading role details:",n)}})}loadPermissionsData(){Promise.all([this.loadMenusAsync(),this.loadSubmenusAsync(),this.loadUrlsAsync()]).then(()=>{this.loadRolePermissions()})}loadMenusAsync(){return new Promise((n,e)=>{this.apiService.getActiveMenus().subscribe({next:o=>{console.log("Active menus response:",o),"SUCCESS"===o.status&&o.data?(this.menus=o.data.map(c=>({id:c.id,name:c.menuName,description:`${c.menuUrl} - Priority: ${c.priority}`,permissions:{selected:!1}})),console.log("Mapped menus:",this.menus)):(console.error("Invalid response format or no data received"),this.menus=[]),n()},error:o=>{console.error("Error loading menus:",o),this.menus=[],e(o)}})})}loadSubmenusAsync(){return new Promise((n,e)=>{this.apiService.getActiveSubMenus().subscribe({next:o=>{console.log("Active submenus response:",o),"SUCCESS"===o.status&&o.data?(this.submenus=o.data.map(c=>({id:c.id,name:c.menuName,description:`${c.menuUrl} - Priority: ${c.priority}`,parentMenu:c.parentMenu,permissions:{selected:!1}})),console.log("Mapped submenus:",this.submenus)):(console.error("Invalid response format or no data received"),this.submenus=[]),n()},error:o=>{console.error("Error loading submenus:",o),this.submenus=[],e(o)}})})}loadUrlsAsync(){return new Promise((n,e)=>{this.apiService.getActivePermissions().subscribe({next:o=>{console.log("Active permissions response:",o),"SUCCESS"===o.status&&o.data?(this.urls=o.data.map(c=>({id:c.id,path:`${c.permissionName} - ${c.permissionCode}`,method:c.permissionUrl,description:c.permissionName,permissions:{selected:!1}})),console.log("Mapped permissions:",this.urls)):(console.error("Invalid response format or no data received"),this.urls=[]),n()},error:o=>{console.error("Error loading permissions:",o),this.urls=[{id:1,path:"/api/auth/login",method:"POST",description:"User login",permissions:{selected:!1}},{id:2,path:"/api/roles",method:"GET",description:"View all roles",permissions:{selected:!1}},{id:3,path:"/api/users",method:"GET",description:"View all users",permissions:{selected:!1}}],e(o)}})})}loadRolePermissions(){this.roleId&&this.apiService.getRolePermissions(this.roleId).subscribe({next:n=>{console.log("Role permissions response:",n),n.success&&n.data&&(this.preselectMenuPermissions(n.data.menu),this.preselectSubmenuPermissions(n.data.SubMenu),this.preselectUrlPermissions(n.data.RolePermission),console.log("Role permissions applied successfully"))},error:n=>{console.error("Error loading role permissions:",n)}})}preselectMenuPermissions(n){this.menus.forEach(e=>{n.includes(e.id)&&(e.permissions.selected=!0)})}preselectSubmenuPermissions(n){this.submenus.forEach(e=>{n.includes(e.id)&&(e.permissions.selected=!0)})}preselectUrlPermissions(n){this.urls.forEach(e=>{n.includes(e.id)&&(e.permissions.selected=!0)})}selectAllPermissions(){this.setAllPermissions(!0)}deselectAllPermissions(){this.setAllPermissions(!1)}setAllPermissions(n){this.menus.forEach(e=>{e.permissions.selected=n}),this.submenus.forEach(e=>{e.permissions.selected=n}),this.urls.forEach(e=>{e.permissions.selected=n})}toggleAllMenus(n){const e=n.target.checked;this.menus.forEach(o=>{o.permissions.selected=e})}toggleAllSubmenus(n){const e=n.target.checked;this.submenus.forEach(o=>{o.permissions.selected=e})}toggleAllUrls(n){const e=n.target.checked;this.urls.forEach(o=>{o.permissions.selected=e})}areAllMenusSelected(){return this.menus.length>0&&this.menus.every(n=>n.permissions.selected)}areAllSubmenusSelected(){return this.submenus.length>0&&this.submenus.every(n=>n.permissions.selected)}areAllUrlsSelected(){return this.urls.length>0&&this.urls.every(n=>n.permissions.selected)}onPermissionChange(){console.log("Permission changed")}getSelectedPermissionsCount(){let n=0;return this.menus.forEach(e=>{e.permissions.selected&&n++}),this.submenus.forEach(e=>{e.permissions.selected&&n++}),this.urls.forEach(e=>{e.permissions.selected&&n++}),n}getMenuPermissionsCount(){let n=0;return this.menus.forEach(e=>{e.permissions.selected&&n++}),n}getSubmenuPermissionsCount(){let n=0;return this.submenus.forEach(e=>{e.permissions.selected&&n++}),n}getUrlPermissionsCount(){let n=0;return this.urls.forEach(e=>{e.permissions.selected&&n++}),n}savePermissions(){if(!this.roleId)return void alert("Role ID is required to save permissions");const c={menu:this.menus.filter(l=>l.permissions.selected).map(l=>l.id),SubMenu:this.submenus.filter(l=>l.permissions.selected).map(l=>l.id),RolePermission:this.urls.filter(l=>l.permissions.selected).map(l=>l.id)};console.log("Saving permissions for Role ID:",this.roleId),console.log("Permissions data:",c),this.apiService.createRolePermissions(this.roleId,c).subscribe({next:l=>{console.log("Permissions saved successfully:",l),alert("Permissions saved successfully!")},error:l=>{console.error("Error saving permissions:",l),alert("Failed to save permissions. Please try again.")}})}static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)(t.rXU(M.nX),t.rXU(b.G))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-role-permission"]],standalone:!1,decls:10,vars:3,consts:[[1,"role-permission-container"],[1,"header"],[1,"title-section"],[1,"icon"],["class","role-info",4,"ngIf"],["class","no-role-selected",4,"ngIf"],["class","permissions-content",4,"ngIf"],[1,"role-info"],[1,"role-badge"],[1,"no-role-selected"],[1,"permissions-content"],[1,"bulk-actions"],[1,"bulk-btn","select-all",3,"click"],[1,"bulk-btn","deselect-all",3,"click"],[1,"save-btn",3,"click"],[1,"permissions-section"],[1,"section-header"],[1,"section-controls"],[1,"select-all-section"],["type","checkbox",3,"change","checked"],[1,"permissions-table"],[1,"table-header"],[1,"resource-name"],[1,"permission-types"],["class","permission-row",4,"ngFor","ngForOf"],[1,"permissions-summary"],[1,"summary-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"permission-row"],[1,"resource-info"],[1,"resource-description"],[1,"permission-checkboxes"],[1,"permission-checkbox","select"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"checkmark"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4,"\u{1f510}"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"Role Permissions"),t.k0s()(),t.DNE(7,_i,5,2,"div",4)(8,ui,3,0,"div",5),t.k0s(),t.DNE(9,hi,80,10,"div",6),t.k0s()),2&e&&(t.R7$(7),t.Y8G("ngIf",o.roleId&&o.roleName),t.R7$(),t.Y8G("ngIf",!o.roleId),t.R7$(),t.Y8G("ngIf",o.roleId))},dependencies:[p.Sq,p.bT,d.Zm,d.BC,d.vS],styles:['.role-permission-container[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;min-height:100vh}.header[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.icon[_ngcontent-%COMP%]{color:#6f42c1;font-size:24px;display:flex;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;margin:0;font-size:24px;font-weight:600}.role-info[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:linear-gradient(45deg,#6f42c1,#5a32a3);color:#fff;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.no-role-selected[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeeba;color:#856404;padding:15px;border-radius:8px;margin-top:20px}.permission-types-legend[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.permission-types-legend[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:18px}.legend-items[_ngcontent-%COMP%]{display:flex;gap:30px;flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 15px;border-radius:6px;font-size:14px;font-weight:500}.legend-item.read[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.legend-item.write[_ngcontent-%COMP%]{background:#e8f5e8;color:#388e3c}.legend-item.delete[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.legend-item.select[_ngcontent-%COMP%]{background:#f3e5f5;color:#6f42c1}.legend-icon[_ngcontent-%COMP%]{font-size:16px}.bulk-actions[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;display:flex;gap:15px;align-items:center;position:sticky;top:0;z-index:100;transition:all .3s ease}.bulk-actions.sticky[_ngcontent-%COMP%]{box-shadow:0 4px 12px #00000026;border-bottom:1px solid #e0e0e0}.bulk-btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:14px;transition:all .3s}.bulk-btn.select-all[_ngcontent-%COMP%]{border-color:#28a745;color:#28a745}.bulk-btn.select-all[_ngcontent-%COMP%]:hover{background:#28a745;color:#fff}.bulk-btn.deselect-all[_ngcontent-%COMP%]{border-color:#dc3545;color:#dc3545}.bulk-btn.deselect-all[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.save-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#6f42c1,#5a32a3);color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s;margin-left:auto}.save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #6f42c14d}.permissions-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;overflow:hidden}.section-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0;font-size:18px;display:flex;align-items:center;gap:8px}.select-all-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666;cursor:pointer}.select-all-section[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0}.permissions-table[_ngcontent-%COMP%]{width:100%}.table-header[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px 20px;display:grid;grid-template-columns:1fr 80px;gap:20px;align-items:center;border-bottom:1px solid #dee2e6;font-weight:600;color:#495057}.permission-types[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;text-align:center}.permission-row[_ngcontent-%COMP%]{padding:15px 20px;display:grid;grid-template-columns:1fr 80px;gap:20px;align-items:center;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.permission-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.resource-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.resource-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.resource-description[_ngcontent-%COMP%]{color:#666;font-size:12px}.permission-checkboxes[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;justify-items:center}.permission-checkbox[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.permission-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute;width:0;height:0}.checkmark[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:2px solid #ddd;border-radius:4px;position:relative;transition:all .3s}.permission-checkbox.read[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#1976d2}.permission-checkbox.write[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#388e3c}.permission-checkbox.delete[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#d32f2f}.permission-checkbox.select[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{border-color:#6f42c1}.permission-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:currentColor}.permission-checkbox.read[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#1976d2}.permission-checkbox.write[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#388e3c}.permission-checkbox.delete[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#d32f2f}.permission-checkbox.select[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#6f42c1}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:6px;top:2px;width:6px;height:12px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.permission-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{display:block}.permission-checkbox[_ngcontent-%COMP%]:hover   .checkmark[_ngcontent-%COMP%]{transform:scale(1.1);box-shadow:0 2px 4px #0003}.permissions-summary[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.permissions-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:18px}.summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#f8f9fa;border-radius:6px;border-left:4px solid #6f42c1}.stat-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#6f42c1;margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.legend-items[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.bulk-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;position:sticky;top:0;padding:10px 15px}.save-btn[_ngcontent-%COMP%]{margin-left:0}.table-header[_ngcontent-%COMP%], .permission-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.permission-types[_ngcontent-%COMP%], .permission-checkboxes[_ngcontent-%COMP%]{justify-self:start}.summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.role-permission-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%], .permission-types-legend[_ngcontent-%COMP%], .permissions-section[_ngcontent-%COMP%], .permissions-summary[_ngcontent-%COMP%]{padding:15px}.bulk-actions[_ngcontent-%COMP%]{padding:10px 15px;gap:10px}.bulk-btn[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.permission-types[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:left}.permission-checkboxes[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}}']}))}return r(),s})()}]}];let Mi=(()=>{var r;class s{static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=a.G2t({imports:[h.iI.forChild(bi),h.iI]}))}return r(),s})(),Ci=(()=>{var r;class s{static#t=r=()=>(this.\u0275fac=function(e){return new(e||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=a.G2t({imports:[p.MD,d.YN,d.X1,Mi,I,j,U,$,L.W,A]}))}return r(),s})()},6319:(_,g,u)=>{u.d(g,{a:()=>M});var p=u(9330),d=u(7144),h=u(2615);let M=(()=>{var C;class t{constructor(f){this.http=f,this.baseUrl=`${d.c.apiUrl}performance-statistics`,this.uploadUrl=`${d.c.apiUrl}upload`}getPerformanceForm(f=0,b=1){const v=(new p.Nl).set("module",f.toString()).set("topic",b.toString());return this.http.get(`${this.baseUrl}/performance`,{params:v})}getPerformanceFormByModuleTopic(f,b){return this.http.get(`${this.baseUrl}/performance/module/${f}/topic/${b}`)}saveStatistics(f){return this.http.post(`${this.baseUrl}/save-statistics`,f)}sendOTP(){return this.http.post(`${this.baseUrl}/sent-otp`,{})}verifyOTP(f){return this.http.post(`${this.baseUrl}/verify-otp`,{otp:f})}makeActive(f,b=!0){return this.http.post(`${this.baseUrl}/${f}/make-active`,{active:b})}getPerformanceStatistics(f={}){let b=new p.Nl;return Object.keys(f).forEach(v=>{null!=f[v]&&(b=b.set(v,f[v].toString()))}),this.http.get(`${this.baseUrl}`,{params:b})}getPerformanceStatisticById(f){return this.http.get(`${this.baseUrl}/${f}`)}createPerformanceStatistic(f){return this.http.post(`${this.baseUrl}`,f)}updatePerformanceStatistic(f,b){return this.http.put(`${this.baseUrl}/${f}`,b)}deletePerformanceStatistic(f){return this.http.delete(`${this.baseUrl}/${f}`)}bulkSaveStatistics(f){return this.http.post(`${this.baseUrl}/bulk-save`,{statistics:f})}getByUserId(f){return this.http.get(`${this.baseUrl}/user/${f}`)}getByUserIdAndMonth(f,b){return this.http.get(`${this.baseUrl}/user/${f}/month/${b}`)}getSummary(f={}){let b=new p.Nl;return Object.keys(f).forEach(v=>{null!=f[v]&&(b=b.set(v,f[v].toString()))}),this.http.get(`${this.baseUrl}/summary`,{params:b})}getLabels(){return this.http.get(`${this.baseUrl}/labels`)}getLabelsByFilters(f){return this.http.post(`${this.baseUrl}/labels/filter`,f)}getReportValues(f){return this.http.post(`${this.baseUrl}/report-values`,f)}getCountByUserDate(f,b){return this.http.get(`${this.baseUrl}/count/user/${f}/date/${b}`)}getSuccessCountByUserDate(f,b){return this.http.get(`${this.baseUrl}/success-count/user/${f}/date/${b}`)}uploadDocument(f){const b=new FormData;return b.append("file",f),this.http.post(`${this.uploadUrl}\n    `,b)}static#t=C=()=>(this.\u0275fac=function(b){return new(b||t)(h.KVO(p.Qq))},this.\u0275prov=h.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}))}return C(),t})()}}]);